/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={7437:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(9877),o=n(2357),s=["redmond.corp.microsoft.com","northamerica.corp.microsoft.com","fareast.corp.microsoft.com","ntdev.corp.microsoft.com","wingroup.corp.microsoft.com","southpacific.corp.microsoft.com","wingroup.windeploy.ntdev.microsoft.com","ddnet.microsoft.com","europe.corp.microsoft.com"],a={"common.msftInternal":function(){const e=process.env.USERDNSDOMAIN;if(!e)return!1;const t=e.toLowerCase();return s.some((e=>t===e))}()?1:0},c={};try{const e=n(9072);c["common.adsversion"]=null==e?void 0:e.version}catch(e){}class u{constructor(e,t,n,r){this.reporter=e,this.eventName=t,this.properties=n,this.measurements=r,this.properties=n||{},Object.assign(this.properties,c),this.measurements=r||{},Object.assign(this.measurements,a)}send(){var e;try{null===(e=this.reporter)||void 0===e||e.sendTelemetryEvent(this.eventName,this.properties,this.measurements)}catch(e){const t=e instanceof Error?e.message:e;console.error(`Error sending ${this.eventName} event ${t}`)}}withAdditionalProperties(e){return Object.assign(this.properties,e),this}withAdditionalMeasurements(e){return Object.assign(this.measurements,e),this}withConnectionInfo(e){return"object"==typeof e?Object.assign(this.properties,{authenticationType:e.authenticationType,providerName:e.providerName}):console.error("AdsTelemetryReporter received invalid ConnectionInfo object of type "+typeof e),this}withServerInfo(e){var t,n,r;return"object"==typeof e?Object.assign(this.properties,{connectionType:void 0!==e.isCloud?e.isCloud?"Azure":"Standalone":"",serverVersion:null!==(t=e.serverVersion)&&void 0!==t?t:"",serverEdition:null!==(n=e.serverEdition)&&void 0!==n?n:"",serverEngineEdition:null!==(r=e.engineEditionId)&&void 0!==r?r:""}):console.error("AdsTelemetryReporter received invalid ServerInfo object of type "+typeof e),this}}t.default=class{constructor(e,t,n){var r,o;this._telemetryReporter=void 0;try{this._telemetryReporter=new i.default(e,t,n)}catch(t){console.error(`Error initializing TelemetryReporter for '${e}'. ${null!==(o=null===(r=t)||void 0===r?void 0:r.message)&&void 0!==o?o:t}`)}}createViewEvent(e){return new u(this._telemetryReporter,"view",{view:e})}sendViewEvent(e){this.createViewEvent(e).send()}createActionEvent(e,t,n="",r="",i){const o=i?{durationInMs:i}:{};return new u(this._telemetryReporter,"action",{view:e,action:t,target:n,source:r},o)}sendActionEvent(e,t,n="",r="",i){this.createActionEvent(e,t,n,r,i).send()}createTimedAction(e,t,n,r){return new o.TimedAction(this,e,t,n,r)}createMetricsEvent(e,t=""){return new u(this._telemetryReporter,"metrics",{groupName:t},e)}sendMetricsEvent(e,t=""){this.createMetricsEvent(e,t).send()}createErrorEvent(e,t,n="",r=""){return new u(this._telemetryReporter,"error",{view:e,name:t,errorCode:n,errorType:r})}sendErrorEvent(e,t,n="",r=""){this.createErrorEvent(e,t,n,r).send()}createErrorEvent2(e,t,n=void 0,r=!1,i="",o=""){const s={view:e,name:t,errorCode:i,errorType:o};if(n instanceof Error){s.message=!0===r?n.message:"";let e=n.stack||"";if(!0!==r&&n.message){const t=new RegExp(n.message,"g");e=e.replace(t,"<REDACTED: error-message>")}s.stack=e}else s.message=!0===r?null==n?void 0:n.toString():"",s.stack="";return new u(this._telemetryReporter,"error",s)}sendErrorEvent2(e,t,n=void 0,r=!1,i="",o=""){this.createErrorEvent2(e,t,n,r,i,o).send()}createTelemetryEvent(e,t,n){return new u(this._telemetryReporter,e,t,n)}sendTelemetryEvent(e,t,n){this.createTelemetryEvent(e,t,n).send()}dispose(){var e;return r(this,void 0,void 0,(function*(){yield null===(e=this._telemetryReporter)||void 0===e?void 0:e.dispose()}))}}},2357:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimedAction=void 0,t.TimedAction=class{constructor(e,t,n,r="",i=""){this.reporter=e,this.view=t,this.action=n,this.target=r,this.source=i,this.properties={},this.measures={},this.start=Date.now()}withAdditionalProperties(e){return Object.assign(this.properties,e),this}withAdditionalMeasures(e){return Object.assign(this.measures,e),this}send(){this.reporter.createActionEvent(this.view,this.action,this.source,this.target,Date.now()-this.start).withAdditionalProperties(this.properties).withAdditionalMeasurements(this.measures).send()}}},1357:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sequencer=void 0,t.Sequencer=class{constructor(){this.current=Promise.resolve(null)}queue(e){return this.current=this.current.then((()=>e()))}}},588:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DistributionNotSupportedError=t.ArchitectureNotSupportedError=t.PlatformNotSupportedError=void 0;class n extends Error{constructor(e){super(`The platform '${e}' is not supported.`),this.code=0}}t.PlatformNotSupportedError=n;class r extends Error{constructor(e,t){super(`The architecture '${t}' for platform '${e}' is not supported.`),this.code=2}}t.ArchitectureNotSupportedError=r;class i extends Error{constructor(e,t,n){super(`The distribution '${t}' with version '${n}' for platform '${e}' is not supported.`),this.code=1}}t.DistributionNotSupportedError=i},8537:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ArchiveExtractor=void 0;const s=o(n(7998)),a=n(6387),c=n(4405),u=n(2697);t.ArchiveExtractor=class{constructor(){this.eventEmitter=new a.EventEmitter2({wildcard:!0}),this.unzipper=new c.Unzipper,this.logger=new u.Logger(this.eventEmitter)}extract(e,t){if(this.logger.verbose(`Extracting arhive '${e}' to '${t}'.`),e.match(/\.tar\.gz|\.tar|\.gz$/i)){let n=0;return s.x({file:e,cwd:t,onentry:e=>this.eventEmitter.emit("entry_extracted",e.path,++n,-1)})}return this.unzipper.extract(e,t)}}},7353:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;const s=o(n(5687)),a=o(n(3685)),c=o(n(7147)),u=n(7310),l=n(6387),d=n(3636);t.HttpClient=class{constructor(){this.eventEmitter=new l.EventEmitter2({wildcard:!0})}downloadFile(e,t,n,r){const i=(0,u.parse)(e);let o=this.getHttpClientOptions(i,n,r),c="http:"===i.protocol?a.request:s.request;return new Promise(((e,i)=>{if(!t.tmpFile||0===t.tmpFile.fd)return i(new Error("Temporary package file unavailable"));let s=c(o,(o=>301===o.statusCode||302===o.statusCode?e(this.downloadFile(o.headers.location,t,n,r)):200!==o.statusCode?i(new Error(o.statusCode.toString())):void this.handleSuccessfulResponse(t,o).then((t=>{e()})).catch((e=>{i(e)}))));s.on("error",(e=>{i(new Error(`Request error: ${e.name||"NONE"}`))})),s.end()}))}getHttpClientOptions(e,t,n){const r=(0,d.getProxyAgent)(e,t,n);let i={host:e.hostname,path:e.path,agent:r,port:+e.port};return"https:"===e.protocol&&(i={host:e.hostname,path:e.path,agent:r,port:+e.port}),i}handleDataReceivedEvent(e,t){if(e.downloadedBytes+=t.length,e.packageSize>0){let t=Math.ceil(e.downloadedBytes/e.packageSize*100);t!==e.downloadPercentage&&(this.eventEmitter.emit("download_progress",t),e.downloadPercentage=t)}}handleSuccessfulResponse(e,t){return new Promise(((n,r)=>{let i={packageSize:parseInt(t.headers["content-length"],10),downloadedBytes:0,downloadPercentage:0};this.eventEmitter.emit("download_start",e.url,i.packageSize),t.on("data",(e=>{this.handleDataReceivedEvent(i,e)}));let o=c.createWriteStream(void 0,{fd:e.tmpFile.fd});t.on("end",(()=>{this.eventEmitter.emit("download_end"),n()})),t.on("error",(e=>{r(new Error(`Response error: ${e.name||"NONE"}`))})),t.pipe(o,{end:!1})}))}}},7725:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2697:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=t.Logger=void 0,t.Logger=class{constructor(e){this.eventEmitter=e}verbose(e){this.log(0,e)}info(e){this.log(1,e)}warn(e){this.log(2,e)}error(e){this.log(3,e)}critical(e){this.log(4,e)}log(e,t){this.eventEmitter.emit("log_emitted",e,t)}},t.ConsoleLogger=class{verbose(e){console.log(e)}info(e){console.info(e)}warn(e){console.warn(e)}error(e){console.error(e)}critical(e){console.error(e)}}},9707:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4759),t),i(n(4286),t),i(n(7725),t)},9773:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformInformation=t.getFallbackRuntimes=t.getRuntimeDisplayName=t.getRuntimeId=t.LinuxDistribution=t.Runtime=void 0;const s=o(n(2037)),a=o(n(2081)),c=o(n(7147)),u=n(588),l=n(2697),d="unknown";var p;!function(e){e.Unknown="Unknown",e.Windows_86="Windows_86",e.Windows_64="Windows_64",e.Windows_ARM64="Windows_ARM64",e.Windows="Windows",e.OSX="OSX",e.OSX_ARM64="OSX_ARM64",e.CentOS="CentOS",e.Debian="Debian",e.ElementaryOS_0_3="ElementaryOS_0_3",e.ElementaryOS_0_4="ElementaryOS_0_4",e.ElementaryOS="ElementaryOS",e.Fedora="Fedora",e.GalliumOS="GalliumOS",e.LinuxMint="LinuxMint",e.OpenSUSE="OpenSUSE",e.OracleLinux="OracleLinux",e.RHEL="RHEL",e.SLES="SLES",e.Ubuntu_14="Ubuntu_14",e.Ubuntu_16="Ubuntu_16",e.Ubuntu_18="Ubuntu_18",e.Ubuntu_20="Ubuntu_20",e.Ubuntu_22="Ubuntu_22",e.Ubuntu="Ubuntu",e.Linux="Linux",e.Linux_ARM64="Linux_ARM64"}(p=t.Runtime||(t.Runtime={}));class h{constructor(e,t,n){this.name=e,this.version=t,this.idLike=n}static getCurrent(){return h.fromFilePath("/etc/os-release").catch((()=>h.fromFilePath("/usr/lib/os-release"))).catch((()=>Promise.resolve(new h(d,d))))}toString(){return`name=${this.name}, version=${this.version}`}static fromFilePath(e){return new Promise(((t,n)=>{c.readFile(e,"utf8",((e,r)=>{e?n(e):t(h.fromReleaseInfo(r))}))}))}static fromReleaseInfo(e,t=s.EOL){let n,r=d,i=d;const o=e.split(t);for(let e of o){e=e.trim();let t=e.indexOf("=");if(t>=0){let o=e.substring(0,t),s=e.substring(t+1);if((s.length>1&&s.startsWith('"')&&s.endsWith('"')||s.length>1&&s.startsWith("'")&&s.endsWith("'"))&&(s=s.substring(1,s.length-1)),"ID"===o?r=s:"VERSION_ID"===o?i=s:"ID_LIKE"===o&&(n=s.split(" ")),r!==d&&i!==d&&void 0!==n)break}}return new h(r,i,n)}}function f(e,t,n){switch(e){case"ubuntu":return t.startsWith("14")?p.Ubuntu_14:t.startsWith("16")?p.Ubuntu_16:t.startsWith("18")?p.Ubuntu_18:t.startsWith("20")?p.Ubuntu_20:t.startsWith("22")?p.Ubuntu_22:(n.warn(`The Ubuntu version '${t}' is unknown to the service downloader, it will be treated as Ubuntu.`),p.Ubuntu);case"elementary":case"elementary OS":return t.startsWith("0.3")?p.ElementaryOS_0_3:t.startsWith("0.4")?p.ElementaryOS_0_4:(n.warn(`The ElementaryOS version '${t}' is unknown to the service downloader, it will be treated as ElementaryOS.`),p.ElementaryOS);case"linuxmint":return p.LinuxMint;case"centos":return p.CentOS;case"ol":return p.OracleLinux;case"fedora":return p.Fedora;case"opensuse":return p.OpenSUSE;case"sles":return p.SLES;case"rhel":return p.RHEL;case"debian":return p.Debian;case"galliumos":return p.GalliumOS;default:return n.warn(`Unknown distribution name: ${e}`),p.Linux}}function m(e,t,n,r){const i=process.env.AZDATA_RUNTIME;if(i)return r.verbose(`AZDATA_RUNTIME environment variable is set, the value '${i}' will be used as the runtime.`),i;switch(e){case"win32":switch(t){case"x86":return p.Windows_86;case"x86_64":return p.Windows_64;case"arm64":return p.Windows_ARM64;default:throw new u.ArchitectureNotSupportedError(e,t)}case"darwin":switch(t){case"x86_64":return p.OSX;case"arm64":return p.OSX_ARM64;default:throw new u.ArchitectureNotSupportedError(e,t)}case"linux":if("x86_64"===t){let e=f(n.name,n.version,r);if(e===p.Unknown&&n.idLike&&n.idLike.length>0)for(let t of n.idLike)if(e=f(t,n.version,r),e!==p.Unknown)break;if(e!==p.Unknown)return e}else if("aarch64"===t)return p.Linux_ARM64;throw new u.DistributionNotSupportedError(e,n.name,n.version);default:throw new u.PlatformNotSupportedError(e)}}function g(e){switch(e){case p.Windows_64:case p.Windows_86:case p.Windows_ARM64:case p.Windows:return"Windows";case p.OSX:return"OSX";case p.OSX_ARM64:return"OSX_ARM64";case p.CentOS:case p.Debian:case p.ElementaryOS_0_3:case p.ElementaryOS_0_4:case p.ElementaryOS:case p.Fedora:case p.GalliumOS:case p.LinuxMint:case p.OpenSUSE:case p.OracleLinux:case p.SLES:case p.RHEL:case p.Ubuntu_14:case p.Ubuntu_16:case p.Ubuntu_18:case p.Ubuntu_20:case p.Ubuntu_22:case p.Ubuntu:case p.Linux:case p.Linux_ARM64:return"Linux";default:throw new u.PlatformNotSupportedError(e)}}t.LinuxDistribution=h,t.getRuntimeId=m,t.getRuntimeDisplayName=g,t.getFallbackRuntimes=function e(t){switch(t){case p.Windows_64:case p.Windows_86:case p.Windows_ARM64:return[p.Windows];case p.OSX_ARM64:return[p.OSX];case p.ElementaryOS_0_3:return[p.Ubuntu_14,...e(p.Ubuntu_14)];case p.ElementaryOS_0_4:return[p.Ubuntu_16,...e(p.Ubuntu_16)];case p.ElementaryOS:return[p.Linux];case p.GalliumOS:case p.LinuxMint:return[p.Ubuntu_16,...e(p.Ubuntu_16)];case p.OracleLinux:return[p.CentOS,...e(p.CentOS)];case p.CentOS:case p.Debian:case p.Fedora:case p.OpenSUSE:case p.RHEL:case p.SLES:return[p.Linux];case p.Ubuntu_22:case p.Ubuntu_20:case p.Ubuntu_18:case p.Ubuntu_16:case p.Ubuntu_14:return[p.Ubuntu,...e(p.Ubuntu)];case p.Ubuntu:return[p.Linux];case p.Windows:case p.OSX:case p.Linux:case p.Linux_ARM64:return[];default:throw new u.PlatformNotSupportedError(t)}};class v{constructor(e,t,n,r=void 0){this.platform=t,this.architecture=n,this.distribution=r;try{e.verbose(`Getting runtime information. platform: ${t}, architecture: ${n}, distribution: ${r}`),this.runtimeId=m(t,n,r,e)}catch(i){const o=i&&i.message?i.message:i;e.error(`Failed to get the runtime information. platform: ${t}, architecture: ${n}, distribution: ${r}. error message: ${o}`),this.runtimeId=void 0}}get isWindows(){return"win32"===this.platform}get isMacOS(){return"darwin"===this.platform}get isLinux(){return"linux"===this.platform}get isValidRuntime(){return void 0!==this.runtimeId&&this.runtimeId!==p.Unknown}get runtimeDisplayName(){return g(this.runtimeId)}toString(){let e=this.platform;return this.architecture&&(e&&(e+=", "),e+=this.architecture),this.distribution&&(e&&(e+=", "),e+=this.distribution.toString()),e}static getCurrent(e=new l.ConsoleLogger){let t,n,r=s.platform();switch(r){case"win32":t=v.getWindowsArchitecture(),n=Promise.resolve(void 0);break;case"darwin":t=v.getUnixArchitecture(),n=Promise.resolve(void 0);break;case"linux":t=v.getUnixArchitecture(),n=h.getCurrent();break;default:return Promise.reject(new u.PlatformNotSupportedError(r))}return Promise.all([t,n]).then((t=>new v(e,r,t[0],t[1])))}static getWindowsArchitecture(){return new Promise(((e,t)=>{v.getWindowsArchitectureWmic().then((t=>{if(t&&t!==d)e(t);else{const t=v.getWindowsArchitectureEnv();e(t)}}))}))}static getWindowsArchitectureWmic(){return this.execChildProcess("wmic os get osarchitecture").then((e=>{if(e){let t=e.split(s.EOL);if(t.length>=2){let e=t[1].trim();if(e.toUpperCase().indexOf("ARM")>=0)return"arm64";if(e.indexOf("64")>=0)return"x86_64";if(e.indexOf("32")>=0)return"x86"}}return d})).catch((e=>d))}static getWindowsArchitectureEnv(){let e;return e="ARM64"===process.env.PROCESSOR_ARCHITECTURE?"arm64":"x86"===process.env.PROCESSOR_ARCHITECTURE&&void 0===process.env.PROCESSOR_ARCHITEW6432?"x86":"x86_64",e}static getUnixArchitecture(){return this.execChildProcess("uname -m").then((e=>{if(e)return e.trim()}))}static execChildProcess(e){return new Promise(((t,n)=>{a.exec(e,{maxBuffer:512e3},((e,r,i)=>{e?n(e):i&&i.length>0?n(new Error(i)):t(r)}))}))}}t.PlatformInformation=v},3636:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getProxyAgent=void 0;const i=n(7310),o=r(n(9201)),s=r(n(6018));t.getProxyAgent=function(e,t,n){const r=t||function(e){return"http:"===e.protocol?process.env.HTTP_PROXY||process.env.http_proxy||void 0:"https:"===e.protocol&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||void 0}(e);if(!r)return;const a=(0,i.parse)(r);if(!/^https?:$/.test(a.protocol))return;n=n||!0;const c={host:a.hostname,port:Number(a.port),auth:a.auth,rejectUnauthorized:n};return"http:"===e.protocol?(0,o.default)(c):(0,s.default)(c)}},4759:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ServerProvider=void 0;const s=o(n(1017)),a=o(n(7147)),c=n(6387),u=n(9773),l=n(4286),d=n(2697);t.ServerProvider=class{get runtime(){return this._runtime?Promise.resolve(this._runtime):this.findRuntime().then((e=>(this._runtime=e,e)))}constructor(e){this.config=e,this.eventEmitter=new c.EventEmitter2({wildcard:!0}),this._downloadProvider=new l.ServiceDownloadProvider(this.config),this._downloadProvider.eventEmitter.onAny(((e,...t)=>{this.eventEmitter.emit(e,...t)})),this.logger=new d.Logger(this.eventEmitter)}get downloadProvider(){return this._downloadProvider}findRuntime(){return u.PlatformInformation.getCurrent(this.logger).then((e=>e.runtimeId))}findServerPath(e,t=void 0){return new Promise(((n,r)=>{a.stat(e,((r,i)=>{let o;i.isFile()&&n(e),void 0===t&&void 0!==this.config&&(t=this.config.executableFiles),void 0!==t&&t.forEach((t=>{let r=s.join(e,t);void 0===o&&a.existsSync(r)&&(o=r,n(o))})),n(o)}))}))}getOrDownloadServer(){return this.getServerPath().then((e=>void 0===e?this.downloadServerFiles().then((e=>e)):e))}getServerPath(){return this.runtime.then((e=>{const t=this._downloadProvider.getInstallDirectory(e);return this.findServerPath(t)}))}downloadServerFiles(){return this.runtime.then((e=>{const t=this._downloadProvider.getInstallDirectory(e);return this._downloadProvider.installService(e).then((e=>this.findServerPath(t)))}))}}},4286:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceDownloadProvider=void 0;const c=o(n(7147)),u=o(n(1890)),l=n(6387),d=o(n(6276)),p=o(n(1017)),h=n(9773),f=n(7353),m=n(588),g=n(3837),v=a(n(2047)),y=n(8537),_=n(2697);t.ServiceDownloadProvider=class{constructor(e){this._config=e,this.httpClient=new f.HttpClient,this.extractor=new y.ArchiveExtractor,this.eventEmitter=new l.EventEmitter2({wildcard:!0}),d.setGracefulCleanup(),this.httpClient.eventEmitter.onAny(((e,...t)=>{this.eventEmitter.emit(e,...t)})),this.extractor.eventEmitter.onAny(((e,...t)=>{this.eventEmitter.emit(e,...t)})),this.logger=new _.Logger(this.eventEmitter)}getDownloadFileName(e){const t=this._config.downloadFileNames;this.logger.verbose(`Runtimes specified in the configuration file: ${JSON.stringify(t)}`);const n=[e,...(0,h.getFallbackRuntimes)(e)];let r;this.logger.verbose(`Current runtime and the fallback runtimes: ${JSON.stringify(n)}`);for(let e=0;e<n.length;e++){const i=n[e];if(this.logger.verbose(`Checking whether a service file is specified for runtime: '${i}'.`),r=t[i],r){this.logger.verbose(`Found the service file for runtime: '${i}'.`);break}this.logger.verbose(`Service file is not specified for runtime: '${i}'.`)}if(void 0===r)throw"linux"===process.platform?new m.DistributionNotSupportedError("Unsupported linux distribution",process.platform,e):new m.PlatformNotSupportedError(process.platform);return r}getInstallDirectory(e){let t=this._config.installDirectory,n=this._config.version;return t=t.replace("{#version#}",n),t=t.replace("{#platform#}",(0,h.getRuntimeDisplayName)(e)),c.existsSync(t)||u.sync(t),t}getGetDownloadUrl(e){let t=this._config.downloadUrl,n=this._config.version;return t=t.replace("{#version#}",n),t=t.replace("{#fileName#}",e),t}installService(e){return s(this,void 0,void 0,(function*(){const t=this._config.proxy,n=this._config.strictSSL,r=this.getDownloadFileName(e),i={installPath:this.getInstallDirectory(e),url:this.getGetDownloadUrl(r),tmpFile:void 0},o=(0,g.promisify)(c.exists),a=(0,g.promisify)(c.unlink);return yield function(e,t,n={retries:0}){return s(this,void 0,void 0,(function*(){return yield(0,v.default)(((r,i)=>s(this,void 0,void 0,(function*(){try{return yield e()}catch(o){if(/403/.test(o))return void r(o);throw i<=n.retries&&t.warn(`[${(new Date).toLocaleTimeString("en-US",{hour12:!1})}] Retrying...   as attempt:${i} to run '${e.name}' failed with: '${o}'.`),o}}))),n)}))}((()=>s(this,void 0,void 0,(function*(){try{i.tmpFile=yield this.createTempFile(i),this.logger.info(`Downloading the package: '${i.url}' to file: '${i.tmpFile.name}'`),yield this.httpClient.downloadFile(i.url,i,t,n),this.logger.info(`Installing the package from file: ${i.tmpFile.name}`),yield this.install(i)}finally{(yield o(i.tmpFile.name))&&(yield a(i.tmpFile.name),this.logger.info(`Deleted the package file: ${i.tmpFile.name}`))}}))),this.logger,this._config.retry),!0}))}createTempFile(e){return new Promise(((t,n)=>{d.file({prefix:"package-",postfix:p.extname(e.url)},((e,r,i,o)=>{if(e)return n(new Error("Error from tmp.file"));t({name:r,fd:i,removeCallback:o})}))}))}install(e){return s(this,void 0,void 0,(function*(){this.eventEmitter.emit("install_start",e.installPath),yield this.extractor.extract(e.tmpFile.name,e.installPath),this.eventEmitter.emit("install_end")}))}}},4405:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Unzipper=t.ExtractError=void 0;const a=n(7766),c=o(n(1017)),u=s(n(1890)),l=n(1357),d=n(7147),p=n(6387);class h extends Error{constructor(e,t){let n=t.message;"CorruptZip"===e&&(n=`Corrupt ZIP: ${n}`),super(n),this.type=e,this.cause=t}}function f(e){if(e instanceof h)return e;let t;return/end of central directory record signature not found/.test(e.message)&&(t="CorruptZip"),new h(t,e)}t.ExtractError=h,t.Unzipper=class{constructor(){this.eventEmitter=new p.EventEmitter2({wildcard:!0})}extract(e,t){return this.openZip(e,!0).then((e=>this.extractZip(e,t)))}openZip(e,t=!1){return new Promise(((n,r)=>{(0,a.open)(e,t?{lazyEntries:!0}:void 0,((e,t)=>{e?r(f(e)):n(t)}))}))}extractZip(e,t){let n=0;return new Promise(((r,i)=>{const o=new l.Sequencer,s=()=>{n++,e.readEntry()};e.once("error",i),e.once("close",(()=>{e.entryCount===n?r():i(new h("Incomplete",new Error(`Incomplete. Found ${n} of ${e.entryCount} entries`)))})),e.readEntry(),e.on("entry",(r=>{if(/\/$/.test(r.fileName)){const e=c.join(t,r.fileName);return void(0,u.default)(e).then((()=>s())).then(void 0,i)}const a=this.openZipStream(e,r),l=function(e){const t=e.externalFileAttributes>>16||33188;return[448,56,7].map((e=>t&e)).reduce(((e,t)=>e+t),61440&t)}(r);o.queue((()=>a.then((i=>this.extractEntry(i,r.fileName,l,t,n+1,e.entryCount).then((()=>s())))))).then(void 0,i)}))}))}extractEntry(e,t,n,r,i,o){const s=c.dirname(t),a=c.join(r,s);if(0!==a.indexOf(r))return Promise.reject(new Error(`Error extracting ${t}. Invalid file.`));const l=c.join(r,t);let p;return Promise.resolve((0,u.default)(a)).then((()=>new Promise(((t,r)=>{try{p=(0,d.createWriteStream)(l,{mode:n}),p.once("close",(()=>{this.eventEmitter.emit("entry_extracted",l,i,o),t()})),p.once("error",r),e.once("error",r),e.pipe(p)}catch(e){r(e)}}))))}openZipStream(e,t){return new Promise(((n,r)=>{e.openReadStream(t,((e,t)=>{e?r(f(e)):n(t)}))}))}}},2046:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,{signal:n}={}){return new Promise(((r,i)=>{function o(){null==n||n.removeEventListener("abort",o),e.removeListener(t,s),e.removeListener("error",a)}function s(...e){o(),r(e)}function a(e){o(),i(e)}null==n||n.addEventListener("abort",o),e.on(t,s),e.on("error",a)}))}},9877:(e,t,n)=>{var r,i,o,s,a=Object.create,c=Object.defineProperty,u=Object.defineProperties,l=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&v(e,n,t[n]);if(h)for(var n of h(t))g.call(t,n)&&v(e,n,t[n]);return e},_=(e,t)=>u(e,d(t)),b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),E=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of p(t))!m.call(e,i)&&i!==n&&c(e,i,{get:()=>t[i],enumerable:!(r=l(t,i))||r.enumerable});return e},S=(e,t,n)=>(n=null!=e?a(f(e)):{},E(!t&&e&&e.__esModule?n:c(n,"default",{value:e,enumerable:!0}),e)),w=b(((n,s)=>{var a;a=function(e){"use strict";var t="function",n="object",r="undefined",i="prototype",o="hasOwnProperty",s="default",a=Object,c=a[i],u=a.assign,l=a.create,d=a.defineProperty,p=c[o],h=null;function f(e){return void 0===e&&(e=!0),(!h||!e)&&(typeof globalThis!==r&&globalThis&&(h=globalThis),typeof self!==r&&self&&(h=self),typeof window!==r&&window&&(h=window),typeof global!==r&&global&&(h=global)),h}function m(e){throw new TypeError(e)}function g(e){if(l)return l(e);if(null==e)return{};var r=typeof e;function o(){}return r!==n&&r!==t&&m("Object prototype may only be an Object:"+e),o[i]=e,new o}var v=(f()||{}).Symbol,y=(f()||{}).Reflect,_=!!y,b="decorate",E="metadata",S="getOwnPropertySymbols",w="iterator",C=u||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])c[o].call(t,i)&&(e[i]=t[i]);return e},T=function(e,t){return(T=a.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[o](n)&&(e[n]=t[n])})(e,t)};function R(e,n){function r(){this.constructor=e}typeof n!==t&&null!==n&&m("Class extends value "+String(n)+" is not a constructor or null"),T(e,n),e[i]=null===n?g(n):(r[i]=n[i],new r)}function O(e,t,n,r){void 0===r&&(r=n),l?d(e,r,{enumerable:!0,get:function(){return t[n]}}):e[r]=t[n]}e.ObjAssign=u,e.ObjClass=a,e.ObjCreate=l,e.ObjDefineProperty=d,e.ObjHasOwnProperty=p,e.ObjProto=c,e.__assignFn=C,e.__createBindingFn=O,e.__decorateFn=function(e,n,r,i){var o,s=arguments.length,c=s<3?n:null===i?i=a.getOwnPropertyDescriptor(n,r):i;if(_&&typeof y[b]===t)c=y[b](e,n,r,i);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(c=(s<3?o(c):s>3?o(n,r,c):o(n,r))||c);return s>3&&c&&d(n,r,c),c},e.__exportStarFn=function(e,t){for(var n in e)n!==s&&!p.call(t,n)&&O(t,e,n)},e.__exposeGlobalTsLib=function(){var e,t,n,r,i=f()||{};t=C,n=R,r=O,(e=i).__assign||(e.__assign=u||t),e.__extends||(e.__extends=n),e.__createBinding||(e.__createBinding=r),__assign||(__assign=i.__assign),__extends||(__extends=i.__extends),__createBinding||(__createBinding=i.__createBinding)},e.__extendsFn=R,e.__importDefaultFn=function(e){return e&&e.__esModule?e:{strDefault:e}},e.__importStarFn=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)n!==s&&Object.prototype.hasOwnProperty.call(e,n)&&O(t,e,n);return l?d(t,s,{enumerable:!0,value:e}):t[s]=e,t},e.__makeTemplateObjectFn=function(e,t){return d?d(e,"raw",{value:t}):e.raw=t,e},e.__metadataFn=function(e,n){if(_&&y[E]===t)return y[E](e,n)},e.__paramFn=function(e,t){return function(n,r){t(n,r,e)}},e.__readFn=function(e,n){var r=typeof v===t&&e[v[w]];if(!r)return e;var i,o,s=r.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return a},e.__restFn=function(e,n){var r={};for(var i in e)p.call(e,i)&&n.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&typeof a[S]===t)for(var o=0,s=a[S](e);o<s.length;o++)n.indexOf(s[o])<0&&c.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]]);return r},e.__spreadArrayFn=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},e.__spreadArraysFn=function(){for(var e=arguments,t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;var i=Array(t),o=0;for(n=0;n<r;n++)for(var s=e[n],a=0,c=s.length;a<c;a++,o++)i[o]=s[a];return i},e.__valuesFn=function(e){var n=typeof v===t&&v[w],r=n&&e[n],i=0;return r?r.call(e):e&&"number"==typeof e.length?{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}:void m(n?"Object is not iterable.":"Symbol.iterator is not defined.")},e.getGlobal=f,e.objCreateFn=g,e.strDefault=s,e.strShimFunction=t,e.strShimHasOwnProperty=o,e.strShimObject=n,e.strShimPrototype=i,e.strShimUndefined=r,e.throwTypeError=m,function(e,t,n){var r=Object.defineProperty;if(r)try{return r(e,t,n)}catch{}n&&void 0!==typeof n.value&&(e[t]=n.value)}(e,"__esModule",{value:!0})},"object"==typeof n&&typeof s<"u"?a(n):(i=[t],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o))})),C=b(((n,s)=>{var a;a=function(e){"use strict";var t="function",n="object",r="undefined",i="prototype",o="hasOwnProperty",s=Object,a=s[i],c=s.assign,u=s.create,l=s.defineProperty,d=a[o],p=null;function h(e){return void 0===e&&(e=!0),(!p||!e)&&(typeof globalThis!==r&&globalThis&&(p=globalThis),typeof self!==r&&self&&(p=self),typeof window!==r&&window&&(p=window),typeof global!==r&&global&&(p=global)),p}function f(e){throw new TypeError(e)}function m(e){if(u)return u(e);if(null==e)return{};var r=typeof e;function o(){}return r!==n&&r!==t&&f("Object prototype may only be an Object:"+e),o[i]=e,new o}(h()||{}).Symbol,(h()||{}).Reflect;var g=function(e,t){return(g=s.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[o](n)&&(e[n]=t[n])})(e,t)};function v(e,n){function r(){this.constructor=e}typeof n!==t&&null!==n&&f("Class extends value "+String(n)+" is not a constructor or null"),g(e,n),e[i]=null===n?m(n):(r[i]=n[i],new r)}function y(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}var _="",b="processTelemetry",E="priority",S="setNextPlugin",w="isInitialized",C="teardown",T="core",R="update",O="disabled",x="_doTeardown",P="processNext",I="resume",A="pause",D="NotificationListener",N="add"+D,k="remove"+D,M="eventsSent",L="eventsDiscarded",F="eventsSendRequest",q="perfEvent",j="toISOString",U="endsWith",B="startsWith",V="indexOf",H="reduce",z="trim",G="toString",K="__proto__",$="constructor",W=l,Q=s.freeze,X=s.seal,Y=s.keys,J=String[i],Z=J[z],ee=J[U],te=J[B],ne=Date[i][j],re=Array.isArray,ie=a[G],oe=d[G],se=oe.call(s),ae=/-([a-z])/g,ce=/([^\w\d_$])/g,ue=/^(\d+[\w\d_$])/,le=Object.getPrototypeOf;function de(e){if(e){if(le)return le(e);var t=e[K]||e[i]||e[$];if(t)return t}return null}function pe(e,t){return typeof e===t}function he(e){return void 0===e||typeof e===r}function fe(e){return null===e||he(e)}function me(e){return!fe(e)}function ge(e,t){return!(!e||!d.call(e,t))}function ve(e){return!(!e||typeof e!==n)}function ye(e){return!(!e||typeof e!==t)}function _e(e){var t=e;return t&&Re(t)&&(t=(t=(t=t.replace(ae,(function(e,t){return t.toUpperCase()}))).replace(ce,"_")).replace(ue,(function(e,t){return"_"+t}))),t}function be(e,t){if(e)for(var n in e)d.call(e,n)&&t.call(e,n,e[n])}function Ee(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=ee?e[U](t):function(e,t){var n=!1,r=t?t.length:0,i=e?e.length:0;if(r&&i&&i>=r&&!(n=e===t)){for(var o=i-1,s=r-1;s>=0;s--){if(e[o]!=t[s])return!1;o--}n=!0}return n}(e,t)),n}function Se(e,t){return!(!e||!t)&&-1!==e.indexOf(t)}function we(e){return!(!e||"[object Date]"!==ie.call(e))}var Ce=re||function(e){return!(!e||"[object Array]"!==ie.call(e))};function Te(e){return!(!e||"[object Error]"!==ie.call(e))}function Re(e){return"string"==typeof e}function Oe(e){return"number"==typeof e}function xe(e){return"boolean"==typeof e}function Pe(e){var n=!1;if(e&&"object"==typeof e){var r=le?le(e):de(e);r?(r[$]&&d.call(r,$)&&(r=r[$]),n=typeof r===t&&oe.call(r)===se):n=!0}return n}function Ie(e){if(e)return ne?e[j]():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function Ae(e,t,n){var r=e.length;try{for(var i=0;i<r&&(!(i in e)||-1!==t.call(n||e,e[i],i,e));i++);}catch{}}function De(e,t,n){if(e){if(e[V])return e[V](t,n);var r=e.length,i=n||0;try{for(var o=Math.max(i>=0?i:r-Math.abs(i),0);o<r;o++)if(o in e&&e[o]===t)return o}catch{}}return-1}function Ne(e,t,n){var r;if(e){if(e.map)return e.map(t,n);var i=e.length,o=n||e;r=new Array(i);try{for(var s=0;s<i;s++)s in e&&(r[s]=t.call(o,e[s],e))}catch{}}return r}function ke(e,t,n){var r;if(e){if(e[H])return e[H](t,n);var i=e.length,o=0;if(arguments.length>=3)r=arguments[2];else{for(;o<i&&!(o in e);)o++;r=e[o++]}for(;o<i;)o in e&&(r=t(r,e[o],o,e)),o++}return r}function Me(e){return e&&(e=Z&&e[z]?e[z]():e.replace?e.replace(/^\s+|\s+$/g,""):e),e}var Le=!{toString:null}.propertyIsEnumerable("toString"),Fe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function qe(e){var r=typeof e;if(r!==t&&(r!==n||null===e)&&f("objKeys called on non-object"),!Le&&Y)return Y(e);var i=[];for(var o in e)e&&d.call(e,o)&&i.push(o);if(Le)for(var s=Fe.length,a=0;a<s;a++)e&&d.call(e,Fe[a])&&i.push(Fe[a]);return i}function je(e,t,n,r){if(W)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),W(e,t,i),!0}catch{}return!1}function Ue(e){return e}function Be(e){return Q&&be(e,(function(e,t){(Ce(t)||ve(t))&&Q(t)})),Ve(e)}var Ve=Q||Ue,He=X||Ue;function ze(){var e=Date;return e.now?e.now():(new e).getTime()}function Ge(e){return Te(e)?e.name:_}function Ke(e,t,n,r,i){var o=n;return e&&(o=e[t])!==n&&(!i||i(o))&&(!r||r(n))&&(o=n,e[t]=o),o}function $e(e,t,n){var r;return e?!(r=e[t])&&fe(r)&&(r=he(n)?{}:n,e[t]=r):r=he(n)?{}:n,r}function We(e){return!e}function Qe(e){return!!e}function Xe(e){throw new Error(e)}function Ye(e,t){var n=null,r=null;return ye(e)?n=e:r=e,function(){var e=arguments;if(n&&(r=n()),r)return r[t].apply(r,e)}}function Je(e,t,n,r,i){e&&t&&n&&(!1!==i||he(e[t]))&&(e[t]=Ye(n,r))}function Ze(e,t,n,r){return e&&t&&ve(e)&&Ce(n)&&Ae(n,(function(n){Re(n)&&Je(e,n,t,n,r)})),e}function et(e,t,n,r,i,o){var s=arguments,a=s[0]||{},c=s.length,u=!1,l=1;for(c>0&&xe(a)&&(u=a,a=s[l]||{},l++),ve(a)||(a={});l<c;l++){var p=s[l],h=Ce(p),f=ve(p);for(var m in p)if(h&&m in p||f&&d.call(p,m)){var g=p[m],v=void 0;if(u&&g&&((v=Ce(g))||Pe(g))){var y=a[m];v?Ce(y)||(y=[]):Pe(y)||(y={}),g=et(u,y,g)}void 0!==g&&(a[m]=g)}}return a}function tt(e){var t={};return be(e,(function(e,n){t[e]=n,t[n]=e})),Be(t)}var nt=tt({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),rt="constructor",it="prototype",ot="function",st="_dynInstFuncs",at="_isDynProxy",ct="_dynClass",ut="_dynInstChk",lt=ut,dt="_dfOpts",pt="_unknown_",ht="__proto__",ft="_dyn"+ht,mt="_dynInstProto",gt="useBaseInst",vt="setInstFuncs",yt=Object,_t=yt.getPrototypeOf,bt=yt.getOwnPropertyNames,Et=0;function St(e,t){return e&&yt[it].hasOwnProperty.call(e,t)}function wt(e){return e&&(e===yt[it]||e===Array[it])}function Ct(e){return wt(e)||e===Function[it]}function Tt(e){var t;if(e){if(_t)return _t(e);var n=e[ht]||e[it]||(e[rt]?e[rt][it]:null);t=e[ft]||n,St(e,ft)||(delete e[mt],t=e[ft]=e[mt]||e[ft],e[mt]=n)}return t}function Rt(e,t){var n=[];if(bt)n=bt(e);else for(var r in e)"string"==typeof r&&St(e,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function Ot(e,t,n){return t!==rt&&typeof e[t]===ot&&(n||St(e,t))}function xt(e){throw new TypeError("DynamicProto: "+e)}function Pt(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function It(e,t,n,r,i){if(!wt(e)){var o=n[st]=n[st]||{},s=o[t]=o[t]||{};!1!==o[lt]&&(o[lt]=!!i),Rt(n,(function(t){Ot(n,t,!1)&&n[t]!==r[t]&&(s[t]=n[t],delete n[t],(!St(e,t)||e[t]&&!e[t][at])&&(e[t]=function(e,t){var n=function(){var r=function(e,t,n,r){var i=null;if(e&&St(n,ct)){var o=e[st]||{};if((i=(o[n[ct]]||{})[t])||xt("Missing ["+t+"] "+ot),!i[ut]&&!1!==o[lt]){for(var s=!St(e,t),a=Tt(e),c=[];s&&a&&!Ct(a)&&!Pt(c,a);){var u=a[t];if(u){s=u===r;break}c.push(a),a=Tt(a)}try{s&&(e[t]=i),i[ut]=1}catch{o[lt]=!1}}}return i}(this,t,e,n)||function(e,t,n){var r=t[e];return r===n&&(r=Tt(t)[e]),typeof r!==ot&&xt("["+e+"] is not a "+ot),r}(t,e,n);return r.apply(this,arguments)};return n[at]=1,n}(e,t)))}))}}function At(e,t){return St(e,it)?e.name||t||pt:((e||{})[rt]||{}).name||t||pt}function Dt(e,t,n,r){St(e,it)||xt("theClass is an invalid class definition.");var i=e[it];(function(e,t){if(_t){for(var n=[],r=Tt(t);r&&!Ct(r)&&!Pt(n,r);){if(r===e)return!0;n.push(r),r=Tt(r)}return!1}return!0})(i,t)||xt("["+At(e)+"] is not in class hierarchy of ["+At(t)+"]");var o=null;St(i,ct)?o=i[ct]:(o="_dynCls$"+At(e,"_")+"$"+Et,Et++,i[ct]=o);var s=Dt[dt],a=!!s[gt];a&&r&&void 0!==r[gt]&&(a=!!r[gt]);var c=function(e){var t={};return Rt(e,(function(n){!t[n]&&Ot(e,n,!1)&&(t[n]=e[n])})),t}(t),u=function(e,t,n,r){function i(e,t,n){var i=t[n];if(i[at]&&r){var o=e[st]||{};!1!==o[lt]&&(i=(o[t[ct]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var o={};Rt(n,(function(e){o[e]=i(t,n,e)}));for(var s=Tt(e),a=[];s&&!Ct(s)&&!Pt(a,s);)Rt(s,(function(e){!o[e]&&Ot(s,e,!_t)&&(o[e]=i(t,s,e))})),a.push(s),s=Tt(s);return o}(i,t,c,a);n(t,u);var l=!!_t&&!!s[vt];l&&r&&(l=!!r[vt]),It(i,o,t,c,!1!==l)}Dt[dt]={setInstFuncs:!0,useBaseInst:!0};var Nt="window",kt="document",Mt="navigator",Lt="location",Ft="console",qt="performance",jt="JSON",Ut="crypto",Bt="msCrypto",Vt="msie",Ht="trident/",zt="XMLHttpRequest",Gt=null,Kt=null,$t=!1,Wt=null,Qt=null;function Xt(e,t){var n=!1;if(e){try{if(!(n=t in e)){var r=e[i];r&&(n=t in r)}}catch{}if(!n)try{n=!he((new e)[t])}catch{}}return n}function Yt(e){var t=h();return t&&t[e]?t[e]:e===Nt&&Jt()?window:null}function Jt(){return Boolean(typeof window===n&&window)}function Zt(){return Jt()?window:Yt(Nt)}function en(){return Boolean(typeof document===n&&document)}function tn(){return en()?document:Yt(kt)}function nn(){return Boolean(typeof navigator===n&&navigator)}function rn(){return nn()?navigator:Yt(Mt)}function on(){return Boolean(typeof history===n&&history)}function sn(e){if(e&&$t){var t=Yt("__mockLocation");if(t)return t}return typeof location===n&&location?location:Yt(Lt)}function an(){return typeof console!==r?console:Yt(Ft)}function cn(){return Yt(qt)}function un(){return Boolean(typeof JSON===n&&JSON||null!==Yt(jt))}function ln(){return un()?JSON||Yt(jt):null}function dn(){return Yt(Ut)}function pn(){return Yt(Bt)}function hn(){var e=rn();if(e&&(e.userAgent!==Kt||null===Gt)){var t=((Kt=e.userAgent)||_).toLowerCase();Gt=Se(t,Vt)||Se(t,Ht)}return Gt}function fn(e){var t=Object[i].toString.call(e),n=_;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":un()&&(n=ln().stringify(e)),t+n}function mn(){var e=!1;try{e=!!Yt(zt)}catch{}return e}function gn(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n];if(r.name&&r.name===t)return r}return{}}function vn(e){var t=tn();return t&&e?gn(t.querySelectorAll("meta"),e).content:null}function yn(e){var t,n=cn();if(n){var r=n.getEntriesByType("navigation")||[];t=gn((r.length>0?r[0]:{}).serverTiming,e).description}return t}var _n,bn=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],En=null;function Sn(e,t){return function(){var n=arguments,r=wn(t);if(r){var i=r.listener;i&&i[e]&&i[e].apply(i,n)}}}function wn(e){var t=En;return!t&&!0!==e.disableDbgExt&&(t=En||function(){var e=Yt("Microsoft");return e&&(En=e.ApplicationInsights),En}()),t?t.ChromeDbgExt:null}function Cn(e){if(!_n){_n={};for(var t=0;t<bn.length;t++)_n[bn[t]]=Sn(bn[t],e)}return _n}function Tn(e){return e?'"'+e.replace(/\"/g,_)+'"':_}function Rn(e,t){var n=an();if(n){var r="log";n[e]&&(r=e),ye(n[r])&&n[r](t)}}var On=function(){function e(e,t,n,r){void 0===n&&(n=!1);var i=this;i.messageId=e,i.message=(n?"AI: ":"AI (Internal): ")+e;var o=_;un()&&(o=ln().stringify(r));var s=(t?" message:"+Tn(t):_)+(r?" props:"+Tn(o):_);i.message+=s}return e.dataType="MessageData",e}();function xn(e,t){return(e||{}).logger||new Pn(t)}var Pn=function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={};Dt(e,this,(function(e){function i(e,n){var r=t[e];return fe(r)?n:r}function o(e,n){var r=wn(t);r&&r.diagLog&&r.diagLog(e,n)}fe(t)&&(t={}),e.consoleLoggingLevel=function(){return i("loggingLevelConsole",0)},e.telemetryLoggingLevel=function(){return i("loggingLevelTelemetry",1)},e.maxInternalMessageLimit=function(){return i("maxMessageLimit",25)},e.enableDebugExceptions=function(){return i("enableDebugExceptions",!1)},e.throwInternal=function(t,n,i,s,a){void 0===a&&(a=!1);var c=new On(n,i,a,s);if(e.enableDebugExceptions())throw fn(c);var u=1===t?"errorToConsole":"warnToConsole";if(he(c.message))o("throw"+(1===t?"Critical":"Warning"),c);else{var l=e.consoleLoggingLevel();if(a){var d=+c.messageId;!r[d]&&l>=t&&(e[u](c.message),r[d]=!0)}else l>=t&&e[u](c.message);e.logInternalMessage(t,c)}},e.warnToConsole=function(e){Rn("warn",e),o("warning",e)},e.errorToConsole=function(e){Rn("error",e),o("error",e)},e.resetInternalMessageCount=function(){n=0,r={}},e.logInternalMessage=function(t,i){if(!(n>=e.maxInternalMessageLimit())){var s=!0,a="AITR_"+i.messageId;if(r[a]?s=!1:r[a]=!0,s&&(t<=e.telemetryLoggingLevel()&&(e.queue.push(i),n++,o(1===t?"error":"warn",i)),n===e.maxInternalMessageLimit())){var c="Internal events throttle limit per PageView reached for this app.",u=new On(23,c,!1);e.queue.push(u),1===t?e.errorToConsole(c):e.warnToConsole(c)}}}}))};function In(e){return e||new Pn}function An(e,t,n,r,i,o){void 0===o&&(o=!1),(e||new Pn).throwInternal(t,n,r,i,o)}function Dn(e,t){In(e).warnToConsole(t)}var Nn="ctx",kn=null,Mn=function(){function e(t,n,r){var i,o=this,s=!1;o.start=ze(),o.name=t,o.isAsync=r,o.isChildEvt=function(){return!1},ye(n)&&(s=je(o,"payload",(function(){return!i&&ye(n)&&(i=n(),n=null),i}))),o.getCtx=function(t){return t?t===e.ParentContextKey||t===e.ChildrenContextKey?o[t]:(o[Nn]||{})[t]:null},o.setCtx=function(t,n){t&&(t===e.ParentContextKey?(o[t]||(o.isChildEvt=function(){return!0}),o[t]=n):t===e.ChildrenContextKey?o[t]=n:(o[Nn]=o[Nn]||{})[t]=n)},o.complete=function(){var t=0,r=o.getCtx(e.ChildrenContextKey);if(Ce(r))for(var i=0;i<r.length;i++){var a=r[i];a&&(t+=a.time)}o.time=ze()-o.start,o.exTime=o.time-t,o.complete=function(){},!s&&ye(n)&&(o.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),Ln=function e(t){this.ctx={},Dt(e,this,(function(e){e.create=function(e,t,n){return new Mn(e,t,n)},e.fire=function(e){e&&(e.complete(),t&&ye(t.perfEvent)&&t.perfEvent(e))},e.setCtx=function(t,n){t&&((e[Nn]=e[Nn]||{})[t]=n)},e.getCtx=function(t){return(e[Nn]||{})[t]}}))},Fn="CoreUtils.doPerf";function qn(e,t,n,r,i){if(e){var o=e;if(ye(o.getPerfMgr)&&(o=o.getPerfMgr()),o){var s=void 0,a=o.getCtx(Fn);try{if(s=o.create(t(),r,i)){if(a&&s.setCtx&&(s.setCtx(Mn.ParentContextKey,a),a.getCtx&&a.setCtx)){var c=a.getCtx(Mn.ChildrenContextKey);c||(c=[],a.setCtx(Mn.ChildrenContextKey,c)),c.push(s)}return o.setCtx(Fn,s),n(s)}}catch(e){s&&s.setCtx&&s.setCtx("exception",e)}finally{s&&o.fire(s),o.setCtx(Fn,a)}}}return n()}function jn(){return kn}var Un=4294967296,Bn=4294967295,Vn=!1,Hn=123456789,zn=987654321;function Gn(e){e<0&&(e>>>=0),Hn=123456789+e&Bn,zn=987654321-e&Bn,Vn=!0}function Kn(){try{var e=2147483647&ze();Gn((Math.random()*Un^e)+e)}catch{}}function $n(e){return e>0?Math.floor(Wn()/Bn*(e+1))>>>0:0}function Wn(e){var t=0,n=dn()||pn();return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&Bn),0===t&&hn()&&(Vn||Kn(),t=Xn()&Bn),0===t&&(t=Math.floor(Un*Math.random()|0)),e||(t>>>=0),t}function Qn(e){e?Gn(e):Kn()}function Xn(e){var t=((zn=36969*(65535&zn)+(zn>>16)&Bn)<<16)+(65535&(Hn=18e3*(65535&Hn)+(Hn>>16)&Bn))>>>0&Bn|0;return e||(t>>>=0),t}function Yn(e){void 0===e&&(e=22);for(var t=Wn()>>>0,n=0,r=_;r.length<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(Wn()<<2&4294967295|3&t)>>>0,n=0);return r}var Jn=l,Zn="2.8.4",er="."+Yn(6),tr=0;function nr(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function rr(e,t){return void 0===t&&(t=!1),_e(e+tr+++(t?"."+Zn:"")+er)}function ir(e){var t={id:rr("_aiData-"+(e||"")+"."+Zn),accept:function(e){return nr(e)},get:function(e,n,r,i){var o=e[t.id];return o?o[_e(n)]:(i&&((o=function(e,t){var n=t[e.id];if(!n){n={};try{nr(t)&&(function(e,t,n){if(Jn)try{return Jn(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch{}return!1}(t,e.id,n)||(t[e.id]=n))}catch{}}return n}(t,e))[_e(n)]=r),r)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch{}}};return t}var or="toGMTString",sr="toUTCString",ar="cookie",cr="expires",ur="enabled",lr="isCookieUseDisabled",dr="disableCookiesUsage",pr="_ckMgr",hr=null,fr=null,mr=null,gr=tn(),vr={},yr={};function _r(e,t){var n=Er[pr]||yr[pr];return n||(n=Er[pr]=Er(e,t),yr[pr]=n),n}function br(e){return!e||e.isEnabled()}function Er(e,t){var n=function(e){var t=e.cookieCfg=e.cookieCfg||{};if(Ke(t,"domain",e.cookieDomain,me,fe),Ke(t,"path",e.cookiePath||"/",null,fe),fe(t[ur])){var n=void 0;he(e[lr])||(n=!e[lr]),he(e[dr])||(n=!e[dr]),t[ur]=n}return t}(e||yr),r=n.path||"/",i=n.domain,o=!1!==n[ur],s={isEnabled:function(){var e=o&&Sr(t),n=yr[pr];return e&&n&&s!==n&&(e=br(n)),e},setEnabled:function(e){o=!1!==e},set:function(e,t,o,a,c){var u=!1;if(br(s)){var l={},d=Me(t||_),p=d.indexOf(";");if(-1!==p&&(d=Me(t.substring(0,p)),l=wr(t.substring(p+1))),Ke(l,"domain",a||i,Qe,he),!fe(o)){var h=hn();if(he(l[cr])){var f=ze()+1e3*o;if(f>0){var m=new Date;m.setTime(f),Ke(l,cr,Cr(m,h?or:sr)||Cr(m,h?or:sr)||_,Qe)}}h||Ke(l,"max-age",_+o,null,he)}var g=sn();g&&"https:"===g.protocol&&(Ke(l,"secure",null,null,he),null===fr&&(fr=!xr((rn()||{}).userAgent)),fr&&Ke(l,"SameSite","None",null,he)),Ke(l,"path",c||r,null,he),(n.setCookie||Or)(e,Tr(d,l)),u=!0}return u},get:function(e){var t=_;return br(s)&&(t=(n.getCookie||Rr)(e)),t},del:function(e,t){var n=!1;return br(s)&&(n=s.purge(e,t)),n},purge:function(e,r){var i,o=!1;if(Sr(t)){var s=((i={}).path=r||"/",i[cr]="Thu, 01 Jan 1970 00:00:01 GMT",i);hn()||(s["max-age"]="0"),(n.delCookie||Or)(e,Tr(_,s)),o=!0}return o}};return s[pr]=s,s}function Sr(e){if(null===hr){hr=!1;try{hr=void 0!==(gr||{})[ar]}catch(t){An(e,2,68,"Cannot access document.cookie - "+Ge(t),{exception:fn(t)})}}return hr}function wr(e){var t={};return e&&e.length&&Ae(Me(e).split(";"),(function(e){if(e=Me(e||_)){var n=e.indexOf("=");-1===n?t[e]=null:t[Me(e.substring(0,n))]=Me(e.substring(n+1))}})),t}function Cr(e,t){return ye(e[t])?e[t]():null}function Tr(e,t){var n=e||_;return be(t,(function(e,t){n+="; "+e+(fe(t)?_:"="+t)})),n}function Rr(e){var t=_;if(gr){var n=gr[ar]||_;mr!==n&&(vr=wr(n),mr=n),t=Me(vr[e]||_)}return t}function Or(e,t){gr&&(gr[ar]=e+"="+t)}function xr(e){return!!Re(e)&&!!(Se(e,"CPU iPhone OS 12")||Se(e,"iPad; CPU OS 12")||Se(e,"Macintosh; Intel Mac OS X 10_14")&&Se(e,"Version/")&&Se(e,"Safari")||Se(e,"Macintosh; Intel Mac OS X 10_14")&&Ee(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Se(e,"Chrome/5")||Se(e,"Chrome/6")||Se(e,"UnrealEngine")&&!Se(e,"Chrome")||Se(e,"UCBrowser/12")||Se(e,"UCBrowser/11"))}var Pr="on",Ir="attachEvent",Ar="addEventListener",Dr="detachEvent",Nr="removeEventListener",kr="events",Mr="visibilitychange",Lr="pagehide",Fr="pageshow",qr="unload",jr="beforeunload",Ur=rr("aiEvtPageHide"),Br=rr("aiEvtPageShow"),Vr=/\.[\.]+/g,Hr=/[\.]+$/,zr=1,Gr=ir("events"),Kr=/^([^.]*)(?:\.(.+)|)/;function $r(e){return e&&e.replace?e.replace(/^\s*\.*|\.*\s*$/g,""):e}function Wr(e,t){if(t){var n="";Ce(t)?(n="",Ae(t,(function(e){(e=$r(e))&&("."!==e[0]&&(e="."+e),n+=e)}))):n=$r(t),n&&("."!==n[0]&&(n="."+n),e=(e||"")+n)}var r=Kr.exec(e||"")||[];return{type:r[1],ns:(r[2]||"").replace(Vr,".").replace(Hr,"").split(".").sort().join(".")}}function Qr(e,t,n){void 0===n&&(n=!0);var r=Gr.get(e,kr,{},n),i=r[t];return i||(i=r[t]=[]),i}function Xr(e,t,n,r){e&&t&&t.type&&(e[Nr]?e[Nr](t.type,n,r):e[Dr]&&e[Dr](Pr+t.type,n))}function Yr(e,t,n,r){for(var i=t.length;i--;){var o=t[i];o&&(!n.ns||n.ns===o.evtName.ns)&&(!r||r(o))&&(Xr(e,o.evtName,o.handler,o.capture),t.splice(i,1))}}function Jr(e,t){return t?Wr("xx",Ce(t)?[e].concat(t):[e,t]).ns.split("."):e}function Zr(e,t,n,r,i){void 0===i&&(i=!1);var o=!1;if(e)try{var s=Wr(t,r);if(o=function(e,t,n,r){var i=!1;return e&&t&&t.type&&n&&(e[Ar]?(e[Ar](t.type,n,r),i=!0):e[Ir]&&(e[Ir](Pr+t.type,n),i=!0)),i}(e,s,n,i),o&&Gr.accept(e)){var a={guid:zr++,evtName:s,handler:n,capture:i};Qr(e,s.type).push(a)}}catch{}return o}function ei(e,t,n,r,i){if(void 0===i&&(i=!1),e)try{var o=Wr(t,r),s=!1;(function(e,t,n){if(t.type)Yr(e,Qr(e,t.type),t,n);else{var r=Gr.get(e,kr,{});be(r,(function(r,i){Yr(e,i,t,n)})),0===qe(r).length&&Gr.kill(e,kr)}})(e,o,(function(e){return!((!o.ns||n)&&e.handler!==n||(s=!0,0))})),s||Xr(e,o,n,i)}catch{}}function ti(e,t,n,r){return void 0===r&&(r=!1),Zr(e,t,n,null,r)}function ni(e,t,n,r){void 0===r&&(r=!1),ei(e,t,n,null,r)}function ri(e,t,n){var r=!1,i=Zt();i&&(r=Zr(i,e,t,n),r=Zr(i.body,e,t,n)||r);var o=tn();return o&&(r=Zr(o,e,t,n)||r),r}function ii(e,t,n){var r=Zt();r&&(ei(r,e,t,n),ei(r.body,e,t,n));var i=tn();i&&ei(i,e,t,n)}function oi(e,t,n,r){var i=!1;return t&&e&&e.length>0&&Ae(e,(function(e){e&&(!n||-1===De(n,e))&&(i=ri(e,t,r)||i)})),i}function si(e,t,n,r){var i=!1;return t&&e&&Ce(e)&&!(i=oi(e,t,n,r))&&n&&n.length>0&&(i=oi(e,t,null,r)),i}function ai(e,t,n){e&&Ce(e)&&Ae(e,(function(e){e&&ii(e,t,n)}))}var ci,ui=null,li=r;function di(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(mi,(function(e){var t=0|$n(15);return("x"===e?t:3&t|8).toString(16)}))}function pi(){var e=cn();return e&&e.now?e.now():ze()}function hi(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=_,r=0;r<4;r++)n+=t[15&(e=Wn())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&Wn())|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)}var fi={_canUseCookies:void 0,isTypeof:pe,isUndefined:he,isNullOrUndefined:fe,hasOwnProperty:ge,isFunction:ye,isObject:ve,isDate:we,isArray:Ce,isError:Te,isString:Re,isNumber:Oe,isBoolean:xe,toISOString:Ie,arrForEach:Ae,arrIndexOf:De,arrMap:Ne,arrReduce:ke,strTrim:Me,objCreate:m,objKeys:qe,objDefineAccessors:je,addEventHandler:ri,dateNow:ze,isIE:hn,disableCookies:yi,newGuid:di,perfNow:pi,newId:Yn,randomValue:$n,random32:Wn,mwcRandomSeed:Qn,mwcRandom32:Xn,generateW3CId:hi},mi=/[xy]/g,gi={Attach:ti,AttachEvent:ti,Detach:ni,DetachEvent:ni};function vi(e,t){var n=_r(e,t),r=fi._canUseCookies;return null===ui&&(ui=[],ci=r,je(fi,"_canUseCookies",(function(){return ci}),(function(e){ci=e,Ae(ui,(function(t){t.setEnabled(e)}))}))),-1===De(ui,n)&&ui.push(n),xe(r)&&n.setEnabled(r),xe(ci)&&n.setEnabled(ci),n}function yi(){vi().setEnabled(!1)}var _i=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,bi="00",Ei="ff",Si="00000000000000000000000000000000",wi="0000000000000000";function Ci(e,t,n){return!(!e||e.length!==t||e===n||!e.match(/^[\da-f]*$/))}function Ti(e,t,n){return Ci(e,t)?e:n}function Ri(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t.length<2;)t="0"+t;return t}function Oi(e){if(!e||(Ce(e)&&(e=e[0]||""),!e||!Re(e)||e.length>8192))return null;var t=_i.exec(Me(e));return t&&t[1]!==Ei&&t[2]!==Si&&t[3]!==wi?{version:t[1],traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}function xi(e){return Ci(e,32,Si)}function Pi(e){return Ci(e,16,wi)}function Ii(e){return!!(e&&Ci(e.version,2,Ei)&&Ci(e.traceId,32,Si)&&Ci(e.spanId,16,wi)&&Ci(Ri(e.traceFlags),2))}var Ai=ir("plugin");function Di(e){return Ai.get(e,"state",{},!0)}function Ni(e,t){for(var n,r=[],i=null,o=e.getNext();o;){var s=o.getPlugin();s&&(i&&ye(i[S])&&ye(s[b])&&i[S](s),(ye(s[w])?s[w]():(n=Di(s))[w])||r.push(s),i=s,o=o.getNext())}Ae(r,(function(r){var i=e.core();r.initialize(e.getCfg(),i,t,e.getNext()),n=Di(r),!r[T]&&!n[T]&&(n[T]=i),n[w]=!0,delete n[C]}))}function ki(e){return e.sort((function(e,t){var n=0;if(t){var r=ye(t[b]);ye(e[b])?n=r?e[E]-t[E]:1:r&&(n=-1)}else n=e?1:-1;return n}))}var Mi="TelemetryPluginChain",Li="_hasRun",Fi="_getTelCtx",qi=0;function ji(e,t,n,r){var i=null,o=[];null!==r&&(i=r?function(e,t,n){for(;e;){if(e.getPlugin()===n)return e;e=e.getNext()}return Hi([n],t.config||{},t)}(e,n,r):e);var s={_next:function(){var e=i;if(i=e?e.getNext():null,!e){var t=o;t&&t.length>0&&(Ae(t,(function(e){try{e.func.call(e.self,e.args)}catch(e){An(n.logger,2,73,"Unexpected Exception during onComplete - "+fn(e))}})),o=[])}return e},ctx:{core:function(){return n},diagLog:function(){return xn(n,t)},getCfg:function(){return t},getExtCfg:a,getConfig:function(e,n,r){void 0===r&&(r=!1);var i,o=a(e,null);return o&&!fe(o[n])?i=o[n]:t&&!fe(t[n])&&(i=t[n]),fe(i)?r:i},hasNext:function(){return!!i},getNext:function(){return i},setNext:function(e){i=e},iterate:function(e){for(var t;t=s._next();){var n=t.getPlugin();n&&e(n)}},onComplete:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e&&o.push({func:e,self:he(t)?s.ctx:t,args:n})}}};function a(e,n,r){var i;if(void 0===n&&(n={}),void 0===r&&(r=0),t){var o=t.extensionConfig;o&&e&&(i=o[e])}if(i){if(ve(n)&&0!==r){var s=et(!0,n,i);t&&2===r&&be(n,(function(e){if(fe(s[e])){var n=t[e];fe(n)||(s[e]=n)}})),i=s}}else i=n;return i}return s}function Ui(e,t,n,r){var i=ji(e,t,n,r),o=i.ctx;return o.processNext=function(e){var t=i._next();return t&&t.processTelemetry(e,o),!t},o.createNew=function(e,r){return void 0===e&&(e=null),Ce(e)&&(e=Hi(e,t,n,r)),Ui(e||o.getNext(),t,n,r)},o}function Bi(e,t,n){var r=t.config||{},i=ji(e,r,t,n),o=i.ctx;return o.processNext=function(e){var t=i._next();return t&&t.unload(o,e),!t},o.createNew=function(e,n){return void 0===e&&(e=null),Ce(e)&&(e=Hi(e,r,t,n)),Bi(e||o.getNext(),t,n)},o}function Vi(e,t,n){var r=t.config||{},i=ji(e,r,t,n).ctx;return i.processNext=function(e){return i.iterate((function(t){ye(t.update)&&t.update(i,e)}))},i.createNew=function(e,n){return void 0===e&&(e=null),Ce(e)&&(e=Hi(e,r,t,n)),Vi(e||i.getNext(),t,n)},i}function Hi(e,t,n,r){var i=null,o=!r;if(Ce(e)&&e.length>0){var s=null;Ae(e,(function(e){if(!o&&r===e&&(o=!0),o&&e&&ye(e.processTelemetry)){var a=function(e,t,n){var r,i=null,o=ye(e.processTelemetry),s=ye(e.setNextPlugin),a={getPlugin:function(){return e},getNext:function(){return i},processTelemetry:function(r,u){c(u=u||function(){var r;return e&&ye(e[Fi])&&(r=e[Fi]()),r||(r=Ui(a,t,n)),r}(),(function(t){if(!e||!o)return!1;var n=Di(e);return!n.teardown&&!n[O]&&(s&&e.setNextPlugin(i),e.processTelemetry(r,t),!0)}),"processTelemetry",(function(){return{item:r}}),!r.sync)||u.processNext(r)},unload:function(t,n){c(t,(function(){var r=!1;if(e){var i=Di(e),o=e[T]||i.core;e&&(!o||o===t[T]())&&!i[C]&&(i[T]=null,i[C]=!0,i[w]=!1,e[C]&&!0===e[C](t,n)&&(r=!0))}return r}),"unload",(function(){}),n.isAsync)||t.processNext(n)},update:function(t,n){c(t,(function(){var r=!1;if(e){var i=Di(e),o=e[T]||i.core;e&&(!o||o===t[T]())&&!i[C]&&e[R]&&!0===e[R](t,n)&&(r=!0)}return r}),"update",(function(){}),!1)||t.processNext(n)},_id:r=e?e.identifier+"-"+e.priority+"-"+qi++:"Unknown-0-"+qi++,_setNext:function(e){i=e}};function c(t,n,o,s,a){var c=!1,u=e?e.identifier:Mi,l=t[Li];return l||(l=t[Li]={}),t.setNext(i),e&&qn(t[T](),(function(){return u+":"+o}),(function(){l[r]=!0;try{var e=i?i._id:_;e&&(l[e]=!1),c=n(t)}catch(e){var s=!i||l[i._id];s&&(c=!0),(!i||!s)&&An(t.diagLog(),1,73,"Plugin ["+u+"] failed during "+o+" - "+fn(e)+", run flags: "+fn(l))}}),s,a),c}return Ve(a)}(e,t,n);i||(i=a),s&&s._setNext(a),s=a}}))}return r&&!i?Hi([r],t,n):i}var zi="extensionConfig",Gi=500;function Ki(e,t,n,r){t&&Ce(t)&&t.length>0&&(Ae(t=t.sort((function(e,t){return e.priority-t.priority})),(function(e){e.priority<Gi&&Xe("Channel has invalid priority - "+e.identifier)})),e.push({queue:Ve(t),chain:Hi(t,n,r)}))}function $i(){var e=[];return{add:function(t){t&&e.push(t)},run:function(t,n){Ae(e,(function(e){try{e(t,n)}catch(e){An(t.diagLog(),2,73,"Unexpected error calling unload handler - "+fn(e))}})),e=[]}}}var Wi="getPlugin",Qi=function e(){var t,n,r,i,o,s=this;function a(e){void 0===e&&(e=null);var t=e;if(!t){var i=n||Ui(null,{},s.core);t=r&&r[Wi]?i.createNew(null,r[Wi]):i.createNew(null,r)}return t}function c(e,t,i){e&&Ke(e,zi,[],null,fe),!i&&t&&(i=t.getProcessTelContext().getNext());var o=r;r&&r[Wi]&&(o=r[Wi]()),s.core=t,n=Ui(i,e,t,o)}function u(){t=!1,s.core=null,n=null,r=null,o=[],i=$i()}u(),Dt(e,s,(function(e){e.initialize=function(e,n,r,i){c(e,n,i),t=!0},e.teardown=function(t,n){var s=e.core;if(s&&(!t||s===t.core())){var a,c=!1,l=t||Bi(null,s,r&&r[Wi]?r[Wi]():r),d=n||{reason:0,isAsync:!1};return e[x]&&!0===e[x](l,d,p)?a=!0:p(),a}function p(){c||(c=!0,i.run(l,n),Ae(o,(function(e){e.rm()})),o=[],!0===a&&l.processNext(d),u())}},e.update=function(t,n){var i=e.core;if(i&&(!t||i===t.core())){var o,s=!1,a=t||Vi(null,i,r&&r[Wi]?r[Wi]():r),u=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(a,u,l)?o=!0:l(),o}function l(){s||(s=!0,c(a.getCfg(),a.core(),a.getNext()))}},e._addHook=function(e){e&&(Ce(e)?o=o.concat(e):o.push(e))},Je(e,"_addUnloadCb",(function(){return i}),"add")})),s.diagLog=function(e){return a(e).diagLog()},s[w]=function(){return t},s.setInitialized=function(e){t=e},s[S]=function(e){r=e},s.processNext=function(e,t){t?t.processNext(e):r&&ye(r.processTelemetry)&&r.processTelemetry(e,null)},s._getTelCtx=a},Xi=function(e){function t(){var n,r,i=e.call(this)||this;function o(){n=0,r=[]}return i.identifier="TelemetryInitializerPlugin",i.priority=199,o(),Dt(t,i,(function(e,t){e.addTelemetryInitializer=function(e){var t={id:n++,fn:e};return r.push(t),{remove:function(){Ae(r,(function(e,n){if(e.id===t.id)return r.splice(n,1),-1}))}}},e.processTelemetry=function(t,n){for(var i=!1,o=r.length,s=0;s<o;++s){var a=r[s];if(a)try{if(!1===a.fn.apply(null,[t])){i=!0;break}}catch(e){An(n.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Ge(e),{exception:fn(e)},!0)}}i||e.processNext(t,n)},e[x]=function(){o()}})),i}return v(t,e),t}(Qi),Yi="Plugins must provide initialize method",Ji="_notificationManager",Zi="SDK is still unloading...",eo={loggingLevelConsole:1};function to(e,t){return new Ln(t)}function no(e,t){var n=!1;return Ae(t,(function(t){if(t===e)return n=!0,-1})),n}var ro=function e(){var t,n,r,i,o,s,a,c,u,l,d,p,h,f,g,v,_,b,E,S=0;Dt(e,this,(function(e){function w(){t=!1,e.config=et(!0,{},eo),e.logger=new Pn(e.config),e._extensions=[],f=new Xi,n=[],r=null,i=null,o=null,s=null,a=null,u=null,c=[],l=null,d=null,p=null,h=!1,g=null,v=rr("AIBaseCore",!0),_=$i(),E=null}function T(){return Ui(D(),e.config,e)}function R(t,n){var r=function(e,t,n){var r=[],i={};return Ae(n,(function(t){(fe(t)||fe(t.initialize))&&Xe(Yi);var n=t.priority,o=t.identifier;t&&n&&(fe(i[n])?i[n]=o:Dn(e,"Two extensions have same priority #"+n+" - "+i[n]+", "+o)),(!n||n<500)&&r.push(t)})),{all:n,core:r}}(e.logger,0,c);u=r.core,a=null;var i=r.all;if(p=Ve(function(e,t,n,r){var i=[];if(e&&Ae(e,(function(e){return Ki(i,e,n,r)})),t){var o=[];Ae(t,(function(e){e.priority>Gi&&o.push(e)})),Ki(i,o,n,r)}return i}(d,i,t,e)),l){var o=De(i,l);-1!==o&&i.splice(o,1),-1!==(o=De(u,l))&&u.splice(o,1),l._setQueue(p)}else l=function(e,t){var n;function r(){return Ui(null,t.config,t,null)}function i(e,t,n,r){var i=e?e.length+1:1;function o(){0==--i&&(r&&r(),r=null)}i>0&&Ae(e,(function(e){if(e&&e.queue.length>0){var r=e.chain,s=t.createNew(r);s.onComplete(o),n(s)}else i--})),o()}var o=!1;return(n={identifier:"ChannelControllerPlugin",priority:Gi,initialize:function(t,n,r,i){o=!0,Ae(e,(function(e){e&&e.queue.length>0&&Ni(Ui(e.chain,t,n),r)}))},isInitialized:function(){return o},processTelemetry:function(t,n){i(e,n||r(),(function(e){e[P](t)}),(function(){n[P](t)}))},update:function(t,n){var r=n||{reason:0};return i(e,t,(function(e){e[P](r)}),(function(){t[P](r)})),!0}})[A]=function(){i(e,r(),(function(e){e.iterate((function(e){e[A]&&e[A]()}))}),null)},n[I]=function(){i(e,r(),(function(e){e.iterate((function(e){e[I]&&e[I]()}))}),null)},n[C]=function(t,n){var r=n||{reason:0,isAsync:!1};return i(e,t,(function(e){e[P](r)}),(function(){t[P](r),o=!1})),!0},n.getChannel=function(t){var n=null;return e&&e.length>0&&Ae(e,(function(e){if(e&&e.queue.length>0&&(Ae(e.queue,(function(e){if(e.identifier===t)return n=e,-1})),n))return-1})),n},n.flush=function(t,n,o,s){var a=1,c=!1,u=null;function l(){a--,c&&0===a&&(u&&(clearTimeout(u),u=null),n&&n(c),n=null)}return s=s||5e3,i(e,r(),(function(e){e.iterate((function(e){if(e.flush){a++;var n=!1;e.flush(t,(function(){n=!0,l()}),o)||n||(t&&null==u?u=setTimeout((function(){u=null,l()}),s):l())}}))}),(function(){c=!0,l()})),!0},n._setQueue=function(t){e=t},n}(p,e);i.push(l),u.push(l),e._extensions=ki(i),l.initialize(t,e,i),Ni(T(),i),e._extensions=Ve(ki(u||[])).slice(),n&&function(t){var n=Vi(D(),e);(!e._updateHook||!0!==e._updateHook(n,t))&&n.processNext(t)}(n)}function x(t){var n=null,r=null;return Ae(e._extensions,(function(e){if(e.identifier===t&&e!==l&&e!==f)return r=e,-1})),!r&&l&&(r=l.getChannel(t)),r&&(n={plugin:r,setEnabled:function(e){Di(r)[O]=!e},isEnabled:function(){var e=Di(r);return!e[C]&&!e[O]},remove:function(t,n){void 0===t&&(t=!0);var i=[r];q(i,{reason:1,isAsync:t},(function(t){t&&R(e.config,{reason:32,removed:i}),n&&n(t)}))}}),n}function D(){if(!a){var t=(u||[]).slice();-1===De(t,f)&&t.push(f),a=Hi(ki(t),e.config,e)}return a}function q(t,n,r){if(t&&t.length>0){var i=Bi(Hi(t,e.config,e),e);i.onComplete((function(){var e=!1,n=[];Ae(c,(function(r,i){no(r,t)?e=!0:n.push(r)})),c=n;var i=[];d&&(Ae(d,(function(n,r){var o=[];Ae(n,(function(n){no(n,t)?e=!0:o.push(n)})),i.push(o)})),d=i),r&&r(e)})),i.processNext(n)}else r(!1)}function j(){var t=e.logger?e.logger.queue:[];t&&(Ae(t,(function(t){var n={name:g||"InternalMessageId: "+t.messageId,iKey:e.config.instrumentationKey,time:Ie(new Date),baseType:On.dataType,baseData:{message:t.message}};e.track(n)})),t.length=0)}function U(e,t,n,r){return l?l.flush(e,t,n||6,r):(t&&t(!1),!0)}function B(t){var n=e.logger;n?An(n,2,73,t):Xe(t)}w(),e.isInitialized=function(){return t},e.initialize=function(n,i,s,a){h&&Xe(Zi),e.isInitialized()&&Xe("Core should not be initialized more than once"),(!n||fe(n.instrumentationKey))&&Xe("Please provide instrumentation key"),r=a,e[Ji]=a,e.config=n||{},function(e){!0===e.disableDbgExt&&b&&(r[k](b),b=null),r&&!b&&!0!==e.disableDbgExt&&(b=Cn(e),r[N](b))}(n),function(t){!t.enablePerfMgr&&o&&(o=null),t.enablePerfMgr&&Ke(e.config,"createPerfMgr",to)}(n),n.extensions=fe(n.extensions)?[]:n.extensions,function(e){$e(e,zi).NotificationManager=r}(n),s&&(e.logger=s),(c=[]).push.apply(c,y(y([],i),n.extensions)),d=(n||{}).channels,R(n,null),(!p||0===p.length)&&Xe("No channels available"),t=!0,e.releaseQueue()},e.getTransmissionControls=function(){var e=[];return p&&Ae(p,(function(t){e.push(t.queue)})),Ve(e)},e.track=function(t){Ke(t,"iKey",e.config.instrumentationKey,null,We),Ke(t,"time",Ie(new Date),null,We),Ke(t,"ver","4.0",null,fe),!h&&e.isInitialized()?T().processNext(t):n.push(t)},e.getProcessTelContext=T,e.getNotifyMgr=function(){return r||(r=function(){var e;return m(((e={})[N]=function(e){},e[k]=function(e){},e[M]=function(e){},e[L]=function(e,t){},e[F]=function(e,t){},e))}(),e[Ji]=r),r},e[N]=function(e){r&&r[N](e)},e[k]=function(e){r&&r[k](e)},e.getCookieMgr=function(){return s||(s=Er(e.config,e.logger)),s},e.setCookieMgr=function(e){s=e},e.getPerfMgr=function(){return!i&&!o&&e.config&&e.config.enablePerfMgr&&ye(e.config.createPerfMgr)&&(o=e.config.createPerfMgr(e,e.getNotifyMgr())),i||o||jn()},e.setPerfMgr=function(e){i=e},e.eventCnt=function(){return n.length},e.releaseQueue=function(){if(t&&n.length>0){var e=n;n=[],Ae(e,(function(e){T().processNext(e)}))}},e.pollInternalLogs=function(t){g=t||null;var n=e.config.diagnosticLogInterval;return(!n||!(n>0))&&(n=1e4),S&&clearInterval(S),S=setInterval((function(){j()}),n)},e.stopPollingInternalLogs=function(){S&&(clearInterval(S),S=0,j())},Ze(e,(function(){return f}),["addTelemetryInitializer"]),e.unload=function(n,r,i){void 0===n&&(n=!0),t||Xe("SDK is not initialized"),h&&Xe(Zi);var o={reason:50,isAsync:n,flushComplete:!1},s=Bi(D(),e);function a(t){o.flushComplete=t,h=!0,_.run(s,o),e.stopPollingInternalLogs(),s.processNext(o)}s.onComplete((function(){w(),r&&r(o)}),e),U(n,a,6,i)||a(!1)},e.getPlugin=x,e.addPlugin=function(t,n,r,i){if(!t)return i&&i(!1),void B(Yi);var o=x(t.identifier);if(o&&!n)return i&&i(!1),void B("Plugin ["+t.identifier+"] is already loaded!");var s={reason:16};function a(n){c.push(t),s.added=[t],R(e.config,s),i&&i(!0)}if(o){var u=[o.plugin];q(u,{reason:2,isAsync:!!r},(function(e){e?(s.removed=u,s.reason|=32,a()):i&&i(!1)}))}else a()},e.evtNamespace=function(){return v},e.flush=U,e.getTraceCtx=function(e){return E||(E=function(e){var t={};return{getName:function(){return t.name},setName:function(e){t.name=e},getTraceId:function(){return t.traceId},setTraceId:function(e){xi(e)&&(t.traceId=e)},getSpanId:function(){return t.spanId},setSpanId:function(e){Pi(e)&&(t.spanId=e)},getTraceFlags:function(){return t.traceFlags},setTraceFlags:function(e){t.traceFlags=e}}}()),E},e.setTraceCtx=function(e){E=e||null},Je(e,"addUnloadCb",(function(){return _}),"add")}))};function io(e,t,n,r){Ae(e,(function(e){if(e&&e[t])if(n)setTimeout((function(){return r(e)}),0);else try{r(e)}catch{}}))}var oo=function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;Dt(e,this,(function(e){e[N]=function(t){e.listeners.push(t)},e[k]=function(t){for(var n=De(e.listeners,t);n>-1;)e.listeners.splice(n,1),n=De(e.listeners,t)},e[M]=function(t){io(e.listeners,M,!0,(function(e){e[M](t)}))},e[L]=function(t,n){io(e.listeners,L,!0,(function(e){e[L](t,n)}))},e[F]=function(t,n){io(e.listeners,F,n,(function(e){e[F](t,n)}))},e[q]=function(t){t&&(n||!t.isChildEvt())&&io(e.listeners,q,!1,(function(e){t.isAsync?setTimeout((function(){return e[q](t)}),0):e[q](t)}))}}))},so=function(e){function t(){var n=e.call(this)||this;return Dt(t,n,(function(e,t){function n(t){var n=e.getNotifyMgr();n&&n.eventsDiscarded([t],2)}e.initialize=function(e,n,r,i){t.initialize(e,n,r||new Pn(e),i||new oo(e))},e.track=function(r){qn(e.getPerfMgr(),(function(){return"AppInsightsCore:track"}),(function(){null===r&&(n(r),Xe("Invalid telemetry item")),function(e){fe(e.name)&&(n(e),Xe("telemetry name required"))}(r),t.track(r)}),(function(){return{item:r}}),!r.sync)}})),n}return v(t,e),t}(ro),ao=tt({CRITICAL:1,WARNING:2}),co=tt({BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105,InstrumentationKeyDeprecation:106}),uo="_aiHooks",lo=["req","rsp","hkErr","fnErr"];function po(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n);n++);}function ho(e,t,n,r,i){i>=0&&i<=2&&po(e,(function(e,o){var s=e.cbks,a=s[lo[i]];if(a){t.ctx=function(){return r[o]=r[o]||{}};try{a.apply(t.inst,n)}catch(e){var c=t.err;try{var u=s[lo[2]];u&&(t.err=e,u.apply(t.inst,n))}catch{}finally{t.err=c}}}}))}function fo(e,t,n){var r=null;return e&&(ge(e,t)?r=e:n&&(r=fo(de(e),t,!1))),r}function mo(e,t,n,r){var i=n&&n[uo];if(!i){var o=function(e){return function(){var t=arguments,n=e.h,r={name:e.n,inst:this,ctx:null,set:function(e,n){(t=s([],t))[e]=n,o=s([r],t)}},i=[],o=s([r],t);function s(e,t){return po(t,(function(t){e.push(t)})),e}r.evt=Yt("event"),ho(n,r,o,i,0);var a=e.f;if(a)try{r.rslt=a.apply(this,t)}catch(e){throw r.err=e,ho(n,r,o,i,3),e}return ho(n,r,o,i,1),r.rslt}}(i={i:0,n:t,f:n,h:[]});o[uo]=i,e[t]=o}var s={id:i.i,cbks:r,rm:function(){var e=this.id;po(i.h,(function(t,n){if(t.id===e)return i.h.splice(n,1),1}))}};return i.i++,i.h.push(s),s}function go(e,n,r,i){if(void 0===i&&(i=!0),e&&n&&r){var o=fo(e,n,i);if(o){var s=o[n];if(typeof s===t)return mo(o,n,s,r)}}return null}function vo(e,t,n,r){void 0===r&&(r=!0);var i=null;return po(t,(function(t){var o=go(e,t,n,r);o&&(i||(i=[]),i.push(o))})),i}e.AppInsightsCore=so,e.BaseCore=ro,e.BaseTelemetryPlugin=Qi,e.CoreUtils=fi,e.DiagnosticLogger=Pn,e.EventHelper=gi,e.EventsDiscardedReason=nt,e.InstrumentEvent=function(e,t,n,r){if(e&&t&&n){var i=fo(e,t,r)||e;if(i)return mo(i,t,i[t],n)}return null},e.InstrumentFunc=go,e.InstrumentFuncs=vo,e.InstrumentProto=function(e,t,n){return e?go(e[i],t,n,!1):null},e.InstrumentProtos=function(e,t,n){return e?vo(e[i],t,n,!1):null},e.LoggingSeverity=ao,e.MinChannelPriorty=100,e.NotificationManager=oo,e.PerfEvent=Mn,e.PerfManager=Ln,e.ProcessTelemetryContext=function(e,t,n,r){var i=Ui(e,t,n,r);Ze(this,i,qe(i))},e.Undefined=li,e._InternalLogMessage=On,e._InternalMessageId=co,e.__getRegisteredEvents=function(e,t,n){var r=[],i=Gr.get(e,kr,{},!1),o=Wr(t,n);return be(i,(function(e,t){Ae(t,(function(e){(!o.type||o.type===e.evtName.type)&&(!o.ns||o.ns==o.ns)&&r.push({name:e.evtName.type+(e.evtName.ns?"."+e.evtName.ns:""),handler:e.handler})}))})),r},e._legacyCookieMgr=vi,e._logInternalMessage=function(e,t,n){In(e).logInternalMessage(t,n)},e._throwInternal=An,e._warnToConsole=Dn,e.addEventHandler=ri,e.addEventListeners=si,e.addPageHideEventListener=function e(t,n,r){var i=Jr(Ur,r),o=oi([Lr],t,n,i);return(!n||-1===De(n,Mr))&&(o=oi([Mr],(function(e){var n=tn();t&&n&&"hidden"===n.visibilityState&&t(e)}),n,i)||o),!o&&n&&(o=e(t,null,r)),o},e.addPageShowEventListener=function e(t,n,r){var i=Jr(Br,r),o=oi([Fr],t,n,i);return!(o=oi([Mr],(function(e){var n=tn();t&&n&&"visible"===n.visibilityState&&t(e)}),n,i)||o)&&n&&(o=e(t,null,r)),o},e.addPageUnloadEventListener=function(e,t,n){return si([jr,qr,Lr],e,t,n)},e.areCookiesSupported=Sr,e.arrForEach=Ae,e.arrIndexOf=De,e.arrMap=Ne,e.arrReduce=ke,e.attachEvent=ti,e.canUseCookies=function(e){return vi(null,e).isEnabled()},e.createClassFromInterface=function(e){return function(){var t=this;e&&be(e,(function(e,n){t[e]=n}))}},e.createCookieMgr=Er,e.createEnumMap=function(e){var t={};return be(e,(function(e,n){t[e]=e,t[n]=e})),Be(t)},e.createEnumStyle=tt,e.createProcessTelemetryContext=Ui,e.createTraceParent=function(e,t,n,r){return{version:Ci(r,2,Ei)?r:bi,traceId:xi(e)?e:hi(),spanId:Pi(t)?t:hi().substr(0,16),traceFlags:n>=0&&n<=255?n:1}},e.createUniqueNamespace=rr,e.createUnloadHandlerContainer=$i,e.createValueMap=function(e){var t={};return be(e,(function(e,n){t[e]=n[1],t[n[0]]=n[1]})),Be(t)},e.dateNow=ze,e.deepFreeze=Be,e.deleteCookie=function(e,t){return vi(null,e).del(t)},e.detachEvent=ni,e.disableCookies=yi,e.doPerf=qn,e.dumpObj=fn,e.eventOff=ei,e.eventOn=Zr,e.findMetaTag=vn,e.findNamedServerTiming=yn,e.findW3cTraceParent=function(){var e="traceparent",t=Oi(vn(e));return t||(t=Oi(yn(e))),t},e.formatTraceParent=function(e){if(e){var t=Ri(e.traceFlags);Ci(t,2)||(t="01");var n=e.version||bi;return"00"!==n&&"ff"!==n&&(n=bi),"".concat(n,"-").concat(Ti(e.traceId,32,Si),"-").concat(Ti(e.spanId,16,wi),"-").concat(t)}return""},e.generateW3CId=hi,e.getConsole=an,e.getCookie=function(e,t){return vi(null,e).get(t)},e.getCrypto=dn,e.getDebugExt=wn,e.getDebugListener=Cn,e.getDocument=tn,e.getExceptionName=Ge,e.getGblPerfMgr=jn,e.getGlobal=h,e.getGlobalInst=Yt,e.getHistory=function(){return on()?history:Yt("history")},e.getIEVersion=function(e){if(void 0===e&&(e=null),!e){var t=rn()||{};e=t?(t.userAgent||_).toLowerCase():_}var n=(e||_).toLowerCase();if(Se(n,Vt)){var r=tn()||{};return Math.max(parseInt(n.split(Vt)[1]),r.documentMode||0)}if(Se(n,Ht)){var i=parseInt(n.split(Ht)[1]);if(i)return i+4}return null},e.getJSON=ln,e.getLocation=sn,e.getMsCrypto=pn,e.getNavigator=rn,e.getPerformance=cn,e.getSetValue=$e,e.getWindow=Zt,e.hasDocument=en,e.hasHistory=on,e.hasJSON=un,e.hasNavigator=nn,e.hasOwnProperty=ge,e.hasWindow=Jt,e.initializePlugins=Ni,e.isArray=Ce,e.isBeaconsSupported=function(){return null===Qt&&(Qt=nn()&&Boolean(rn().sendBeacon)),Qt},e.isBoolean=xe,e.isDate=we,e.isError=Te,e.isFetchSupported=function(e){var t=!1;try{t=!!Yt("fetch");var n=Yt("Request");t&&e&&n&&(t=Xt(n,"keepalive"))}catch{}return t},e.isFunction=ye,e.isIE=hn,e.isNotNullOrUndefined=me,e.isNotTruthy=We,e.isNotUndefined=function(e){return!he(e)},e.isNullOrUndefined=fe,e.isNumber=Oe,e.isObject=ve,e.isReactNative=function(){var e=rn();return!(!e||!e.product)&&"ReactNative"===e.product},e.isSafari=function(e){if(!e||!Re(e)){var t=rn()||{};e=t?(t.userAgent||_).toLowerCase():_}return(e||_).toLowerCase().indexOf("safari")>=0},e.isSampledFlag=function(e){return!!Ii(e)&&1==(1&e.traceFlags)},e.isString=Re,e.isSymbol=function(e){return"symbol"==typeof e},e.isTruthy=Qe,e.isTypeof=pe,e.isUndefined=he,e.isValidSpanId=Pi,e.isValidTraceId=xi,e.isValidTraceParent=Ii,e.isXhrSupported=mn,e.mergeEvtNamespace=Jr,e.mwcRandom32=Xn,e.mwcRandomSeed=Qn,e.newGuid=di,e.newId=Yn,e.normalizeJsName=_e,e.objCreate=m,e.objDefineAccessors=je,e.objExtend=et,e.objForEachKey=be,e.objFreeze=Ve,e.objKeys=qe,e.objSeal=He,e.objToString=function(e){return ie.call(e)},e.optimizeObject=function(e){return e&&c&&(e=s(c({},e))),e},e.parseTraceParent=Oi,e.perfNow=pi,e.proxyAssign=function(e,t,n){if(e&&t&&ve(e)&&ve(t)){var r=function(r){if(Re(r)){var i=t[r];ye(i)?(!n||n(r,!0,t,e))&&(e[r]=Ye(t,r)):(!n||n(r,!1,t,e))&&(ge(e,r)&&delete e[r],je(e,r,(function(){return t[r]}),(function(e){t[r]=e}))||(e[r]=i))}};for(var i in t)r(i)}return e},e.proxyFunctionAs=Je,e.proxyFunctions=Ze,e.random32=Wn,e.randomValue=$n,e.removeEventHandler=ii,e.removeEventListeners=ai,e.removePageHideEventListener=function(e,t){var n=Jr(Ur,t);ai([Lr],e,n),ai([Mr],null,n)},e.removePageShowEventListener=function(e,t){var n=Jr(Br,t);ai([Fr],e,n),ai([Mr],null,n)},e.removePageUnloadEventListener=function(e,t){ai([jr,qr,Lr],e,t)},e.safeGetCookieMgr=function(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t.cookieCfg;n=r[pr]?r[pr]:Er(t)}return n||(n=_r(t,(e||{}).logger)),n},e.safeGetLogger=xn,e.setCookie=function(e,t,n,r){vi(null,e).set(t,n,null,r)},e.setEnableEnvMocks=function(e){$t=e},e.setGblPerfMgr=function(e){kn=e},e.setValue=Ke,e.sortPlugins=ki,e.strContains=Se,e.strEndsWith=Ee,e.strFunction=t,e.strObject=n,e.strPrototype=i,e.strStartsWith=function(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=te?e[B](t):function(e,t){var n=!1,r=t?t.length:0;if(e&&r&&e.length>=r&&!(n=e===t)){for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;n=!0}return n}(e,t)),n},e.strTrim=Me,e.strUndefined=r,e.throwError=Xe,e.toISOString=Ie,e.uaDisallowsSameSiteNone=xr,e.unloadComponents=function(e,t,n,r){var i=0;return function r(){for(;i<e.length;){var o=e[i++];if(o){var s=o._doUnload||o[x];if(ye(s)&&!0===s.call(o,t,n,r))return!0}}}()},e.useXDomainRequest=function(){return null===Wt&&(Wt=typeof XDomainRequest!==r)&&mn()&&(Wt=Wt&&!Xt(Yt(zt),"withCredentials")),Wt},function(e,t,n){var r=Object.defineProperty;if(r)try{return r(e,t,n)}catch{}n&&void 0!==typeof n.value&&(e[t]=n.value)}(e,"__esModule",{value:!0})},"object"==typeof n&&typeof s<"u"?a(n):(i=[t],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o))})),T=b(((i,s)=>{var a;a=function(){"use strict";var e="constructor",t="prototype",n="function",r="_dynInstFuncs",i="_isDynProxy",o="_dynClass",s="_dynInstChk",a=s,c="_dfOpts",u="_unknown_",l="__proto__",d="_dyn"+l,p="_dynInstProto",h="useBaseInst",f="setInstFuncs",m=Object,g=m.getPrototypeOf,v=m.getOwnPropertyNames,y=0;function _(e,n){return e&&m[t].hasOwnProperty.call(e,n)}function b(e){return e&&(e===m[t]||e===Array[t])}function E(e){return b(e)||e===Function[t]}function S(n){var r;if(n){if(g)return g(n);var i=n[l]||n[t]||(n[e]?n[e][t]:null);r=n[d]||i,_(n,d)||(delete n[p],r=n[d]=n[p]||n[d],n[p]=i)}return r}function w(e,t){var n=[];if(v)n=v(e);else for(var r in e)"string"==typeof r&&_(e,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function C(t,r,i){return r!==e&&typeof t[r]===n&&(i||_(t,r))}function T(e){throw new TypeError("DynamicProto: "+e)}function R(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function O(e,t,c,u,l){if(!b(e)){var d=c[r]=c[r]||{},p=d[t]=d[t]||{};!1!==d[a]&&(d[a]=!!l),w(c,(function(t){C(c,t,!1)&&c[t]!==u[t]&&(p[t]=c[t],delete c[t],(!_(e,t)||e[t]&&!e[t][i])&&(e[t]=function(e,t){var c=function(){var i=function(e,t,i,c){var u=null;if(e&&_(i,o)){var l=e[r]||{};if((u=(l[i[o]]||{})[t])||T("Missing ["+t+"] "+n),!u[s]&&!1!==l[a]){for(var d=!_(e,t),p=S(e),h=[];d&&p&&!E(p)&&!R(h,p);){var f=p[t];if(f){d=f===c;break}h.push(p),p=S(p)}try{d&&(e[t]=u),u[s]=1}catch{l[a]=!1}}}return u}(this,t,e,c)||function(e,t,r){var i=t[e];return i===r&&(i=S(t)[e]),typeof i!==n&&T("["+e+"] is not a "+n),i}(t,e,c);return i.apply(this,arguments)};return c[i]=1,c}(e,t)))}))}}function x(n,r){return _(n,t)?n.name||r||u:((n||{})[e]||{}).name||r||u}function P(e,n,s,u){_(e,t)||T("theClass is an invalid class definition.");var l=e[t];(function(e,t){if(g){for(var n=[],r=S(t);r&&!E(r)&&!R(n,r);){if(r===e)return!0;n.push(r),r=S(r)}return!1}return!0})(l,n)||T("["+x(e)+"] is not in class hierarchy of ["+x(n)+"]");var d=null;_(l,o)?d=l[o]:(d="_dynCls$"+x(e,"_")+"$"+y,y++,l[o]=d);var p=P[c],m=!!p[h];m&&u&&void 0!==u[h]&&(m=!!u[h]);var v=function(e){var t={};return w(e,(function(n){!t[n]&&C(e,n,!1)&&(t[n]=e[n])})),t}(n),b=function(e,t,n,s){function c(e,t,n){var c=t[n];if(c[i]&&s){var u=e[r]||{};!1!==u[a]&&(c=(u[t[o]]||{})[n]||c)}return function(){return c.apply(e,arguments)}}var u={};w(n,(function(e){u[e]=c(t,n,e)}));for(var l=S(e),d=[];l&&!E(l)&&!R(d,l);)w(l,(function(e){!u[e]&&C(l,e,!g)&&(u[e]=c(t,l,e))})),d.push(l),l=S(l);return u}(l,n,v,m);s(n,b);var I=!!g&&!!p[f];I&&u&&(I=!!u[f]),O(l,d,n,v,!1!==I)}return P[c]={setInstFuncs:!0,useBaseInst:!0},P},"object"==typeof i&&typeof s<"u"?s.exports=a():void 0===(o="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=o)})),R=b(((s,a)=>{var c;c=function(e,t,n,r){"use strict";var i,o,s=(o=r)&&"object"==typeof o&&"default"in o?o.default:o,a=n.createEnumStyle({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),c=n.createEnumStyle({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),u=n.createEnumStyle({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),l=n.createEnumStyle({Normal:1,Critical:2}),d=n.createEnumStyle({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),p=n.objFreeze(t.__assignFn(t.__assignFn({},n._InternalMessageId),n.createEnumStyle({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),h="3.2.3",f="1DS-Web-JS-"+h,m="withCredentials",g=((i={})[0]=0,i[2]=6,i[1]=1,i[3]=7,i[4098]=6,i[4097]=1,i[4099]=7,i),v=null,y=Boolean(n.getDocument()),_=Boolean(n.getWindow());function b(e){return!(""===e||n.isNullOrUndefined(e))}function E(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return""}function S(){return null===v&&(v=!n.isUndefined(Uint8Array)&&!function(){var e=n.getNavigator();if(!n.isUndefined(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t.indexOf("safari")>=0||t.indexOf("firefox")>=0)&&t.indexOf("chrome")<0)return!0}return!1}()&&!n.isReactNative()),v}function w(e){return!!(e&&n.isNumber(e)&&e>=1&&e<=4)}function C(e,t,r){if(!t&&!b(t)||"string"!=typeof e)return null;var i=typeof t;if("string"===i||"number"===i||"boolean"===i||n.isArray(t))t={value:t};else if("object"!==i||t.hasOwnProperty("value")){if(n.isNullOrUndefined(t.value)||""===t.value||!n.isString(t.value)&&!n.isNumber(t.value)&&!n.isBoolean(t.value)&&!n.isArray(t.value))return null}else t={value:r?JSON.stringify(t):t};if(n.isArray(t.value)&&!M(t.value))return null;if(!n.isNullOrUndefined(t.kind)){if(n.isArray(t.value)||!k(t.kind))return null;t.value=t.value.toString()}return t}function T(e,t,r){var i=-1;if(!n.isUndefined(e))if(t>0&&(32===t?i=8192:t<=13&&(i=t<<5)),function(e){return e>=0&&e<=9}(r))-1===i&&(i=0),i|=r;else{var o=g[F(e)]||-1;-1!==i&&-1!==o?i|=o:6===o&&(i=o)}return i}function R(){n.safeGetCookieMgr(null).setEnabled(!1)}function O(e,t,r){n.areCookiesSupported(null)&&n.safeGetCookieMgr(null).set(e,t,86400*r,null,"/")}function x(e){n.areCookiesSupported(null)&&n.safeGetCookieMgr(null).del(e)}function P(e){return n.areCookiesSupported(null)?I(n.safeGetCookieMgr(null),e):""}function I(e,t,n){var r;return void 0===n&&(n=!0),e&&(r=e.get(t),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||""}function A(e){void 0===e&&(e="D");var t=n.newGuid();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,"")),t}function D(e,t,r,i,o){var s={},a=!1,c=0,u=arguments.length,l=arguments;for("[object Boolean]"===Object[n.strPrototype].toString.call(l[0])&&(a=l[0],c++);c<u;c++)e=l[c],n.objForEachKey(e,(function(e,t){a&&t&&n.isObject(t)?n.isArray(t)?(s[e]=s[e]||[],n.arrForEach(t,(function(t,r){t&&n.isObject(t)?s[e][r]=D(!0,s[e][r],t):s[e][r]=t}))):s[e]=D(!0,s[e],t):s[e]=t}));return s}var N=n.perfNow;function k(e){return 0===e||e>0&&e<=13||32===e}function M(e){return e.length>0}function L(e,t){var n=e;n.timings=n.timings||{},n.timings.processTelemetryStart=n.timings.processTelemetryStart||{},n.timings.processTelemetryStart[t]=N()}function F(e){var r=0;if(null!=e){var i=typeof e;"string"===i?r=1:"number"===i?r=2:"boolean"===i?r=3:i===t.strShimObject&&(r=4,n.isArray(e)?(r=4096,e.length>0&&(r|=F(e[0]))):n.hasOwnProperty(e,"value")&&(r=8192|F(e.value)))}return r}var q={Version:h,FullVersionString:f,strUndefined:n.strUndefined,strObject:n.strObject,Undefined:n.strUndefined,arrForEach:n.arrForEach,arrIndexOf:n.arrIndexOf,arrMap:n.arrMap,arrReduce:n.arrReduce,objKeys:n.objKeys,toISOString:n.toISOString,isReactNative:n.isReactNative,isString:n.isString,isNumber:n.isNumber,isBoolean:n.isBoolean,isFunction:n.isFunction,isArray:n.isArray,isObject:n.isObject,strTrim:n.strTrim,isDocumentObjectAvailable:y,isWindowObjectAvailable:_,isValueAssigned:b,getTenantId:E,isBeaconsSupported:n.isBeaconsSupported,isUint8ArrayAvailable:S,isLatency:w,sanitizeProperty:C,getISOString:n.toISOString,useXDomainRequest:n.useXDomainRequest,getCommonSchemaMetaData:T,cookieAvailable:n.areCookiesSupported,disallowsSameSiteNone:n.uaDisallowsSameSiteNone,setCookie:O,deleteCookie:x,getCookie:P,createGuid:A,extend:D,getTime:N,isValueKind:k,isArrayValid:M,objDefineAccessors:n.objDefineAccessors,addPageUnloadEventListener:n.addPageUnloadEventListener,setProcessTelemetryTimings:L,addEventHandler:n.addEventHandler,getFieldValueType:F,strEndsWith:n.strEndsWith,objForEachKey:n.objForEachKey},j={_canUseCookies:void 0,isTypeof:n.isTypeof,isUndefined:n.isUndefined,isNullOrUndefined:n.isNullOrUndefined,hasOwnProperty:n.hasOwnProperty,isFunction:n.isFunction,isObject:n.isObject,isDate:n.isDate,isArray:n.isArray,isError:n.isError,isString:n.isString,isNumber:n.isNumber,isBoolean:n.isBoolean,toISOString:n.toISOString,arrForEach:n.arrForEach,arrIndexOf:n.arrIndexOf,arrMap:n.arrMap,arrReduce:n.arrReduce,strTrim:n.strTrim,objCreate:t.objCreateFn,objKeys:n.objKeys,objDefineAccessors:n.objDefineAccessors,addEventHandler:n.addEventHandler,dateNow:n.dateNow,isIE:n.isIE,disableCookies:R,newGuid:n.newGuid,perfNow:n.perfNow,newId:n.newId,randomValue:n.randomValue,random32:n.random32,mwcRandomSeed:n.mwcRandomSeed,mwcRandom32:n.mwcRandom32,generateW3CId:n.generateW3CId},U="version",B="properties",V=function(e){function r(){var t=e.call(this)||this;return t.pluginVersionStringArr=[],t.pluginVersionString="",s(r,t,(function(e,t){(!e.logger||!e.logger.queue)&&(e.logger=new n.DiagnosticLogger({loggingLevelConsole:1})),e.initialize=function(r,i,o,s){n.doPerf(e,(function(){return"AppInsightsCore.initialize"}),(function(){if(r){r.endpointUrl||(r.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var a=r.propertyStorageOverride;if(a&&(!a.getProperty||!a.setProperty))throw new Error("Invalid property storage override passed.");r.channels&&n.arrForEach(r.channels,(function(t){t&&n.arrForEach(t,(function(t){if(t.identifier&&t.version){var n=t.identifier+"="+t.version;e.pluginVersionStringArr.push(n)}}))}))}e.getWParam=function(){return typeof document<"u"?0:-1},i&&n.arrForEach(i,(function(t){if(t&&t.identifier&&t.version){var n=t.identifier+"="+t.version;e.pluginVersionStringArr.push(n)}})),e.pluginVersionString=e.pluginVersionStringArr.join(";");try{t.initialize(r,i,o,s),e.pollInternalLogs("InternalLog")}catch(t){var c=e.logger,u=n.dumpObj(t);-1!==u.indexOf("channels")&&(u+="\n - Channels must be provided through config.channels only!"),c.throwInternal(1,514,"SDK Initialization Failed - no telemetry will be sent: "+u)}}),(function(){return{config:r,extensions:i,logger:o,notificationManager:s}}))},e.track=function(r){n.doPerf(e,(function(){return"AppInsightsCore.track"}),(function(){var n=r;if(n){n.timings=n.timings||{},n.timings.trackStart=N(),w(n.latency)||(n.latency=1);var i=n.ext=n.ext||{};i.sdk=i.sdk||{},i.sdk.ver=f;var o=n.baseData=n.baseData||{};o[B]||(o[B]={});var s=o[B];s[U]||(s[U]=""),""!==e.pluginVersionString&&(s[U]=e.pluginVersionString)}t.track(n)}),(function(){return{item:r}}),!r.sync)}})),t}return t.__extendsFn(r,e),r}(n.AppInsightsCore),H=function(e){function r(){var t=e.call(this)||this;return s(r,t,(function(e,t){e.initialize=function(r,i,o,s){r&&!r.endpointUrl&&(r.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/"),e.getWParam=function(){return y?0:-1};try{t.initialize(r,i,o,s)}catch(t){n._throwInternal(e.logger,1,514,"Initialization Failed: "+n.dumpObj(t)+"\n - Note: Channels must be provided through config.channels only")}},e.track=function(e){var n=e;if(n){var r=n.ext=n.ext||{};r.sdk=r.sdk||{},r.sdk.ver=f}t.track(n)}})),t}return t.__extendsFn(r,e),r}(n.BaseCore),z=n.isFunction;function G(e,t,n){return function(r){e[t]=r,n()}}var K=function(){function e(t){var n=0,r=null,i=[];function o(){if(i.length>0){var e=i.slice();i=[],setTimeout((function(){for(var t=0,n=e.length;t<n;++t)try{e[t]()}catch{}}),0)}}function a(e){0===n&&(r=e,n=1,o())}function c(e){0===n&&(r=e,n=2,o())}s(e,this,(function(t){t.then=function(t,s){return new e((function(a,c){!function(t,s,a,c){i.push((function(){var i;try{(i=1===n?z(t)?t(r):r:z(s)?s(r):r)instanceof e?i.then(a,c):2!==n||z(s)?a(i):c(i)}catch(e){return void c(e)}})),0!==n&&o()}(t,s,a,c)}))},t.catch=function(e){return t.then(null,e)}})),function(){if(!z(t))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{t(a,c)}catch(e){c(e)}}()}return e.resolve=function(t){return t instanceof e?t:t&&z(t.then)?new e((function(e,n){try{t.then(e,n)}catch(e){n(e)}})):new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){if(t&&t.length)return new e((function(e,n){try{for(var r=[],i=0,o=0;o<t.length;o++){var s=t[o];s&&z(s.then)?(i++,s.then(G(r,o,(function(){0==--i&&e(r)})),n)):r[o]=s}0===i&&setTimeout((function(){e(r)}),0)}catch(e){n(e)}}))},e.race=function(t){return new e((function(e,n){if(t&&t.length)try{for(var r=function(r){var i=t[r];i&&z(i.then)?i.then(e,n):setTimeout((function(){e(i)}),0)},i=0;i<t.length;i++)r(i)}catch(e){n(e)}}))},e}(),$=0,W=[],Q=[],X=[];function Y(){return(new Date).getTime()}var J=function(){function e(t,r){var i=0,o=(t||"<unnamed>")+"."+$;function a(e){var t=n.getGlobal();t&&t.QUnit&&console&&console.log("ESPromiseScheduler["+o+"] "+e)}function c(e){r&&r.warnToConsole("ESPromiseScheduler["+o+"] "+e)}$++,s(e,this,(function(e){var t=null,n=0;function r(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return e.splice(n,1)[0];return null}e.scheduleEvent=function(e,s,u){var l=o+"."+n;n++,s&&(l+="-("+s+")");var d=l+"{"+i+"}";i++;var p,h,f,m={evt:null,tm:Y(),id:d,isRunning:!1,isAborted:!1};return m.evt=t?(p=m,h=t,f=new K((function(e,t){var n=Y()-h.tm,i=h.id;a("["+l+"] is waiting for ["+i+":"+n+" ms] to complete before starting -- ["+Q.length+"] waiting and ["+W.length+"] running"),p.abort=function(e){p.abort=null,r(Q,l),p.isAborted=!0,t(new Error(e))},h.evt.then((function(n){r(Q,l),E(p).then(e,t)}),(function(n){r(Q,l),E(p).then(e,t)}))})),Q.push(p),f):E(m),(t=m).evt._schId=d,m.evt;function g(e){for(var t=Y(),n=t-6e5,r=e.length,i=0;i<r;){var o=e[i];if(o&&o.tm<n){var s=null;o.abort?(s="Aborting ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",o.abort(s)):s="Removing ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",c(s),e.splice(i,1),r--}else i++}}function v(e,n){var i=!1,o=r(W,e);if(o||(o=r(X,e),i=!0),o){o.to&&(clearTimeout(o.to),o.to=null);var s=Y()-o.tm;n?i?c("Timed out event ["+e+"] finally complete -- "+s+" ms"):a("Promise ["+e+"] Complete -- "+s+" ms"):(X.push(o),c("Event ["+e+"] Timed out and removed -- "+s+" ms"))}else a("Failed to remove ["+e+"] from running queue");t&&t.id===e&&(t=null),g(W),g(Q),g(X)}function y(e,t){return function(n){return v(e,!0),t&&t(n),n}}function _(e,t,n,r){t.then((function(t){return t instanceof K?(a("Event ["+e+"] returned a promise -- waiting"),_(e,t,n,r),t):y(e,n)(t)}),y(e,r))}function b(e,t){var n=e.id;return new K((function(r,i){a("Event ["+n+"] Starting -- waited for "+(e.wTm||"--")+" ms"),e.isRunning=!0,e.abort=function(t){e.abort=null,e.isAborted=!0,v(n,!1),i(new Error(t))};var o=t(n);o instanceof K?(u&&(e.to=setTimeout((function(){v(n,!1),i(new Error("Timed out after ["+u+"] ms"))}),u)),_(n,o,(function(t){a("Event ["+n+"] Resolving after "+(Y()-e.tm)+" ms"),r(t)}),i)):(a("Promise ["+n+"] Auto completed as the start action did not return a promise"),r())}))}function E(t){var n=Y();return t.wTm=n-t.tm,t.tm=n,t.isAborted?K.reject(new Error("["+l+"] was aborted")):(W.push(t),b(t,e))}}}))}return e.incomplete=function(){return W},e.waitingToStart=function(){return Q},e}(),Z=function(){function e(e){var t=this,r={},i=[],o=[];function s(e,t){var s,a=r[e];if(a&&(s=a[t]),!s&&null!==s){if(n.isString(e)&&n.isString(t))if(o.length>0){for(var c=0;c<o.length;c++)if(o[c].handleField(e,t)){s={canHandle:!0,fieldHandler:o[c]};break}}else 0===i.length&&(s={canHandle:!0});if(!s&&null!==s)for(s=null,c=0;c<i.length;c++)if(i[c].handleField(e,t)){s={canHandle:!0,handler:i[c],fieldHandler:null};break}a||(a=r[e]={}),a[t]=s}return s}function a(e,t,r,i,o,s){if(e.handler)return e.handler.property(t,r,o,s);if(!n.isNullOrUndefined(o.kind)){if(4096==(4096&i)||!k(o.kind))return null;o.value=o.value.toString()}return u(e.fieldHandler,t,r,i,o)}function c(e,t,n){return b(n)?{value:n}:null}function u(e,r,i,o,s){if(s&&e){var a=e.getSanitizer(r,i,o,s.kind,s.propertyType);if(a)if(4===o){var l={},d=s.value;n.objForEachKey(d,(function(t,n){var o=r+"."+i;if(b(n)){var s=c(0,0,n);(s=u(e,o,t,F(n),s))&&(l[t]=s.value)}})),s.value=l}else{var p={path:r,name:i,type:o,prop:s,sanitizer:t};s=a.call(t,p)}}return s}e&&o.push(e),t.addSanitizer=function(e){e&&(i.push(e),r={})},t.addFieldSanitizer=function(e){e&&(o.push(e),r={})},t.handleField=function(e,t){var n=s(e,t);return!!n&&n.canHandle},t.value=function(e,t,r,i){var o=s(e,t);if(o&&o.canHandle){if(!o||!o.canHandle)return null;if(o.handler)return o.handler.value(e,t,r,i);if(!n.isString(t)||n.isNullOrUndefined(r)||""===r)return null;var u=null,l=F(r);if(8192==(8192&l)){var d=-8193&l;if(!b((u=r).value)||1!==d&&2!==d&&3!==d&&4096!=(4096&d))return null}else 1===l||2===l||3===l||4096==(4096&l)?u=c(0,0,r):4===l&&(u=c(0,0,i?JSON.stringify(r):r));if(u)return a(o,e,t,l,u,i)}return null},t.property=function(e,t,r,i){var o=s(e,t);if(!o||!o.canHandle||!n.isString(t)||n.isNullOrUndefined(r)||!b(r.value))return null;var c=F(r.value);return 0===c?null:a(o,e,t,c,r,i)}}return e.getFieldType=F,e}();e.BaseTelemetryPlugin=n.BaseTelemetryPlugin,e.DiagnosticLogger=n.DiagnosticLogger,e.EventHelper=n.EventHelper,e.EventsDiscardedReason=n.EventsDiscardedReason,e.InternalAppInsightsCore=n.AppInsightsCore,e.InternalBaseCore=n.BaseCore,e.LoggingSeverity=n.LoggingSeverity,e.MinChannelPriorty=n.MinChannelPriorty,e.NotificationManager=n.NotificationManager,e.PerfEvent=n.PerfEvent,e.PerfManager=n.PerfManager,e.ProcessTelemetryContext=n.ProcessTelemetryContext,e.Undefined=n.strUndefined,e._InternalLogMessage=n._InternalLogMessage,e._InternalMessageId=n._InternalMessageId,e.__getRegisteredEvents=n.__getRegisteredEvents,e._throwInternal=n._throwInternal,e.addEventHandler=n.addEventHandler,e.addEventListeners=n.addEventListeners,e.addPageHideEventListener=n.addPageHideEventListener,e.addPageShowEventListener=n.addPageShowEventListener,e.addPageUnloadEventListener=n.addPageUnloadEventListener,e.areCookiesSupported=n.areCookiesSupported,e.arrForEach=n.arrForEach,e.arrIndexOf=n.arrIndexOf,e.arrMap=n.arrMap,e.arrReduce=n.arrReduce,e.attachEvent=n.attachEvent,e.cookieAvailable=n.areCookiesSupported,e.createCookieMgr=n.createCookieMgr,e.createEnumStyle=n.createEnumStyle,e.createProcessTelemetryContext=n.createProcessTelemetryContext,e.createTraceParent=n.createTraceParent,e.createUniqueNamespace=n.createUniqueNamespace,e.createUnloadHandlerContainer=n.createUnloadHandlerContainer,e.dateNow=n.dateNow,e.detachEvent=n.detachEvent,e.disallowsSameSiteNone=n.uaDisallowsSameSiteNone,e.doPerf=n.doPerf,e.dumpObj=n.dumpObj,e.eventOff=n.eventOff,e.eventOn=n.eventOn,e.findW3cTraceParent=n.findW3cTraceParent,e.formatTraceParent=n.formatTraceParent,e.generateW3CId=n.generateW3CId,e.getConsole=n.getConsole,e.getCrypto=n.getCrypto,e.getDocument=n.getDocument,e.getExceptionName=n.getExceptionName,e.getGlobal=n.getGlobal,e.getGlobalInst=n.getGlobalInst,e.getHistory=n.getHistory,e.getIEVersion=n.getIEVersion,e.getISOString=n.toISOString,e.getJSON=n.getJSON,e.getLocation=n.getLocation,e.getMsCrypto=n.getMsCrypto,e.getNavigator=n.getNavigator,e.getPerformance=n.getPerformance,e.getSetValue=n.getSetValue,e.getWindow=n.getWindow,e.hasDocument=n.hasDocument,e.hasHistory=n.hasHistory,e.hasJSON=n.hasJSON,e.hasNavigator=n.hasNavigator,e.hasOwnProperty=n.hasOwnProperty,e.hasWindow=n.hasWindow,e.isArray=n.isArray,e.isBeaconsSupported=n.isBeaconsSupported,e.isBoolean=n.isBoolean,e.isDate=n.isDate,e.isError=n.isError,e.isFetchSupported=n.isFetchSupported,e.isFunction=n.isFunction,e.isIE=n.isIE,e.isNotTruthy=n.isNotTruthy,e.isNullOrUndefined=n.isNullOrUndefined,e.isNumber=n.isNumber,e.isObject=n.isObject,e.isReactNative=n.isReactNative,e.isSampledFlag=n.isSampledFlag,e.isString=n.isString,e.isTruthy=n.isTruthy,e.isTypeof=n.isTypeof,e.isUndefined=n.isUndefined,e.isValidSpanId=n.isValidSpanId,e.isValidTraceId=n.isValidTraceId,e.isValidTraceParent=n.isValidTraceParent,e.isXhrSupported=n.isXhrSupported,e.mergeEvtNamespace=n.mergeEvtNamespace,e.newGuid=n.newGuid,e.newId=n.newId,e.normalizeJsName=n.normalizeJsName,e.objCreate=n.objCreate,e.objDefineAccessors=n.objDefineAccessors,e.objForEachKey=n.objForEachKey,e.objFreeze=n.objFreeze,e.objKeys=n.objKeys,e.objSeal=n.objSeal,e.optimizeObject=n.optimizeObject,e.parseTraceParent=n.parseTraceParent,e.perfNow=n.perfNow,e.proxyAssign=n.proxyAssign,e.proxyFunctionAs=n.proxyFunctionAs,e.proxyFunctions=n.proxyFunctions,e.random32=n.random32,e.randomValue=n.randomValue,e.removeEventHandler=n.removeEventHandler,e.removeEventListeners=n.removeEventListeners,e.removePageHideEventListener=n.removePageHideEventListener,e.removePageShowEventListener=n.removePageShowEventListener,e.removePageUnloadEventListener=n.removePageUnloadEventListener,e.safeGetCookieMgr=n.safeGetCookieMgr,e.safeGetLogger=n.safeGetLogger,e.setEnableEnvMocks=n.setEnableEnvMocks,e.setValue=n.setValue,e.strContains=n.strContains,e.strEndsWith=n.strEndsWith,e.strFunction=n.strFunction,e.strObject=n.strObject,e.strPrototype=n.strPrototype,e.strStartsWith=n.strStartsWith,e.strTrim=n.strTrim,e.strUndefined=n.strUndefined,e.throwError=n.throwError,e.toISOString=n.toISOString,e.useXDomainRequest=n.useXDomainRequest,e.AppInsightsCore=V,e.BaseCore=H,e.CoreUtils=j,e.ESPromise=K,e.ESPromiseScheduler=J,e.EventLatency=c,e.EventPersistence=l,e.EventPropertyType=u,e.FullVersionString=f,e.TraceLevel=d,e.Utils=q,e.ValueKind=a,e.ValueSanitizer=Z,e.Version=h,e._ExtendedInternalMessageId=p,e.createGuid=A,e.deleteCookie=x,e.disableCookies=R,e.extend=D,e.getCommonSchemaMetaData=T,e.getCookie=P,e.getCookieValue=I,e.getFieldValueType=F,e.getTenantId=E,e.getTime=N,e.isArrayValid=M,e.isChromium=function(){return!!n.getGlobalInst("chrome")},e.isDocumentObjectAvailable=y,e.isLatency=w,e.isUint8ArrayAvailable=S,e.isValueAssigned=b,e.isValueKind=k,e.isWindowObjectAvailable=_,e.openXhr=function(e,t,n,r,i,o){function s(e,t,n){try{e[t]=n}catch{}}void 0===r&&(r=!1),void 0===i&&(i=!1);var a=new XMLHttpRequest;return r&&s(a,"Microsoft_ApplicationInsights_BypassAjaxInstrumentation",r),n&&s(a,m,n),a.open(e,t,!i),n&&s(a,m,n),!i&&o&&s(a,"timeout",o),a},e.sanitizeProperty=C,e.setCookie=O,e.setProcessTelemetryTimings=L,function(e,t,n){var r=Object.defineProperty;if(r)try{return r(e,t,n)}catch{}n&&void 0!==typeof n.value&&(e[t]=n.value)}(e,"__esModule",{value:!0})},"object"==typeof s&&typeof a<"u"?c(s,w(),C(),T()):(i=[t,n(623),n(4719),n(2314)],void 0===(o="function"==typeof(r=c)?r.apply(t,i):r)||(e.exports=o))})),O=b(((n,s)=>{var a;a=function(e){"use strict";var t="function",n="object",r="undefined",i="prototype",o="hasOwnProperty",s="default",a=Object,c=a[i],u=a.assign,l=a.create,d=a.defineProperty,p=c[o],h=null;function f(e){return void 0===e&&(e=!0),(!h||!e)&&(typeof globalThis!==r&&globalThis&&(h=globalThis),typeof self!==r&&self&&(h=self),typeof window!==r&&window&&(h=window),typeof global!==r&&global&&(h=global)),h}function m(e){throw new TypeError(e)}function g(e){if(l)return l(e);if(null==e)return{};var r=typeof e;function o(){}return r!==n&&r!==t&&m("Object prototype may only be an Object:"+e),o[i]=e,new o}var v=(f()||{}).Symbol,y=(f()||{}).Reflect,_=!!y,b="decorate",E="metadata",S="getOwnPropertySymbols",w="iterator",C=u||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])c[o].call(t,i)&&(e[i]=t[i]);return e},T=function(e,t){return(T=a.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[o](n)&&(e[n]=t[n])})(e,t)};function R(e,n){function r(){this.constructor=e}typeof n!==t&&null!==n&&m("Class extends value "+String(n)+" is not a constructor or null"),T(e,n),e[i]=null===n?g(n):(r[i]=n[i],new r)}function O(e,t,n,r){void 0===r&&(r=n),l?d(e,r,{enumerable:!0,get:function(){return t[n]}}):e[r]=t[n]}e.ObjAssign=u,e.ObjClass=a,e.ObjCreate=l,e.ObjDefineProperty=d,e.ObjHasOwnProperty=p,e.ObjProto=c,e.__assignFn=C,e.__createBindingFn=O,e.__decorateFn=function(e,n,r,i){var o,s=arguments.length,c=s<3?n:null===i?i=a.getOwnPropertyDescriptor(n,r):i;if(_&&typeof y[b]===t)c=y[b](e,n,r,i);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(c=(s<3?o(c):s>3?o(n,r,c):o(n,r))||c);return s>3&&c&&d(n,r,c),c},e.__exportStarFn=function(e,t){for(var n in e)n!==s&&!p.call(t,n)&&O(t,e,n)},e.__exposeGlobalTsLib=function(){var e,t,n,r,i=f()||{};t=C,n=R,r=O,(e=i).__assign||(e.__assign=u||t),e.__extends||(e.__extends=n),e.__createBinding||(e.__createBinding=r),__assign||(__assign=i.__assign),__extends||(__extends=i.__extends),__createBinding||(__createBinding=i.__createBinding)},e.__extendsFn=R,e.__importDefaultFn=function(e){return e&&e.__esModule?e:{strDefault:e}},e.__importStarFn=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)n!==s&&Object.prototype.hasOwnProperty.call(e,n)&&O(t,e,n);return l?d(t,s,{enumerable:!0,value:e}):t[s]=e,t},e.__makeTemplateObjectFn=function(e,t){return d?d(e,"raw",{value:t}):e.raw=t,e},e.__metadataFn=function(e,n){if(_&&y[E]===t)return y[E](e,n)},e.__paramFn=function(e,t){return function(n,r){t(n,r,e)}},e.__readFn=function(e,n){var r=typeof v===t&&e[v[w]];if(!r)return e;var i,o,s=r.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return a},e.__restFn=function(e,n){var r={};for(var i in e)p.call(e,i)&&n.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&typeof a[S]===t)for(var o=0,s=a[S](e);o<s.length;o++)n.indexOf(s[o])<0&&c.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]]);return r},e.__spreadArrayFn=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},e.__spreadArraysFn=function(){for(var e=arguments,t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;var i=Array(t),o=0;for(n=0;n<r;n++)for(var s=e[n],a=0,c=s.length;a<c;a++,o++)i[o]=s[a];return i},e.__valuesFn=function(e){var n=typeof v===t&&v[w],r=n&&e[n],i=0;return r?r.call(e):e&&"number"==typeof e.length?{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}:void m(n?"Object is not iterable.":"Symbol.iterator is not defined.")},e.getGlobal=f,e.objCreateFn=g,e.strDefault=s,e.strShimFunction=t,e.strShimHasOwnProperty=o,e.strShimObject=n,e.strShimPrototype=i,e.strShimUndefined=r,e.throwTypeError=m,function(e,t,n){var r=Object.defineProperty;if(r)try{return r(e,t,n)}catch{}n&&void 0!==typeof n.value&&(e[t]=n.value)}(e,"__esModule",{value:!0})},"object"==typeof n&&typeof s<"u"?a(n):(i=[t],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o))})),x=b(((s,a)=>{var c;c=function(e,t,n,r){"use strict";var i,o=(i=n)&&"object"==typeof i&&"default"in i?i.default:i,s="REAL_TIME",a="NEAR_REAL_TIME",c="BEST_EFFORT",u="POST",l="drop",d="requeue",p="application/x-json-stream",h="cache-control",f="content-type",m="kill-duration",g="time-delta-millis",v="client-version",y="client-id",_="time-delta-to-apply-millis",b="upload-time",E="apikey",S="AuthMsaDeviceTicket",w="AuthXToken",C="msfpc";function T(e){var t=(e.ext||{}).intweb;return t&&r.isValueAssigned(t[C])?t[C]:null}function R(e){for(var t=null,n=0;null===t&&n<e.length;n++)t=T(e[n]);return t}var O=function(){function e(t,n){var i=n?[].concat(n):[],o=this,s=R(i);o.iKey=function(){return t},o.Msfpc=function(){return s||""},o.count=function(){return i.length},o.events=function(){return i},o.addEvent=function(e){return!!e&&(i.push(e),s||(s=T(e)),!0)},o.split=function(n,o){var a;if(n<i.length){var c=i.length-n;r.isNullOrUndefined(o)||(c=o<c?o:c),a=i.splice(n,c),s=R(i)}return new e(t,a)}}return e.create=function(t,n){return new e(t,n)},e}(),x=2e6,P=Math.min(x,65e3),I="metadata",A="f",D=/\./,N=function e(t,n,i,s){var a="data",c="baseData",u=!!s,l=n,d={};o(e,this,(function(e){function n(e,t,o,s,a,c,p){r.objForEachKey(e,(function(e,h){var f=null;if(h||r.isValueAssigned(h)){var m=o,g=e,v=a,y=t;if(u&&!s&&D.test(e)){var _=e.split("."),b=_.length;if(b>1){v&&(v=v.slice());for(var E=0;E<b-1;E++){var S=_[E];y=y[S]=y[S]||{},m+="."+S,v&&v.push(S)}g=_[b-1]}}var w=s&&function(e,t){var n=d[e];return void 0===n&&(e.length>=7&&(n=r.strStartsWith(e,"ext.metadata")||r.strStartsWith(e,"ext.web")),d[e]=n),n}(m);if(f=!w&&l&&l.handleField(m,g)?l.value(m,g,h,i):r.sanitizeProperty(g,h,i)){var C=f.value;if(y[g]=C,c&&c(v,g,f),p&&"object"==typeof C&&!r.isArray(C)){var T=v;T&&(T=T.slice()).push(g),n(h,C,m+"."+g,s,T,c,p)}}}}))}e.createPayload=function(e,t,n,r,i,o){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:n,isBeacon:r,sendType:o,sendReason:i}},e.appendPayload=function(n,i,o){var s=n&&i&&!n.overflow;return s&&r.doPerf(t,(function(){return"Serializer:appendPayload"}),(function(){for(var t=i.events(),s=n.payloadBlob,a=n.numEvents,c=!1,u=[],l=[],d=n.isBeacon,p=d?65e3:3984588,h=d?P:x,f=0,m=0;f<t.length;){var g=t[f];if(g){if(a>=o){n.overflow=i.split(f);break}var v=e.getEventBlob(g);if(v&&v.length<=h){var y=v.length;if(s.length+y>p){n.overflow=i.split(f);break}s&&(s+="\n"),s+=v,++m>20&&(s.substr(0,1),m=0),c=!0,a++}else v?u.push(g):l.push(g),t.splice(f,1),f--}f++}if(u&&u.length>0&&n.sizeExceed.push(O.create(i.iKey(),u)),l&&l.length>0&&n.failedEvts.push(O.create(i.iKey(),l)),c){n.batches.push(i),n.payloadBlob=s,n.numEvents=a;var _=i.iKey();-1===r.arrIndexOf(n.apiKeys,_)&&n.apiKeys.push(_)}}),(function(){return{payload:n,theBatch:{iKey:i.iKey(),evts:i.events()},max:o}})),s},e.getEventBlob=function(e){try{return r.doPerf(t,(function(){return"Serializer.getEventBlob"}),(function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+r.getTenantId(e.iKey);var i={},o=e.ext;o&&(t.ext=i,r.objForEachKey(o,(function(e,t){n(t,i[e]={},"ext."+e,!0,null,null,!0)})));var s=t[a]={};s.baseType=e.baseType;var u=s[c]={};return n(e.baseData,u,c,!1,[c],(function(e,t,n){k(i,e,t,n)}),!0),n(e.data,s,a,!1,[],(function(e,t,n){k(i,e,t,n)}),!0),JSON.stringify(t)}),(function(){return{item:e}}))}catch{return null}}}))};function k(e,t,n,i){if(i&&e){var o=r.getCommonSchemaMetaData(i.value,i.kind,i.propertyType);if(o>-1){var s=e[I];s||(s=e[I]={f:{}});var a=s[A];if(a||(a=s[A]={}),t)for(var c=0;c<t.length;c++){var u=t[c];a[u]||(a[u]={f:{}});var l=a[u][A];l||(l=a[u][A]={}),a=l}a=a[n]={},r.isArray(i.value)?a.a={t:o}:a.t=o}}}function M(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)}var L,F=function e(){var t={};o(e,this,(function(e){e.setKillSwitchTenants=function(e,n){if(e&&n)try{var i=function(e){var t=[];return e&&r.arrForEach(e,(function(e){t.push(r.strTrim(e))})),t}(e.split(","));if("this-request-only"===n)return i;for(var o=1e3*parseInt(n,10),s=0;s<i.length;++s)t[i[s]]=r.dateNow()+o}catch{return[]}return[]},e.isTenantKilled=function(e){var n=t,i=r.strTrim(e);return void 0!==n[i]&&n[i]>r.dateNow()||(delete n[i],!1)}}))},q=function e(){var t=!0,n=!0,r=!0,i="use-collector-delta",s=!1;o(e,this,(function(e){e.allowRequestSending=function(){return t},e.firstRequestSent=function(){r&&(r=!1,s||(t=!1))},e.shouldAddClockSkewHeaders=function(){return n},e.getClockSkewHeaderValue=function(){return i},e.setClockSkew=function(e){s||(e?(i=e,n=!0,s=!0):n=!1,t=!0)}}))},j="sendAttempt",U="&NoResponseBody=true",B=((L={})[1]=d,L[100]=d,L[200]="sent",L[8004]=l,L[8003]=l,L),V={},H={};function z(e,t,n){V[e]=t,!1!==n&&(H[t]=e)}function G(e){try{return e.responseText}catch{}return""}function K(e,t){var n=!1;if(e&&t){var i=r.objKeys(e);if(i&&i.length>0)for(var o=t.toLowerCase(),s=0;s<i.length;s++){var a=i[s];if(a&&r.hasOwnProperty(t,a)&&a.toLowerCase()===o){n=!0;break}}}return n}function $(e,t,n,r){t&&n&&n.length>0&&(r&&V[t]?(e.hdrs[V[t]]=n,e.useHdrs=!0):e.url+="&"+t+"="+n)}z(S,S,!1),z(v,v),z(y,"Client-Id"),z(E,E),z(_,_),z(b,b),z(w,w);var W=function e(t,n,i,s,a){this._responseHandlers=[];var c,d,S,w,T,R,O="?cors=true&"+f.toLowerCase()+"="+p,x=new F,P=!1,I=new q,A=!1,D=0,k=!0,L=[],V={},z=[],W=null,Q=!1,X=!1,Y=!1;o(e,this,(function(e){var o=!0;function F(e,t){for(var n=0,i=null,o=0;null==i&&o<e.length;)1===(n=e[o])?r.useXDomainRequest()?i=q:r.isXhrSupported()&&(i=Z):2===n&&r.isFetchSupported(t)?i=J:A&&3===n&&r.isBeaconsSupported()&&(i=te),o++;return i?{_transport:n,_isSync:t,sendPOST:i}:null}function q(e,t,n){var r=new XDomainRequest;r.open(u,e.urlString),e.timeout&&(r.timeout=e.timeout),r.onload=function(){var e=G(r);ee(t,200,{},e),pe(e)},r.onerror=function(){ee(t,400,{})},r.ontimeout=function(){ee(t,500,{})},r.onprogress=function(){},n?r.send(e.data):a.set((function(){r.send(e.data)}),0)}function J(e,t,n){var i,s=e.urlString,c=!1,l=!1,d=((i={body:e.data,method:u}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,i);n&&(d.keepalive=!0,2===e._sendReason&&(c=!0,s+=U)),o&&(d.credentials="include"),e.headers&&r.objKeys(e.headers).length>0&&(d.headers=e.headers),fetch(s,d).then((function(e){var n={},r="";e.headers&&e.headers.forEach((function(e,t){n[t]=e})),e.body&&e.text().then((function(e){r=e})),l||(l=!0,ee(t,e.status,n,r),pe(r))})).catch((function(e){l||(l=!0,ee(t,0,{}))})),c&&!l&&(l=!0,ee(t,200,{})),!l&&e.timeout>0&&a.set((function(){l||(l=!0,ee(t,500,{}))}),e.timeout)}function Z(e,t,n){var i=e.urlString;function s(e,t,n){if(!e[n]&&t&&t.getResponseHeader){var i=t.getResponseHeader(n);i&&(e[n]=r.strTrim(i))}return e}function a(e,n){ee(t,e.status,function(e){var t={};return e.getAllResponseHeaders?t=function(e){var t={};if(r.isString(e)){var n=r.strTrim(e).split(/[\r\n]+/);r.arrForEach(n,(function(e){if(e){var n=e.indexOf(": ");if(-1!==n){var i=r.strTrim(e.substring(0,n)).toLowerCase(),o=r.strTrim(e.substring(n+1));t[i]=o}else t[r.strTrim(e)]=1}}))}return t}(e.getAllResponseHeaders()):(t=s(t,e,g),t=s(t,e,m),t=s(t,e,"kill-duration-seconds")),t}(e),n)}n&&e.disableXhrSync&&(n=!1);var c=r.openXhr(u,i,o,!0,n,e.timeout);r.objForEachKey(e.headers,(function(e,t){c.setRequestHeader(e,t)})),c.onload=function(){var e=G(c);a(c,e),pe(e)},c.onerror=function(){a(c)},c.ontimeout=function(){a(c)},c.send(e.data)}function ee(e,t,n,i){try{e(t,n,i)}catch(e){r._throwInternal(c.diagLog(),2,518,r.dumpObj(e))}}function te(e,t,n){var i=200,o=e._thePayload,s=e.urlString+U;try{var a=r.getNavigator();if(!a.sendBeacon(s,e.data))if(o){var u=[];r.arrForEach(o.batches,(function(e){if(u&&e&&e.count()>0){for(var t=e.events(),n=0;n<t.length;n++)if(!a.sendBeacon(s,W.getEventBlob(t[n]))){u.push(e.split(n));break}}else u.push(e.split(0))})),he(u,8003,o.sendType,!0)}else i=0}catch(e){c.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+r.dumpObj(e)),i=0}finally{ee(t,i,{},"")}}function ne(e){return 2===e||3===e}function re(e){return X&&ne(e)&&(e=2),e}function ie(){return!P&&D<n}function oe(){var e=z;return z=[],e}function se(e,t,n){var r=!1;return e&&e.length>0&&!P&&d[t]&&W&&(r=0!==t||ie()&&(n>0||I.allowRequestSending())),r}function ae(e){var t={};return e&&r.arrForEach(e,(function(e,n){t[n]={iKey:e.iKey(),evts:e.events()}})),t}function ce(e,n,i,o,s){if(e&&0!==e.length){if(P)return void he(e,1,o);o=re(o);try{var a=e,u=0!==o;r.doPerf(S,(function(){return"HttpManager:_sendBatches"}),(function(a){a&&(e=e.slice(0));for(var c=[],l=null,p=r.getTime(),h=d[o]||(u?d[1]:d[0]),f=(X||ne(o)||h&&3===h._transport)&&!k&&A&&r.isBeaconsSupported();se(e,o,n);){var m=e.shift();m&&m.count()>0&&(x.isTenantKilled(m.iKey())?c.push(m):(l=l||W.createPayload(n,i,u,f,s,o),W.appendPayload(l,m,t)?null!==l.overflow&&(e=[l.overflow].concat(e),l.overflow=null,le(l,p,r.getTime(),s),p=r.getTime(),l=null):(le(l,p,r.getTime(),s),p=r.getTime(),e=[m].concat(e),l=null)))}l&&le(l,p,r.getTime(),s),e.length>0&&(z=e.concat(z)),he(c,8004,o)}),(function(){return{batches:ae(a),retryCount:n,isTeardown:i,isSynchronous:u,sendReason:s,useSendBeacon:ne(o),sendType:o}}),!u)}catch(e){r._throwInternal(c.diagLog(),2,48,"Unexpected Exception sending batch: "+r.dumpObj(e))}}}function ue(e,t,n){e[t]=e[t]||{},e[t][c.identifier]=n}function le(t,n,o,s){if(t&&t.payloadBlob&&t.payloadBlob.length>0){var a=!!e.sendHook,u=d[t.sendType];!ne(t.sendType)&&t.isBeacon&&2===t.sendReason&&(u=d[2]||d[3]||u);var l=Y;(t.isBeacon||3===u._transport)&&(l=!1);var w=function(e,t){var n={url:O,hdrs:{},useHdrs:!1};t?(n.hdrs=r.extend(n.hdrs,V),n.useHdrs=r.objKeys(n.hdrs).length>0):r.objForEachKey(V,(function(e,t){H[e]?$(n,H[e],t,!1):(n.hdrs[e]=t,n.useHdrs=!0)})),$(n,y,"NO_AUTH",t),$(n,v,r.FullVersionString,t);var i="";r.arrForEach(e.apiKeys,(function(e){i.length>0&&(i+=","),i+=e})),$(n,E,i,t),$(n,b,r.dateNow().toString(),t);var o=function(e){for(var t=0;t<e.batches.length;t++){var n=e.batches[t].Msfpc();if(n)return encodeURIComponent(n)}return""}(e);if(r.isValueAssigned(o)&&(n.url+="&ext.intweb.msfpc="+o),I.shouldAddClockSkewHeaders()&&$(n,_,I.getClockSkewHeaderValue(),t),S.getWParam){var s=S.getWParam();s>=0&&(n.url+="&w="+s)}for(var a=0;a<L.length;a++)n.url+="&"+L[a].name+"="+L[a].value;return n}(t,l);l=l||w.useHdrs;var C=r.getTime();r.doPerf(S,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var d=0;d<t.batches.length;d++)for(var v=t.batches[d].events(),y=0;y<v.length;y++){var _=v[y];if(Q){var b=_.timings=_.timings||{};ue(b,"sendEventStart",C),ue(b,"serializationStart",n),ue(b,"serializationCompleted",o)}_[j]>0?_[j]++:_[j]=1}he(t.batches,1e3+(s||0),t.sendType,!0);var E={data:t.payloadBlob,urlString:w.url,headers:w.hdrs,_thePayload:t,_sendReason:s,timeout:T};r.isUndefined(R)||(E.disableXhrSync=!!R),l&&(K(E.headers,h)||(E.headers[h]="no-cache, no-store"),K(E.headers,f)||(E.headers[f]=p));var O=null;u&&(O=function(n){I.firstRequestSent();var o=function(n,o){!function(t,n,o,s){var a=9e3,u=null,l=!1,d=!1;try{var p=!0;if(typeof t!==r.strUndefined){if(n){I.setClockSkew(n[g]);var h=n[m]||n["kill-duration-seconds"];r.arrForEach(x.setKillSwitchTenants(n["kill-tokens"],h),(function(e){r.arrForEach(o.batches,(function(t){if(t.iKey()===e){u=u||[];var n=t.split(0);o.numEvents-=n.count(),u.push(n)}}))}))}if(200==t||204==t)return void(a=200);(!function(e){return!(e>=300&&e<500&&408!=e&&429!=e||501==e||505==e)}(t)||o.numEvents<=0)&&(p=!1),a=9e3+t%1e3}if(p){a=100;var f=o.retryCnt;0===o.sendType&&(f<i?(l=!0,de((function(){0===o.sendType&&D--,ce(o.batches,f+1,o.isTeardown,X?2:o.sendType,5)}),X,M(f))):(d=!0,X&&(a=8001)))}}finally{l||(I.setClockSkew(),function(t,n,i,o){try{o&&c._backOffTransmission(),200===n&&(!o&&!t.isSync&&c._clearBackOff(),function(e){if(Q){var t=r.getTime();r.arrForEach(e,(function(e){e&&e.count()>0&&function(e,t){Q&&r.arrForEach(e,(function(e){ue(e.timings=e.timings||{},"sendEventCompleted",t)}))}(e.events(),t)}))}}(t.batches)),he(t.batches,n,t.sendType,!0)}finally{0===t.sendType&&(D--,5!==i&&e.sendQueuedRequests(t.sendType,i))}}(o,a,s,d)),he(u,8004,o.sendType)}}(n,o,t,s)},a=t.isTeardown||t.isSync;try{u.sendPOST(n,o,a),e.sendListener&&e.sendListener(E,n,a,t.isBeacon)}catch(e){c.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+r.dumpObj(e)),ee(o,0,{})}}),r.doPerf(S,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(O)if(0===t.sendType&&D++,a&&!t.isBeacon&&3!==u._transport){var n={data:E.data,urlString:E.urlString,headers:r.extend({},E.headers),timeout:E.timeout,disableXhrSync:E.disableXhrSync},i=!1;r.doPerf(S,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{e.sendHook(n,(function(e){i=!0,!k&&!e._thePayload&&(e._thePayload=e._thePayload||E._thePayload,e._sendReason=e._sendReason||E._sendReason),O(e)}),t.isSync||t.isTeardown)}catch{i||O(E)}}))}else O(E)}))}),(function(){return{thePayload:t,serializationStart:n,serializationCompleted:o,sendReason:s}}),t.isSync)}t.sizeExceed&&t.sizeExceed.length>0&&he(t.sizeExceed,8003,t.sendType),t.failedEvts&&t.failedEvts.length>0&&he(t.failedEvts,8002,t.sendType)}function de(e,t,n){t?e():a.set(e,n)}function pe(t){var n=e._responseHandlers;try{for(var i=0;i<n.length;i++)try{n[i](t)}catch(e){r._throwInternal(c.diagLog(),1,519,"Response handler failed: "+e)}if(t){var o=JSON.parse(t);r.isValueAssigned(o.webResult)&&r.isValueAssigned(o.webResult[C])&&w.set("MSFPC",o.webResult[C],31536e3)}}catch{}}function he(e,t,n,i){if(e&&e.length>0&&s){var o=s[function(e){var t=B[e];return r.isValueAssigned(t)||(t="oth",e>=9e3&&e<=9999?t="rspFail":e>=8e3&&e<=8999?t=l:e>=1e3&&e<=1999&&(t="send")),t}(t)];if(o){var a=0!==n;r.doPerf(S,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){de((function(){try{o.call(s,e,t,a,n)}catch(e){r._throwInternal(c.diagLog(),1,74,"send request notification failed: "+e)}}),i||a,0)}),(function(){return{batches:ae(e),reason:t,isSync:a,sendSync:i,sendType:n}}),!a)}}}e.initialize=function(e,t,n,i,s){var a;s||(s={}),O=e+O,Y=!!r.isUndefined(s.avoidOptions)||!s.avoidOptions,S=t,w=t.getCookieMgr(),Q=!S.config.disableEventTimings;var u=!!S.config.enableCompoundKey;c=n;var l=s.valueSanitizer,p=s.stringifyObjects;r.isUndefined(s.enableCompoundKey)||(u=!!s.enableCompoundKey),T=s.xhrTimeout,R=s.disableXhrSync,A=!r.isReactNative(),W=new N(S,l,p,u);var h=i,f=s.alwaysUseXhrOverride?i:null,m=s.alwaysUseXhrOverride?i:null;if(!i){k=!1;var g=r.getLocation();g&&g.protocol&&"file:"===g.protocol.toLowerCase()&&(o=!1);var v=[];v=r.isReactNative()?[2,1]:[1,2,3];var y=s.transports;y&&(r.isNumber(y)?v=[y].concat(v):r.isArray(y)&&(v=y.concat(v))),i=F(v,!1),h=F(v,!0),i||c.diagLog().warnToConsole("No available transport to send events")}(a={})[0]=i,a[1]=h||F([1,2,3],!0),a[2]=f||F([3,2],!0)||h||F([1],!0),a[3]=m||F([2,3],!0)||h||F([1],!0),d=a},e._getDbgPlgTargets=function(){return[d[0],x,W,d]},e.addQueryStringParameter=function(e,t){for(var n=0;n<L.length;n++)if(L[n].name===e)return void(L[n].value=t);L.push({name:e,value:t})},e.addHeader=function(e,t){V[e]=t},e.canSendRequest=function(){return ie()&&I.allowRequestSending()},e.sendQueuedRequests=function(e,t){r.isUndefined(e)&&(e=0),X&&(e=re(e),t=2),se(z,e,0)&&ce(oe(),0,!1,e,t||0)},e.isCompletelyIdle=function(){return!P&&0===D&&0===z.length},e.setUnloading=function(e){X=e},e.addBatch=function(e){if(e&&e.count()>0){if(x.isTenantKilled(e.iKey()))return!1;z.push(e)}return!0},e.teardown=function(){z.length>0&&ce(oe(),0,!0,2,2)},e.pause=function(){P=!0},e.resume=function(){P=!1,e.sendQueuedRequests(0,4)},e.sendSynchronousBatch=function(e,t,n){e&&e.count()>0&&(r.isNullOrUndefined(t)&&(t=1),X&&(t=re(t),n=2),ce([e],0,!1,t,n||0))}}))};function Q(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout(e,t,n)}function X(e){clearTimeout(e)}function Y(e,t){return{set:e||Q,clear:t||X}}var J="eventsDiscarded",Z="overrideInstrumentationKey",ee="maxEventRetryAttempts",te="maxUnloadEventRetryAttempts",ne=function(e){function n(){var t=e.call(this)||this;t.identifier="PostChannel",t.priority=1011,t.version="3.2.3";var i,u,l,d,p,h,f,m,g=!1,v=[],y=null,_=!1,b=0,E=500,w=0,C=1e4,T={},R=s,x=null,P=null,I=0,A=0,D={},N=-1,k=!0,L=!1,F=6,q=2;return o(n,t,(function(e,t){function n(e){"beforeunload"!==(e||r.getWindow().event).type&&(L=!0,l.setUnloading(L)),K(2,2)}function o(e){L=!1,l.setUnloading(L)}function j(e,t){if(e.sendAttempt||(e.sendAttempt=0),e.latency||(e.latency=1),e.ext&&e.ext.trace&&delete e.ext.trace,e.ext&&e.ext.user&&e.ext.user.id&&delete e.ext.user.id,k&&(e.ext=r.optimizeObject(e.ext),e.baseData&&(e.baseData=r.optimizeObject(e.baseData)),e.data&&(e.data=r.optimizeObject(e.data))),e.sync)if(I||_)e.latency=3,e.sync=!1;else if(l)return k&&(e=r.optimizeObject(e)),void l.sendSynchronousBatch(O.create(e.iKey,[e]),!0===e.sync?1:e.sync,3);var n=e.latency,i=w,o=C;4===n&&(i=b,o=E);var s=!1;if(i<o)s=!X(e,t);else{var a=1,c=20;4===n&&(a=4,c=1),s=!0,function(e,t,n,i){for(;n<=t;){var o=$(e,t,!0);if(o&&o.count()>0){var s=o.split(0,i),a=s.count();if(a>0)return 4===n?b-=a:w-=a,le(J,[s],r.EventsDiscardedReason.QueueFull),!0}n++}return ne(),!1}(e.iKey,e.latency,a,c)&&(s=!X(e,t))}s&&ue(J,[e],r.EventsDiscardedReason.QueueFull)}function U(e,t,n){var r=re(e,t,n);return l.sendQueuedRequests(t,n),r}function B(){return w>0}function V(){if(N>=0&&re(N,0,h)&&l.sendQueuedRequests(0,h),b>0&&!P&&!_){var e=T[R][2];e>=0&&(P=z((function(){P=null,U(4,0,1),V()}),e))}var t=T[R][1];!x&&!y&&t>=0&&!_&&(B()?x=z((function(){x=null,U(0===A?3:1,0,1),A++,A%=2,V()}),t):A=0)}function H(){i=null,g=!1,v=[],y=null,_=!1,b=0,E=500,w=0,C=1e4,T={},R=s,x=null,P=null,I=0,A=0,u=null,D={},d=void 0,p=0,N=-1,h=null,k=!0,L=!1,F=6,q=2,f=null,m=Y(),l=new W(500,2,1,{requeue:ae,send:de,sent:pe,drop:he,rspFail:fe,oth:me},m),se(),D[4]={batches:[],iKeyMap:{}},D[3]={batches:[],iKeyMap:{}},D[2]={batches:[],iKeyMap:{}},D[1]={batches:[],iKeyMap:{}},ge()}function z(e,t){0===t&&I&&(t=1);var n=1e3;return I&&(n=M(I-1)),m.set(e,t*n)}function G(){return null!==x&&(m.clear(x),x=null,A=0,!0)}function K(e,t){G(),y&&(m.clear(y),y=null),_||U(1,e,t)}function $(e,t,n){var r=D[t];r||(r=D[t=1]);var i=r.iKeyMap[e];return!i&&n&&(i=O.create(e),r.batches.push(i),r.iKeyMap[e]=i),i}function Q(t,n){l.canSendRequest()&&!I&&(d>0&&w>d&&(n=!0),n&&null==y&&e.flush(t,null,20))}function X(e,t){k&&(e=r.optimizeObject(e));var n=e.latency,i=$(e.iKey,n,!0);return!!i.addEvent(e)&&(4!==n?(w++,t&&0===e.sendAttempt&&Q(!e.sync,p>0&&i.count()>=p)):b++,!0)}function ne(){for(var e=0,t=0,n=function(n){var i=D[n];i&&i.batches&&r.arrForEach(i.batches,(function(r){4===n?e+=r.count():t+=r.count()}))},i=1;i<=4;i++)n(i);w=t,b=e}function re(t,n,i){var o=!1,s=0===n;return!s||l.canSendRequest()?r.doPerf(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],n=4;n>=t;){var i=D[n];i&&i.batches&&i.batches.length>0&&(r.arrForEach(i.batches,(function(t){l.addBatch(t)?o=o||t&&t.count()>0:e=e.concat(t.events()),4===n?b-=t.count():w-=t.count()})),i.batches=[],i.iKeyMap={}),n--}e.length>0&&ue(J,e,r.EventsDiscardedReason.KillSwitch),o&&N>=t&&(N=-1,h=0)}),(function(){return{latency:t,sendType:n,sendReason:i}}),!s):(N=N>=0?Math.min(N,t):t,h=Math.max(h,i)),o}function ie(e,t){U(1,0,t),ne(),oe((function(){e&&e(),v.length>0?y=z((function(){y=null,ie(v.shift(),t)}),0):(y=null,V())}))}function oe(e){l.isCompletelyIdle()?e():y=z((function(){y=null,oe(e)}),.25)}function se(){(T={})[s]=[2,1,0],T[a]=[6,3,0],T[c]=[18,9,0]}function ae(t,n){var i=[],o=F;L&&(o=q),r.arrForEach(t,(function(t){t&&t.count()>0&&r.arrForEach(t.events(),(function(t){t&&(t.sync&&(t.latency=4,t.sync=!1),t.sendAttempt<o?(r.setProcessTelemetryTimings(t,e.identifier),j(t,!1)):i.push(t))}))})),i.length>0&&ue(J,i,r.EventsDiscardedReason.NonRetryableStatus),L&&K(2,2)}function ce(t,n){var i=e._notificationManager||{},o=i[t];if(o)try{o.apply(i,n)}catch(n){r._throwInternal(e.diagLog(),1,74,t+" notification failed: "+n)}}function ue(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t.length>0&&ce(e,[t].concat(n))}function le(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];t&&t.length>0&&r.arrForEach(t,(function(t){t&&t.count()>0&&ce(e,[t.events()].concat(n))}))}function de(e,t,n){e&&e.length>0&&ce("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==n])}function pe(e,t){le("eventsSent",e,t),V()}function he(e,t){le(J,e,t>=8e3&&t<=8999?t-8e3:r.EventsDiscardedReason.Unknown)}function fe(e){le(J,e,r.EventsDiscardedReason.NonRetryableStatus),V()}function me(e,t){le(J,e,r.EventsDiscardedReason.Unknown),V()}function ge(){p=i&&i.disableAutoBatchFlushLimit?0:Math.max(1500,C/6)}H(),e._getDbgPlgTargets=function(){return[l]},e.initialize=function(s,a,c){r.doPerf(a,(function(){return"PostChannel:initialize"}),(function(){var p=a;t.initialize(s,a,c);try{a.addUnloadCb,f=r.mergeEvtNamespace(r.createUniqueNamespace(e.identifier),a.evtNamespace&&a.evtNamespace());var h=e._getTelCtx();s.extensionConfig[e.identifier]=s.extensionConfig[e.identifier]||{},i=h.getExtCfg(e.identifier),m=Y(i.setTimeoutOverride,i.clearTimeoutOverride),k=!i.disableOptimizeObj&&r.isChromium(),function(e){var t=e.getWParam;e.getWParam=function(){var e=0;return i.ignoreMc1Ms0CookieProcessing&&(e|=2),e|t()}}(p),i.eventsLimitInMem>0&&(C=i.eventsLimitInMem),i.immediateEventLimit>0&&(E=i.immediateEventLimit),i.autoFlushEventsLimit>0&&(d=i.autoFlushEventsLimit),r.isNumber(i[ee])&&(F=i[ee]),r.isNumber(i[te])&&(q=i[te]),ge(),i.httpXHROverride&&i.httpXHROverride.sendPOST&&(u=i.httpXHROverride),r.isValueAssigned(s.anonCookieName)&&l.addQueryStringParameter("anoncknm",s.anonCookieName),l.sendHook=i.payloadPreprocessor,l.sendListener=i.payloadListener;var g=i.overrideEndpointUrl?i.overrideEndpointUrl:s.endpointUrl;e._notificationManager=s.extensionConfig.NotificationManager,l.initialize(g,e.core,e,u,i);var v=s.disablePageUnloadEvents||[];r.addPageUnloadEventListener(n,v,f),r.addPageHideEventListener(n,v,f),r.addPageShowEventListener(o,s.disablePageShowEvents,f)}catch(t){throw e.setInitialized(!1),t}}),(function(){return{coreConfig:s,core:a,extensions:c}}))},e.processTelemetry=function(t,n){r.setProcessTelemetryTimings(t,e.identifier);var o=(n=e._getTelCtx(n)).getExtCfg(e.identifier),s=!!i.disableTelemetry;o&&(s=s||!!o.disableTelemetry);var a=t;!s&&!g&&(i[Z]&&(a.iKey=i[Z]),o&&o[Z]&&(a.iKey=o[Z]),j(a,!0),L?K(2,2):V()),e.processNext(a,n)},e._doTeardown=function(e,t){K(2,2),g=!0,l.teardown(),r.removePageUnloadEventListener(null,f),r.removePageHideEventListener(null,f),r.removePageShowEventListener(null,f),H()},e.setEventQueueLimits=function(e,t){C=e>0?e:1e4,d=t>0?t:0,ge();var n=w>e;if(!n&&p>0)for(var i=1;!n&&i<=3;i++){var o=D[i];o&&o.batches&&r.arrForEach(o.batches,(function(e){e&&e.count()>=p&&(n=!0)}))}Q(!0,n)},e.pause=function(){G(),_=!0,l.pause()},e.resume=function(){_=!1,l.resume(),V()},e.addResponseHandler=function(e){l._responseHandlers.push(e)},e._loadTransmitProfiles=function(e){G(),se(),R=s,V(),r.objForEachKey(e,(function(e,t){var n=t.length;if(n>=2){var r=n>2?t[2]:0;if(t.splice(0,n-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var i=t[0]/t[1];t[0]=Math.ceil(i)*t[1]}r>=0&&t[1]>=0&&r>t[1]&&(r=t[1]),t.push(r),T[e]=t}}))},e.flush=function(e,t,n){if(void 0===e&&(e=!0),!_)if(n=n||1,e)null==y?(G(),re(1,0,n),y=z((function(){y=null,ie(t,n)}),0)):v.push(t);else{var r=G();U(1,1,n),null!=t&&t(),r&&V()}},e.setMsaAuthTicket=function(e){l.addHeader(S,e)},e.hasEvents=B,e._setTransmitProfile=function(e){R!==e&&void 0!==T[e]&&(G(),R=e,V())},e._backOffTransmission=function(){I<4&&(I++,G(),V())},e._clearBackOff=function(){I&&(I=0,G(),V())},r.objDefineAccessors(e,"_setTimeoutOverride",(function(){return m.set}),(function(e){m=Y(e,m.clear)})),r.objDefineAccessors(e,"_clearTimeoutOverride",(function(){return m.clear}),(function(e){m=Y(m.set,e)}))})),t}return t.__extendsFn(n,e),n}(r.BaseTelemetryPlugin);e.BE_PROFILE=c,e.NRT_PROFILE=a,e.PostChannel=ne,e.RT_PROFILE=s,function(e,t,n){var r=Object.defineProperty;if(r)try{return r(e,t,n)}catch{}n&&void 0!==typeof n.value&&(e[t]=n.value)}(e,"__esModule",{value:!0})},"object"==typeof s&&typeof a<"u"?c(s,O(),T(),R()):(i=[t,n(623),n(2314),n(9644)],void 0===(o="function"==typeof(r=c)?r.apply(t,i):r)||(e.exports=o))})),P=b(((e,t)=>{"use strict";var n=function(){function e(){}return e.info=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.enableDebug&&console.info(e.TAG+t,n)},e.warn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.disableWarnings||console.warn(e.TAG+t,n)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();t.exports=n})),I=b((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var r=Rr(),i=n(2361),o=function(){function e(){}return e.prototype.active=function(){var e=this,n=r.CorrelationContextManager.getCurrentContext();return t(t({},n),{getValue:function(t){return e._activeSymbol?t===e._activeSymbol&&n:(e._activeSymbol=t,n)},setValue:function(){}})},e.prototype.with=function(t,n){var i=t.parentSpanId,o=t.name,s=e._spanToContext(t,i,o);return r.CorrelationContextManager.runWithContext(s,n)()},e.prototype.bind=function(e){return"function"==typeof e?r.CorrelationContextManager.wrapCallback(e):(e instanceof i.EventEmitter&&r.CorrelationContextManager.wrapEmitter(e),e)},e.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},e._spanToContext=function(e,n,i){var o=n?"|"+e.spanContext().traceId+"."+n+".":e.spanContext().traceId,s=t(t({},e.spanContext()),{traceFlags:e.spanContext().traceFlags});return r.CorrelationContextManager.spanToContextObject(s,o,i)},e}();e.OpenTelemetryScopeManagerWrapper=o,e.AsyncScopeManager=new o})),A=b(((e,t)=>{var n;e=t.exports=$,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var h=a++;s[h]="(?:"+s[c]+"|"+s[l]+")";var f=a++;s[f]="(?:"+s[u]+"|"+s[l]+")";var m=a++;s[m]="(?:-("+s[h]+"(?:\\."+s[h]+")*))";var g=a++;s[g]="(?:-?("+s[f]+"(?:\\."+s[f]+")*))";var v=a++;s[v]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[v]+"(?:\\."+s[v]+")*))";var _=a++,b="v?"+s[d]+s[m]+"?"+s[y]+"?";s[_]="^"+b+"$";var E="[v=\\s]*"+s[p]+s[g]+"?"+s[y]+"?",S=a++;s[S]="^"+E+"$";var w=a++;s[w]="((?:<|>)?=?)";var C=a++;s[C]=s[u]+"|x|X|\\*";var T=a++;s[T]=s[c]+"|x|X|\\*";var R=a++;s[R]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[m]+")?"+s[y]+"?)?)?";var O=a++;s[O]="[v=\\s]*("+s[C]+")(?:\\.("+s[C]+")(?:\\.("+s[C]+")(?:"+s[g]+")?"+s[y]+"?)?)?";var x=a++;s[x]="^"+s[w]+"\\s*"+s[R]+"$";var P=a++;s[P]="^"+s[w]+"\\s*"+s[O]+"$";var I=a++;s[I]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var A=a++;s[A]="(?:~>?)";var D=a++;s[D]="(\\s*)"+s[A]+"\\s+",o[D]=new RegExp(s[D],"g");var N=a++;s[N]="^"+s[A]+s[R]+"$";var k=a++;s[k]="^"+s[A]+s[O]+"$";var M=a++;s[M]="(?:\\^)";var L=a++;s[L]="(\\s*)"+s[M]+"\\s+",o[L]=new RegExp(s[L],"g");var F=a++;s[F]="^"+s[M]+s[R]+"$";var q=a++;s[q]="^"+s[M]+s[O]+"$";var j=a++;s[j]="^"+s[w]+"\\s*("+E+")$|^$";var U=a++;s[U]="^"+s[w]+"\\s*("+b+")$|^$";var B=a++;s[B]="(\\s*)"+s[w]+"\\s*("+E+"|"+s[R]+")",o[B]=new RegExp(s[B],"g");var V=a++;s[V]="^\\s*("+s[R]+")\\s+-\\s+("+s[R]+")\\s*$";var H=a++;s[H]="^\\s*("+s[O]+")\\s+-\\s+("+s[O]+")\\s*$";var z,G=a++;for(s[G]="(<|>)?=?\\s*\\*",z=0;z<35;z++)n(z,s[z]),o[z]||(o[z]=new RegExp(s[z]));function K(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof $)return e;if("string"!=typeof e||e.length>r)return null;if(!(t.loose?o[S]:o[_]).test(e))return null;try{return new $(e,t)}catch{return null}}function $(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof $){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof $))return new $(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[S]:o[_]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=K,e.valid=function(e,t){var n=K(e,t);return n?n.version:null},e.clean=function(e,t){var n=K(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},e.SemVer=$,$.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},$.prototype.toString=function(){return this.version},$.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof $||(e=new $(e,this.options)),this.compareMain(e)||this.comparePre(e)},$.prototype.compareMain=function(e){return e instanceof $||(e=new $(e,this.options)),Q(this.major,e.major)||Q(this.minor,e.minor)||Q(this.patch,e.patch)},$.prototype.comparePre=function(e){if(e instanceof $||(e=new $(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return Q(r,i)}while(++t)},$.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new $(e,n).inc(t,r).version}catch{return null}},e.diff=function(e,t){if(Z(e,t))return null;var n=K(e),r=K(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},e.compareIdentifiers=Q;var W=/^[0-9]+$/;function Q(e,t){var n=W.test(e),r=W.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function X(e,t,n){return new $(e,n).compare(new $(t,n))}function Y(e,t,n){return X(e,t,n)>0}function J(e,t,n){return X(e,t,n)<0}function Z(e,t,n){return 0===X(e,t,n)}function ee(e,t,n){return 0!==X(e,t,n)}function te(e,t,n){return X(e,t,n)>=0}function ne(e,t,n){return X(e,t,n)<=0}function re(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Z(e,n,r);case"!=":return ee(e,n,r);case">":return Y(e,n,r);case">=":return te(e,n,r);case"<":return J(e,n,r);case"<=":return ne(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}e.rcompareIdentifiers=function(e,t){return Q(t,e)},e.major=function(e,t){return new $(e,t).major},e.minor=function(e,t){return new $(e,t).minor},e.patch=function(e,t){return new $(e,t).patch},e.compare=X,e.compareLoose=function(e,t){return X(e,t,!0)},e.rcompare=function(e,t,n){return X(t,e,n)},e.sort=function(t,n){return t.sort((function(t,r){return e.compare(t,r,n)}))},e.rsort=function(t,n){return t.sort((function(t,r){return e.rcompare(t,r,n)}))},e.gt=Y,e.lt=J,e.eq=Z,e.neq=ee,e.gte=te,e.lte=ne,e.cmp=re,e.Comparator=ie;var oe={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,n,r,i,o,s,a,c,u,l,d,p){return((t=ae(n)?"":ae(r)?">="+n+".0.0":ae(i)?">="+n+"."+r+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new se(t,n)}catch{return!1}return t.test(e)}function de(e,t,n,r){var i,o,s,a,c;switch(e=new $(e,r),t=new se(t,r),n){case">":i=Y,o=ne,s=J,a=">",c=">=";break;case"<":i=J,o=te,s=Y,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===oe&&(e=new ie(">=0.0.0")),d=d||e,p=p||e,i(e.semver,d.semver,r)?d=e:s(e.semver,p.semver,r)&&(p=e)})),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[j]:o[U],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new $(n[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new $(e,this.options)),re(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var n;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new se(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?o[H]:o[V];e=e.replace(r,ce),n("hyphen replace",e),e=e.replace(o[B],"$1$2$3"),n("comparator trim",e,o[B]),e=(e=(e=e.replace(o[D],"$1~")).replace(o[L],"$1^")).split(/\s+/).join(" ");var i=t?o[j]:o[U],s=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?o[q]:o[F];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?o[k]:o[N];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?o[P]:o[x];return e.replace(r,(function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=ae(i),u=c||ae(o),l=u||ae(s);return"="===r&&l&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&l?(u&&(o=0),s=0,">"===r?(r=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[G],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(i)}))),s.map((function(e){return new ie(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new $(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch{return null}return e.forEach((function(e){o.test(e)&&(!r||-1===i.compare(e))&&(i=new $(r=e,n))})),r},e.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch{return null}return e.forEach((function(e){o.test(e)&&(!r||1===i.compare(e))&&(i=new $(r=e,n))})),r},e.minVersion=function(e,t){e=new se(e,t);var n=new $("0.0.0");if(e.test(n)||(n=new $("0.0.0-0"),e.test(n)))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new $(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!n||Y(n,t))&&(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,n){return de(e,t,"<",n)},e.gtr=function(e,t,n){return de(e,t,">",n)},e.outside=de,e.prerelease=function(e,t){var n=K(e,t);return n&&n.prerelease.length?n.prerelease:null},e.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},e.coerce=function(e){if(e instanceof $)return e;if("string"!=typeof e)return null;var t=e.match(o[I]);return null==t?null:K(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),D=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=n(1017),r=A(),i=n(8188),o=Object.keys(process.binding("natives")),s=i.prototype.require;e.makePatchingRequire=function(e){var n={};return function(a){var c=s.apply(this,arguments);if(e[a]){var u=i._resolveFilename(a,this);if(n.hasOwnProperty(u))return n[u];var l=void 0;if(o.indexOf(a)<0)try{l=s.call(this,t.join(a,"package.json")).version}catch{return c}else l=process.version.substring(1);var d=l.indexOf("-");d>=0&&(l=l.substring(0,d));for(var p=c,h=0,f=e[a];h<f.length;h++){var m=f[h];r.satisfies(l,m.versionSpecifier)&&(p=m.patch(p,u))}return n[u]=p}return c}}})),N=b(((e,t)=>{t.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}})),k=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=D(),r=D();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var i=function(e){return!0},o=function(){function e(){this.version=N().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some((function(e){var t=e.filter;return!t||t(!1)}))},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var r={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,n.forEach((function(e){var t=e.listener,n=e.filter;try{n&&n(!0)&&t(r)}catch{}})),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,t,n){void 0===n&&(n=i),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:n})},e.prototype.unsubscribe=function(e,t,n){void 0===n&&(n=i);var r=this.subscribers[e];if(r)for(var o=0;o<r.length;++o)if(r[o].listener===t&&r[o].filter===n)return r.splice(o,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach((function(t){return delete e.knownPatches[t]}))},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(t(n))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new o,n(8188).prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject())),e.channel=global.diagnosticsSource})),M=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),L=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis="object"==typeof globalThis?globalThis:global})),F=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(L(),e)})),q=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(F(),e)})),j=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"})),U=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=j(),n=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function r(e){var t=new Set([e]),r=new Set,i=e.match(n);if(!i)return function(){return!1};var o=+i[1],s=+i[2],a=+i[3];if(null!=i[4])return function(t){return t===e};function c(e){return r.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var i=e.match(n);if(!i)return c(e);var l=+i[1],d=+i[2],p=+i[3];return null!=i[4]||o!==l?c(e):0===o?s===d&&a<=p?u(e):c(e):s<=d?u(e):c(e)}}e._makeCompatibilityCheck=r,e.isCompatible=r(t.VERSION)})),B=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=q(),n=j(),r=U(),i=n.VERSION.split(".")[0],o=Symbol.for("opentelemetry.js.api."+i),s=t._globalThis;e.registerGlobal=function(e,t,r,i){var a;void 0===i&&(i=!1);var c=s[o]=null!==(a=s[o])&&void 0!==a?a:{version:n.VERSION};if(!i&&c[e]){var u=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(u.stack||u.message),!1}return c.version!==n.VERSION?(u=new Error("@opentelemetry/api: All API registration versions must match"),r.error(u.stack||u.message),!1):(c[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+n.VERSION+"."),!0)},e.getGlobal=function(e){var t,n,i=null===(t=s[o])||void 0===t?void 0:t.version;if(i&&r.isCompatible(i))return null===(n=s[o])||void 0===n?void 0:n[e]},e.unregisterGlobal=function(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+n.VERSION+".");var r=s[o];r&&delete r[e]}})),V=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=B(),n=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("verbose",this._namespace,e)},e}();function r(e,n,r){var i=t.getGlobal("diag");if(i)return r.unshift(n),i[e].apply(i,r)}e.DiagComponentLogger=n})),H=b((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0,(t=e.DiagLogLevel||(e.DiagLogLevel={}))[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})),z=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=H();e.createLogLevelDiagLogger=function(e,n){function r(t,r){var i=n[t];return"function"==typeof i&&e>=r?i.bind(n):function(){}}return e<t.DiagLogLevel.NONE?e=t.DiagLogLevel.NONE:e>t.DiagLogLevel.ALL&&(e=t.DiagLogLevel.ALL),n=n||{},{error:r("error",t.DiagLogLevel.ERROR),warn:r("warn",t.DiagLogLevel.WARN),info:r("info",t.DiagLogLevel.INFO),debug:r("debug",t.DiagLogLevel.DEBUG),verbose:r("verbose",t.DiagLogLevel.VERBOSE)}}})),G=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=V(),n=z(),r=H(),i=B(),o=function(){function e(){function e(e){return function(){var t=i.getGlobal("diag");if(t)return t[e].apply(t,arguments)}}var o=this;o.setLogger=function(e,t){var s,a;if(void 0===t&&(t=r.DiagLogLevel.INFO),e===o){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return o.error(null!==(s=c.stack)&&void 0!==s?s:c.message),!1}var u=i.getGlobal("diag"),l=n.createLogLevelDiagLogger(t,e);if(u){var d=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+d),l.warn("Current logger will overwrite one already registered from "+d)}return i.registerGlobal("diag",l,o,!0)},o.disable=function(){i.unregisterGlobal("diag",o)},o.createComponentLogger=function(e){return new t.DiagComponentLogger(e)},o.verbose=e("verbose"),o.debug=e("debug"),o.info=e("info"),o.warn=e("warn"),o.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();e.DiagAPI=o})),K=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=new e(this._entries),i=0,o=t;i<o.length;i++){var s=o[i];r._entries.delete(s)}return r},e.prototype.clear=function(){return new e},e}();e.BaggageImpl=t})),$=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")})),W=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=G(),n=K(),r=$(),i=t.DiagAPI.instance();e.createBaggage=function(e){return void 0===e&&(e={}),new n.BaggageImpl(new Map(Object.entries(e)))},e.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(i.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:r.baggageEntryMetadataSymbol,toString:function(){return e}}}})),Q=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),X=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Y=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];e.DiagConsoleLogger=function(){function e(e){return function(){var t=arguments;if(console){var n=console[e];if("function"!=typeof n&&(n=console.log),"function"==typeof n)return n.apply(console,t)}}}for(var n=0;n<t.length;n++)this[t[n].n]=e(t[n].c)}})),J=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Y(),e),n(H(),e)})),Z=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},e.defaultTextMapSetter={set:function(e,t,n){null!=e&&(e[t]=n)}}})),ee=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),te=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ne=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0,e.createContextKey=function(e){return Symbol.for(e)};e.ROOT_CONTEXT=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}}})),re=b((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var n=ne(),r=function(){function e(){}return e.prototype.active=function(){return n.ROOT_CONTEXT},e.prototype.with=function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return n.call.apply(n,t([r],i))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();e.NoopContextManager=r})),ie=b((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var n=re(),r=B(),i=G(),o="context",s=new n.NoopContextManager,a=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return r.registerGlobal(o,e,i.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,t([e,n,r],o))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return r.getGlobal(o)||s},e.prototype.disable=function(){this._getContextManager().disable(),r.unregisterGlobal(o,i.DiagAPI.instance())},e}();e.ContextAPI=a})),oe=b((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0,(t=e.TraceFlags||(e.TraceFlags={}))[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})),se=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=oe();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}})),ae=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=se(),n=function(){function e(e){void 0===e&&(e=t.INVALID_SPAN_CONTEXT),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}();e.NonRecordingSpan=n})),ce=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=ne(),n=ae(),r=t.createContextKey("OpenTelemetry Context Key SPAN");function i(e){return e.getValue(r)||void 0}function o(e,t){return e.setValue(r,t)}e.getSpan=i,e.setSpan=o,e.deleteSpan=function(e){return e.deleteValue(r)},e.setSpanContext=function(e,t){return o(e,new n.NonRecordingSpan(t))},e.getSpanContext=function(e){var t;return null===(t=i(e))||void 0===t?void 0:t.spanContext()}})),ue=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var t=se(),n=ae(),r=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function o(e){return r.test(e)&&e!==t.INVALID_TRACEID}function s(e){return i.test(e)&&e!==t.INVALID_SPANID}e.isValidTraceId=o,e.isValidSpanId=s,e.isSpanContextValid=function(e){return o(e.traceId)&&s(e.spanId)},e.wrapSpanContext=function(e){return new n.NonRecordingSpan(e)}})),le=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=ie(),n=ce(),r=ae(),i=ue(),o=t.ContextAPI.getInstance(),s=function(){function e(){}return e.prototype.startSpan=function(e,t,o){if(Boolean(null==t?void 0:t.root))return new r.NonRecordingSpan;var s=o&&n.getSpanContext(o);return function(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}(s)&&i.isSpanContextValid(s)?new r.NonRecordingSpan(s):new r.NonRecordingSpan},e.prototype.startActiveSpan=function(e,t,r,i){var s,a,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(s=t,c=r):(s=t,a=r,c=i);var u=a??o.active(),l=this.startSpan(e,s,u),d=n.setSpan(u,l);return o.with(d,c,void 0,l)}},e}();e.NoopTracer=s})),de=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=new(le().NoopTracer),n=function(){function e(e,t,n){this._provider=e,this.name=t,this.version=n}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version);return e?(this._delegate=e,this._delegate):t},e}();e.ProxyTracer=n})),pe=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=le(),n=function(){function e(){}return e.prototype.getTracer=function(e,n){return new t.NoopTracer},e}();e.NoopTracerProvider=n})),he=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=de(),n=new(pe().NoopTracerProvider),r=function(){function e(){}return e.prototype.getTracer=function(e,n){var r;return null!==(r=this.getDelegateTracer(e,n))&&void 0!==r?r:new t.ProxyTracer(this,e,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:n},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t)},e}();e.ProxyTracerProvider=r})),fe=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),me=b((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0,(t=e.SamplingDecision||(e.SamplingDecision={}))[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})),ge=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ve=b((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0,(t=e.SpanKind||(e.SpanKind={}))[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})),ye=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),_e=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),be=b((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0,(t=e.SpanStatusCode||(e.SpanStatusCode={}))[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})),Ee=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Se=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),we=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ce=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Te=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=B(),n=he(),r=ue(),i=ce(),o=G(),s="trace",a=function(){function e(){this._proxyTracerProvider=new n.ProxyTracerProvider,this.wrapSpanContext=r.wrapSpanContext,this.isSpanContextValid=r.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var n=t.registerGlobal(s,this._proxyTracerProvider,o.DiagAPI.instance());return n&&this._proxyTracerProvider.setDelegate(e),n},e.prototype.getTracerProvider=function(){return t.getGlobal(s)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){t.unregisterGlobal(s,o.DiagAPI.instance()),this._proxyTracerProvider=new n.ProxyTracerProvider},e}();e.TraceAPI=a})),Re=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}();e.NoopTextMapPropagator=t})),Oe=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=ne().createContextKey("OpenTelemetry Baggage Key");e.getBaggage=function(e){return e.getValue(t)||void 0},e.setBaggage=function(e,n){return e.setValue(t,n)},e.deleteBaggage=function(e){return e.deleteValue(t)}})),xe=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=B(),n=Re(),r=Z(),i=Oe(),o=W(),s=G(),a="propagation",c=new n.NoopTextMapPropagator,u=function(){function e(){this.createBaggage=o.createBaggage,this.getBaggage=i.getBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return t.registerGlobal(a,e,s.DiagAPI.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=r.defaultTextMapSetter),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=r.defaultTextMapGetter),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){t.unregisterGlobal(a,s.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return t.getGlobal(a)||c},e}();e.PropagationAPI=u})),Pe=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,n(M(),e);var r=W();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return r.baggageEntryMetadataFromString}}),n(Q(),e),n(X(),e),n(J(),e),n(Z(),e),n(ee(),e),n(te(),e),n(de(),e),n(he(),e),n(fe(),e),n(me(),e),n(ge(),e),n(ve(),e),n(ye(),e),n(_e(),e),n(be(),e),n(oe(),e),n(Ee(),e),n(Se(),e),n(we(),e);var i=ue();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return i.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return i.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return i.isValidSpanId}});var o=se();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return o.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return o.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return o.INVALID_SPAN_CONTEXT}}),n(ne(),e),n(Ce(),e);var s=ie();e.context=s.ContextAPI.getInstance();var a=Te();e.trace=a.TraceAPI.getInstance();var c=xe();e.propagation=c.PropagationAPI.getInstance();var u=G();e.diag=u.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}})),Ie=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=Pe().createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");e.suppressTracing=function(e){return e.setValue(t,!0)},e.unsuppressTracing=function(e){return e.deleteValue(t)},e.isTracingSuppressed=function(e){return!0===e.getValue(t)}})),Ae=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192})),De=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=Pe(),n=Ae();e.serializeKeyPairs=e=>e.reduce(((e,t)=>{let r=`${e}${""!==e?n.BAGGAGE_ITEMS_SEPARATOR:""}${t}`;return r.length>n.BAGGAGE_MAX_TOTAL_LENGTH?e:r}),""),e.getKeyPairs=e=>e.getAllEntries().map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`)),e.parsePairKeyValue=e=>{let r=e.split(n.BAGGAGE_PROPERTIES_SEPARATOR);if(r.length<=0)return;let i=r.shift();if(!i)return;let o=i.split(n.BAGGAGE_KEY_PAIR_SEPARATOR);if(2!==o.length)return;let s,a=decodeURIComponent(o[0].trim()),c=decodeURIComponent(o[1].trim());return r.length>0&&(s=t.baggageEntryMetadataFromString(r.join(n.BAGGAGE_PROPERTIES_SEPARATOR))),{key:a,value:c,metadata:s}},e.parseKeyPairsIntoRecord=t=>"string"!=typeof t||0===t.length?{}:t.split(n.BAGGAGE_ITEMS_SEPARATOR).map((t=>e.parsePairKeyValue(t))).filter((e=>void 0!==e&&e.value.length>0)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})})),Ne=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=Pe(),n=Ie(),r=Ae(),i=De();e.HttpBaggagePropagator=class{inject(e,o,s){let a=t.propagation.getBaggage(e);if(!a||n.isTracingSuppressed(e))return;let c=i.getKeyPairs(a).filter((e=>e.length<=r.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS)).slice(0,r.BAGGAGE_MAX_NAME_VALUE_PAIRS),u=i.serializeKeyPairs(c);u.length>0&&s.set(o,r.BAGGAGE_HEADER,u)}extract(e,n,o){let s=o.get(n,r.BAGGAGE_HEADER);if(!s)return e;let a={};return 0===s.length||(s.split(r.BAGGAGE_ITEMS_SEPARATOR).forEach((e=>{let t=i.parsePairKeyValue(e);if(t){let e={value:t.value};t.metadata&&(e.metadata=t.metadata),a[t.key]=e}})),0===Object.entries(a).length)?e:t.propagation.setBaggage(e,t.propagation.createBaggage(a))}fields(){return[r.BAGGAGE_HEADER]}}})),ke=b((e=>{"use strict";function t(e){return null==e||(Array.isArray(e)?function(e){let t;for(let r of e)if(null!=r){if(!t){if(n(r)){t=typeof r;continue}return!1}if(typeof r!==t)return!1}return!0}(e):n(e))}function n(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0,e.sanitizeAttributes=function(e){let n={};if(null==e||"object"!=typeof e)return n;for(let[r,i]of Object.entries(e))t(i)&&(Array.isArray(i)?n[r]=i.slice():n[r]=i);return n},e.isAttributeValue=t})),Me=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=Pe();e.loggingErrorHandler=function(){return e=>{t.diag.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){let t={},n=e;for(;null!==n;)Object.getOwnPropertyNames(n).forEach((e=>{if(t[e])return;let r=n[e];r&&(t[e]=String(r))})),n=Object.getPrototypeOf(n);return t}(e))}(e))}}})),Le=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=Me().loggingErrorHandler();e.setGlobalErrorHandler=function(e){t=e},e.globalErrorHandler=e=>{try{t(e)}catch{}}})),Fe=b((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0,(t=e.TracesSamplerValues||(e.TracesSamplerValues={})).AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})),qe=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=Pe(),n=Fe(),r=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function i(e){return r.indexOf(e)>-1}var o=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function s(e){return o.indexOf(e)>-1}function a(e,t,n,r=-1/0,i=1/0){if(typeof n[e]<"u"){let o=Number(n[e]);isNaN(o)||(t[e]=o<r?r:o>i?i:o)}}function c(e,t,n,r=","){let i=n[e];"string"==typeof i&&(t[e]=i.split(r).map((e=>e.trim())))}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:n.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};var u={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function l(e,t,n){let r=n[e];if("string"==typeof r){let n=u[r.toUpperCase()];null!=n&&(t[e]=n)}}e.parseEnvironment=function(t){let n={};for(let r in e.DEFAULT_ENVIRONMENT){let e=r;if("OTEL_LOG_LEVEL"===e)l(e,n,t);else if(i(e))a(e,n,t);else if(s(e))c(e,n,t);else{let r=t[e];typeof r<"u"&&null!==r&&(n[e]=String(r))}}return n}})),je=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=n(2037),r=qe();e.getEnv=function(){let e=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},r.DEFAULT_ENVIRONMENT,e)}})),Ue=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0,e.hexToBase64=function(e){let t=e.length,n="";for(let r=0;r<t;r+=2){let t=e.substring(r,r+2),i=parseInt(t,16);n+=String.fromCharCode(i)}return Buffer.from(n,"ascii").toString("base64")}})),Be=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0,e.RandomIdGenerator=class{constructor(){this.generateTraceId=n(16),this.generateSpanId=n(8)}};var t=Buffer.allocUnsafe(16);function n(e){return function(){for(let n=0;n<e/4;n++)t.writeUInt32BE(Math.random()*2**32>>>0,4*n);for(let n=0;n<e&&!(t[n]>0);n++)n===e-1&&(t[e-1]=1);return t.toString("hex",0,e)}}})),Ve=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=n(4074);e.otperformance=t.performance})),He=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"})),ze=b((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"},(t=e.DbSystemValues||(e.DbSystemValues={})).OTHER_SQL="other_sql",t.MSSQL="mssql",t.MYSQL="mysql",t.ORACLE="oracle",t.DB2="db2",t.POSTGRESQL="postgresql",t.REDSHIFT="redshift",t.HIVE="hive",t.CLOUDSCAPE="cloudscape",t.HSQLDB="hsqldb",t.PROGRESS="progress",t.MAXDB="maxdb",t.HANADB="hanadb",t.INGRES="ingres",t.FIRSTSQL="firstsql",t.EDB="edb",t.CACHE="cache",t.ADABAS="adabas",t.FIREBIRD="firebird",t.DERBY="derby",t.FILEMAKER="filemaker",t.INFORMIX="informix",t.INSTANTDB="instantdb",t.INTERBASE="interbase",t.MARIADB="mariadb",t.NETEZZA="netezza",t.PERVASIVE="pervasive",t.POINTBASE="pointbase",t.SQLITE="sqlite",t.SYBASE="sybase",t.TERADATA="teradata",t.VERTICA="vertica",t.H2="h2",t.COLDFUSION="coldfusion",t.CASSANDRA="cassandra",t.HBASE="hbase",t.MONGODB="mongodb",t.REDIS="redis",t.COUCHBASE="couchbase",t.COUCHDB="couchdb",t.COSMOSDB="cosmosdb",t.DYNAMODB="dynamodb",t.NEO4J="neo4j",t.GEODE="geode",t.ELASTICSEARCH="elasticsearch",t.MEMCACHED="memcached",t.COCKROACHDB="cockroachdb",function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial"}(e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={})),function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other"}(e.FaasTriggerValues||(e.FaasTriggerValues={})),function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete"}(e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={})),function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"}(e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={})),function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other"}(e.NetTransportValues||(e.NetTransportValues={})),function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC"}(e.HttpFlavorValues||(e.HttpFlavorValues={})),function(e){e.QUEUE="queue",e.TOPIC="topic"}(e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={})),function(e){e.RECEIVE="receive",e.PROCESS="process"}(e.MessagingOperationValues||(e.MessagingOperationValues={})),function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))})),Ge=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(ze(),e)})),Ke=b((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},(t=e.CloudProviderValues||(e.CloudProviderValues={})).AWS="aws",t.AZURE="azure",t.GCP="gcp",function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine"}(e.CloudPlatformValues||(e.CloudPlatformValues={})),function(e){e.EC2="ec2",e.FARGATE="fargate"}(e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={})),function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86"}(e.HostArchValues||(e.HostArchValues={})),function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os"}(e.OsTypeValues||(e.OsTypeValues={})),function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs"}(e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))})),$e=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ke(),e)})),We=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ge(),e),n($e(),e)})),Qe=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=He(),n=We();e.SDK_INFO={[n.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[n.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[n.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:n.TelemetrySdkLanguageValues.NODEJS,[n.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}})),Xe=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0,e.unrefTimer=function(e){e.unref()}})),Ye=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(je(),e),n(Ue(),e),n(Be(),e),n(Ve(),e),n(Qe(),e),n(Xe(),e)})),Je=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ye(),e)})),Ze=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=Je(),n=9,r=Math.pow(10,n);function i(e){let t=e/1e3,i=Math.trunc(t);return[i,Number((t-i).toFixed(n))*r]}function o(){let e=t.otperformance.timeOrigin;if("number"!=typeof e){let n=t.otperformance;e=n.timing&&n.timing.fetchStart}return e}function s(e){let n=i(o()),s=i("number"==typeof e?e:t.otperformance.now()),a=n[0]+s[0],c=n[1]+s[1];return c>r&&(c-=r,a+=1),[a,c]}function a(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}e.hrTime=s,e.timeInputToHrTime=function(e){if(a(e))return e;if("number"==typeof e)return e<o()?s(e):i(e);if(e instanceof Date)return i(e.getTime());throw TypeError("Invalid input type")},e.hrTimeDuration=function(e,t){let n=t[0]-e[0],i=t[1]-e[1];return i<0&&(n-=1,i+=r),[n,i]},e.hrTimeToTimeStamp=function(e){let t=n,r=`${"0".repeat(t)}${e[1]}Z`,i=r.substr(r.length-t-1);return new Date(1e3*e[0]).toISOString().replace("000Z",i)},e.hrTimeToNanoseconds=function(e){return e[0]*r+e[1]},e.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},e.hrTimeToMicroseconds=function(e){return Math.round(1e6*e[0]+e[1]/1e3)},e.isTimeInputHrTime=a,e.isTimeInput=function(e){return a(e)||"number"==typeof e||e instanceof Date}})),et=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),tt=b((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0,(t=e.ExportResultCode||(e.ExportResultCode={}))[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})),nt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=Pe();e.CompositePropagator=class{constructor(e={}){var t;this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((e=>"function"==typeof e.fields?e.fields():[])).reduce(((e,t)=>e.concat(t)),[])))}inject(e,n,r){for(let i of this._propagators)try{i.inject(e,n,r)}catch(e){t.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${e.message}`)}}extract(e,n,r){return this._propagators.reduce(((e,i)=>{try{return i.extract(e,n,r)}catch(e){t.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${e.message}`)}return e}),e)}fields(){return this._fields.slice()}}})),rt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",n=new RegExp(`^(?:[a-z]${t}{0,255}|[a-z0-9]${t}{0,240}@[a-z]${t}{0,13})$`),r=/^[ -~]{0,255}[!-~]$/,i=/,|=/;e.validateKey=function(e){return n.test(e)},e.validateValue=function(e){return r.test(e)&&!i.test(e)}})),it=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=rt(),n=class{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=>(e.push(t+"="+this.get(t)),e)),[]).join(",")}_parse(e){e.length>512||(this._internalState=e.split(",").reverse().reduce(((e,n)=>{let r=n.trim(),i=r.indexOf("=");if(-1!==i){let o=r.slice(0,i),s=r.slice(i+1,n.length);t.validateKey(o)&&t.validateValue(s)&&e.set(o,s)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new n;return e._internalState=new Map(this._internalState),e}};e.TraceState=n})),ot=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=Pe(),n=Ie(),r=it();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var i=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function o(e){let t=i.exec(e);return!t||"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}e.parseTraceParent=o,e.HttpTraceContextPropagator=class{inject(r,i,o){let s=t.trace.getSpanContext(r);if(!s||n.isTracingSuppressed(r)||!t.isSpanContextValid(s))return;let a=`00-${s.traceId}-${s.spanId}-0${Number(s.traceFlags||t.TraceFlags.NONE).toString(16)}`;o.set(i,e.TRACE_PARENT_HEADER,a),s.traceState&&o.set(i,e.TRACE_STATE_HEADER,s.traceState.serialize())}extract(n,i,s){let a=s.get(i,e.TRACE_PARENT_HEADER);if(!a)return n;let c=Array.isArray(a)?a[0]:a;if("string"!=typeof c)return n;let u=o(c);if(!u)return n;u.isRemote=!0;let l=s.get(i,e.TRACE_STATE_HEADER);if(l){let e=Array.isArray(l)?l.join(","):l;u.traceState=new r.TraceState("string"==typeof e?e:void 0)}return t.trace.setSpanContext(n,u)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}}})),st=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),at=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=Pe().createContextKey("OpenTelemetry SDK Context Key RPC_METADATA");(e.RPCType||(e.RPCType={})).HTTP="http",e.setRPCMetadata=function(e,n){return e.setValue(t,n)},e.deleteRPCMetadata=function(e){return e.deleteValue(t)},e.getRPCMetadata=function(e){return e.getValue(t)}})),ct=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=Pe();e.AlwaysOffSampler=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}})),ut=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=Pe();e.AlwaysOnSampler=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}})),lt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=Pe(),n=Le(),r=ct(),i=ut();e.ParentBasedSampler=class{constructor(e){var t,o,s,a;this._root=e.root,this._root||(n.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new i.AlwaysOnSampler),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new i.AlwaysOnSampler,this._remoteParentNotSampled=null!==(o=e.remoteParentNotSampled)&&void 0!==o?o:new r.AlwaysOffSampler,this._localParentSampled=null!==(s=e.localParentSampled)&&void 0!==s?s:new i.AlwaysOnSampler,this._localParentNotSampled=null!==(a=e.localParentNotSampled)&&void 0!==a?a:new r.AlwaysOffSampler}shouldSample(e,n,r,i,o,s){let a=t.trace.getSpanContext(e);return a&&t.isSpanContextValid(a)?a.isRemote?a.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,n,r,i,o,s):this._remoteParentNotSampled.shouldSample(e,n,r,i,o,s):a.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,n,r,i,o,s):this._localParentNotSampled.shouldSample(e,n,r,i,o,s):this._root.shouldSample(e,n,r,i,o,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}})),dt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=Pe();e.TraceIdRatioBasedSampler=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(e,n){return{decision:t.isValidTraceId(n)&&this._accumulate(n)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let n=0;n<e.length/8;n++){let r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t}}})),pt=b((e=>{"use strict";function t(e,t){return"string"==typeof t?e===t:t.test(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0,e.urlMatches=t,e.isUrlIgnored=function(e,n){if(!n)return!1;for(let r of n)if(t(e,r))return!0;return!1}})),ht=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0,e.isWrapped=function(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}})),ft=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,n(Ne(),e),n(ke(),e),n(Le(),e),n(Me(),e),n(Ze(),e),n(et(),e),n(tt(),e),n(He(),e),e.baggageUtils=De(),n(Je(),e),n(nt(),e),n(ot(),e),n(st(),e),n(at(),e),n(ct(),e),n(ut(),e),n(lt(),e),n(dt(),e),n(Ie(),e),n(it(),e),n(qe(),e),n(Fe(),e),n(pt(),e),n(ht(),e),n(He(),e)})),mt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"})),gt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=Pe(),n=ft(),r=We(),i=mt();e.Span=class{constructor(e,r,i,o,s,a,c=[],u=n.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=i,this._spanContext=o,this.parentSpanId=a,this.kind=s,this.links=c,this.startTime=n.timeInputToHrTime(u),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}spanContext(){return this._spanContext}setAttribute(e,r){return null==r||this._isSpanEnded()?this:0===e.length?(t.diag.warn(`Invalid attribute key: ${e}`),this):n.isAttributeValue(r)?(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=r),this):(t.diag.warn(`Invalid attribute value set for key: ${e}`),this)}setAttributes(e){for(let[t,n]of Object.entries(e))this.setAttribute(t,n);return this}addEvent(e,r,i){return this._isSpanEnded()||(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),n.isTimeInput(r)&&(typeof i>"u"&&(i=r),r=void 0),typeof i>"u"&&(i=n.hrTime()),this.events.push({name:e,attributes:r,time:n.timeInputToHrTime(i)})),this}setStatus(e){return this._isSpanEnded()||(this.status=e),this}updateName(e){return this._isSpanEnded()||(this.name=e),this}end(e=n.hrTime()){this._isSpanEnded()?t.diag.error("You can only call end() on a span once."):(this._ended=!0,this.endTime=n.timeInputToHrTime(e),this._duration=n.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this))}isRecording(){return!1===this._ended}recordException(e,o=n.hrTime()){let s={};"string"==typeof e?s[r.SemanticAttributes.EXCEPTION_MESSAGE]=e:e&&(e.code?s[r.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString():e.name&&(s[r.SemanticAttributes.EXCEPTION_TYPE]=e.name),e.message&&(s[r.SemanticAttributes.EXCEPTION_MESSAGE]=e.message),e.stack&&(s[r.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack)),s[r.SemanticAttributes.EXCEPTION_TYPE]||s[r.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(i.ExceptionEventName,s,o):t.diag.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}}})),vt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=Pe(),n=ft(),r=n.getEnv(),i=n.TracesSamplerValues.AlwaysOn;function o(e=n.getEnv()){switch(e.OTEL_TRACES_SAMPLER){case n.TracesSamplerValues.AlwaysOn:return new n.AlwaysOnSampler;case n.TracesSamplerValues.AlwaysOff:return new n.AlwaysOffSampler;case n.TracesSamplerValues.ParentBasedAlwaysOn:return new n.ParentBasedSampler({root:new n.AlwaysOnSampler});case n.TracesSamplerValues.ParentBasedAlwaysOff:return new n.ParentBasedSampler({root:new n.AlwaysOffSampler});case n.TracesSamplerValues.TraceIdRatio:return new n.TraceIdRatioBasedSampler(a(e));case n.TracesSamplerValues.ParentBasedTraceIdRatio:return new n.ParentBasedSampler({root:new n.TraceIdRatioBasedSampler(a(e))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${i}".`),new n.AlwaysOnSampler}}e.DEFAULT_CONFIG={sampler:o(r),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:n.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:n.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:n.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}},e.buildSamplerFromEnv=o;var s=1;function a(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return t.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let n=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(n)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):n<0||n>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):n}})),yt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=vt();e.mergeConfig=function(e){let n={sampler:t.buildSamplerFromEnv()},r=Object.assign({},t.DEFAULT_CONFIG,n,e);return r.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),r}})),_t=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=Pe(),n=ft(),r=gt(),i=yt();e.Tracer=class{constructor(e,t,r){this._tracerProvider=r;let o=i.mergeConfig(t);this._sampler=o.sampler,this._spanLimits=o.spanLimits,this._idGenerator=t.idGenerator||new n.RandomIdGenerator,this.resource=r.resource,this.instrumentationLibrary=e}startSpan(e,i={},o=t.context.active()){var s,a;if(n.isTracingSuppressed(o))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let c,u,l,d=function(e,n){if(!e.root)return t.trace.getSpanContext(n)}(i,o),p=this._idGenerator.generateSpanId();d&&t.trace.isSpanContextValid(d)?(c=d.traceId,u=d.traceState,l=d.spanId):c=this._idGenerator.generateTraceId();let h=null!==(s=i.kind)&&void 0!==s?s:t.SpanKind.INTERNAL,f=null!==(a=i.links)&&void 0!==a?a:[],m=n.sanitizeAttributes(i.attributes),g=this._sampler.shouldSample(i.root?t.trace.setSpanContext(o,t.INVALID_SPAN_CONTEXT):o,c,e,h,m,f),v={traceId:c,spanId:p,traceFlags:g.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,traceState:u};if(g.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(v);let y=new r.Span(this,o,e,v,h,l,f,i.startTime);return y.setAttributes(Object.assign(m,g.attributes)),y}startActiveSpan(e,n,r,i){let o,s,a;if(arguments.length<2)return;2===arguments.length?a=n:3===arguments.length?(o=n,a=r):(o=n,s=r,a=i);let c=s??t.context.active(),u=this.startSpan(e,o,c),l=t.trace.setSpan(c,u);return t.context.with(l,a,void 0,u)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}})),bt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0,e.defaultServiceName=function(){return`unknown_service:${process.argv0}`}})),Et=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=Ot(),r=Pe(),i=n(3837);e.detectResources=async(e={})=>{let n=Object.assign(e),i=await Promise.all((n.detectors||[]).map((async e=>{try{let t=await e.detect(n);return r.diag.debug(`${e.constructor.name} found resource.`,t),t}catch(n){return r.diag.debug(`${e.constructor.name} failed: ${n.message}`),t.Resource.empty()}})));return o(i),i.reduce(((e,t)=>e.merge(t)),t.Resource.empty())};var o=e=>{e.forEach((e=>{if(Object.keys(e.attributes).length>0){let t=i.inspect(e.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(t)}}))}})),St=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=Pe(),n=ft(),r=We(),i=It();e.envDetector=new class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(e){let o={},s=n.getEnv(),a=s.OTEL_RESOURCE_ATTRIBUTES,c=s.OTEL_SERVICE_NAME;if(a)try{let e=this._parseResourceAttributes(a);Object.assign(o,e)}catch(e){t.diag.debug(`EnvDetector failed: ${e.message}`)}return c&&(o[r.ResourceAttributes.SERVICE_NAME]=c),new i.Resource(o)}_parseResourceAttributes(e){if(!e)return{};let t={},n=e.split(this._COMMA_SEPARATOR,-1);for(let e of n){let n=e.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2!==n.length)continue;let[r,i]=n;if(r=r.trim(),i=i.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(r))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(i))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);t[r]=i}return t}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isPrintableString(e)}_isPrintableString(e){for(let t=0;t<e.length;t++){let n=e.charAt(t);if(n<=" "||n>="~")return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}}})),wt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=Pe(),n=We(),r=It();e.processDetector=new class{async detect(e){let t={[n.ResourceAttributes.PROCESS_PID]:process.pid,[n.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[n.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[n.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(t,e)}_getResourceAttributes(e,i){return""===e[n.ResourceAttributes.PROCESS_EXECUTABLE_NAME]||""===e[n.ResourceAttributes.PROCESS_EXECUTABLE_PATH]||""===e[n.ResourceAttributes.PROCESS_COMMAND]||""===e[n.ResourceAttributes.PROCESS_COMMAND_LINE]?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),r.Resource.empty()):new r.Resource(Object.assign({},e))}}})),Ct=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(St(),e),n(wt(),e)})),Tt=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(bt(),e),n(Et(),e),n(Ct(),e)})),Rt=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Tt(),e)})),Ot=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=We(),n=ft(),r=Rt(),i=class{constructor(e){this.attributes=e}static empty(){return i.EMPTY}static default(){return new i({[t.ResourceAttributes.SERVICE_NAME]:r.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:n.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:n.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:n.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(e){if(!e||!Object.keys(e.attributes).length)return this;let t=Object.assign({},this.attributes,e.attributes);return new i(t)}};e.Resource=i,i.EMPTY=new i({})})),xt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Pt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),It=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ot(),e),n(Rt(),e),n(xt(),e),n(Pt(),e)})),At=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=ft();e.MultiSpanProcessor=class{constructor(e){this._spanProcessors=e}forceFlush(){let e=[];for(let t of this._spanProcessors)e.push(t.forceFlush());return new Promise((n=>{Promise.all(e).then((()=>{n()})).catch((e=>{t.globalErrorHandler(e||new Error("MultiSpanProcessor: forceFlush failed")),n()}))}))}onStart(e,t){for(let n of this._spanProcessors)n.onStart(e,t)}onEnd(e){for(let t of this._spanProcessors)t.onEnd(e)}shutdown(){let e=[];for(let t of this._spanProcessors)e.push(t.shutdown());return new Promise(((t,n)=>{Promise.all(e).then((()=>{t()}),n)}))}}})),Dt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0,e.NoopSpanProcessor=class{onStart(e,t){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}})),Nt=b(((e,t)=>{var n="__lodash_hash_undefined__",r=9007199254740991,i="[object Arguments]",o="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",c="[object Null]",u="[object Object]",l="[object Proxy]",d="[object Undefined]",p=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f[i]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f[s]=f["[object Map]"]=f["[object Number]"]=f[u]=f["[object RegExp]"]=f["[object Set]"]=f["[object String]"]=f["[object WeakMap]"]=!1;var m,g="object"==typeof global&&global&&global.Object===Object&&global,v="object"==typeof self&&self&&self.Object===Object&&self,y=g||v||Function("return this")(),_="object"==typeof e&&e&&!e.nodeType&&e,b=_&&"object"==typeof t&&t&&!t.nodeType&&t,E=b&&b.exports===_,S=E&&g.process,w=function(){try{return b&&b.require&&b.require("util").types||S&&S.binding&&S.binding("util")}catch{}}(),C=w&&w.isTypedArray,T=Array.prototype,R=Function.prototype,O=Object.prototype,x=y["__core-js_shared__"],P=R.toString,I=O.hasOwnProperty,A=(m=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",D=O.toString,N=P.call(Object),k=RegExp("^"+P.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=E?y.Buffer:void 0,L=y.Symbol,F=y.Uint8Array,q=(M&&M.allocUnsafe,function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object)),j=Object.create,U=O.propertyIsEnumerable,B=T.splice,V=L?L.toStringTag:void 0,H=function(){try{var e=le(Object,"defineProperty");return e({},"",{}),e}catch{}}(),z=M?M.isBuffer:void 0,G=Math.max,K=Date.now,$=le(y,"Map"),W=le(Object,"create"),Q=function(){function e(){}return function(t){if(!Se(t))return{};if(j)return j(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function X(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function J(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Z(e){var t=this.__data__=new Y(e);this.size=t.size}function ee(e,t,n){(void 0!==n&&!me(e[t],n)||void 0===n&&!(t in e))&&re(e,t,n)}function te(e,t,n){var r=e[t];(!I.call(e,t)||!me(r,n)||void 0===n&&!(t in e))&&re(e,t,n)}function ne(e,t){for(var n=e.length;n--;)if(me(e[n][0],t))return n;return-1}function re(e,t,n){"__proto__"==t&&H?H(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}X.prototype.clear=function(){this.__data__=W?W(null):{},this.size=0},X.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},X.prototype.get=function(e){var t=this.__data__;if(W){var r=t[e];return r===n?void 0:r}return I.call(t,e)?t[e]:void 0},X.prototype.has=function(e){var t=this.__data__;return W?void 0!==t[e]:I.call(t,e)},X.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=W&&void 0===t?n:t,this},Y.prototype.clear=function(){this.__data__=[],this.size=0},Y.prototype.delete=function(e){var t=this.__data__,n=ne(t,e);return!(n<0||(n==t.length-1?t.pop():B.call(t,n,1),--this.size,0))},Y.prototype.get=function(e){var t=this.__data__,n=ne(t,e);return n<0?void 0:t[n][1]},Y.prototype.has=function(e){return ne(this.__data__,e)>-1},Y.prototype.set=function(e,t){var n=this.__data__,r=ne(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},J.prototype.clear=function(){this.size=0,this.__data__={hash:new X,map:new($||Y),string:new X}},J.prototype.delete=function(e){var t=ue(this,e).delete(e);return this.size-=t?1:0,t},J.prototype.get=function(e){return ue(this,e).get(e)},J.prototype.has=function(e){return ue(this,e).has(e)},J.prototype.set=function(e,t){var n=ue(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Z.prototype.clear=function(){this.__data__=new Y,this.size=0},Z.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Z.prototype.get=function(e){return this.__data__.get(e)},Z.prototype.has=function(e){return this.__data__.has(e)},Z.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Y){var r=n.__data__;if(!$||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new J(r)}return n.set(e,t),this.size=n.size,this};var ie=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),s=o.length;s--;){var a=o[++r];if(!1===t(i[a],a,i))break}return e};function oe(e){return null==e?void 0===e?d:c:V&&V in Object(e)?function(e){var t=I.call(e,V),n=e[V];try{e[V]=void 0;var r=!0}catch{}var i=D.call(e);return r&&(t?e[V]=n:delete e[V]),i}(e):function(e){return D.call(e)}(e)}function se(e){return we(e)&&oe(e)==i}function ae(e,t,n,r,i){e!==t&&ie(t,(function(o,s){if(i||(i=new Z),Se(o))!function(e,t,n,r,i,o,s){var a=he(e,n),c=he(t,n),l=s.get(c);if(l)ee(e,n,l);else{var d=o?o(a,c,n+"",e,t,s):void 0,p=void 0===d;if(p){var h=ve(c),f=!h&&_e(c),m=!h&&!f&&Ce(c);d=c,h||f||m?ve(a)?d=a:function(e){return we(e)&&ye(e)}(a)?d=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(a):f?(p=!1,d=function(e,t){return e.slice()}(c)):m?(p=!1,d=function(e,t){var n=function(e){var t=new e.constructor(e.byteLength);return new F(t).set(new F(e)),t}(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}(c)):d=[]:function(e){if(!we(e)||oe(e)!=u)return!1;var t=q(e);if(null===t)return!0;var n=I.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&P.call(n)==N}(c)||ge(c)?(d=a,ge(a)?d=function(e){return function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],c=void 0;void 0===c&&(c=e[a]),i?re(n,a,c):te(n,a,c)}return n}(e,Te(e))}(a):(!Se(a)||be(a))&&(d=function(e){return"function"!=typeof e.constructor||pe(e)?{}:Q(q(e))}(c))):p=!1}p&&(s.set(c,d),i(d,c,r,o,s),s.delete(c)),ee(e,n,d)}}(e,t,s,n,ae,r,i);else{var a=r?r(he(e,s),o,s+"",e,t,i):void 0;void 0===a&&(a=o),ee(e,s,a)}}),Te)}var ce=H?function(e,t){return H(e,"toString",{configurable:!0,enumerable:!1,value:Oe(t),writable:!0})}:xe;function ue(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Se(e)||function(e){return!!A&&A in e}(e))&&(be(e)?k:p).test(function(e){if(null!=e){try{return P.call(e)}catch{}try{return e+""}catch{}}return""}(e))}(n)?n:void 0}function de(e,t){var n=typeof e;return!!(t=t??r)&&("number"==n||"symbol"!=n&&h.test(e))&&e>-1&&e%1==0&&e<t}function pe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||O)}function he(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var fe=function(e){var t=0,n=0;return function(){var r=K(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ce);function me(e,t){return e===t||e!=e&&t!=t}var ge=se(function(){return arguments}())?se:function(e){return we(e)&&I.call(e,"callee")&&!U.call(e,"callee")},ve=Array.isArray;function ye(e){return null!=e&&Ee(e.length)&&!be(e)}var _e=z||function(){return!1};function be(e){if(!Se(e))return!1;var t=oe(e);return t==s||t==a||t==o||t==l}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function Se(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function we(e){return null!=e&&"object"==typeof e}var Ce=C?function(e){return function(t){return e(t)}}(C):function(e){return we(e)&&Ee(e.length)&&!!f[oe(e)]};function Te(e){return ye(e)?function(e,t){var n=ve(e),r=!n&&ge(e),i=!n&&!r&&_e(e),o=!n&&!r&&!i&&Ce(e),s=n||r||i||o,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=a.length;for(var u in e)(t||I.call(e,u))&&(!s||!("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||de(u,c)))&&a.push(u);return a}(e,!0):function(e){if(!Se(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=pe(e),n=[];for(var r in e)"constructor"==r&&(t||!I.call(e,r))||n.push(r);return n}(e)}var Re=function(e){return function(e,t){return fe(function(e,t,n){return t=G(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=G(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}(e,t,xe),e+"")}((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&function(e,t,n){if(!Se(n))return!1;var r=typeof t;return!!("number"==r?ye(n)&&de(t,n.length):"string"==r&&t in n)&&me(n[t],e)}(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var a=n[r];a&&e(t,a,r)}return t}))}((function(e,t,n){ae(e,t,n)}));function Oe(e){return function(){return e}}function xe(e){return e}t.exports=Re})),kt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=Pe(),n=ft();e.BatchSpanProcessorBase=class{constructor(e,t){this._exporter=e,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let r=n.getEnv();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(e){}onEnd(e){this._isShutdown||this._addToBuffer(e)}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}_addToBuffer(e){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(e),this._maybeStartTimer())}_flushAll(){return new Promise(((e,t)=>{let n=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)n.push(this._flushOneBatch());Promise.all(n).then((()=>{e()})).catch(t)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((e,r)=>{let i=setTimeout((()=>{r(new Error("Timeout"))}),this._exportTimeoutMillis);t.context.with(n.suppressTracing(t.context.active()),(()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),(t=>{var o;clearTimeout(i),t.code===n.ExportResultCode.SUCCESS?e():r(null!==(o=t.error)&&void 0!==o?o:new Error("BatchSpanProcessor: span export failed"))}))}))}))}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout((()=>{this._flushOneBatch().then((()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((e=>{n.globalErrorHandler(e)}))}),this._scheduledDelayMillis),n.unrefTimer(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}})),Mt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=kt(),n=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=n})),Lt=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Mt(),e)})),Ft=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Lt(),e)})),qt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t,n,r=Pe(),i=ft(),o=It(),s=$t(),a=vt(),c=At(),u=Dt(),l=Nt(),d=Ft();(n=t=e.ForceFlushState||(e.ForceFlushState={}))[n.resolved=0]="resolved",n[n.timeout=1]="timeout",n[n.error=2]="error",n[n.unresolved=3]="unresolved";var p=class{constructor(e={}){var t;this._registeredSpanProcessors=[],this._tracers=new Map;let n=l({},a.DEFAULT_CONFIG,e);this.resource=null!==(t=n.resource)&&void 0!==t?t:o.Resource.empty(),this.resource=o.Resource.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});let r=this._buildExporterFromEnv();if(void 0!==r){let e=new d.BatchSpanProcessor(r);this.activeSpanProcessor=e}else this.activeSpanProcessor=new u.NoopSpanProcessor}getTracer(e,t){let n=`${e}@${t||""}`;return this._tracers.has(n)||this._tracers.set(n,new s.Tracer({name:e,version:t},this._config,this)),this._tracers.get(n)}addSpanProcessor(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((e=>r.diag.error("Error while trying to shutdown current span processor",e))),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new c.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){r.trace.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&r.context.setGlobalContextManager(e.contextManager),e.propagator&&r.propagation.setGlobalPropagator(e.propagator)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,n=this._registeredSpanProcessors.map((n=>new Promise((r=>{let i,o=setTimeout((()=>{r(new Error(`Span processor did not completed within timeout period of ${e} ms`)),i=t.timeout}),e);n.forceFlush().then((()=>{clearTimeout(o),i!==t.timeout&&(i=t.resolved,r(i))})).catch((e=>{clearTimeout(o),i=t.error,r(e)}))}))));return new Promise(((e,r)=>{Promise.all(n).then((n=>{let i=n.filter((e=>e!==t.resolved));i.length>0?r(i):e()})).catch((e=>r([e])))}))}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var t;return null===(t=p._registeredPropagators.get(e))||void 0===t?void 0:t()}_getSpanExporter(e){var t;return null===(t=p._registeredExporters.get(e))||void 0===t?void 0:t()}_buildPropagatorFromEnv(){let e=Array.from(new Set(i.getEnv().OTEL_PROPAGATORS)),t=e.map((e=>{let t=this._getPropagator(e);return t||r.diag.warn(`Propagator "${e}" requested through environment variable is unavailable.`),t})).reduce(((e,t)=>(t&&e.push(t),e)),[]);if(0!==t.length)return 1===e.length?t[0]:new i.CompositePropagator({propagators:t})}_buildExporterFromEnv(){let e=i.getEnv().OTEL_TRACES_EXPORTER;if("none"===e)return;let t=this._getSpanExporter(e);return t||r.diag.error(`Exporter "${e}" requested through environment variable is unavailable.`),t}};e.BasicTracerProvider=p,p._registeredPropagators=new Map([["tracecontext",()=>new i.HttpTraceContextPropagator],["baggage",()=>new i.HttpBaggagePropagator]]),p._registeredExporters=new Map})),jt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=ft();e.ConsoleSpanExporter=class{export(e,t){return this._sendSpans(e,t)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(e){return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:t.hrTimeToMicroseconds(e.startTime),duration:t.hrTimeToMicroseconds(e.duration),attributes:e.attributes,status:e.status,events:e.events}}_sendSpans(e,n){for(let t of e)console.log(this._exportInfo(t));if(n)return n({code:t.ExportResultCode.SUCCESS})}}})),Ut=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=ft();e.InMemorySpanExporter=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(e,n){if(this._stopped)return n({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout((()=>n({code:t.ExportResultCode.SUCCESS})),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}})),Bt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Vt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=Pe(),n=ft();e.SimpleSpanProcessor=class{constructor(e){this._exporter=e,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(e){}onEnd(e){this._isShutdown||t.context.with(n.suppressTracing(t.context.active()),(()=>{this._exporter.export([e],(e=>{var t;e.code!==n.ExportResultCode.SUCCESS&&n.globalErrorHandler(null!==(t=e.error)&&void 0!==t?t:new Error(`SimpleSpanProcessor: span export failed (status ${e})`))}))}))}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}}})),Ht=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),zt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Gt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Kt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),$t=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(_t(),e),n(qt(),e),n(Ft(),e),n(jt(),e),n(Ut(),e),n(Bt(),e),n(Vt(),e),n(Ht(),e),n(Dt(),e),n(gt(),e),n(zt(),e),n(Gt(),e),n(Kt(),e)})),Wt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=k();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var n=!1;e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(r){if(n)return r;try{var i=$t(),o=Pe(),s=(new i.BasicTracerProvider).getTracer("applicationinsights tracer"),a=r.setTracer;r.setTracer=function(n){var r=n.startSpan;n.startSpan=function(e,n,i){var o=r.call(this,e,n,i),s=o.end;return o.end=function(){var e=s.apply(this,arguments);return t.channel.publish("azure-coretracing",o),e},o},n[e.AzureMonitorSymbol]=!0,a.call(this,n)},o.trace.getSpan(o.context.active()),r.setTracer(s),n=!0}catch{}return r}},e.enable=function(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}})),Qt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=k();e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var n=e.prototype._emit;return e.prototype._emit=function(e,r){var i=n.apply(this,arguments);if(!r){var o=i;o||(o=n.call(this,e,!0)),t.channel.publish("bunyan",{level:e.level,result:o})}return i},e}},e.enable=function(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}})),Xt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=k(),r=n(2781);e.console={versionSpecifier:">= 4.0.0",patch:function(e){var n=new r.Writable,i=new r.Writable;n.write=function(e){if(!e)return!0;var n=e.toString();return t.channel.publish("console",{message:n}),!0},i.write=function(e){if(!e)return!0;var n=e.toString();return t.channel.publish("console",{message:n,stderr:!0}),!0};for(var o=new e.Console(n,i),s=function(t){var n=e[t];n&&(e[t]=function(){if(o[t])try{o[t].apply(o,arguments)}catch{}return n.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++)s(c[a]);return e}},e.enable=function(){t.channel.registerMonkeyPatch("console",e.console),n(6206)}})),Yt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=k();e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var n=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=n.apply(this,arguments),r=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=t.channel.bindToContext(arguments[e])),r.apply(this,arguments)};var i=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=t.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e},e}},e.enable=function(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}})),Jt=b((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var n=k();e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(e){var r=e.instrument({operationIdGenerator:{next:function(){return n.channel.bindToContext((function(e){return e()}))}}}),i={};return r.on("started",(function(e){i[e.requestId]||(i[e.requestId]=t(t({},e),{time:new Date}))})),r.on("succeeded",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})):n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),r.on("failed",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})):n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),e}},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(e){var r=e.instrument(),i={},o={};return r.on("started",(function(e){i[e.requestId]||(o[e.requestId]=n.channel.bindToContext((function(e){return e()})),i[e.requestId]=t(t({},e),{time:new Date}))})),r.on("succeeded",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete o[e.requestId])})),r.on("failed",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete o[e.requestId])})),e}},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(e){!function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function(){var e=t.apply(this,arguments),r=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=n.channel.bindToContext(arguments[e])),r.apply(this,arguments)};var i=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=n.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e}}(e);var t=e.instrument(),r={},i={};return t.on("started",(function(e){r[e.requestId]||(i[e.requestId]=n.channel.bindToContext((function(e){return e()})),r[e.requestId]=e)})),t.on("succeeded",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete i[e.requestId])})),t.on("failed",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete i[e.requestId])})),e}},e.enable=function(){n.channel.registerMonkeyPatch("mongodb",e.mongo2),n.channel.registerMonkeyPatch("mongodb",e.mongo3),n.channel.registerMonkeyPatch("mongodb",e.mongo330)}})),Zt=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=k(),r=n(1017);e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e,i){var o=function(e,n){return function(n,r){var i=e[n];i&&(e[n]=function(){for(var e=arguments.length-1,n=arguments.length-1;n>=0;--n){if("function"==typeof arguments[n]){e=n;break}if(typeof arguments[n]<"u")break}var o=arguments[e],s={result:null,startTime:null,startDate:null};"function"==typeof o&&(r?(s.startTime=process.hrtime(),s.startDate=new Date,arguments[e]=t.channel.bindToContext(r(s,o))):arguments[e]=t.channel.bindToContext(o));var a=i.apply(this,arguments);return s.result=a,a})}},s=function(e,t){return o(e.prototype)},a=n(5029)(r.dirname(i)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(e){return s(a)(e)})),o(a)("createQuery",(function(e,n){return function(r){var i=process.hrtime(e.startTime),o=1e3*i[0]+i[1]/1e6|0;t.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:r,duration:o,time:e.startDate}),n.apply(this,arguments)}}));var c=n(3437)(r.dirname(i)+"/lib/Pool");return["_enqueueCallback"].forEach((function(e){return s(c)(e)})),e}},e.enable=function(){t.channel.registerMonkeyPatch("mysql",e.mysql)}})),en=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=k();e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function(e){var n=e.prototype.connect;return e.prototype.connect=function(e){return e&&(arguments[0]=t.channel.bindToContext(e)),n.apply(this,arguments)},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}})),tn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=k(),r=n(2361);e.postgres6={versionSpecifier:"6.*",patch:function(e,n){var i=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,n,s){var a,c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime();function l(e){e&&e[o]&&(e=e[o]);var n=t.channel.bindToContext((function(n,i){var o=process.hrtime(u);if(c.result=i&&{rowCount:i.rowCount,command:i.command},c.error=n,c.duration=Math.ceil(1e3*o[0]+o[1]/1e6),t.channel.publish("postgres",c),n){if(e)return e.apply(this,arguments);a&&a instanceof r.EventEmitter&&a.emit("error",n)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(n,o,{value:e}),n}catch{return e}}try{"string"==typeof e?n instanceof Array?(c.query.preparable={text:e,args:n},s=l(s)):(c.query.text=e,s?s=l(s):n=l(n)):("string"==typeof e.name?c.query.plan=e.name:e.values instanceof Array?c.query.preparable={text:e.text,args:e.values}:c.query.text=e.text,s?s=l(s):n?n=l(n):e.callback=l(e.callback))}catch{return i.apply(this,arguments)}return arguments[0]=e,arguments[1]=n,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=i.apply(this,arguments)},e}},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:function(e,n){var i=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,n,s){var a,c=this,u=!!s,l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},d=process.hrtime();function p(e){e&&e[o]&&(e=e[o]);var n=t.channel.bindToContext((function(n,i){var o=process.hrtime(d);if(l.result=i&&{rowCount:i.rowCount,command:i.command},l.error=n,l.duration=Math.ceil(1e3*o[0]+o[1]/1e6),t.channel.publish("postgres",l),n){if(e)return e.apply(this,arguments);a&&a instanceof r.EventEmitter&&a.emit("error",n)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(n,o,{value:e}),n}catch{return e}}try{"string"==typeof e?n instanceof Array?(l.query.preparable={text:e,args:n},s=(u="function"==typeof s)?p(s):s):(l.query.text=e,s?s=(u="function"==typeof s)?p(s):s:n=(u="function"==typeof n)?p(n):n):("string"==typeof e.name?l.query.plan=e.name:e.values instanceof Array?l.query.preparable={text:e.text,args:e.values}:l.query.text=e.text,s?(u="function"==typeof s,s=p(s)):n?n=(u="function"==typeof n)?p(n):n:(u="function"==typeof e.callback,e.callback=u?p(e.callback):e.callback))}catch{return i.apply(this,arguments)}return arguments[0]=e,arguments[1]=n,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=i.apply(this,arguments),u?a:a.then((function(e){return p()(void 0,e),new c._Promise((function(t,n){t(e)}))})).catch((function(e){return p()(e,void 0),new c._Promise((function(t,n){n(e)}))}))},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}})),nn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=k();e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var n=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var r=e.callback;if(!r||!r.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;e.callback=t.channel.bindToContext((function(n,a){var c=process.hrtime(o),u=1e3*c[0]+c[1]/1e6|0;t.channel.publish("redis",{duration:u,address:i,commandObj:e,err:n,result:a,time:s}),"function"==typeof r&&r.apply(this,arguments)})),e.callback.pubsubBound=!0}}return n.call(this,e)},e}},e.enable=function(){t.channel.registerMonkeyPatch("redis",e.redis)}})),rn=b((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var n=k();e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:function(e){var r=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){var e,i,o,s=arguments[0];arguments[0].callback=(e=s.callback,i=process.hrtime(),o={query:{},database:{host:null,port:null},result:null,error:null,duration:0},n.channel.bindToContext((function(r,s,a){var c=process.hrtime(i);o=t(t({},o),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!r&&{rowCount:s,rows:a},query:{text:this.parametersByName.statement.value},error:r,duration:Math.ceil(1e3*c[0]+c[1]/1e6)}),n.channel.publish("tedious",o),e.call(this,r,s,a)}))),r.apply(this,arguments)},e}},e.enable=function(){n.channel.registerMonkeyPatch("tedious",e.tedious)}})),on=b((e=>{"use strict";var t,n=e&&e.__extends||(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)},function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),r=e&&e.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var i=k();e.winston3={versionSpecifier:"3.x",patch:function(e){var t=function(e){function t(t,n){var r=e.call(this,n)||this;return r.winston=t,r}return n(t,e),t.prototype.log=function(e,t){var n=e.message,o=e.level,s=e.meta,a=r(e,["message","level","meta"]);o="function"==typeof Symbol.for?e[Symbol.for("level")]:o,n=e instanceof Error?e:n;var c=function(e,t){return null!=e.config.npm.levels[t]?"npm":null!=e.config.syslog.levels[t]?"syslog":"unknown"}(this.winston,o);for(var u in s=s||{},a)a.hasOwnProperty(u)&&(s[u]=a[u]);i.channel.publish("winston",{message:n,level:o,levelKind:c,meta:s}),t()},t}(e.Transport);function o(){var n,r=arguments[0].levels||e.config.npm.levels;for(var i in r)r.hasOwnProperty(i)&&(n=void 0===n||r[i]>r[n]?i:n);this.add(new t(e,{level:n}))}var s=e.createLogger;e.createLogger=function(){var n,r=arguments[0].levels||e.config.npm.levels;for(var i in r)r.hasOwnProperty(i)&&(n=void 0===n||r[i]>r[n]?i:n);var a=s.apply(this,arguments);a.add(new t(e,{level:n}));var c=a.configure;return a.configure=function(){c.apply(this,arguments),o.apply(this,arguments)},a};var a=e.configure;return e.configure=function(){a.apply(this,arguments),o.apply(this,arguments)},e.add(new t(e)),e}},e.winston2={versionSpecifier:"2.x",patch:function(e){var t,n=e.Logger.prototype.log,r=function(n,r,o){var s;return s=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",i.channel.publish("winston",{level:n,message:r,meta:o,levelKind:s}),r};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==r&&(this.filters=this.filters.filter((function(e){return e!==r})),this.filters.push(r)):this.filters=[r],n.apply(this,arguments)},e}},e.enable=function(){i.channel.registerMonkeyPatch("winston",e.winston2),i.channel.registerMonkeyPatch("winston",e.winston3)}})),sn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=Wt();e.azuresdk=t;var n=Qt();e.bunyan=n;var r=Xt();e.console=r;var i=Yt();e.mongodbCore=i;var o=Jt();e.mongodb=o;var s=Zt();e.mysql=s;var a=en();e.pgPool=a;var c=tn();e.pg=c;var u=nn();e.redis=u;var l=rn();e.tedious=l;var d=on();e.winston=d,e.enable=function(){n.enable(),r.enable(),i.enable(),o.enable(),s.enable(),c.enable(),a.enable(),u.enable(),d.enable(),t.enable(),l.enable()}})),an=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=I(),n=P();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var r,i,o,s,a="DiagnosticChannel";if(e.IsInitialized){for(s in r=sn(),i=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),o={bunyan:r.bunyan,console:r.console,mongodb:r.mongodb,mongodbCore:r.mongodbCore,mysql:r.mysql,redis:r.redis,pg:r.pg,pgPool:r.pgPool,winston:r.winston,azuresdk:r.azuresdk})-1===i.indexOf(s)&&(o[s].enable(),n.info(a,"Subscribed to "+s+" events"));i.length>0&&n.info(a,"Some modules will not be patched",i)}else n.info(a,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");e.registerContextPreservation=function(n){if(e.IsInitialized){var r=k();r.channel.addContextPreservation(n),r.channel.spanContextPropagator=t.AsyncScopeManager}}})),cn=b(((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}})),un=b(((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=n(3685),o=n(5687),s=n(7310),a=n(2057),c=P(),u=cn(),l=function(){function e(){}return e.getCookie=function(t,n){var r="";if(t&&t.length&&"string"==typeof n)for(var i=t+"=",o=n.split(";"),s=0;s<o.length;s++)if(n=o[s],(n=e.trim(n))&&0===n.indexOf(i)){r=n.substring(i.length,o[s].length);break}return r},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},n=e.map((function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)})).join(""),r=(Buffer.from?Buffer.from(n,"binary"):new Buffer(n,"binary")).toString("base64");return r.substr(0,r.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",i=0;i<4;i++)r+=n[15&(t=e.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var o=n[8+4*Math.random()|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(e){return 32===e.length&&"00000000000000000000000000000000"!==e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return e instanceof Error},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,i=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,n=n.length<2?"0"+n:n,(i>0?i+".":"")+(r=r.length<2?"0"+r:r)+":"+n+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var n={};for(var r in t){var i="",o=t[r],s=typeof o;if(e.isPrimitive(o))i=o.toString();else if(null===o||"undefined"===s)i="";else{if("function"===s){c.info("key: "+r+" was function; will not serialize");continue}var a=e.isArray(o)?o:e.extractObject(o);try{i=e.isPrimitive(a)?a:JSON.stringify(a)}catch(e){i=o.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+r+", could not be serialized")}}n[r]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return n}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||0==n.length||!t)return!0;for(var r=0;r<n.length;r++)if(new RegExp(n[r].replace(/\./g,".").replace(/\*/g,".*")).test(s.parse(t).hostname))return!1;return!0},e.getCorrelationContextTarget=function(e,t){var n=e.headers&&e.headers[u.requestContextHeader];if(n)for(var r=n.split(","),i=0;i<r.length;++i){var o=r[i].split("=");if(2==o.length&&o[0]==t)return o[1]}},e.makeRequest=function(t,n,a,u){n&&0===n.indexOf("//")&&(n="https:"+n);var l=s.parse(n),d=r(r({},a),{host:l.hostname,port:l.port,path:l.pathname}),p=void 0;if("https:"===l.protocol&&(p=t.proxyHttpsUrl||void 0),"http:"===l.protocol&&(p=t.proxyHttpUrl||void 0),p){0===p.indexOf("//")&&(p="http:"+p);var h=s.parse(p);"https:"===h.protocol?(c.info("Proxies that use HTTPS are not supported"),p=void 0):d=r(r({},d),{host:h.hostname,port:h.port||"80",path:n,headers:r(r({},d.headers),{Host:l.hostname})})}var f="https:"===l.protocol&&!p;return f&&void 0!==t.httpsAgent?d.agent=t.httpsAgent:f||void 0===t.httpAgent?f&&(d.agent=e.tlsRestrictedAgent):d.agent=t.httpAgent,f?o.request(d,u):i.request(d,u)},e.safeIncludeCorrelationHeader=function(t,n,r){var i;if("string"==typeof r)i=r;else if(r instanceof Array)i=r.join(",");else if(r&&"function"==typeof r.toString)try{i=r.toString()}catch(e){c.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,r)}i?e.addCorrelationIdHeaderFromString(t,n,i):n.setHeader(u.requestContextHeader,u.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(e){var t=Object.prototype.toString.call(e);return t+("[object Error]"===t?"{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":JSON.stringify(e))},e.addCorrelationIdHeaderFromString=function(e,t,n){var r=n.split(","),i=u.requestContextSourceKey+"=";r.some((function(e){return e.substring(0,i.length)===i}))||t.setHeader(u.requestContextHeader,n+","+u.requestContextSourceKey+"="+e.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new o.Agent({keepAlive:!0,maxSockets:25,secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e}();t.exports=l})),ln=b(((e,t)=>{"use strict";var n=un(),r=P(),i=function(){function e(){}return e.queryCorrelationId=function(t,i){var o=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(o))i(e.completedLookups[o]);else if(e.pendingLookups[o])e.pendingLookups[o].push(i);else{e.pendingLookups[o]=[i];var s=function(){if(e.pendingLookups[o]){var i={method:"GET",disableAppInsightsAutoCollection:!0};r.info(e.TAG,i);var a=n.makeRequest(t,o,i,(function(n){if(200===n.statusCode){var i="";n.setEncoding("utf-8"),n.on("data",(function(e){i+=e})),n.on("end",(function(){r.info(e.TAG,i);var t=e.correlationIdPrefix+i;e.completedLookups[o]=t,e.pendingLookups[o]&&e.pendingLookups[o].forEach((function(e){return e(t)})),delete e.pendingLookups[o]}))}else n.statusCode>=400&&n.statusCode<500?(e.completedLookups[o]=void 0,delete e.pendingLookups[o]):setTimeout(s,t.correlationIdRetryIntervalMs)}));a&&(a.on("error",(function(t){r.warn(e.TAG,t)})),a.end())}};setTimeout(s,0)}},e.cancelCorrelationIdQuery=function(t,n){var r=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",i=e.pendingLookups[r];i&&(e.pendingLookups[r]=i.filter((function(e){return e!=n})),0==e.pendingLookups[r].length&&delete e.pendingLookups[r])},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var n=(e.currentRootId++).toString(16);return e.appendSuffix(t,n,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var n="|"===e[0]?1:0;return e.substring(n,t)},e.generateRootId=function(){return"|"+n.w3cTraceId()+"."},e.appendSuffix=function(t,r,i){if(t.length+r.length<e.requestIdMaxLength)return t+r+i;var o=e.requestIdMaxLength-9;if(t.length>o)for(;o>1;--o){var s=t[o-1];if("."===s||"_"===s)break}if(o<=1)return e.generateRootId();for(r=n.randomu32().toString(16);r.length<8;)r="0"+r;return t.substring(0,o)+r+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=n.randomu32(),e}();t.exports=i})),dn=b(((e,t)=>{"use strict";var n=un(),r=ln(),i=function(){function e(t,i){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&"string"==typeof t)if(t.split(",").length>1)this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16);else{var o=t.trim().split("-"),s=o.length;s>=4?(this.version=o[0],this.traceId=o[1],this.spanId=o[2],this.traceFlag=o[3]):(this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=n.w3cTraceId()),"00"===this.version&&4!==s&&(this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=n.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=n.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=n.w3cTraceId().substr(0,16),this.traceId=n.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(i){this.parentId=i.slice();var a=r.getRootId(i);e.isValidTraceId(a)||(this.legacyRootId=a,a=n.w3cTraceId()),-1!==i.indexOf("|")&&(i=i.substring(1+i.substring(0,i.length-1).lastIndexOf("."),i.length-1)),this.traceId=a,this.spanId=i}else this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.formatOpenTelemetryTraceFlags=function(e){var t="0"+e.toString(16);return t.substring(t.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=n.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();t.exports=i})),pn=b(((e,t)=>{"use strict";var n=function(){function e(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return e.prototype.toString=function(){var e=this.fieldmap;return e&&0!=e.length?e.join(", "):null},e.validateKeyChars=function(e){var t=e.split("@");if(2==t.length){var n=t[0].trim(),r=t[1].trim(),i=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),o=Boolean(r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return i&&o}return 1==t.length&&Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(t){var n=[],r={},i=t.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o].trim();if(0!==a.length){var c=a.split("=");if(2!==c.length||!e.validateKeyChars(c[0])||r[c[0]])return null;r[c[0]]=!0,n.push(a)}}return n},e.strict=!0,e}();t.exports=n})),hn=b(((e,t)=>{"use strict";t.exports=function(){}})),fn=b(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(hn());t.exports=i})),mn=b(((e,t)=>{"use strict";t.exports=function(){}})),gn=b(((e,t)=>{"use strict";t.exports=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}})),vn=b(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){return e.call(this)||this}return r(t,e),t}(mn());t.exports=i})),yn=b(((e,t)=>{"use strict";var n,r;(r=n||(n={}))[r.Measurement=0]="Measurement",r[r.Aggregation=1]="Aggregation",t.exports=n})),_n=b(((e,t)=>{"use strict";var n=yn();t.exports=function(){this.kind=n.Measurement}})),bn=b(((e,t)=>{"use strict";t.exports=function(){this.ver=1,this.sampleRate=100,this.tags={}}})),En=b(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(hn());t.exports=i})),Sn=b(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return r(t,e),t}(hn());t.exports=i})),wn=b(((e,t)=>{"use strict";t.exports=function(){this.hasFullStack=!0,this.parsedStack=[]}})),Cn=b(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return r(t,e),t}(hn());t.exports=i})),Tn=b(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return r(t,e),t}(hn());t.exports=i})),Rn=b(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(En());t.exports=i})),On=b(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return r(t,e),t}(hn());t.exports=i})),xn=b(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(hn());t.exports=i})),Pn=b(((e,t)=>{"use strict";var n,r;(r=n||(n={}))[r.Verbose=0]="Verbose",r[r.Information=1]="Information",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.Critical=4]="Critical",t.exports=n})),In=b(((e,t)=>{"use strict";t.exports=function(){}})),An=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=fn(),e.Base=mn(),e.ContextTagKeys=gn(),e.Data=vn(),e.DataPoint=_n(),e.DataPointType=yn(),e.Domain=hn(),e.Envelope=bn(),e.EventData=En(),e.ExceptionData=Sn(),e.ExceptionDetails=wn(),e.MessageData=Cn(),e.MetricData=Tn(),e.PageViewData=Rn(),e.RemoteDependencyData=On(),e.RequestData=xn(),e.SeverityLevel=Pn(),e.StackFrame=In()})),Dn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=An(),n=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();e.RemoteDependencyDataConstants=n,e.domainSupportsProperties=function(e){return"properties"in e||e instanceof t.EventData||e instanceof t.ExceptionData||e instanceof t.MessageData||e instanceof t.MetricData||e instanceof t.PageViewData||e instanceof t.RemoteDependencyData||e instanceof t.RequestData}})),Nn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),kn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Mn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ln=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Fn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),qn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),jn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Un=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Bn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Vn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Hn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),zn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Gn=b((e=>{"use strict";var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0,e.telemetryTypeToBaseType=function(e){switch(e){case t.Event:return"EventData";case t.Exception:return"ExceptionData";case t.Trace:return"MessageData";case t.Metric:return"MetricData";case t.Request:return"RequestData";case t.Dependency:return"RemoteDependencyData";case t.Availability:return"AvailabilityData";case t.PageView:return"PageViewData"}},e.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return t.Event;case"ExceptionData":return t.Exception;case"MessageData":return t.Trace;case"MetricData":return t.Metric;case"RequestData":return t.Request;case"RemoteDependencyData":return t.Dependency;case"AvailabilityData":return t.Availability;case"PageViewData":return t.PageView}},e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"},(n=t=e.TelemetryType||(e.TelemetryType={}))[n.Event=0]="Event",n[n.Exception=1]="Exception",n[n.Trace=2]="Trace",n[n.Metric=3]="Metric",n[n.Request=4]="Request",n[n.Dependency=5]="Dependency",n[n.Availability=6]="Availability",n[n.PageView=7]="PageView"})),Kn=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Nn(),e),n(kn(),e),n(Mn(),e),n(Ln(),e),n(Fn(),e),n(qn(),e),n(jn(),e),n(Un(),e),n(Bn(),e),n(Vn(),e),n(Hn(),e),n(zn(),e),n(Gn(),e)})),$n=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Wn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Qn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Xn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Yn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Jn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Zn=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),er=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),tr=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n($n(),e),n(Wn(),e),n(Qn(),e),n(Xn(),e),n(Yn(),e),n(Jn(),e),n(Zn(),e),n(er(),e)})),nr=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Dn(),e),n(An(),e),n(Kn(),e),n(tr(),e)})),rr=b(((e,t)=>{"use strict";var n=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var r=this.properties||{};if(t)if("string"==typeof t)r.error=t;else if(t instanceof Error)r.error=t.message;else if("object"==typeof t)for(var i in t)r[i]=t[i]&&t[i].toString&&t[i].toString();this.properties=r},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();t.exports=n})),ir=b(((e,t)=>{"use strict";var r,i=e&&e.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(7310),s=nr(),a=un(),c=cn(),u=rr(),l=ln(),d=pn(),p=dn(),h=function(e){function t(t,n){var r=e.call(this)||this;return t&&(r.method=t.method,r.url=r._getAbsoluteUrl(t),r.startTime=+new Date,r.socketRemoteAddress=t.socket&&t.socket.remoteAddress,r.parseHeaders(t,n),t.connection&&(r.connectionRemoteAddress=t.connection.remoteAddress,r.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),r}return i(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+o.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e&&e.time?t.time=e.time:this.startTime&&(t.time=new Date(this.startTime)),e){for(var n in e)t[n]||(t[n]=e[n]);if(e.properties)for(var n in e.properties)t.properties[n]=e.properties[n]}return t},t.prototype.getRequestTags=function(e){var n={};for(var r in e)n[r]=e[r];return n[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(e),n[t.keys.operationParentId]=this.getOperationParentId(e),n[t.keys.operationId]=this.getOperationId(e),n},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){return e[t.keys.operationName]||this.method+" "+o.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,n=o.parse(e.url),r=n.pathname,i=n.search,s=t||"https"==e.headers["x-forwarded-proto"]?"https":"http";return o.format({protocol:s,host:e.headers.host,pathname:r,search:i})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var n=e.exec(t);if(n)return n[0]},n=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!n&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(n="127.0.0.1"),n},t.prototype._getId=function(e){var n=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(a.getCookie(e,n))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(e,c.requestContextSourceKey),e.headers){var n=e.headers[c.traceStateHeader]?e.headers[c.traceStateHeader].toString():null,r=e.headers[c.traceparentHeader]?e.headers[c.traceparentHeader].toString():null,i=e.headers[c.requestIdHeader]?e.headers[c.requestIdHeader].toString():null,o=e.headers[c.parentIdHeader]?e.headers[c.parentIdHeader].toString():null,s=e.headers[c.rootIdHeader]?e.headers[c.rootIdHeader].toString():null;this.correlationContextHeader=e.headers[c.correlationContextHeader]?e.headers[c.correlationContextHeader].toString():null,l.w3cEnabled&&(r||n)?(this.traceparent=new p(r?r.toString():null),this.tracestate=r&&n&&new d(n?n.toString():null),this.setBackCompatFromThisTraceContext()):i?l.w3cEnabled?(this.traceparent=new p(null,i),this.setBackCompatFromThisTraceContext()):(this.parentId=i,this.requestId=l.generateRequestId(this.parentId),this.operationId=l.getRootId(this.requestId)):l.w3cEnabled?(this.traceparent=new p,this.traceparent.parentId=o,this.traceparent.legacyRootId=s||o,this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=l.generateRequestId(s||this.parentId),this.correlationContextHeader=null,this.operationId=l.getRootId(this.requestId)),t&&(this.requestId=t,this.operationId=l.getRootId(this.requestId))}},t.parseId=function(e){var t=e.split("|");return t.length>0?t[0]:""},t.keys=new s.ContextTagKeys,t}(u);t.exports=h})),or=b(((e,t)=>{var n;e=t.exports=$,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var h=a++;s[h]="(?:"+s[c]+"|"+s[l]+")";var f=a++;s[f]="(?:"+s[u]+"|"+s[l]+")";var m=a++;s[m]="(?:-("+s[h]+"(?:\\."+s[h]+")*))";var g=a++;s[g]="(?:-?("+s[f]+"(?:\\."+s[f]+")*))";var v=a++;s[v]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[v]+"(?:\\."+s[v]+")*))";var _=a++,b="v?"+s[d]+s[m]+"?"+s[y]+"?";s[_]="^"+b+"$";var E="[v=\\s]*"+s[p]+s[g]+"?"+s[y]+"?",S=a++;s[S]="^"+E+"$";var w=a++;s[w]="((?:<|>)?=?)";var C=a++;s[C]=s[u]+"|x|X|\\*";var T=a++;s[T]=s[c]+"|x|X|\\*";var R=a++;s[R]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[m]+")?"+s[y]+"?)?)?";var O=a++;s[O]="[v=\\s]*("+s[C]+")(?:\\.("+s[C]+")(?:\\.("+s[C]+")(?:"+s[g]+")?"+s[y]+"?)?)?";var x=a++;s[x]="^"+s[w]+"\\s*"+s[R]+"$";var P=a++;s[P]="^"+s[w]+"\\s*"+s[O]+"$";var I=a++;s[I]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var A=a++;s[A]="(?:~>?)";var D=a++;s[D]="(\\s*)"+s[A]+"\\s+",o[D]=new RegExp(s[D],"g");var N=a++;s[N]="^"+s[A]+s[R]+"$";var k=a++;s[k]="^"+s[A]+s[O]+"$";var M=a++;s[M]="(?:\\^)";var L=a++;s[L]="(\\s*)"+s[M]+"\\s+",o[L]=new RegExp(s[L],"g");var F=a++;s[F]="^"+s[M]+s[R]+"$";var q=a++;s[q]="^"+s[M]+s[O]+"$";var j=a++;s[j]="^"+s[w]+"\\s*("+E+")$|^$";var U=a++;s[U]="^"+s[w]+"\\s*("+b+")$|^$";var B=a++;s[B]="(\\s*)"+s[w]+"\\s*("+E+"|"+s[R]+")",o[B]=new RegExp(s[B],"g");var V=a++;s[V]="^\\s*("+s[R]+")\\s+-\\s+("+s[R]+")\\s*$";var H=a++;s[H]="^\\s*("+s[O]+")\\s+-\\s+("+s[O]+")\\s*$";var z,G=a++;for(s[G]="(<|>)?=?\\s*\\*",z=0;z<35;z++)n(z,s[z]),o[z]||(o[z]=new RegExp(s[z]));function K(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof $)return e;if("string"!=typeof e||e.length>r)return null;if(!(t.loose?o[S]:o[_]).test(e))return null;try{return new $(e,t)}catch{return null}}function $(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof $){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof $))return new $(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[S]:o[_]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=K,e.valid=function(e,t){var n=K(e,t);return n?n.version:null},e.clean=function(e,t){var n=K(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},e.SemVer=$,$.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},$.prototype.toString=function(){return this.version},$.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof $||(e=new $(e,this.options)),this.compareMain(e)||this.comparePre(e)},$.prototype.compareMain=function(e){return e instanceof $||(e=new $(e,this.options)),Q(this.major,e.major)||Q(this.minor,e.minor)||Q(this.patch,e.patch)},$.prototype.comparePre=function(e){if(e instanceof $||(e=new $(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return Q(r,i)}while(++t)},$.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new $(e,n).inc(t,r).version}catch{return null}},e.diff=function(e,t){if(Z(e,t))return null;var n=K(e),r=K(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},e.compareIdentifiers=Q;var W=/^[0-9]+$/;function Q(e,t){var n=W.test(e),r=W.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function X(e,t,n){return new $(e,n).compare(new $(t,n))}function Y(e,t,n){return X(e,t,n)>0}function J(e,t,n){return X(e,t,n)<0}function Z(e,t,n){return 0===X(e,t,n)}function ee(e,t,n){return 0!==X(e,t,n)}function te(e,t,n){return X(e,t,n)>=0}function ne(e,t,n){return X(e,t,n)<=0}function re(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Z(e,n,r);case"!=":return ee(e,n,r);case">":return Y(e,n,r);case">=":return te(e,n,r);case"<":return J(e,n,r);case"<=":return ne(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}e.rcompareIdentifiers=function(e,t){return Q(t,e)},e.major=function(e,t){return new $(e,t).major},e.minor=function(e,t){return new $(e,t).minor},e.patch=function(e,t){return new $(e,t).patch},e.compare=X,e.compareLoose=function(e,t){return X(e,t,!0)},e.rcompare=function(e,t,n){return X(t,e,n)},e.sort=function(t,n){return t.sort((function(t,r){return e.compare(t,r,n)}))},e.rsort=function(t,n){return t.sort((function(t,r){return e.rcompare(t,r,n)}))},e.gt=Y,e.lt=J,e.eq=Z,e.neq=ee,e.gte=te,e.lte=ne,e.cmp=re,e.Comparator=ie;var oe={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,n,r,i,o,s,a,c,u,l,d,p){return((t=ae(n)?"":ae(r)?">="+n+".0.0":ae(i)?">="+n+"."+r+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new se(t,n)}catch{return!1}return t.test(e)}function de(e,t,n,r){var i,o,s,a,c;switch(e=new $(e,r),t=new se(t,r),n){case">":i=Y,o=ne,s=J,a=">",c=">=";break;case"<":i=J,o=te,s=Y,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===oe&&(e=new ie(">=0.0.0")),d=d||e,p=p||e,i(e.semver,d.semver,r)?d=e:s(e.semver,p.semver,r)&&(p=e)})),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[j]:o[U],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new $(n[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new $(e,this.options)),re(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var n;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new se(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?o[H]:o[V];e=e.replace(r,ce),n("hyphen replace",e),e=e.replace(o[B],"$1$2$3"),n("comparator trim",e,o[B]),e=(e=(e=e.replace(o[D],"$1~")).replace(o[L],"$1^")).split(/\s+/).join(" ");var i=t?o[j]:o[U],s=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?o[q]:o[F];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?o[k]:o[N];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?o[P]:o[x];return e.replace(r,(function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=ae(i),u=c||ae(o),l=u||ae(s);return"="===r&&l&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&l?(u&&(o=0),s=0,">"===r?(r=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[G],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(i)}))),s.map((function(e){return new ie(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new $(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch{return null}return e.forEach((function(e){o.test(e)&&(!r||-1===i.compare(e))&&(i=new $(r=e,n))})),r},e.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch{return null}return e.forEach((function(e){o.test(e)&&(!r||1===i.compare(e))&&(i=new $(r=e,n))})),r},e.minVersion=function(e,t){e=new se(e,t);var n=new $("0.0.0");if(e.test(n)||(n=new $("0.0.0-0"),e.test(n)))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new $(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!n||Y(n,t))&&(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,n){return de(e,t,"<",n)},e.gtr=function(e,t,n){return de(e,t,">",n)},e.outside=de,e.prerelease=function(e,t){var n=K(e,t);return n&&n.prerelease.length?n.prerelease:null},e.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},e.coerce=function(e){if(e instanceof $)return e;if("string"!=typeof e)return null;var t=e.match(o[I]);return null==t?null:K(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),sr=b(((e,t)=>{"use strict";function n(e){return"function"==typeof e}var r=console.error.bind(console);function i(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function o(e){e&&e.logger&&(n(e.logger)?r=e.logger:r("new logger isn't a function, not replacing"))}function s(e,t,o){if(e&&e[t]){if(!o)return r("no wrapper function"),void r((new Error).stack);if(n(e[t])&&n(o)){var s=e[t],a=o(s,t);return i(a,"__original",s),i(a,"__unwrap",(function(){e[t]===a&&i(e,t,s)})),i(a,"__wrapped",!0),i(e,t,a),a}r("original object and wrapper must be functions")}else r("no original function "+t+" to wrap")}function a(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void r("no original to unwrap to -- has "+t+" already been unwrapped?"):(r("no function to unwrap."),void r((new Error).stack))}o.wrap=s,o.massWrap=function(e,t,n){if(!e)return r("must provide one or more modules to patch"),void r((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){s(e,t,n)}))})):r("must provide one or more functions to wrap on modules")},o.unwrap=a,o.massUnwrap=function(e,t){if(!e)return r("must provide one or more modules to patch"),void r((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t)}))})):r("must provide one or more functions to unwrap on modules")},t.exports=o})),ar=b(((e,t)=>{"use strict";var n=sr(),r=n.wrap,i=n.unwrap,o="wrap@before";function s(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function a(e,t){var n;return n=e._events&&e._events[t],Array.isArray(n)||(n=n?[n]:[]),n}function c(e,t){if(e){var n=e;if("function"==typeof e)n=t(e);else if(Array.isArray(e)){n=[];for(var r=0;r<e.length;r++)n[r]=t(e[r])}return n}}t.exports=function(e,t,n){if(!(e&&e.on&&e.addListener&&e.removeListener&&e.emit))throw new Error("can only wrap real EEs");if(!t)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function u(e){return function(t,n){var i=a(this,t).slice();try{var s=e.call(this,t,n);return function(e,t,n){var r=a(e,t).filter((function(e){return-1===n.indexOf(e)}));r.length>0&&function(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r],s=e[o];if("function"==typeof s)s(i);else if(Array.isArray(s))for(var a=s.length,c=0;c<a;c++)s[c](i)}}(e,r)}(this,t,i),s}finally{this.on.__wrapped||r(this,"on",u),this.addListener.__wrapped||r(this,"addListener",u)}}}e[o]?"function"==typeof e[o]?s(e,o,[e[o],t]):Array.isArray(e[o])&&e[o].push(t):s(e,o,t),e.__wrapped||(r(e,"addListener",u),r(e,"on",u),r(e,"emit",(function(e){return function(t){if(!this._events||!this._events[t])return e.apply(this,arguments);var o=this._events[t];r(this,"removeListener",(function(e){return function(){this._events[t]=o;try{return e.apply(this,arguments)}finally{o=this._events[t],this._events[t]=c(o,n)}}}));try{return this._events[t]=c(o,n),e.apply(this,arguments)}finally{i(this,"removeListener"),this._events[t]=o}}})),s(e,"__unwrap",(function(){i(e,"addListener"),i(e,"on"),i(e,"emit"),delete e[o],delete e.__wrapped})),s(e,"__wrapped",!0))}})),cr=b(((e,t)=>{"use strict";var r=n(3837),i=n(9491),o=ar(),s=n(852),a="cls@contexts",c="error@context",u=process.env.DEBUG_CLS_HOOKED,l=-1;function d(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function p(e){return process.namespaces[e]}function h(e){let t=p(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"'),i.ok(t.id,"don't assign to process.namespaces directly! "+r.inspect(t)),process.namespaces[e]=null}function f(...e){u&&process._rawDebug(`${r.format(...e)}`)}t.exports={getNamespace:p,createNamespace:function(e){i.ok(e,"namespace must be given a name."),u&&f(`NS-CREATING NAMESPACE (${e})`);let t=new d(e);return t.id=l,s.createHook({init(n,i,o,a){if(l=s.executionAsyncId(),t.active)t._contexts.set(n,t.active),u&&f(`${" ".repeat(t._indent<0?0:t._indent)}INIT [${i}] (${e}) asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`);else if(0===l){let o=s.triggerAsyncId(),c=t._contexts.get(o);c?(t._contexts.set(n,c),u&&f(`${" ".repeat(t._indent<0?0:t._indent)}INIT USING CONTEXT FROM TRIGGERID [${i}] (${e}) asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)):u&&f(`${" ".repeat(t._indent<0?0:t._indent)}INIT MISSING CONTEXT [${i}] (${e}) asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}if(u&&"PROMISE"===i){f(r.inspect(a,{showHidden:!0}));let s=a.parentId;f(`${" ".repeat(t._indent<0?0:t._indent)}INIT RESOURCE-PROMISE [${i}] (${e}) parentId:${s} asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}},before(n){let i;if(l=s.executionAsyncId(),i=t._contexts.get(n)||t._contexts.get(l),i){if(u){let o=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE (${e}) asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(i)}`),t._indent+=2}t.enter(i)}else if(u){let i=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE MISSING CONTEXT (${e}) asyncId:${n} currentUid:${l} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(n){let i;if(l=s.executionAsyncId(),i=t._contexts.get(n)||t._contexts.get(l),i){if(u){let o=s.triggerAsyncId();t._indent-=2,f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER (${e}) asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(i)}`)}t.exit(i)}else if(u){let o=s.triggerAsyncId();t._indent-=2,f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER MISSING CONTEXT (${e}) asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(i)}`)}},destroy(n){if(l=s.executionAsyncId(),u){let i=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}DESTROY (${e}) currentUid:${l} asyncId:${n} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(t._contexts.get(l))}`)}t._contexts.delete(n)}}).enable(),process.namespaces[e]=t,t},destroyNamespace:h,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){h(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},d.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,u&&f(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),t},d.prototype.get=function(e){if(this.active){if(u){let t=s.executionAsyncId(),n=s.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);f(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),f(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${l} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[e]}if(u){let t=s.currentId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${l} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length}`)}},d.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=l,u){let t=s.executionAsyncId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} context:${r.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e},d.prototype.run=function(e){let t=this.createContext();this.enter(t);try{if(u){let e=s.triggerAsyncId(),n=s.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} context:${r.inspect(t)}`)}return e(t),t}catch(e){throw e&&(e[c]=t),e}finally{if(u){let e=s.triggerAsyncId(),n=s.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} ${r.inspect(t)}`)}this.exit(t)}},d.prototype.runAndReturn=function(e){let t;return this.run((function(n){t=e(n)})),t},d.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return u&&f("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(t)),n.then((e=>(u&&f("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,u&&f("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e}))},d.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{n.exit(t)}}},d.prototype.enter=function(e){if(i.ok(e,"context must be provided for entering"),u){let t=s.executionAsyncId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${r.inspect(e)}`)}this._set.push(this.active),this.active=e},d.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),u){let t=s.executionAsyncId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${r.inspect(e)}`)}if(this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(u&&f("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(e)),i.ok(t>=0,"context not currently entered; can't exit. \n"+r.inspect(this)+"\n"+r.inspect(e))):(i.ok(t,"can't remove top context"),this._set.splice(t,1))},d.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,n="context@"+this.name;o(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,n=e[a];return Object.keys(n).forEach((function(e){let r=n[e];t=r.namespace.bind(t,r.context)})),t}))},d.prototype.fromException=function(e){return e[c]},process.namespaces={}})),ur=b(((e,t)=>{"use strict";function n(){}t.exports=function(){let e=this._hooks,t=this._state,r=process.nextTick;process.nextTick=function(){if(!t.enabled)return r.apply(process,arguments);let i=new Array(arguments.length);for(let e=0;e<arguments.length;e++)i[e]=arguments[e];let o=i[0];if("function"!=typeof o)throw new TypeError("callback is not a function");let s=new n,a=--t.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let t=!0;try{o.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(s,a,!0),e.destroy.call(null,a)}))}e.post.call(s,a,!1),e.destroy.call(null,a)},r.apply(process,i)}}})),lr=b(((e,t)=>{"use strict";function n(){}t.exports=function(){let e=this._hooks,t=this._state,r=global.Promise,i=r.prototype.then;function o(t,n,r,i){return"function"!=typeof t?i?function(t){return function(n){return e.destroy.call(null,t),n}}(r):function(t){return function(n){throw e.destroy.call(null,t),n}}(r):function(){e.pre.call(n,r);try{return t.apply(this,arguments)}finally{e.post.call(n,r,!1),e.destroy.call(null,r)}}}r.prototype.then=function(r,s){if(!t.enabled)return i.call(this,r,s);let a=new n,c=--t.counter;return e.init.call(a,c,0,null,null),i.call(this,o(r,a,c,!0),o(s,a,c,!1))}}})),dr=b(((e,t)=>{"use strict";var r=n(9512);function i(){}function o(){}function s(){}var a=new Map,c=new Map,u=new Map,l=null,d=!1;function p(e,t,n,i,o,s,a){let c=r[n],u=r[i];r[n]=function(){if(!t.enabled)return c.apply(r,arguments);let n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];let i=n[0];if("function"!=typeof i)throw new TypeError('"callback" argument must be a function');let u,p=new o,h=--t.counter;return e.init.call(p,h,0,null,null),n[0]=function(){l=u,e.pre.call(p,h);let t=!0;try{i.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(p,h,!0),s.delete(u),e.destroy.call(null,h)}))}e.post.call(p,h,!1),l=null,(a||d)&&(d=!1,s.delete(u),e.destroy.call(null,h))},u=c.apply(r,n),s.set(u,h),u},r[i]=function(t){if(l===t&&null!==t)d=!0;else if(s.has(t)){let n=s.get(t);s.delete(t),e.destroy.call(null,n)}u.apply(r,arguments)}}t.exports=function(){p(this._hooks,this._state,"setTimeout","clearTimeout",i,a,!0),p(this._hooks,this._state,"setInterval","clearInterval",o,c,!1),p(this._hooks,this._state,"setImmediate","clearImmediate",s,u,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate}})),pr=b(((e,t)=>{t.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}})),hr=b(((e,t)=>{"use strict";var n=process.binding("async_wrap"),r=n.Providers.TIMERWRAP,i={nextTick:ur(),promise:lr(),timers:dr()},o=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let e=this.initFns=[],t=this.preFns=[],n=this.postFns=[],i=this.destroyFns=[];this.init=function(t,n,i,s){if(n!==r)for(let r of e)r(t,this,n,i,s);else o.add(t)},this.pre=function(e){if(!o.has(e))for(let n of t)n(e,this)},this.post=function(e,t){if(!o.has(e))for(let r of n)r(e,this,t)},this.destroy=function(e){if(o.has(e))o.delete(e);else for(let t of i)t(e)}}function c(e,t){let n=e.indexOf(t);-1!==n&&e.splice(n,1)}function u(){this._state=new s,this._hooks=new a,this.version=pr().version,this.providers=n.Providers;for(let e of Object.keys(i))i[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),n.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}a.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)},a.prototype.remove=function(e){e.init&&c(this.initFns,e.init),e.pre&&c(this.preFns,e.pre),e.post&&c(this.postFns,e.post),e.destroy&&c(this.destroyFns,e.destroy)},t.exports=u,u.prototype.addHooks=function(e){this._hooks.add(e)},u.prototype.removeHooks=function(e){this._hooks.remove(e)},u.prototype.enable=function(){this._state.enabled=!0,n.enable()},u.prototype.disable=function(){this._state.enabled=!1,n.disable()}})),fr=b(((e,t)=>{t.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}})),mr=b(((e,t)=>{t.exports=function(e,t){var n=[];n.push(function(e){try{return Error.prototype.toString.call(e)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}(e));for(var r=0;r<t.length;r++){var i,o=t[r];try{i=o.toString()}catch(e){try{i="<error: "+e+">"}catch{i="<error>"}}n.push("    at "+i)}return n.join("\n")}})),gr=b(((e,t)=>{var n=mr();function r(){this.extend=new s,this.filter=new s,this.format=new a,this.version=fr().version}var i=!1;r.prototype.callSite=function e(t){t||(t={}),i=!0;var n={};Error.captureStackTrace(n,e);var r=n.stack;return i=!1,r=r.slice(t.slice||0),t.extend&&(r=this.extend._modify(n,r)),t.filter&&(r=this.filter._modify(n,r)),r};var o=new r;function s(){this._modifiers=[]}function a(){this._formater=n,this._previous=void 0}s.prototype._modify=function(e,t){for(var n=0,r=this._modifiers.length;n<r;n++)t=this._modifiers[n](e,t);return t},s.prototype.attach=function(e){this._modifiers.push(e)},s.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return-1!==t&&(this._modifiers.splice(t,1),!0)},a.prototype.replace=function(e){e?this._formater=e:this.restore()},a.prototype.restore=function(){this._formater=n,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===n?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&o.format.replace(Error.prepareStackTrace);var c=!1;function u(e,t){if(i)return t;if(c)return n(e,t);var r=t.concat();r=o.extend._modify(e,r),r=(r=o.filter._modify(e,r)).slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&void 0===Object.getOwnPropertyDescriptor(e,"callSite")&&(e.callSite={original:t,mutated:r}),c=!0;var s=o.format._formater(e,r);return c=!1,s}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return u},set:function(e){e===u?o.format._roolback():(o.format._backup(),o.format.replace(e))}}),Object.defineProperty(Error.prototype,"callSite",{get:function(){return this.stack,this.callSite},set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0}),t.exports=o})),vr=b(((e,t)=>{if(global._stackChain){if(global._stackChain.version!==fr().version)throw new Error("Conflicting version of stack-chain found");t.exports=global._stackChain}else t.exports=global._stackChain=gr()})),yr=b(((e,t)=>{"use strict";var n=hr();if(global._asyncHook){if(global._asyncHook.version!==pr().version)throw new Error("Conflicting version of async-hook-jl found");t.exports=global._asyncHook}else vr().filter.attach((function(e,t){return t.filter((function(e){let t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)}))})),t.exports=global._asyncHook=new n})),_r=b(((e,t)=>{"use strict";var r=n(3837),i=n(9491),o=ar(),s=yr(),a="cls@contexts",c="error@context",u=[];for(let e in s.providers)u[s.providers[e]]=e;var l,d,p=process.env.DEBUG_CLS_HOOKED,h=-1;function f(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function m(e){return process.namespaces[e]}function g(e){let t=m(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"'),i.ok(t.id,"don't assign to process.namespaces directly! "+r.inspect(t)),process.namespaces[e]=null}function v(e){process.env.DEBUG&&process._rawDebug(e)}function y(e){return e?"function"==typeof e?e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:e.constructor&&e.constructor.name?e.constructor.name:void 0:e}if(t.exports={getNamespace:m,createNamespace:function(e){i.ok(e,"namespace must be given a name."),p&&v("CREATING NAMESPACE "+e);let t=new f(e);return t.id=h,s.addHooks({init(n,i,o,s,a){h=n,s?(t._contexts.set(n,t._contexts.get(s)),p&&v("PARENTID: "+e+" uid:"+n+" parent:"+s+" provider:"+o)):t._contexts.set(h,t.active),p&&v("INIT "+e+" uid:"+n+" parent:"+s+" provider:"+u[o]+" active:"+r.inspect(t.active,!0))},pre(n,i){h=n;let o=t._contexts.get(n);o?(p&&v(" PRE "+e+" uid:"+n+" handle:"+y(i)+" context:"+r.inspect(o)),t.enter(o)):p&&v(" PRE MISSING CONTEXT "+e+" uid:"+n+" handle:"+y(i))},post(n,i){h=n;let o=t._contexts.get(n);o?(p&&v(" POST "+e+" uid:"+n+" handle:"+y(i)+" context:"+r.inspect(o)),t.exit(o)):p&&v(" POST MISSING CONTEXT "+e+" uid:"+n+" handle:"+y(i))},destroy(n){h=n,p&&v("DESTROY "+e+" uid:"+n+" context:"+r.inspect(t._contexts.get(h))+" active:"+r.inspect(t.active,!0)),t._contexts.delete(n)}}),process.namespaces[e]=t,t},destroyNamespace:g,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){g(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},f.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return p&&v("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+h+" active:"+r.inspect(this.active,!0)),this.active[e]=t,t},f.prototype.get=function(e){if(this.active)return p&&v("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+h+" active:"+r.inspect(this.active,!0)),this.active[e];p&&v("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+h+" active:"+r.inspect(this.active,!0))},f.prototype.createContext=function(){p&&v("   CREATING Context: "+this.name+" uid:"+h+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=h,p&&v("   CREATED Context: "+this.name+" uid:"+h+" len:"+this._set.length+"  context:"+r.inspect(e,!0,2,!0)),e},f.prototype.run=function(e){let t=this.createContext();this.enter(t);try{return p&&v(" BEFORE RUN: "+this.name+" uid:"+h+" len:"+this._set.length+" "+r.inspect(t)),e(t),t}catch(e){throw e&&(e[c]=t),e}finally{p&&v(" AFTER RUN: "+this.name+" uid:"+h+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t)}},f.prototype.runAndReturn=function(e){var t;return this.run((function(n){t=e(n)})),t},f.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return p&&v(" BEFORE runPromise: "+this.name+" uid:"+h+" len:"+this._set.length+" "+r.inspect(t)),n.then((e=>(p&&v(" AFTER runPromise: "+this.name+" uid:"+h+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,p&&v(" AFTER runPromise: "+this.name+" uid:"+h+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e}))},f.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{n.exit(t)}}},f.prototype.enter=function(e){i.ok(e,"context must be provided for entering"),p&&v("  ENTER "+this.name+" uid:"+h+" len:"+this._set.length+" context: "+r.inspect(e)),this._set.push(this.active),this.active=e},f.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),p&&v("  EXIT "+this.name+" uid:"+h+" len:"+this._set.length+" context: "+r.inspect(e)),this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(p&&v("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(e)),i.ok(t>=0,"context not currently entered; can't exit. \n"+r.inspect(this)+"\n"+r.inspect(e))):(i.ok(t,"can't remove top context"),this._set.splice(t,1))},f.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,n="context@"+this.name;o(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,n=e[a];return Object.keys(n).forEach((function(e){let r=n[e];t=r.namespace.bind(t,r.context)})),t}))},f.prototype.fromException=function(e){return e[c]},process.namespaces={},s._state&&!s._state.enabled&&s.enable(),p)for(d in(l=vr()).filter._modifiers)l.filter.deattach(d)})),br=b(((e,t)=>{"use strict";var n=or();process&&n.gte(process.versions.node,"8.0.0")?t.exports=cr():t.exports=_r()})),Er=b(((e,t)=>{var n;e=t.exports=$,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var h=a++;s[h]="(?:"+s[c]+"|"+s[l]+")";var f=a++;s[f]="(?:"+s[u]+"|"+s[l]+")";var m=a++;s[m]="(?:-("+s[h]+"(?:\\."+s[h]+")*))";var g=a++;s[g]="(?:-?("+s[f]+"(?:\\."+s[f]+")*))";var v=a++;s[v]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[v]+"(?:\\."+s[v]+")*))";var _=a++,b="v?"+s[d]+s[m]+"?"+s[y]+"?";s[_]="^"+b+"$";var E="[v=\\s]*"+s[p]+s[g]+"?"+s[y]+"?",S=a++;s[S]="^"+E+"$";var w=a++;s[w]="((?:<|>)?=?)";var C=a++;s[C]=s[u]+"|x|X|\\*";var T=a++;s[T]=s[c]+"|x|X|\\*";var R=a++;s[R]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[m]+")?"+s[y]+"?)?)?";var O=a++;s[O]="[v=\\s]*("+s[C]+")(?:\\.("+s[C]+")(?:\\.("+s[C]+")(?:"+s[g]+")?"+s[y]+"?)?)?";var x=a++;s[x]="^"+s[w]+"\\s*"+s[R]+"$";var P=a++;s[P]="^"+s[w]+"\\s*"+s[O]+"$";var I=a++;s[I]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var A=a++;s[A]="(?:~>?)";var D=a++;s[D]="(\\s*)"+s[A]+"\\s+",o[D]=new RegExp(s[D],"g");var N=a++;s[N]="^"+s[A]+s[R]+"$";var k=a++;s[k]="^"+s[A]+s[O]+"$";var M=a++;s[M]="(?:\\^)";var L=a++;s[L]="(\\s*)"+s[M]+"\\s+",o[L]=new RegExp(s[L],"g");var F=a++;s[F]="^"+s[M]+s[R]+"$";var q=a++;s[q]="^"+s[M]+s[O]+"$";var j=a++;s[j]="^"+s[w]+"\\s*("+E+")$|^$";var U=a++;s[U]="^"+s[w]+"\\s*("+b+")$|^$";var B=a++;s[B]="(\\s*)"+s[w]+"\\s*("+E+"|"+s[R]+")",o[B]=new RegExp(s[B],"g");var V=a++;s[V]="^\\s*("+s[R]+")\\s+-\\s+("+s[R]+")\\s*$";var H=a++;s[H]="^\\s*("+s[O]+")\\s+-\\s+("+s[O]+")\\s*$";var z,G=a++;for(s[G]="(<|>)?=?\\s*\\*",z=0;z<35;z++)n(z,s[z]),o[z]||(o[z]=new RegExp(s[z]));function K(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof $)return e;if("string"!=typeof e||e.length>r)return null;if(!(t.loose?o[S]:o[_]).test(e))return null;try{return new $(e,t)}catch{return null}}function $(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof $){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof $))return new $(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[S]:o[_]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=K,e.valid=function(e,t){var n=K(e,t);return n?n.version:null},e.clean=function(e,t){var n=K(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},e.SemVer=$,$.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},$.prototype.toString=function(){return this.version},$.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof $||(e=new $(e,this.options)),this.compareMain(e)||this.comparePre(e)},$.prototype.compareMain=function(e){return e instanceof $||(e=new $(e,this.options)),Q(this.major,e.major)||Q(this.minor,e.minor)||Q(this.patch,e.patch)},$.prototype.comparePre=function(e){if(e instanceof $||(e=new $(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return Q(r,i)}while(++t)},$.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new $(e,n).inc(t,r).version}catch{return null}},e.diff=function(e,t){if(Z(e,t))return null;var n=K(e),r=K(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},e.compareIdentifiers=Q;var W=/^[0-9]+$/;function Q(e,t){var n=W.test(e),r=W.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function X(e,t,n){return new $(e,n).compare(new $(t,n))}function Y(e,t,n){return X(e,t,n)>0}function J(e,t,n){return X(e,t,n)<0}function Z(e,t,n){return 0===X(e,t,n)}function ee(e,t,n){return 0!==X(e,t,n)}function te(e,t,n){return X(e,t,n)>=0}function ne(e,t,n){return X(e,t,n)<=0}function re(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Z(e,n,r);case"!=":return ee(e,n,r);case">":return Y(e,n,r);case">=":return te(e,n,r);case"<":return J(e,n,r);case"<=":return ne(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}e.rcompareIdentifiers=function(e,t){return Q(t,e)},e.major=function(e,t){return new $(e,t).major},e.minor=function(e,t){return new $(e,t).minor},e.patch=function(e,t){return new $(e,t).patch},e.compare=X,e.compareLoose=function(e,t){return X(e,t,!0)},e.rcompare=function(e,t,n){return X(t,e,n)},e.sort=function(t,n){return t.sort((function(t,r){return e.compare(t,r,n)}))},e.rsort=function(t,n){return t.sort((function(t,r){return e.rcompare(t,r,n)}))},e.gt=Y,e.lt=J,e.eq=Z,e.neq=ee,e.gte=te,e.lte=ne,e.cmp=re,e.Comparator=ie;var oe={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,n,r,i,o,s,a,c,u,l,d,p){return((t=ae(n)?"":ae(r)?">="+n+".0.0":ae(i)?">="+n+"."+r+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new se(t,n)}catch{return!1}return t.test(e)}function de(e,t,n,r){var i,o,s,a,c;switch(e=new $(e,r),t=new se(t,r),n){case">":i=Y,o=ne,s=J,a=">",c=">=";break;case"<":i=J,o=te,s=Y,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===oe&&(e=new ie(">=0.0.0")),d=d||e,p=p||e,i(e.semver,d.semver,r)?d=e:s(e.semver,p.semver,r)&&(p=e)})),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[j]:o[U],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new $(n[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new $(e,this.options)),re(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var n;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new se(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?o[H]:o[V];e=e.replace(r,ce),n("hyphen replace",e),e=e.replace(o[B],"$1$2$3"),n("comparator trim",e,o[B]),e=(e=(e=e.replace(o[D],"$1~")).replace(o[L],"$1^")).split(/\s+/).join(" ");var i=t?o[j]:o[U],s=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?o[q]:o[F];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?o[k]:o[N];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?o[P]:o[x];return e.replace(r,(function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=ae(i),u=c||ae(o),l=u||ae(s);return"="===r&&l&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&l?(u&&(o=0),s=0,">"===r?(r=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[G],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(i)}))),s.map((function(e){return new ie(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new $(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch{return null}return e.forEach((function(e){o.test(e)&&(!r||-1===i.compare(e))&&(i=new $(r=e,n))})),r},e.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch{return null}return e.forEach((function(e){o.test(e)&&(!r||1===i.compare(e))&&(i=new $(r=e,n))})),r},e.minVersion=function(e,t){e=new se(e,t);var n=new $("0.0.0");if(e.test(n)||(n=new $("0.0.0-0"),e.test(n)))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new $(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!n||Y(n,t))&&(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,n){return de(e,t,"<",n)},e.gtr=function(e,t,n){return de(e,t,">",n)},e.outside=de,e.prerelease=function(e,t){var n=K(e,t);return n&&n.prerelease.length?n.prerelease:null},e.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},e.coerce=function(e){if(e instanceof $)return e;if("string"!=typeof e)return null;var t=e.match(o[I]);return null==t?null:K(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),Sr=b(((e,t)=>{var n,r,i,o,s,a=sr().wrap,c=1,u=2,l=4,d=8,p=[],h=0,f=!1,m=[];function g(e,t){var n=e.length,r=t.length,i=[];if(0===n&&0===r)return i;for(var o=0;o<n;o++)i[o]=e[o];if(0===r)return i;for(var s=0;s<r;s++){var a=!0;for(o=0;o<n;o++)if(e[o].uid===t[s].uid){a=!1;break}a&&i.push(t[s])}return i}function v(e,t){"function"==typeof e.create&&(this.create=e.create,this.flags|=c),"function"==typeof e.before&&(this.before=e.before,this.flags|=u),"function"==typeof e.after&&(this.after=e.after,this.flags|=l),"function"==typeof e.error&&(this.error=e.error,this.flags|=d),this.uid=++h,this.data=void 0===t?null:t}function y(e,t){if("object"!=typeof e||!e)throw new TypeError("callbacks argument must be an object");return e instanceof v?e:new v(e,t)}process._fatalException?(i=!1,n=function(e){var t=p.length;if(i||0===t)return!1;var n=!1;i=!0;for(var r=0;r<t;++r){var s=p[r];if(0!=(s.flags&d)){var a=o&&o[s.uid];n=s.error(a,e)||n}}return i=!1,m.length>0&&(p=m.pop()),o=void 0,n&&!f},r=function(e,t,n){var r=[];f=!0;for(var i=0;i<n;++i){var s=t[i];if(r[s.uid]=s.data,0!=(s.flags&c)){var a=s.create(s.data);void 0!==a&&(r[s.uid]=a)}}return f=!1,function(){o=r,m.push(p),p=g(t,p),f=!0;for(var i=0;i<n;++i)(t[i].flags&u)>0&&t[i].before(this,r[t[i].uid]);f=!1;var s=e.apply(this,arguments);for(f=!0,i=0;i<n;++i)(t[i].flags&l)>0&&t[i].after(this,r[t[i].uid]);return f=!1,p=m.pop(),o=void 0,s}},a(process,"_fatalException",(function(e){return function(t){return n(t)||e(t)}}))):(s=!1,n=function(e){if(s)throw e;for(var t=!1,n=p.length,r=0;r<n;++r){var i=p[r];0!=(i.flags&d)&&(t=i.error(null,e)||t)}if(!t&&f)throw e},r=function(e,t,r){var i=[];f=!0;for(var o=0;o<r;++o){var a=t[o];if(i[a.uid]=a.data,0!=(a.flags&c)){var h=a.create(a.data);void 0!==h&&(i[a.uid]=h)}}return f=!1,function(){var o,a=!1,c=!1;m.push(p),p=g(t,p),f=!0;for(var h=0;h<r;++h)(t[h].flags&u)>0&&t[h].before(this,i[t[h].uid]);f=!1;try{o=e.apply(this,arguments)}catch(e){for(a=!0,h=0;h<r;++h)if(0!=(p[h].flags&d))try{c=p[h].error(i[t[h].uid],e)||c}catch(e){throw s=!0,e}if(!c)throw process.removeListener("uncaughtException",n),process._originalNextTick((function(){process.addListener("uncaughtException",n)})),e}finally{if(!a||c){for(f=!0,h=0;h<r;++h)(t[h].flags&l)>0&&t[h].after(this,i[t[h].uid]);f=!1}p=m.pop()}return o}},process.addListener("uncaughtException",n)),v.prototype.create=void 0,v.prototype.before=void 0,v.prototype.after=void 0,v.prototype.error=void 0,v.prototype.data=void 0,v.prototype.uid=0,v.prototype.flags=0,process.createAsyncListener=y,process.addAsyncListener=function(e,t){var n;n=e instanceof v?e:y(e,t);for(var r=!1,i=0;i<p.length;i++)if(n===p[i]){r=!0;break}return r||p.push(n),n},process.removeAsyncListener=function(e){for(var t=0;t<p.length;t++)if(e===p[t]){p.splice(t,1);break}},t.exports=function(e){var t=p.length;if(0===t)return e;for(var n=p.slice(),i=0;i<t;++i)if(n[i].flags>0)return r(e,n,t);return function(e,t,n){f=!0;for(var r=0;r<n;++r){var i=t[r];i.create&&i.create(i.data)}return f=!1,function(){m.push(p),p=g(t,p);var n=e.apply(this,arguments);return p=m.pop(),n}}(e,n,t)}})),wr=b(((e,t)=>{"use strict";t.exports=(e,t)=>class extends e{constructor(e){var n,r;super((function(e,o){n=this,r=[function(n){return t(i,!1),e(n)},function(e){return t(i,!1),o(e)}]}));var i=this;try{e.apply(n,r)}catch(e){r[1](e)}return i}}})),Cr=b((()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=sr(),t=Er(),r=e.wrap,i=e.massWrap,o=Sr(),s=n(3837),a=t.gte(process.version,"6.0.0"),c=t.gte(process.version,"7.0.0"),u=t.gte(process.version,"8.0.0"),l=t.gte(process.version,"11.0.0"),d=n(1808);function p(e){return function(){this.on("connection",(function(e){e._handle&&(e._handle.onread=o(e._handle.onread))}));try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=o(this._handle.onconnection))}}}function h(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=o(t._originalOnread)}}c&&!d._normalizeArgs?d._normalizeArgs=function(e){if(0===e.length)return[{},null];var t=e[0],n={};"object"==typeof t&&null!==t?n=t:function(e){return"string"==typeof e&&!1===function(e){return(e=Number(e))>=0&&e}(e)}(t)?n.path=t:(n.port=t,e.length>1&&"string"==typeof e[1]&&(n.host=e[1]));var r=e[e.length-1];return"function"!=typeof r?[n,null]:[n,r]}:!c&&!d._normalizeConnectArgs&&(d._normalizeConnectArgs=function(e){var t={};"object"==typeof e[0]&&null!==e[0]?t=e[0]:"string"==typeof e[0]&&!1===function(e){return(e=Number(e))>=0&&e}(e[0])?t.path=e[0]:(t.port=e[0],"string"==typeof e[1]&&(t.host=e[1]));var n=e[e.length-1];return"function"==typeof n?[t,n]:[t]}),"_setUpListenHandle"in d.Server.prototype?r(d.Server.prototype,"_setUpListenHandle",p):r(d.Server.prototype,"_listen2",p),r(d.Socket.prototype,"connect",(function(e){return function(){var t;(t=u&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:c?d._normalizeArgs(arguments):d._normalizeConnectArgs(arguments))[1]&&(t[1]=o(t[1]));var n=e.apply(this,t);return h(this),n}}));var f=n(3685);r(f.Agent.prototype,"addRequest",(function(e){return function(t){var n=t.onSocket;return t.onSocket=o((function(e){return h(e),n.apply(this,arguments)})),e.apply(this,arguments)}}));var m=n(2081);function g(e){Array.isArray(e.stdio)&&e.stdio.forEach((function(e){e&&e._handle&&(e._handle.onread=o(e._handle.onread),r(e._handle,"close",I))})),e._handle&&(e._handle.onexit=o(e._handle.onexit))}m.ChildProcess?r(m.ChildProcess.prototype,"spawn",(function(e){return function(){var t=e.apply(this,arguments);return g(this),t}})):i(m,["execFile","fork","spawn"],(function(e){return function(){var t=e.apply(this,arguments);return g(t),t}})),process._fatalException||(process._originalNextTick=process.nextTick);var v=[];process._nextDomainTick&&v.push("_nextDomainTick"),process._tickDomainCallback&&v.push("_tickDomainCallback"),i(process,v,P),r(process,"nextTick",I);var y=["setTimeout","setInterval"];global.setImmediate&&y.push("setImmediate");var _=n(9512),b=global.setTimeout===_.setTimeout;i(_,y,I),b&&i(global,y,I);var E=n(9523);i(E,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],P),E.resolveNaptr&&r(E,"resolveNaptr",P);var S,w,C,T=n(7147);i(T,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],P),T.lchown&&r(T,"lchown",P),T.lchmod&&r(T,"lchmod",P),T.ftruncate&&r(T,"ftruncate",P);try{S=n(9796)}catch{}S&&S.Deflate&&S.Deflate.prototype&&((w=Object.getPrototypeOf(S.Deflate.prototype))._transform?r(w,"_transform",P):w.write&&w.flush&&w.end&&i(w,["write","flush","end"],P));try{C=n(6113)}catch{}C&&(R=["pbkdf2","randomBytes"],l||R.push("pseudoRandomBytes"),i(C,R,P));var R,O,x=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();function P(e){var t=function(){var t,n=arguments.length-1;if("function"==typeof arguments[n]){t=Array(arguments.length);for(var r=0;r<arguments.length-1;r++)t[r]=arguments[r];t[n]=o(arguments[n])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n))};case 2:return function(n,r){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,n,r))};case 3:return function(n,r,i){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=o(i)),e.call(this,n,r,i))};case 4:return function(n,r,i,s){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof s&&(s=o(s)),e.call(this,n,r,i,s))};case 5:return function(n,r,i,s,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof a&&(a=o(a)),e.call(this,n,r,i,s,a))};case 6:return function(n,r,i,s,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof c&&(c=o(c)),e.call(this,n,r,i,s,a,c))};default:return t}}function I(e){var t=function(){var t;if("function"==typeof arguments[0]){(t=Array(arguments.length))[0]=o(arguments[0]);for(var n=1;n<arguments.length;n++)t[n]=arguments[n]}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n))};case 2:return function(n,r){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n,r))};case 3:return function(n,r,i){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n,r,i))};case 4:return function(n,r,i,s){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n,r,i,s))};case 5:return function(n,r,i,s,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n,r,i,s,a))};case 6:return function(n,r,i,s,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n,r,i,s,a,c))};default:return t}}x&&(O=process.addAsyncListener({create:function(){x=!1}}),global.Promise.resolve(!0).then((function(){x=!1})),process.removeAsyncListener(O)),x&&function(){var e=global.Promise;function t(r){if(!(this instanceof t))return e(r);if("function"!=typeof r)return new e(r);var i,o,s=new e((function(e,t){i=this,o=[function(t){return n(s,!1),e(t)},function(e){return n(s,!1),t(e)}]}));s.__proto__=t.prototype;try{r.apply(i,o)}catch(e){o[1](e)}return s}function n(e,t){(!e.__asl_wrapper||t)&&(e.__asl_wrapper=o(i))}function i(t,r,o,s){var a;try{return{returnVal:a=r.call(t,o),error:!1}}catch(e){return{errorVal:e,error:!0}}finally{a instanceof e?s.__asl_wrapper=function(){return(a.__asl_wrapper||i).apply(this,arguments)}:n(s,!0)}}function c(e){return function(){var t=this,n=e.apply(t,Array.prototype.map.call(arguments,(function(e){return"function"!=typeof e?e:o((function(r){var o=(t.__asl_wrapper||i)(this,e,r,n);if(o.error)throw o.errorVal;return o.returnVal}))})));return n.__asl_wrapper=function(e,r,o,s){return t.__asl_wrapper?(t.__asl_wrapper(e,(function(){}),null,n),n.__asl_wrapper(e,r,o,s)):i(e,r,o,s)},n}}s.inherits(t,e),r(e.prototype,"then",c),e.prototype.chain&&r(e.prototype,"chain",c),a?global.Promise=wr()(e,n):(["all","race","reject","resolve","accept","defer"].forEach((function(n){"function"==typeof e[n]&&(t[n]=e[n])})),global.Promise=t)}()})),Tr=b(((e,t)=>{"use strict";var r=n(9491),i=ar(),o="cls@contexts",s="error@context";function a(e){this.name=e,this.active=null,this._set=[],this.id=null}function c(e){return process.namespaces[e]}function u(e){var t=c(e);r.ok(t,"can't delete nonexistent namespace!"),r.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function l(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){u(e)})),process.namespaces=Object.create(null)}process.addAsyncListener||Cr(),a.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t},a.prototype.get=function(e){if(this.active)return this.active[e]},a.prototype.createContext=function(){return Object.create(this.active)},a.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(e){throw e&&(e[s]=t),e}finally{this.exit(t)}},a.prototype.runAndReturn=function(e){var t;return this.run((function(n){t=e(n)})),t},a.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());var n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[s]=t),e}finally{n.exit(t)}}},a.prototype.enter=function(e){r.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e},a.prototype.exit=function(e){if(r.ok(e,"context must be provided for exiting"),this.active===e)return r.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var t=this._set.lastIndexOf(e);r.ok(t>=0,"context not currently entered; can't exit"),r.ok(t,"can't remove top context"),this._set.splice(t,1)},a.prototype.bindEmitter=function(e){r.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,n="context@"+this.name;i(e,(function(e){!e||(e[o]||(e[o]=Object.create(null)),e[o][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[o])return e;var t=e,n=e[o];return Object.keys(n).forEach((function(e){var r=n[e];t=r.namespace.bind(t,r.context)})),t}))},a.prototype.fromException=function(e){return e[s]},process.namespaces||l(),t.exports={getNamespace:c,createNamespace:function(e){r.ok(e,"namespace must be given a name!");var t=new a(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,n){n&&t.enter(n)},after:function(e,n){n&&t.exit(n)},error:function(e){e&&t.exit(e)}}),process.namespaces[e]=t,t},destroyNamespace:u,reset:l}})),Rr=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=P(),n=an(),r=dn(),i=pn(),o=ir(),s=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return void 0===t?null:t},e.generateContextObject=function(e,t,n,r,i,o){return t=t||e,this.enabled?{operation:{name:n,id:e,parentId:t,traceparent:i,tracestate:o},customProperties:new a(r)}:null},e.spanToContextObject=function(t,n,i){var o=new r;return o.traceId=t.traceId,o.spanId=t.spanId,o.traceFlag=r.formatOpenTelemetryTraceFlags(t.traceFlags)||r.DEFAULT_TRACE_FLAG,o.parentId=n,e.generateContextObject(o.traceId,o.parentId,i,null,o)},e.runWithContext=function(t,n){var r;return e.enabled?e.session.bind(n,((r={})[e.CONTEXT_NAME]=t,r))():n()},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t,n){var r;return e.enabled?e.session.bind(t,n?((r={})[e.CONTEXT_NAME]=n,r):void 0):t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible())return void(this.enabled=!1);e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,typeof this.cls>"u"&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=br():this.cls=Tr()),e.session=this.cls.createNamespace("AI-CLS-Session"),n.registerContextPreservation((function(t){return e.session.bind(t)}))),this.enabled=!0}},e.startOperation=function(n,s){var a=n&&n.traceContext||null,c=n&&n.traceId?n:null,u=n&&n.headers;if(c){var l=new r("00-"+c.traceId+"-"+c.spanId+"-01"),d=new i(c.traceState?c.traceState.serialize():null);return e.generateContextObject(c.traceId,"|"+c.traceId+"."+c.spanId+".","string"==typeof s?s:"",void 0,l,d)}if(a){l=new r(a.traceparent),d=new i(a.tracestate);var p="object"==typeof s?new o(s):null;return e.generateContextObject(l.traceId,l.parentId,"string"==typeof s?s:p.getOperationName({}),p&&p.getCorrelationContextHeader()||void 0,l,d)}return u?(l=new r(u.traceparent?u.traceparent.toString():null),d=new i(u.tracestate?u.tracestate.toString():null),p=new o(n),e.generateContextObject(l.traceId,l.parentId,p.getOperationName({}),p.getCorrelationContextHeader(),l,d)):(t.warn("startOperation was called with invalid arguments",arguments),null)},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},e.canUseClsHooked=function(){var e=process.versions.node.split("."),t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,r=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&n)&&r},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();e.CorrelationContextManager=s;var a=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(e){return e.key+"="+e.value})).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var n=this.props[t];if(n.key===e)return n.value}},e.prototype.setProperty=function(n,r){if(e.bannedCharacters.test(n)||e.bannedCharacters.test(r))t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+n+" and value: "+r);else{for(var i=0;i<this.props.length;++i){var o=this.props[i];if(o.key===n)return void(o.value=r)}this.props.push({key:n,value:r})}},e.bannedCharacters=/[,=]/,e}()})),Or=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=nr(),n=k(),r=[],i=function(e){var n=e.data.message;r.forEach((function(r){n instanceof Error?r.trackException({exception:n}):(n.lastIndexOf("\n")==n.length-1&&(n=n.substring(0,n.length-1)),r.trackTrace({message:n,severity:e.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))}))};e.enable=function(e,t){e?(0===r.length&&n.channel.subscribe("console",i),r.push(t)):0===(r=r.filter((function(e){return e!=t}))).length&&n.channel.unsubscribe("console",i)},e.dispose=function(){n.channel.unsubscribe("console",i),r=[]}})),xr=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=nr(),n=k(),r=[],i={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},o=function(e){var t=e.data.result;r.forEach((function(n){var r=i[e.data.level];t instanceof Error?n.trackException({exception:t}):n.trackTrace({message:t,severity:r})}))};e.enable=function(e,t){e?(0===r.length&&n.channel.subscribe("bunyan",o),r.push(t)):0===(r=r.filter((function(e){return e!=t}))).length&&n.channel.unsubscribe("bunyan",o)},e.dispose=function(){n.channel.unsubscribe("bunyan",o),r=[]}})),Pr=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=nr(),n=k(),r=[],i={syslog:function(e){var n={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return void 0===n[e]?t.SeverityLevel.Information:n[e]},npm:function(e){var n={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return void 0===n[e]?t.SeverityLevel.Information:n[e]},unknown:function(e){return t.SeverityLevel.Information}},o=function(e){var t=e.data.message;r.forEach((function(n){if(t instanceof Error)n.trackException({exception:t,properties:e.data.meta});else{var r=i[e.data.levelKind](e.data.level);n.trackTrace({message:t,severity:r,properties:e.data.meta})}}))};e.enable=function(e,t){e?(0===r.length&&n.channel.subscribe("winston",o),r.push(t)):0===(r=r.filter((function(e){return e!=t}))).length&&n.channel.unsubscribe("winston",o)},e.dispose=function(){n.channel.unsubscribe("winston",o),r=[]}})),Ir=b(((e,t)=>{"use strict";var n=an(),r=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){n.IsInitialized&&(Or().enable(e&&t,this._client),xr().enable(e,this._client),Pr().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();t.exports=r})),Ar=b(((e,t)=>{"use strict";var n=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var n=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(n[0])>13||13===parseInt(n[0])&&parseInt(n[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var n=this;if(t){if(this._isInitialized=!0,!this._exceptionListenerHandle){var r=function(t,r,i){void 0===i&&(i=new Error(e._FALLBACK_ERROR_MESSAGE)),n._client.trackException({exception:i}),n._client.flush({isAppCrashing:!0}),t&&r&&1===process.listeners(r).length&&(console.error(i),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=r.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=r.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=r.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();t.exports=n})),Dr=b((e=>{"use strict";var t,n,r,i;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",(r=n=e.QuickPulseCounter||(e.QuickPulseCounter={})).COMMITTED_BYTES="\\Memory\\Committed Bytes",r.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",r.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",r.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",r.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",r.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",r.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",r.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",r.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec",function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(i=e.PerformanceCounter||(e.PerformanceCounter={})),function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"}(e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=((t={})[i.PROCESSOR_TIME]=n.PROCESSOR_TIME,t[i.REQUEST_RATE]=n.REQUEST_RATE,t[i.REQUEST_DURATION]=n.REQUEST_DURATION,t[n.COMMITTED_BYTES]=n.COMMITTED_BYTES,t[n.REQUEST_FAILURE_RATE]=n.REQUEST_FAILURE_RATE,t[n.DEPENDENCY_RATE]=n.DEPENDENCY_RATE,t[n.DEPENDENCY_FAILURE_RATE]=n.DEPENDENCY_FAILURE_RATE,t[n.DEPENDENCY_DURATION]=n.DEPENDENCY_DURATION,t[n.EXCEPTION_RATE]=n.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"})),Nr=b(((e,t)=>{"use strict";var r=n(2037),i=Dr(),o=function(){function e(t,n,r){void 0===n&&(n=6e4),void 0===r&&(r=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=n,this._enableLiveMetricsCounters=r}return e.prototype.enable=function(t,n){var i=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=n||this._collectionInterval,this._handle=setInterval((function(){return i.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,n){var r;if(e.isEnabled()){if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}e._intervalRequestExecutionTime+=r,!1===n&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,n){var r;if(e.isEnabled()){if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}e._intervalDependencyExecutionTime+=r,!1===n&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var e=r.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,n=0,o=0,s=0,a=0,c=0;e&&c<e.length;c++){var u=e[c],l=this._lastCpus[c],d=(u.model,u.speed,u.times),p=l.times;t+=d.user-p.user||0,n+=d.sys-p.sys||0,o+=d.nice-p.nice||0,s+=d.idle-p.idle||0,a+=d.irq-p.irq||0}var h=void 0;if("function"==typeof process.cpuUsage){var f=process.cpuUsage(),m=process.hrtime(),g=f.user-this._lastAppCpuUsage.user+(f.system-this._lastAppCpuUsage.system)||0;typeof this._lastHrtime<"u"&&2===this._lastHrtime.length&&(h=100*g/((1e6*(m[0]-this._lastHrtime[0])+(m[1]-this._lastHrtime[1])/1e3||0)*e.length)),this._lastAppCpuUsage=f,this._lastHrtime=m}var v=t+n+o+s+a||1;this._client.trackMetric({name:i.PerformanceCounter.PROCESSOR_TIME,value:(v-s)/v*100}),this._client.trackMetric({name:i.PerformanceCounter.PROCESS_TIME,value:h||t/v*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=r.freemem(),t=process.memoryUsage().rss,n=r.totalmem()-e;this._client.trackMetric({name:i.PerformanceCounter.PRIVATE_BYTES,value:t}),this._client.trackMetric({name:i.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.COMMITTED_BYTES,value:n})},e.prototype._trackNetwork=function(){var t=this._lastRequests,n={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},r=n.totalRequestCount-t.totalRequestCount||0,o=n.totalFailedRequestCount-t.totalFailedRequestCount||0,s=n.time-t.time,a=s/1e3,c=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/r||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,s>0){var u=r/a,l=o/a;this._client.trackMetric({name:i.PerformanceCounter.REQUEST_RATE,value:u}),(!this._enableLiveMetricsCounters||r>0)&&this._client.trackMetric({name:i.PerformanceCounter.REQUEST_DURATION,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.REQUEST_FAILURE_RATE,value:l})}this._lastRequests=n},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,n={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},r=n.totalDependencyCount-t.totalDependencyCount||0,o=n.totalFailedDependencyCount-t.totalFailedDependencyCount||0,s=n.time-t.time,a=s/1e3,c=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/r||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,s>0){var u=r/a,l=o/a;this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_RATE,value:u}),this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:l}),(!this._enableLiveMetricsCounters||r>0)&&this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_DURATION,value:c})}this._lastDependencies=n}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,n={totalExceptionCount:e._totalExceptionCount,time:+new Date},r=n.totalExceptionCount-t.totalExceptionCount||0,o=n.time-t.time;if(o>0){var s=r/(o/1e3);this._client.trackMetric({name:i.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=n}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();t.exports=o})),kr=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;e.AggregatedMetricCounter=function(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}})),Mr=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}})),Lr=b(((e,t)=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},r=Dr(),i=kr(),o=Mr(),s=function(){function e(t,n){void 0===n&&(n=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=n}return e.prototype.enable=function(e,t){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=t||this._collectionInterval,this._handle=setInterval((function(){return n.trackPreAggregatedMetrics()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._exceptionCountersCollection).totalCount++},e.countTrace=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._traceCountersCollection).totalCount++},e.countRequest=function(t,n){if(e.isEnabled()){var r,i=e._getAggregatedCounter(n,this._requestCountersCollection);if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}i.intervalExecutionTime+=r,i.totalCount++}},e.countDependency=function(t,n){if(e.isEnabled()){var r,i=e._getAggregatedCounter(n,this._dependencyCountersCollection);if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}i.intervalExecutionTime+=r,i.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(e,t){for(var n=!1,r=0;r<t.length;r++){if(e===t[r].dimensions)return t[r];if(Object.keys(e).length===Object.keys(t[r].dimensions).length){for(var o in e)if(e[o]!=t[r].dimensions[o]){n=!0;break}if(!n)return t[r];n=!1}}var s=new i.AggregatedMetricCounter(e);return t.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var n=e._requestCountersCollection[t];n.time=+new Date;var i=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime,s=(n.intervalExecutionTime-n.lastIntervalExecutionTime)/i||0;n.lastIntervalExecutionTime=n.intervalExecutionTime,o>0&&i>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:n.dimensions,value:s,count:i,aggregationInterval:o,metricType:r.MetricId.REQUESTS_DURATION}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var n=e._dependencyCountersCollection[t];n.time=+new Date;var i=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime,s=(n.intervalExecutionTime-n.lastIntervalExecutionTime)/i||0;n.lastIntervalExecutionTime=n.intervalExecutionTime,o>0&&i>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:n.dimensions,value:s,count:i,aggregationInterval:o,metricType:r.MetricId.DEPENDENCIES_DURATION}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var n=e._exceptionCountersCollection[t],i=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:n.dimensions,value:i,count:i,aggregationInterval:o,metricType:r.MetricId.EXCEPTIONS_COUNT}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var n=e._traceCountersCollection[t],i=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:n.dimensions,value:i,count:i,aggregationInterval:o,metricType:r.MetricId.TRACES_COUNT}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackPreAggregatedMetric=function(e){var t={};for(var r in e.dimensions)t[o.PreaggregatedMetricPropertyNames[r]]=e.dimensions[r];t=n(n({},t),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:e.name,value:e.value,count:e.count,properties:t,kind:"Aggregation"};this._client.trackMetric(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();t.exports=s})),Fr=b(((e,t)=>{"use strict";var r=n(2037),i=n(7147),o=n(1017),s=nr(),a=P(),c=function(){function e(e){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||o.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var n=JSON.parse(i.readFileSync(t,"utf8"));n&&"string"==typeof n.version&&(e.appVersion[t]=n.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},e.prototype._loadInternalContext=function(){var t=o.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var n=JSON.parse(i.readFileSync(t,"utf8"));n&&"string"==typeof n.version&&(e.sdkVersion=n.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();t.exports=c})),qr=b(((e,t)=>{"use strict";var r,i=e&&e.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(7310),s=nr(),a=un(),c=cn(),u=rr(),l=ln(),d=function(e){function t(n,r){var i=e.call(this)||this;return r&&r.method&&n&&(i.method=r.method,i.url=t._getUrlFromRequestOptions(n,r),i.startTime=+new Date),i}return i(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(e,c.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var n=o.parse(this.url);n.search=void 0,n.hash=void 0;var r=this.method.toUpperCase()+" "+n.pathname,i=s.RemoteDependencyDataConstants.TYPE_HTTP,a=n.hostname;n.port&&(a+=":"+n.port),this.correlationId?(i=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==l.correlationIdPrefix&&(a+=" | "+this.correlationId)):i=s.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:t,name:r,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:i,target:a};if(e&&e.time?c.time=e.time:this.startTime&&(c.time=new Date(this.startTime)),e){for(var u in e)c[u]||(c[u]=e[u]);if(e.properties)for(var u in e.properties)c.properties[u]=e.properties[u]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)if(0===e.indexOf("http://")||0===e.indexOf("https://"))e=o.parse(e);else{var n=o.parse(e);e="443"===n.host?o.parse("https://"+e):o.parse("http://"+e)}else{if(e&&"function"==typeof o.URL&&e instanceof o.URL)return o.format(e);var r=e;e={},r&&Object.keys(r).forEach((function(t){e[t]=r[t]}))}if(e.path){var i=o.parse(e.path);e.pathname=i.pathname,e.search=i.search}return e.host&&e.port&&!o.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host),e.protocol=e.protocol||t.agent&&t.agent.protocol||t.protocol||void 0,e.hostname=e.hostname||"localhost",o.format(e)},t}(u);t.exports=d})),jr=b((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var n=Pe(),r=Dr();function i(e){var n=t({},e);return Object.keys(r.SpanAttribute).forEach((function(e){delete n[e]})),n}e.spanToTelemetryContract=function(e){var o="|"+e.spanContext().traceId+"."+e.spanContext().spanId+".",s=Math.round(1e3*e._duration[0]+e._duration[1]/1e6),a=e.attributes["peer.address"]?e.attributes["peer.address"].toString():"",c=e.attributes.component?e.attributes.component.toString():"",u=c.toUpperCase()===r.DependencyTypeName.Http||!!e.attributes[r.SpanAttribute.HttpUrl],l=c.toLowerCase()===r.DependencyTypeName.Grpc;if(u){var d=e.attributes[r.SpanAttribute.HttpMethod]||"GET",p=new URL(e.attributes[r.SpanAttribute.HttpUrl].toString()),h=e.attributes[r.SpanAttribute.HttpHost]||p.host,f=e.attributes[r.SpanAttribute.HttpPort]||p.port||null,m=d+" "+(p.pathname||"/"),g=r.DependencyTypeName.Http,v=f?(h+":"+f).toString():h.toString(),y=p.toString(),_=e.attributes[r.SpanAttribute.HttpStatusCode]||e.status.code||0;return{id:o,name:m,dependencyTypeName:g,target:v,data:y,success:_<400,duration:s,url:y,resultCode:String(_),properties:i(e.attributes)}}if(l){d=e.attributes[r.SpanAttribute.GrpcMethod]||"rpc";var b=e.attributes[r.SpanAttribute.GrpcService],E=b?d+" "+b:e.name;return{id:o,duration:s,name:E,target:b.toString(),data:b.toString()||E,url:b.toString()||E,dependencyTypeName:r.DependencyTypeName.Grpc,resultCode:String(e.status.code||0),success:0===e.status.code,properties:i(e.attributes)}}var S=e.name,w=e.links&&e.links.map((function(e){return{operation_Id:e.context.traceId,id:e.context.spanId}}));return{id:o,duration:s,name:S,target:a,data:a||S,url:a||S,dependencyTypeName:e.kind===n.SpanKind.INTERNAL?r.DependencyTypeName.InProc:c||e.name,resultCode:String(e.status.code||0),success:0===e.status.code,properties:t(t({},i(e.attributes)),{"_MS.links":w||void 0})}}})),Ur=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Pe(),n=k(),r=dn(),i=jr(),o=I(),s=[];e.subscriber=function(e){var n=e.data,a=i.spanToTelemetryContract(n),c=n.spanContext(),u=new r;u.traceId=c.traceId,u.spanId=c.spanId,u.traceFlag=r.formatOpenTelemetryTraceFlags(c.traceFlags),u.parentId=n.parentSpanId?"|"+c.traceId+"."+n.parentSpanId+".":null,o.AsyncScopeManager.with(n,(function(){s.forEach((function(e){n.kind===t.SpanKind.SERVER?e.trackRequest(a):(n.kind===t.SpanKind.CLIENT||n.kind===t.SpanKind.INTERNAL)&&e.trackDependency(a)}))}))},e.enable=function(t,r){t?(0===s.length&&n.channel.subscribe("azure-coretracing",e.subscriber),s.push(r)):0===(s=s.filter((function(e){return e!=r}))).length&&n.channel.unsubscribe("azure-coretracing",e.subscriber)}})),Br=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=k(),n=[];e.subscriber=function(e){"ismaster"!==e.data.event.commandName&&n.forEach((function(t){var n=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:n,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})}))},e.enable=function(r,i){r?(0===n.length&&t.channel.subscribe("mongodb",e.subscriber),n.push(i)):0===(n=n.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("mongodb",e.subscriber)}})),Vr=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=k(),n=[];e.subscriber=function(e){n.forEach((function(t){var n=e.data.query||{},r=n.sql||"Unknown query",i=!e.data.err,o=(n._connection||{}).config||{},s=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;t.trackDependency({target:s,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})}))},e.enable=function(r,i){r?(0===n.length&&t.channel.subscribe("mysql",e.subscriber),n.push(i)):0===(n=n.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("mysql",e.subscriber)}})),Hr=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=k(),n=[];e.subscriber=function(e){n.forEach((function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})}))},e.enable=function(r,i){r?(0===n.length&&t.channel.subscribe("redis",e.subscriber),n.push(i)):0===(n=n.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("redis",e.subscriber)}})),zr=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=k(),n=[];e.subscriber=function(e){n.forEach((function(t){var n=e.data.query,r=n.preparable&&n.preparable.text||n.plan||n.text||"unknown query",i=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})}))},e.enable=function(r,i){r?(0===n.length&&t.channel.subscribe("postgres",e.subscriber),n.push(i)):0===(n=n.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("postgres",e.subscriber)}})),Gr=b(((e,t)=>{"use strict";var r=e&&e.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},i=n(3685),o=n(5687),s=P(),a=un(),c=cn(),u=qr(),l=Rr(),d=ln(),p=dn(),h=an(),f=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),h.IsInitialized&&(Ur().enable(!0,this._client),Br().enable(e,this._client),Vr().enable(e,this._client),Hr().enable(e,this._client),zr().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var n=i.request,s=o.request,a=function(n,r){var i=!r[e.disableCollectionRequestOption]&&!n[e.alreadyAutoCollectedFlag];r.headers&&r.headers["user-agent"]&&-1!==r.headers["user-agent"].toString().indexOf("azsdk-js")&&(i=!1),n[e.alreadyAutoCollectedFlag]=!0,n&&r&&i&&(l.CorrelationContextManager.wrapEmitter(n),e.trackRequest(t._client,{options:r,request:n}))};i.request=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var s=n.call.apply(n,r([i,e],t));return a(s,e),s},o.request=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=s.call.apply(s,r([o,e],t));return a(i,e),i},i.get=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var s=(t=i.request).call.apply(t,r([i,e],n));return s.end(),s},o.get=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var s=(t=o.request).call.apply(t,r([o,e],n));return s.end(),s}},e.trackRequest=function(t,n){if(n.options&&n.request&&t){var r,i,o=new u(n.options,n.request),h=l.CorrelationContextManager.getCurrentContext();if(h&&h.operation&&h.operation.traceparent&&p.isValidTraceId(h.operation.traceparent.traceId)?(h.operation.traceparent.updateSpanId(),r=h.operation.traceparent.getBackCompatRequestId()):d.w3cEnabled?(i=(m=new p).toString(),r=m.getBackCompatRequestId()):r=h&&h.operation&&h.operation.parentId+e.requestNumber+++".",a.canIncludeCorrelationHeader(t,o.getUrl())&&n.request.getHeader&&n.request.setHeader&&t.config&&t.config.correlationId){var f=n.request.getHeader(c.requestContextHeader);try{a.safeIncludeCorrelationHeader(t,n.request,f)}catch(e){s.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(h&&h.operation)try{if(n.request.setHeader(c.requestIdHeader,r),t.config.ignoreLegacyHeaders||(n.request.setHeader(c.parentIdHeader,h.operation.id),n.request.setHeader(c.rootIdHeader,r)),i||h.operation.traceparent)n.request.setHeader(c.traceparentHeader,i||h.operation.traceparent.toString());else if(d.w3cEnabled){var m=(new p).toString();n.request.setHeader(c.traceparentHeader,m)}if(h.operation.tracestate){var g=h.operation.tracestate.toString();g&&n.request.setHeader(c.traceStateHeader,g)}var v=h.customProperties.serializeToHeader();v&&n.request.setHeader(c.correlationContextHeader,v)}catch(e){s.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}n.request.on&&(n.request.on("response",(function(e){o.onResponse(e);var i=o.getDependencyTelemetry(n,r);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=n.options,i.contextObjects["http.ClientRequest"]=n.request,i.contextObjects["http.ClientResponse"]=e,t.trackDependency(i)})),n.request.on("error",(function(e){o.onError(e);var i=o.getDependencyTelemetry(n,r);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=n.options,i.contextObjects["http.ClientRequest"]=n.request,i.contextObjects.Error=e,t.trackDependency(i)})),n.request.on("abort",(function(){o.onError(new Error);var e=o.getDependencyTelemetry(n,r);e.contextObjects=e.contextObjects||{},e.contextObjects["http.RequestOptions"]=n.options,e.contextObjects["http.ClientRequest"]=n.request,t.trackDependency(e)})))}else s.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!n.options,!n.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=f})),Kr=b(((e,t)=>{"use strict";var r=n(2037),i=Dr(),o=un(),s=Fr(),a=Gr(),c=function(){function e(t){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(e,t){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval((function(){return n.trackHeartBeat(t,(function(){}))}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(e,t){var n=this,o=!1,a={},c=s.sdkVersion;a.sdk=c,a.osType=r.type(),process.env.WEBSITE_SITE_NAME?(a.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",a.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",a.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?a.azfunction_appId=process.env.WEBSITE_HOSTNAME:e&&(void 0===this._isVM?(o=!0,this._getAzureComputeMetadata(e,(function(){n._isVM&&Object.keys(n._vmData).length>0&&(a.azInst_vmId=n._vmData.vmId||"",a.azInst_subscriptionId=n._vmData.subscriptionId||"",a.azInst_osType=n._vmData.osType||"",n._azInst_vmId=n._vmData.vmId||"",n._azInst_subscriptionId=n._vmData.subscriptionId||"",n._azInst_osType=n._vmData.osType||""),n._client.trackMetric({name:i.HeartBeatMetricName,value:0,properties:a}),t()}))):this._isVM&&(a.azInst_vmId=this._azInst_vmId,a.azInst_subscriptionId=this._azInst_subscriptionId,a.azInst_osType=this._azInst_osType)),o||(this._client.trackMetric({name:i.HeartBeatMetricName,value:0,properties:a}),t())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.prototype._getAzureComputeMetadata=function(e,t){var n,r=this,i=((n={method:"GET"})[a.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),s=o.makeRequest(e,"http://169.254.169.254/metadata/instance/compute?api-version=2017-12-01&format=json",i,(function(e){if(200===e.statusCode){r._isVM=!0;var n="";e.on("data",(function(e){n+=e})),e.on("end",(function(){r._vmData=r._isJSON(n)?JSON.parse(n):{},t()}))}else t()}));s&&(s.on("error",(function(e){e&&e.message&&e.message.indexOf("ENETUNREACH")>-1&&(r._isVM=!1),t()})),s.end())},e.prototype._isJSON=function(e){try{return JSON.parse(e)&&!!e}catch{return!1}},e}();t.exports=c})),$r=b(((e,t)=>{"use strict";var r=n(3685),i=n(5687),o=P(),s=un(),a=cn(),c=ir(),u=Rr(),l=Nr(),d=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e,t){e&&!this._isAutoCorrelating?u.CorrelationContextManager.enable(t):!e&&this._isAutoCorrelating&&u.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return u.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var n=function(n){if(n){if("function"!=typeof n)throw new Error("onRequest handler must be a function");return function(r,i){u.CorrelationContextManager.wrapEmitter(r),u.CorrelationContextManager.wrapEmitter(i);var o=r&&!r[e.alreadyAutoCollectedFlag];if(r&&o){var s=new c(r),a=t._generateCorrelationContext(s);u.CorrelationContextManager.runWithContext(a,(function(){t._isEnabled&&(r[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:r,response:i},s)),"function"==typeof n&&n(r,i)}))}else"function"==typeof n&&n(r,i)}}},o=function(e){var t=e.addListener.bind(e);e.addListener=function(e,r){switch(e){case"request":case"checkContinue":return t(e,n(r));default:return t(e,r)}},e.on=e.addListener},s=r.createServer;r.createServer=function(e,t){if(t&&"function"==typeof t){var r=s(e,n(t));return o(r),r}return r=s(n(e)),o(r),r};var a=i.createServer;i.createServer=function(e,t){var r=a(e,n(t));return o(r),r}},e.trackRequestSync=function(t,n){if(n.request&&n.response&&t){e.addResponseCorrelationIdHeader(t,n.response);var r=u.CorrelationContextManager.getCurrentContext(),i=new c(n.request,r&&r.operation.parentId);r&&(r.operation.id=i.getOperationId(t.context.tags)||r.operation.id,r.operation.name=i.getOperationName(t.context.tags)||r.operation.name,r.operation.parentId=i.getRequestId()||r.operation.parentId,r.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,n,n.duration,n.error)}else o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!n.request,!n.response,!t)},e.trackRequest=function(t,n,r){if(n.request&&n.response&&t){var i=u.CorrelationContextManager.getCurrentContext(),a=r||new c(n.request,i&&i.operation.parentId);s.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,n.response),i&&!r&&(i.operation.id=a.getOperationId(t.context.tags)||i.operation.id,i.operation.name=a.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=a.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(a.getCorrelationContextHeader())),n.response.once&&n.response.once("finish",(function(){e.endRequest(t,a,n,null,null)})),n.request.on&&n.request.on("error",(function(r){e.endRequest(t,a,n,null,r)})),n.request.on&&n.request.on("aborted",(function(){e.endRequest(t,a,n,null,"The request has been aborted and the network socket has closed.")}))}else o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!n.request,!n.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var n=t.getHeader(a.requestContextHeader);s.safeIncludeCorrelationHeader(e,t,n)}},e.endRequest=function(e,t,n,r,i){i?t.onError(i,r):t.onResponse(n.response,r);var o=t.getRequestTelemetry(n);if(o.tagOverrides=t.getRequestTags(e.context.tags),n.tagOverrides)for(var s in n.tagOverrides)o.tagOverrides[s]=n.tagOverrides[s];var a=t.getLegacyRootId();a&&(o.properties.ai_legacyRootId=a),o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=n.request,o.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(o)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,u.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=d})),Wr=b(((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=n(2037),o=nr(),s=Dr(),a=un(),c=P(),u=a.w3cTraceId(),l=function(){function e(){}return e.createQuickPulseEnvelope=function(e,t,n,r){var o=i&&"function"==typeof i.hostname&&i.hostname()||"Unknown",s=r.tags&&r.keys&&r.keys.cloudRoleInstance&&r.tags[r.keys.cloudRoleInstance]||o,a=r.tags&&r.keys&&r.keys.cloudRole&&r.tags[r.keys.cloudRole]||null;return{Documents:t.length>0?t:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:r.tags[r.keys.internalSdkVersion],StreamId:u,MachineName:o,Instance:s,RoleName:a}},e.createQuickPulseMetric=function(e){return{Name:e.name,Value:e.value,Weight:e.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case o.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case o.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case o.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case o.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case o.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData.name;return r(r({},n),{Name:i})},e.createQuickPulseTraceDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData.severityLevel||0;return r(r({},n),{Message:t.data.baseData.message,SeverityLevel:o.SeverityLevel[i]})},e.createQuickPulseExceptionDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData.exceptions,o="",s="",a="";return i&&i.length>0&&(i[0].parsedStack&&i[0].parsedStack.length>0?i[0].parsedStack.forEach((function(e){o+=e.assembly+"\n"})):i[0].stack&&i[0].stack.length>0&&(o=i[0].stack),s=i[0].message,a=i[0].typeName),r(r({},n),{Exception:o,ExceptionMessage:s,ExceptionType:a})},e.createQuickPulseRequestDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData;return r(r({},n),{Name:i.name,Success:i.success,Duration:i.duration,ResponseCode:i.responseCode,OperationName:i.name})},e.createQuickPulseDependencyDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData;return r(r({},n),{Name:i.name,Target:i.target,Success:i.success,Duration:i.duration,ResultCode:i.resultCode,CommandName:i.data,OperationName:n.OperationId,DependencyTypeName:i.type})},e.createQuickPulseDocument=function(t){var n,r;return t.data.baseType?(r=s.TelemetryTypeStringToQuickPulseType[t.data.baseType],n=s.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):c.warn("Document type invalid; not sending live metric document",t.data.baseType),{DocumentType:n,__type:r,OperationId:t.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(t)}},e.aggregateProperties=function(e){var t=[],n=e.data.baseData.measurements||{};for(var r in n)if(n.hasOwnProperty(r)){var i={key:r,value:n[r]};t.push(i)}var o=e.data.baseData.properties||{};for(var r in o)o.hasOwnProperty(r)&&(i={key:r,value:o[r]},t.push(i));return t},e.keys=new o.ContextTagKeys,e}();t.exports=l})),Qr=b(((e,t)=>{"use strict";t.exports={getTransmissionTime:function(){return 1e4*(Date.now()+621355968e5)}}})),Xr=b(((e,t)=>{"use strict";var r=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=e&&e.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=n(5687),s=Gr(),a=P(),c=Qr(),u=un(),l="x-ms-qps-service-polling-interval-hint",d="x-ms-qps-service-endpoint-redirect",p=function(){function e(e){this._config=e,this._consecutiveErrors=0}return e.prototype.ping=function(e,t,n){var r=[{name:"x-ms-qps-stream-id",value:e.StreamId},{name:"x-ms-qps-machine-name",value:e.MachineName},{name:"x-ms-qps-role-name",value:e.RoleName},{name:"x-ms-qps-instance-name",value:e.Instance},{name:"x-ms-qps-invariant-version",value:e.InvariantVersion.toString()}];this._submitData(e,t,n,"ping",r)},e.prototype.post=function(e,t,n){return r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,this._submitData([e],t,n,"post")];case 1:return r.sent(),[2]}}))}))},e.prototype._submitData=function(e,t,n,a,p){return r(this,void 0,void 0,(function(){var r,h,f,m,g,v=this;return i(this,(function(i){return r=JSON.stringify(e),(m={})[s.disableCollectionRequestOption]=!0,m.host=t&&t.length>0?t:this._config.quickPulseHost,m.method="POST",m.path="/QuickPulseService.svc/"+a+"?ikey="+this._config.instrumentationKey,m.headers=((g={Expect:"100-continue"})["x-ms-qps-transmission-time"]=c.getTransmissionTime(),g["Content-Type"]="application/json",g["Content-Length"]=Buffer.byteLength(r),g),h=m,p&&p.length>0&&p.forEach((function(e){return h.headers[e.name]=e.value})),this._config.httpsAgent?h.agent=this._config.httpsAgent:h.agent=u.tlsRestrictedAgent,(f=o.request(h,(function(e){if(200==e.statusCode){var t="true"===e.headers["x-ms-qps-subscribed"],r=e.headers[d]?e.headers[d].toString():null,i=e.headers[l]?parseInt(e.headers[l].toString()):null;v._consecutiveErrors=0,n(t,e,r,i)}else v._onError("StatusCode:"+e.statusCode+" StatusMessage:"+e.statusMessage),n()}))).on("error",(function(e){v._onError(e),n()})),f.write(r),f.end(),[2]}))}))},e.prototype._onError=function(t){this._consecutiveErrors++;var n="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(n="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",a.warn(e.TAG,n,t)):a.info(e.TAG,n,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();t.exports=p})),Yr=b(((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=P(),o=Wr(),s=Xr(),a=Dr(),c=Fr(),u=function(){function e(e,t){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=t||new c,this._sender=new s(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(e){this._collectors.push(e)},e.prototype.trackMetric=function(e){this._addMetric(e)},e.prototype.addDocument=function(e){var t=o.telemetryEnvelopeToQuickPulseDocument(e);t&&this._documents.push(t)},e.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(e){this._collectors.forEach((function(t){t.enable(e)}))},e.prototype._addMetric=function(e){var t=e.value,n=e.count||1,r=a.PerformanceToQuickPulseCounter[e.name];r&&(this._metrics[r]?(this._metrics[r].Value=(this._metrics[r].Value*this._metrics[r].Weight+t*n)/(this._metrics[r].Weight+n),this._metrics[r].Weight+=n):(this._metrics[r]=o.createQuickPulseMetric(e),this._metrics[r].Name=r,this._metrics[r].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return n(this,void 0,void 0,(function(){var t,n,i,s,a=this;return r(this,(function(r){switch(r.label){case 0:return t=Object.keys(this._metrics).map((function(e){return a._metrics[e]})),n=o.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(n)]:[3,2];case 1:return r.sent(),[3,3];case 2:this._ping(n),r.label=3;case 3:return i=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,s=this._isCollectingData?e.POST_INTERVAL:i,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,s=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(s=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),s),this._handle.unref(),[2]}}))}))},e.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return t.sent(),[2]}}))}))},e.prototype._quickPulseDone=function(e,t,n,r){null!=e?(this._isCollectingData!==e&&(i.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,n&&n.length>0&&(this._redirectedHost=n,i.info("Redirecting endpoint to: ",n)),r&&r>0&&(this._pollingIntervalHint=r),t&&t.statusCode<300&&t.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();t.exports=u})),Jr=b(((e,t)=>{"use strict";var n=Dr(),r=function(){function e(){}return e.parse=function(t){if(!t)return{};var r=t.split(e._FIELDS_SEPARATOR).reduce((function(t,n){var r=n.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===r.length){var i=r[0].toLowerCase(),o=r[1];t[i]=o}return t}),{});if(Object.keys(r).length>0){if(r.endpointsuffix){var i=r.location?r.location+".":"";r.ingestionendpoint=r.ingestionendpoint||"https://"+i+"dc."+r.endpointsuffix,r.liveendpoint=r.liveendpoint||"https://"+i+"live."+r.endpointsuffix}r.ingestionendpoint=r.ingestionendpoint||n.DEFAULT_BREEZE_ENDPOINT,r.liveendpoint=r.liveendpoint||n.DEFAULT_LIVEMETRICS_ENDPOINT}return r},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();t.exports=r})),Zr=b(((e,t)=>{"use strict";var r=ln(),i=Jr(),o=(P(),Dr()),s=n(7310),a=function(){function e(t){var n=this;this.endpointBase=o.DEFAULT_BREEZE_ENDPOINT;var r=process.env[e.ENV_connectionString],a=i.parse(t),c=i.parse(r),u=!a.instrumentationkey&&Object.keys(a).length>0?null:t;this.instrumentationKey=a.instrumentationkey||u||c.instrumentationkey||e._getInstrumentationKey(),e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(a.ingestionendpoint||c.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(e){return n.correlationId=e},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=a.ingestionendpoint||c.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=a.liveendpoint||c.liveendpoint||process.env[e.ENV_quickPulseHost]||o.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e._validateInstrumentationKey=function(e){return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();t.exports=a})),ei=b((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var r=Zr(),i=Fr(),o=P(),s=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},e.prototype.enable=function(t,r,i){var s=this;if(void 0===r&&(r={}),void 0===i&&(i=6e4),e.isNodeVersionCompatible()){if(null==e._metricsAvailable&&t&&!this._isInitialized)try{var a=n(9166);e._emitter=new a,e._metricsAvailable=!0,o.info("Native metrics module successfully loaded!")}catch{return void(e._metricsAvailable=!1)}this._isEnabled=t,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,i),this._handle||(this._handle=setInterval((function(){return s._trackNativeMetrics()}),i),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(e){var n=process.env[r.ENV_nativeMetricsDisableAll],i=process.env[r.ENV_nativeMetricsDisablers];if(n)return{isEnabled:!1,disabledMetrics:{}};if(i){var o=i.split(","),s={};if(o.length>0)for(var a=0,c=o;a<c.length;a++)s[c[a]]=!0;return"object"==typeof e?{isEnabled:!0,disabledMetrics:t(t({},e),s)}:{isEnabled:e,disabledMetrics:s}}return"boolean"==typeof e?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},e.prototype._trackNativeMetrics=function(){var e=!0;"object"!=typeof this._isEnabled&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var n=e._emitter.getGCData();for(var r in n){var o=n[r].metrics,s=r+" Garbage Collection Duration",a=Math.sqrt(o.sumSquares/o.count-Math.pow(o.total/o.count,2))||0;this._client.trackMetric({name:s,value:o.total,count:o.count,max:o.max,min:o.min,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var n=e._emitter.getLoopData().loopUsage;if(0!=n.count){var r=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:n.total,count:n.count,min:n.min,max:n.max,stdDev:r,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var e,t,n;if(!this._disabledMetrics.heap){var r=process.memoryUsage(),o=r.heapUsed,s=r.heapTotal,a=r.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,n)})}},e}();e.AutoCollectNativePerformance=s})),ti=b(((e,t)=>{"use strict";var n=P(),r=function(){function e(e,t,n,r){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=n,this._sender=r}return e.prototype.setUseDiskRetryCaching=function(e,t,n){this._sender.setDiskRetryMode(e,t,n)},e.prototype.send=function(e){var t=this;if(!this._isDisabled()){if(!e)return void n.warn("Cannot send null/undefined telemetry");if(this._buffer.push(e),this._buffer.length>=this._getBatchSize())return void this.triggerSend(!1);!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(e,t){var n=this._buffer.length<1;n||(e?(this._sender.saveOnCrash(this._buffer),"function"==typeof t&&t("data saved on crash")):this._sender.send(this._buffer,t)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&"function"==typeof t&&t("no data to send")},e}();t.exports=r})),ni=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0,e.azureRoleEnvironmentTelemetryProcessor=function(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}})),ri=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=nr();function n(e){var t=2147483647,n=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var r=0;r<e.length;r++)n=((n<<5)+n|0)+e.charCodeAt(r)|0;return(n=n<=-2147483648?t:Math.abs(n))/t*100}e.samplingTelemetryProcessor=function(e,r){var i=e.sampleRate;return!!(null==i||i>=100||e.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(e.data.baseType))||(r.correlationContext&&r.correlationContext.operation?n(r.correlationContext.operation.id)<i:100*Math.random()<i)},e.getSamplingHashCode=n})),ii=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=Nr(),n=nr();e.performanceMetricsTelemetryProcessor=function(e,r){switch(r&&r.addDocument(e),e.data.baseType){case n.TelemetryTypeString.Exception:t.countException();break;case n.TelemetryTypeString.Request:var i=e.data.baseData;t.countRequest(i.duration,i.success);break;case n.TelemetryTypeString.Dependency:var o=e.data.baseData;t.countDependency(o.duration,o.success)}return!0}})),oi=b((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var n=nr(),r=Lr(),i=nr();e.preAggregatedMetricsTelemetryProcessor=function(e,o){if(r.isEnabled())switch(e.data.baseType){case i.TelemetryTypeString.Exception:var s=e.data.baseData;s.properties=t(t({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole]};r.countException(a);break;case i.TelemetryTypeString.Trace:var c=e.data.baseData;c.properties=t(t({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var u={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],traceSeverityLevel:n.SeverityLevel[c.severity]};r.countTrace(u);break;case i.TelemetryTypeString.Request:var l=e.data.baseData;l.properties=t(t({},l.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var d={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],operationSynthetic:e.tags[o.keys.operationSyntheticSource],requestSuccess:l.success,requestResultCode:l.responseCode};r.countRequest(l.duration,d);break;case i.TelemetryTypeString.Dependency:var p=e.data.baseData;p.properties=t(t({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var h={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],operationSynthetic:e.tags[o.keys.operationSyntheticSource],dependencySuccess:p.success,dependencyType:p.type,dependencyTarget:p.target,dependencyResultCode:p.resultCode};r.countDependency(p.duration,h)}return!0}})),si=b((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(ni(),e),n(ri(),e),n(ii(),e),n(oi(),e)})),ai=b(((e,t)=>{"use strict";var r=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=e&&e.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=n(7147),s=n(2037),a=n(1017),c=n(9796),u=n(2081),l=P(),d=Gr(),p=un(),h=function(){function e(t,n,r){if(this._redirectedHost=null,this._config=t,this._onSuccess=n,this._onError=r,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=a.join(s.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=o.existsSync(e.ICACLS_PATH)}catch{}e.OS_PROVIDES_FILE_PROTECTION||l.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,n,r){var i=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof n&&n>=0&&(this._resendInterval=Math.floor(n)),"number"==typeof r&&r>=0&&(this._maxBytesOnDisk=Math.floor(r)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout((function(){i._fileCleanupTask()}),e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},e.prototype.send=function(t,n){return r(this,void 0,void 0,(function(){var r,o,s,a,u=this;return i(this,(function(i){return t&&(r=this._redirectedHost||this._config.endpointUrl,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s="",t.forEach((function(e){var t=u._stringify(e);"string"==typeof t&&(s+=t+"\n")})),s.length>0&&(s=s.substring(0,s.length-1)),a=Buffer.from?Buffer.from(s):new Buffer(s),c.gzip(a,(function(i,s){var c=s;i?(l.warn(i),c=a,o.headers["Content-Length"]=a.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=s.length.toString()),l.info(e.TAG,o),o[d.disableCollectionRequestOption]=!0;var h=p.makeRequest(u._config,r,o,(function(r){r.setEncoding("utf-8");var i="";r.on("data",(function(e){i+=e})),r.on("end",(function(){if(u._numConsecutiveFailures=0,u._enableDiskRetryMode)if(200===r.statusCode)u._resendTimer||(u._resendTimer=setTimeout((function(){u._resendTimer=null,u._sendFirstFileOnDisk()}),u._resendInterval),u._resendTimer.unref());else if(u._isRetriable(r.statusCode))try{var o=JSON.parse(i),s=[];o.errors.forEach((function(e){u._isRetriable(e.statusCode)&&s.push(t[e.index])})),s.length>0&&u._storeToDisk(s)}catch{u._storeToDisk(t)}if(307===r.statusCode||308===r.statusCode)if(u._numConsecutiveRedirects++,u._numConsecutiveRedirects<10){var a=r.headers.location?r.headers.location.toString():null;a&&(u._redirectedHost=a,u.send(t,n))}else"function"==typeof n&&n("Error sending telemetry because of circular redirects.");else u._numConsecutiveRedirects=0,"function"==typeof n&&n(i),l.info(e.TAG,i),"function"==typeof u._onSuccess&&u._onSuccess(i)}))}));h.on("error",(function(r){if(u._numConsecutiveFailures++,!u._enableDiskRetryMode||u._numConsecutiveFailures>0&&u._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var i="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";u._enableDiskRetryMode&&(i="Ingestion endpoint could not be reached "+u._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(e.TAG,i,p.dumpObj(r))}else i="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:",l.info(e.TAG,i,p.dumpObj(r));u._onErrorHelper(r),"function"==typeof n&&(r&&n(p.dumpObj(r)),n("Error sending telemetry")),u._enableDiskRetryMode&&u._storeToDisk(t)})),h.write(c),h.end()}))),[2]}))}))},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(e))},e.prototype._isRetriable=function(e){return 206===e||408===e||429===e||439===e||500===e||503===e},e.prototype._runICACLS=function(t,n){var r=u.spawn(e.ICACLS_PATH,t,{windowsHide:!0});r.on("error",(function(e){return n(e)})),r.on("close",(function(e,t){return n(0===e?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))}))},e.prototype._runICACLSSync=function(t){if(!u.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var n=u.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(n.error)throw n.error;if(0!==n.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+n.status+")")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var n=u.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),r="";n.stdout.on("data",(function(e){return r+=e})),n.on("error",(function(e){return t(e,null)})),n.on("close",(function(n,i){return e.ACL_IDENTITY=r&&r.trim(),t(0===n?null:new Error("Getting ACL identity did not succeed (PS returned code "+n+")"),e.ACL_IDENTITY)}))},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(u.spawnSync){var t=u.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,n){var r=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[t]?n(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[t]=!1,void this._getACLIdentity((function(i,o){if(i)return e.ACLED_DIRECTORIES[t]=!1,n(i);r._runICACLS(r._getACLArguments(t,o),(function(r){return e.ACLED_DIRECTORIES[t]=!r,n(r)}))}))):n(null)},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(e,t){var n=this;o.lstat(e,(function(r,i){r&&"ENOENT"===r.code?o.mkdir(e,(function(r){r&&"EEXIST"!==r.code?t(r):n._applyACLRules(e,t)})):!r&&i.isDirectory()?n._applyACLRules(e,t):t(r||new Error("Path existed but was not a directory"))}))},e.prototype._getShallowDirectorySize=function(e,t){o.readdir(e,(function(n,r){if(n)return t(n,-1);var i=null,s=0,c=0;if(0!==r.length)for(var u=0;u<r.length;u++)o.stat(a.join(e,r[u]),(function(e,n){c++,e?i=e:n.isFile()&&(s+=n.size),c===r.length&&t(i,i?-1:s)}));else t(null,0)}))},e.prototype._getShallowDirectorySizeSync=function(e){for(var t=o.readdirSync(e),n=0,r=0;r<t.length;r++)n+=o.statSync(a.join(e,t[r])).size;return n},e.prototype._storeToDisk=function(t){var n=this;l.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,(function(r){if(r)return l.warn(e.TAG,"Error while checking/creating directory: "+(r&&r.message)),void n._onErrorHelper(r);n._getShallowDirectorySize(n._tempDir,(function(r,i){if(r||i<0)return l.warn(e.TAG,"Error while checking directory size: "+(r&&r.message)),void n._onErrorHelper(r);if(i>n._maxBytesOnDisk)l.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+i);else{var s=(new Date).getTime()+".ai.json",c=a.join(n._tempDir,s);l.info(e.TAG,"saving data to disk at: "+c),o.writeFile(c,n._stringify(t),{mode:384},(function(e){return n._onErrorHelper(e)}))}}))}))},e.prototype._storeToDiskSync=function(t){try{l.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),o.existsSync(this._tempDir)||o.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var n=this._getShallowDirectorySizeSync(this._tempDir);if(n>this._maxBytesOnDisk)return void l.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+n);var r=(new Date).getTime()+".ai.json",i=a.join(this._tempDir,r);l.info(e.TAG,"saving data before crash to disk at: "+i),o.writeFileSync(i,t,{mode:384})}catch(t){l.warn(e.TAG,"Error while saving data to disk: "+(t&&t.message)),this._onErrorHelper(t)}},e.prototype._sendFirstFileOnDisk=function(){var e=this;o.exists(this._tempDir,(function(t){t&&o.readdir(e._tempDir,(function(t,n){if(t)e._onErrorHelper(t);else if((n=n.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0){var r=n[0],i=a.join(e._tempDir,r);o.readFile(i,(function(t,n){t?e._onErrorHelper(t):o.unlink(i,(function(t){if(t)e._onErrorHelper(t);else try{var r=JSON.parse(n.toString());e.send(r)}catch(e){l.warn("Failed to read persisted file",e)}}))}))}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){l.warn("Failed to serialize payload",t,e)}},e.prototype._fileCleanupTask=function(){var t=this;o.exists(this._tempDir,(function(n){n&&o.readdir(t._tempDir,(function(n,r){n?t._onErrorHelper(n):(r=r.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0&&r.forEach((function(n){var r=new Date(parseInt(n.split(".ai.json")[0]));if(new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>r){var i=a.join(t._tempDir,n);o.unlink(i,(function(e){e&&t._onErrorHelper(e)}))}}))}))}))},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=52428800,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=36e5,e.FILE_RETEMPTION_PERIOD=6048e5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===s.type(),e}();t.exports=h})),ci=b(((e,t)=>{"use strict";var n=nr(),r=un(),i=Rr(),o=function(){function e(){}return e.createEnvelope=function(t,i,o,s,a){var c=null;switch(i){case n.TelemetryType.Trace:c=e.createTraceData(t);break;case n.TelemetryType.Dependency:c=e.createDependencyData(t);break;case n.TelemetryType.Event:c=e.createEventData(t);break;case n.TelemetryType.Exception:c=e.createExceptionData(t);break;case n.TelemetryType.Request:c=e.createRequestData(t);break;case n.TelemetryType.Metric:c=e.createMetricData(t);break;case n.TelemetryType.Availability:c=e.createAvailabilityData(t);break;case n.TelemetryType.PageView:c=e.createPageViewData(t)}if(o&&n.domainSupportsProperties(c.baseData)){if(c&&c.baseData)if(c.baseData.properties)for(var u in o)c.baseData.properties[u]||(c.baseData.properties[u]=o[u]);else c.baseData.properties=o;c.baseData.properties=r.validateStringMap(c.baseData.properties)}var l=a&&a.instrumentationKey||"",d=new n.Envelope;return d.data=c,d.iKey=l,d.name="Microsoft.ApplicationInsights."+l.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),d.tags=this.getTags(s,t.tagOverrides),d.time=(new Date).toISOString(),d.ver=1,d.sampleRate=a?a.samplingPercentage:100,i===n.TelemetryType.Metric&&(d.sampleRate=100),d},e.createTraceData=function(e){var t=new n.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=n.SeverityLevel.Information:t.severityLevel=e.severity;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Trace),r.baseData=t,r},e.createDependencyData=function(e){var t=new n.RemoteDependencyData;"string"==typeof e.name&&(t.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),t.data=e.data,t.target=e.target,t.duration=r.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=r.w3cTraceId();var i=new n.Data;return i.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Dependency),i.baseData=t,i},e.createEventData=function(e){var t=new n.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Event),r.baseData=t,r},e.createExceptionData=function(e){var t=new n.ExceptionData;t.properties=e.properties,isNaN(e.severity)?t.severityLevel=n.SeverityLevel.Error:t.severityLevel=e.severity,t.measurements=e.measurements,t.exceptions=[];var i=e.exception.stack,o=new n.ExceptionDetails;o.message=e.exception.message,o.typeName=e.exception.name,o.parsedStack=this.parseStack(i),o.hasFullStack=r.isArray(o.parsedStack)&&o.parsedStack.length>0,t.exceptions.push(o);var s=new n.Data;return s.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Exception),s.baseData=t,s},e.createRequestData=function(e){var t=new n.RequestData;e.id?t.id=e.id:t.id=r.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=r.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var i=new n.Data;return i.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Request),i.baseData=t,i},e.createMetricData=function(e){var t=new n.MetricData;t.metrics=[];var r=new n.DataPoint;r.count=isNaN(e.count)?1:e.count,r.kind=n.DataPointType.Aggregation,r.max=isNaN(e.max)?e.value:e.max,r.min=isNaN(e.min)?e.value:e.min,r.name=e.name,r.stdDev=isNaN(e.stdDev)?0:e.stdDev,r.value=e.value,t.metrics.push(r),t.properties=e.properties;var i=new n.Data;return i.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Metric),i.baseData=t,i},e.createAvailabilityData=function(e){var t=new n.AvailabilityData;e.id?t.id=e.id:t.id=r.w3cTraceId(),t.name=e.name,t.duration=r.msToTimeSpan(e.duration),t.success=e.success,t.runLocation=e.runLocation,t.message=e.message,t.measurements=e.measurements,t.properties=e.properties;var i=new n.Data;return i.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Availability),i.baseData=t,i},e.createPageViewData=function(e){var t=new n.PageViewData;t.name=e.name,t.duration=r.msToTimeSpan(e.duration),t.url=e.url,t.measurements=e.measurements,t.properties=e.properties;var i=new n.Data;return i.baseType=n.telemetryTypeToBaseType(n.TelemetryType.PageView),i.baseData=t,i},e.getTags=function(e,t){var n=i.CorrelationContextManager.getCurrentContext(),r={};if(e&&e.tags)for(var o in e.tags)r[o]=e.tags[o];if(t)for(var o in t)r[o]=t[o];return n&&(r[e.keys.operationId]=r[e.keys.operationId]||n.operation.id,r[e.keys.operationName]=r[e.keys.operationName]||n.operation.name,r[e.keys.operationParentId]=r[e.keys.operationParentId]||n.operation.parentId),r},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var n=e.split("\n");t=[];for(var r=0,i=0,o=0;o<=n.length;o++){var a=n[o];if(s.regex.test(a)){var c=new s(n[o],r++);i+=c.sizeInBytes,t.push(c)}}if(i>32768)for(var u=0,l=t.length-1,d=0,p=u,h=l;u<l;){if((d+=t[u].sizeInBytes+t[l].sizeInBytes)>32768){var f=h-p+1;t.splice(p,f);break}p=u,h=l,u++,l--}}return t},e}(),s=function(){function e(t,n){this.sizeInBytes=0,this.level=n,this.method="<no_method>",this.assembly=r.trim(t);var i=t.match(e.regex);i&&i.length>=5&&(this.method=r.trim(i[2])||this.method,this.fileName=r.trim(i[4])||"<no_filename>",this.line=parseInt(i[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();t.exports=o})),ui=b(((e,t)=>{"use strict";var r=n(7310),i=Zr(),o=Fr(),s=nr(),a=ti(),c=si(),u=Rr(),l=ai(),d=un(),p=P(),h=ci(),f=function(){function e(e){this._telemetryProcessors=[],this._enableAzureProperties=!1;var t=new i(e);this.config=t,this.context=new o,this.commonProperties={};var n=new l(this.config);this.channel=new a((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),n)}return e.prototype.trackAvailability=function(e){this.track(e,s.TelemetryType.Availability)},e.prototype.trackPageView=function(e){this.track(e,s.TelemetryType.PageView)},e.prototype.trackTrace=function(e){this.track(e,s.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,s.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!d.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,s.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,s.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,s.TelemetryType.Request)},e.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=r.parse(e.data).host),this.track(e,s.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(e,t){if(e&&s.telemetryTypeToBaseType(t)){var n=h.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString()),this._enableAzureProperties&&c.azureRoleEnvironmentTelemetryProcessor(n,this.context);var r=this.runTelemetryProcessors(n,e.contextObjects);r=r&&c.samplingTelemetryProcessor(n,{correlationContext:u.CorrelationContextManager.getCurrentContext()}),c.preAggregatedMetricsTelemetryProcessor(n,this.context),r&&(c.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else p.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(e){this._enableAzureProperties=e},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(e,t){var n=!0,r=this._telemetryProcessors.length;if(0===r)return n;(t=t||{}).correlationContext=u.CorrelationContextManager.getCurrentContext();for(var i=0;i<r;++i)try{var o=this._telemetryProcessors[i];if(o&&!1===o.apply(null,[e,t])){n=!1;break}}catch(t){n=!0,p.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return n&&(e&&e.tags&&(e.tags=d.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=d.validateStringMap(e.data.baseData.properties))),n},e}();t.exports=f})),li=b(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=ui(),o=$r(),s=Gr(),a=P(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?o.trackRequestSync(this,e):a.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&a.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?o.trackRequest(this,e):a.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?s.trackRequest(this,e):a.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(i);t.exports=c})),di=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),pi=b((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t,n,r=Rr(),i=Ir(),o=Ar(),s=Nr(),a=Lr(),c=Kr(),u=Gr(),l=$r(),d=ln(),p=P(),h=Yr(),f=ei();e.TelemetryClient=li(),e.Contracts=nr(),e.azureFunctionsTypes=di(),(n=t=e.DistributedTracingModes||(e.DistributedTracingModes={}))[n.AI=0]="AI",n[n.AI_AND_W3C=1]="AI_AND_W3C";var m,g,v,y,_,b,E,S,w,C,T,R=!0,O=!1,x=!0,I=!0,A=!0,D=!1,N=!0,k=!0,M=!0,L=!0,F=!1,q=!0,j=void 0,U=void 0,B=!1;function V(){return e.defaultClient?(B=!0,v.enable(R,O),y.enable(x),_.enable(I),b.enable(A),E.enable(D,e.defaultClient.config),S.enable(q,g),w.useAutoCorrelation(L,m),w.enable(N),C.enable(k),e.liveMetricsClient&&F&&e.liveMetricsClient.enable(F)):p.warn("Start cannot be called before setup"),H}e.setup=function(t){return e.defaultClient?p.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(t),v=new i(e.defaultClient),y=new o(e.defaultClient),_=new s(e.defaultClient),b=new a(e.defaultClient),E=new c(e.defaultClient),w=new l(e.defaultClient),C=new u(e.defaultClient),S||(S=new f.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(M,j,U),H},e.start=V,e.getCorrelationContext=function(){return L?r.CorrelationContextManager.getCurrentContext():null},e.startOperation=function(e,t){return r.CorrelationContextManager.startOperation(e,t)},e.wrapWithCorrelationContext=function(e,t){return r.CorrelationContextManager.wrapCallback(e,t)};var H=function(){function n(){}return n.setDistributedTracingMode=function(e){return d.w3cEnabled=e===t.AI_AND_W3C,n},n.setAutoCollectConsole=function(e,t){return void 0===t&&(t=!1),R=e,O=t,B&&v.enable(e,t),n},n.setAutoCollectExceptions=function(e){return x=e,B&&y.enable(e),n},n.setAutoCollectPerformance=function(e,t){void 0===t&&(t=!0),I=e;var r=f.AutoCollectNativePerformance.parseEnabled(t);return q=r.isEnabled,g=r.disabledMetrics,B&&(_.enable(e),S.enable(r.isEnabled,r.disabledMetrics)),n},n.setAutoCollectPreAggregatedMetrics=function(e){return A=e,B&&b.enable(e),n},n.setAutoCollectHeartbeat=function(t){return D=t,B&&E.enable(t,e.defaultClient.config),n},n.setAutoCollectRequests=function(e){return N=e,B&&w.enable(e),n},n.setAutoCollectDependencies=function(e){return k=e,B&&C.enable(e),n},n.setAutoDependencyCorrelation=function(e,t){return L=e,m=t,B&&w.useAutoCorrelation(e,t),n},n.setUseDiskRetryCaching=function(t,r,i){return M=t,j=r,U=i,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(t,r,i),n},n.setInternalLogging=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!0),p.enableDebug=e,p.disableWarnings=!t,n},n.setSendLiveMetrics=function(t){return void 0===t&&(t=!1),e.defaultClient?(!e.liveMetricsClient&&t?(e.liveMetricsClient=new h(e.defaultClient.config,null),T=new s(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(T),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(t),F=t,n):(p.warn("Live metrics client cannot be setup without the default client"),n)},n.start=V,n}();e.Configuration=H,e.dispose=function(){d.w3cEnabled=!0,e.defaultClient=null,B=!1,v&&v.dispose(),y&&y.dispose(),_&&_.dispose(),b&&b.dispose(),E&&E.dispose(),S&&S.dispose(),w&&w.dispose(),C&&C.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),F=!1,e.liveMetricsClient=void 0)}})),hi={};((e,t)=>{for(var n in t)c(e,n,{get:t[n],enumerable:!0})})(hi,{default:()=>_i}),e.exports=(s=hi,E(c({},"__esModule",{value:!0}),s));var fi=S(n(2037)),mi=S(n(9496)),gi=S(n(5687)),vi=class{constructor(e){this.vscodeAPI=e}getTelemetryLevel(){try{let e=this.vscodeAPI.env.telemetryConfiguration;return e.isUsageEnabled&&e.isErrorsEnabled&&e.isCrashEnabled?"on":e.isErrorsEnabled&&e.isCrashEnabled?"error":"off"}catch{return void 0!==this.vscodeAPI.env.isTelemetryEnabled?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration("telemetry").get("enableTelemetry")?"on":"off"}}static applyReplacements(e,t){for(let n of Object.keys(e))for(let r of t)r.lookup.test(n)&&(void 0!==r.replacementString?e[n]=r.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getInstance(e){return vi._instance||(vi._instance=new vi(e)),vi._instance}},yi=class{constructor(e,t,n,r,i,o){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=n,this.osShim=r,this.vscodeAPI=i,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!o,this.updateUserOptStatus(),void 0!==i.env.onDidChangeTelemetryEnabled?(this.disposables.push(i.env.onDidChangeTelemetryEnabled((()=>this.updateUserOptStatus()))),this.disposables.push(i.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))):this.disposables.push(i.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))}updateUserOptStatus(){let e=vi.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn="on"===e,this.errorOptIn="error"===e||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach((n=>{0===e.indexOf(`${n}`)&&(t=n)})),t}get extension(){return void 0===this._extension&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(null===e||"object"!=typeof e||"function"!=typeof t)return e;let n={};for(let r in e)n[r]=t(r,e[r]);return n}shouldSendErrorTelemetry(){return!(!1===this.errorOptIn||this.firstParty&&this.vscodeAPI.env.remoteName&&"other"===this.cleanRemoteName(this.vscodeAPI.env.remoteName))}getCommonProperties(){let e={};if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(e["common.vscodemachineid"]=this.vscodeAPI.env.machineId,e["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,e["common.vscodeversion"]=this.vscodeAPI.version,e["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",e["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:e["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return e}anonymizeFilePaths(e,t){let n;if(null==e)return"";let r=[];""!==this.vscodeAPI.env.appRoot&&r.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&r.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=e;if(t){let t=[];for(let i of r)for(;(n=i.exec(e))&&n;)t.push([n.index,i.lastIndex]);let o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,a=0;for(i="";(n=s.exec(e))&&n;)n[0]&&!o.test(n[0])&&t.every((([e,t])=>n.index<e||n.index>=t))&&(i+=e.substring(a,n.index)+"<REDACTED: user-file-path>",a=s.lastIndex);a<e.length&&(i+=e.substr(a))}for(let e of r)i=i.replace(e,"");return i}removePropertiesWithPossibleUserInfo(e){if("object"!=typeof e)return;let t={};for(let n of Object.keys(e)){let r=e[n];if(!r)continue;let i=/@[a-zA-Z0-9-.]+/,o=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/.test(r.toLowerCase())?t[n]="<REDACTED: secret>":i.test(r)?t[n]="<REDACTED: email>":o.test(r)?t[n]="<REDACTED: token>":t[n]=r}return t}get telemetryLevel(){switch(vi.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(e,t,n,r,i){if((this.userOptIn||i)&&""!==e){if(t=y(y({},t),this.getCommonProperties()),r){let e=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));t=this.removePropertiesWithPossibleUserInfo(e)}t=t??{},n=n??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:n})}}sendTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!0,!1)}sendRawTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!1,!1)}sendDangerousTelemetryEvent(e,t,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,t,n,r,!0)}internalSendTelemetryErrorEvent(e,t,n,r,i){if((this.shouldSendErrorTelemetry()||i)&&""!==e){if(t=y(y({},t),this.getCommonProperties()),r){let e=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));t=this.removePropertiesWithPossibleUserInfo(e)}t=t??{},n=n??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:n})}}sendTelemetryErrorEvent(e,t,n){this.internalSendTelemetryErrorEvent(e,t,n,!0,!1)}sendDangerousTelemetryErrorEvent(e,t,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,t,n,r,!0)}internalSendTelemetryException(e,t,n,r,i){if((this.shouldSendErrorTelemetry()||i)&&e){if(t=y(y({},t),this.getCommonProperties()),r){let n=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),t=this.removePropertiesWithPossibleUserInfo(n)}t=t??{},n=n??{},this.telemetryAppender.logException(e,{properties:t,measurements:n})}}sendTelemetryException(e,t,n){this.internalSendTelemetryException(e,t,n,!0,!1)}sendDangerousTelemetryException(e,t,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,t,n,r,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map((e=>e.dispose())))}},_i=class extends yi{constructor(e,t,n,r,i){let o=e=>(async(e,t)=>{let n;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let t=await Promise.resolve().then((()=>S(pi())));t.defaultClient?(n=new t.TelemetryClient(e),n.channel.setUseDiskRetryCaching(!0)):(t.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),n=t.defaultClient),mi&&mi.env&&(n.context.tags[n.context.keys.userId]=mi.env.machineId,n.context.tags[n.context.keys.sessionId]=mi.env.sessionId,n.context.tags[n.context.keys.cloudRole]=mi.env.appName,n.context.tags[n.context.keys.cloudRoleInstance]=mi.env.appName),e&&0===e.indexOf("AIF-")&&(n.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1")}catch(e){return Promise.reject("Failed to initialize app insights!\n"+e.message)}return null!=t&&t.length&&function(e,t){e.addTelemetryProcessor((e=>(Array.isArray(e.tags)?e.tags.forEach((e=>vi.applyReplacements(e,t))):e.tags&&vi.applyReplacements(e.tags,t),e.data.baseData&&vi.applyReplacements(e.data.baseData,t),!0)))}(n,t),{logEvent:(e,t)=>{try{null==n||n.trackEvent({name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},logException:(e,t)=>{try{null==n||n.trackException({exception:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}catch(e){throw new Error("Failed to log exception to app insights!\n"+e.message)}},flush:async()=>{try{null==n||n.flush()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}})(e,i);vi.shouldUseOneDataSystemSDK(n)&&(o=e=>(async(e,t,n)=>{let r=await(async(e,t,n)=>{let r=await Promise.resolve().then((()=>S(R()))),i=await Promise.resolve().then((()=>S(x()))),o=new r.AppInsightsCore,s=new i.PostChannel,a={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){a.extensionConfig={};let e={alwaysUseXhrOverride:!0,httpXHROverride:n};a.extensionConfig[s.identifier]=e}let c=t.workspace.getConfiguration("telemetry").get("internalTesting");return o.initialize(a,[]),o.addTelemetryInitializer((e=>{!c||(e.ext=e.ext??{},e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),o})(e,t,n);return{logEvent:(e,t)=>{try{null==r||r.track({name:e,baseData:{name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},logException:(e,t)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:async()=>{try{null==r||r.unload()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}})(e,mi,{sendPOST:(e,t)=>{let n={method:"POST",headers:_(y({},e.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)})};try{let r=gi.request(e.urlString,n,(e=>{e.on("data",(function(n){t(e.statusCode??200,e.headers,n.toString())})),e.on("error",(function(){t(0,{})}))}));r.write(e.data),r.end()}catch{t(0,{})}}}));let s=new class{constructor(e,t){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}logEvent(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):2!==this._instantiationStatus&&this._eventQueue.push({eventName:e,data:t})}logException(e,t){this._telemetryClient?this._telemetryClient.logException(e,t):2!==this._instantiationStatus&&this._exceptionQueue.push({exception:e,data:t})}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.logEvent(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.logException(e,t))),this._exceptionQueue=[]}instantiateAppender(){0===this._instantiationStatus&&(this._instantiationStatus=1,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=2,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=2})))}}(n,o);n&&(0===n.indexOf("AIF-")||vi.shouldUseOneDataSystemSDK(n))&&(r=!0),super(e,t,s,{release:fi.release(),platform:fi.platform(),architecture:fi.arch()},mi,r)}}},5029:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=5029,e.exports=t},3437:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3437,e.exports=t},8054:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(2361),o=r(n(5158)),s=r(n(6304)),a=o.default("agent-base");function c(){const{stack:e}=new Error;return"string"==typeof e&&e.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}function u(e,t){return new u.Agent(e,t)}!function(e){class t extends i.EventEmitter{constructor(e,t){super();let n=t;"function"==typeof e?this.callback=e:e&&(n=e),this.timeout=null,n&&"number"==typeof n.timeout&&(this.timeout=n.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:c()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:c()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,n){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const n=Object.assign({},t);"boolean"!=typeof n.secureEndpoint&&(n.secureEndpoint=c()),null==n.host&&(n.host="localhost"),null==n.port&&(n.port=n.secureEndpoint?443:80),null==n.protocol&&(n.protocol=n.secureEndpoint?"https:":"http:"),n.host&&n.path&&delete n.path,delete n.agent,delete n.hostname,delete n._defaultAgent,delete n.defaultPort,delete n.createConnection,e._last=!0,e.shouldKeepAlive=!1;let r=!1,i=null;const o=n.timeout||this.timeout,u=t=>{e._hadError||(e.emit("error",t),e._hadError=!0)},l=()=>{i=null,r=!0;const e=new Error(`A "socket" was not created for HTTP request before ${o}ms`);e.code="ETIMEOUT",u(e)},d=e=>{r||(null!==i&&(clearTimeout(i),i=null),u(e))},p=t=>{if(r)return;if(null!=i&&(clearTimeout(i),i=null),o=t,Boolean(o)&&"function"==typeof o.addRequest)return a("Callback returned another Agent instance %o",t.constructor.name),void t.addRequest(e,n);var o;if(t)return t.once("free",(()=>{this.freeSocket(t,n)})),void e.onSocket(t);const s=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);u(s)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(a("Converting legacy callback function to promise"),this.promisifiedCallback=s.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof o&&o>0&&(i=setTimeout(l,o)),"port"in n&&"number"!=typeof n.port&&(n.port=Number(n.port));try{a("Resolving socket for %o request: %o",n.protocol,`${e.method} ${e.path}`),Promise.resolve(this.promisifiedCallback(e,n)).then(p,d)}catch(e){Promise.reject(e).catch(d)}}else u(new Error("`callback` is not defined"))}freeSocket(e,t){a("Freeing socket %o %o",e.constructor.name,t),e.destroy()}destroy(){a("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype}(u||(u={})),e.exports=u},6304:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){return new Promise(((r,i)=>{e.call(this,t,n,((e,t)=>{e?i(e):r(t)}))}))}}},2047:(e,t,n)=>{var r=n(9353);e.exports=function(e,t){return new Promise((function(n,i){var o,s=t||{};function a(e){i(e||new Error("Aborted"))}function c(e,t){e.bail?a(e):o.retry(e)?s.onRetry&&s.onRetry(e,t):i(o.mainError())}"randomize"in s||(s.randomize=!0),(o=r.operation(s)).attempt((function(t){var r;try{r=e(a,t)}catch(e){return void c(e,t)}Promise.resolve(r).then(n).catch((function(e){c(e,t)}))}))}))}},2779:(e,t,n)=>{var r=n(4300).Buffer,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function o(e){if(r.isBuffer(e))return e;var t="function"==typeof r.alloc&&"function"==typeof r.from;if("number"==typeof e)return t?r.alloc(e):new r(e);if("string"==typeof e)return t?r.from(e):new r(e);throw new Error("input must be buffer, number, or string, received "+typeof e)}function s(e,t){e=o(e),r.isBuffer(t)&&(t=t.readUInt32BE(0));for(var n=-1^~~t,s=0;s<e.length;s++)n=i[255&(n^e[s])]^n>>>8;return-1^n}function a(){return e=s.apply(null,arguments),(t=o(4)).writeInt32BE(e,0),t;var e,t}"undefined"!=typeof Int32Array&&(i=new Int32Array(i)),a.signed=function(){return s.apply(null,arguments)},a.unsigned=function(){return s.apply(null,arguments)>>>0},e.exports=a},9019:(e,t,n)=>{"use strict";const r=n(7147),i=n(1017),o=r.lchown?"lchown":"chown",s=r.lchownSync?"lchownSync":"chownSync",a=r.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),c=(e,t,n)=>{try{return r[s](e,t,n)}catch(e){if("ENOENT"!==e.code)throw e}},u=a?(e,t,n,i)=>o=>{o&&"EISDIR"===o.code?r.chown(e,t,n,i):i(o)}:(e,t,n,r)=>r,l=a?(e,t,n)=>{try{return c(e,t,n)}catch(i){if("EISDIR"!==i.code)throw i;((e,t,n)=>{try{return r.chownSync(e,t,n)}catch(e){if("ENOENT"!==e.code)throw e}})(e,t,n)}}:(e,t,n)=>c(e,t,n),d=process.version;let p=(e,t,n)=>r.readdir(e,t,n);/^v4\./.test(d)&&(p=(e,t,n)=>r.readdir(e,n));const h=(e,t,n,i)=>{r[o](e,t,n,u(e,t,n,(e=>{i(e&&"ENOENT"!==e.code?e:null)})))},f=(e,t,n,o,s)=>{if("string"==typeof t)return r.lstat(i.resolve(e,t),((r,i)=>{if(r)return s("ENOENT"!==r.code?r:null);i.name=t,f(e,i,n,o,s)}));if(t.isDirectory())m(i.resolve(e,t.name),n,o,(r=>{if(r)return s(r);const a=i.resolve(e,t.name);h(a,n,o,s)}));else{const r=i.resolve(e,t.name);h(r,n,o,s)}},m=(e,t,n,r)=>{p(e,{withFileTypes:!0},((i,o)=>{if(i){if("ENOENT"===i.code)return r();if("ENOTDIR"!==i.code&&"ENOTSUP"!==i.code)return r(i)}if(i||!o.length)return h(e,t,n,r);let s=o.length,a=null;const c=i=>{if(!a)return i?r(a=i):0==--s?h(e,t,n,r):void 0};o.forEach((r=>f(e,r,t,n,c)))}))},g=(e,t,n)=>{let o;try{o=((e,t)=>r.readdirSync(e,{withFileTypes:!0}))(e)}catch(r){if("ENOENT"===r.code)return;if("ENOTDIR"===r.code||"ENOTSUP"===r.code)return l(e,t,n);throw r}return o&&o.length&&o.forEach((o=>((e,t,n,o)=>{if("string"==typeof t)try{const n=r.lstatSync(i.resolve(e,t));n.name=t,t=n}catch(e){if("ENOENT"===e.code)return;throw e}t.isDirectory()&&g(i.resolve(e,t.name),n,o),l(i.resolve(e,t.name),n,o)})(e,o,t,n))),l(e,t,n)};e.exports=m,m.sync=g},9293:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.c2p=void 0;const r=n(9072);t.c2p={asConnectionParams:function(e,t){return{ownerUri:e,connection:{options:t.options}}},asExecutionPlanOptions:function(e){return{includeEstimatedExecutionPlanXml:e?e.displayEstimatedQueryPlan:void 0,includeActualExecutionPlanXml:e?e.displayActualQueryPlan:void 0}},asScriptingParams:function(e,t,n,i){let o={type:n.metadataTypeName,schema:n.schema,name:n.name,parentName:n.parentName,parentTypeName:n.parentTypeName},s=i.targetDatabaseEngineEdition,a=i.targetDatabaseEngineType,c=i.scriptCompatibilityOption,u={scriptCreateDrop:t===r.ScriptOperation.Delete?"ScriptDrop":t===r.ScriptOperation.Select?"ScriptSelect":"ScriptCreate",typeOfDataToScript:"SchemaOnly",scriptStatistics:"ScriptStatsNone",targetDatabaseEngineEdition:s||"SqlServerEnterpriseEdition",targetDatabaseEngineType:a||"SingleInstance",scriptCompatibilityOption:c||"Script140Compat"};return{connectionString:null,filePath:i.filePath,scriptingObjects:[o],scriptDestination:"ToEditor",includeObjectCriteria:null,excludeObjectCriteria:null,includeSchemas:null,excludeSchemas:null,includeTypes:null,excludeTypes:null,scriptOptions:u,connectionDetails:null,selectScript:null,ownerURI:e,operation:t}}}},5868:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseService=t.SqlOpsDataClient=t.FileBrowserFeature=t.TaskServicesFeature=t.ScriptingFeature=t.ObjectExplorerFeature=t.RestoreFeature=t.BackupFeature=t.AdminServicesFeature=t.MetadataFeature=t.QueryFeature=t.ConnectionFeature=t.CapabilitiesFeature=t.SqlOpsFeature=void 0;const r=n(3056),i=n(2097),o=n(2884),s=n(9072),a=n(9496),c=n(9293),u=n(632),l=n(4003);function d(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class p{constructor(e,t){this._client=e,this._message=t,this._providers=new Map,this._disposables=[]}get messages(){return this._message}register(e,t){if(i.array(this.messages)&&i.array(e)){let t=e.every((e=>!!this.messages.find((t=>t.method===e.method))));if(!t)throw new Error("Register called on wrong feature.")}else if(i.array(this.messages)&&!i.array(e)){if(!this.messages.find((t=>t.method===e.method)))throw new Error("Register called on wrong feature.")}else if(!i.array(this.messages)&&!i.array(e)&&this.messages.method!==e.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);let n=this.registerProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach((e=>{e.dispose()})),this._disposables.forEach((e=>e.dispose())),this._providers.clear(),this._disposables=[]}registerNotificationEmitter(e){const t=new a.EventEmitter;return this._disposables.push(t),this._client.onNotification(e,(e=>{t.fire(e)})),t}}t.SqlOpsFeature=p;class h extends p{constructor(e){super(e,h.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"capabilities").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client;return s.dataprotocol.registerCapabilitiesServiceProvider({providerId:t.providerId,getServerCapabilities:e=>t.sendRequest(u.CapabiltiesDiscoveryRequest.type,e).then(t.sqlp2c.asServerCapabilities,(e=>(t.logFailedRequest(u.CapabiltiesDiscoveryRequest.type,e),Promise.resolve(void 0))))})}}t.CapabilitiesFeature=h,h.messagesTypes=[u.CapabiltiesDiscoveryRequest.type];class f extends p{constructor(e){super(e,f.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"connection").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client,n=this.registerNotificationEmitter(u.ConnectionCompleteNotification.type),r=this.registerNotificationEmitter(u.IntelliSenseReadyNotification.type),i=this.registerNotificationEmitter(u.ConnectionChangedNotification.type);return s.dataprotocol.onDidChangeLanguageFlavor((e=>{t.sendNotification(u.LanguageFlavorChangedNotification.type,e)})),s.dataprotocol.registerConnectionProvider({providerId:t.providerId,connect:(e,n)=>t.sendRequest(u.ConnectionRequest.type,t.sqlc2p.asConnectionParams(e,n)).then((e=>e),(e=>(t.logFailedRequest(u.ConnectionRequest.type,e),Promise.resolve(!1)))),disconnect:e=>{let n={ownerUri:e};return t.sendRequest(u.DisconnectRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(u.DisconnectRequest.type,e),Promise.resolve(!1))))},cancelConnect:e=>{let n={ownerUri:e};return t.sendRequest(u.CancelConnectRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(u.CancelConnectRequest.type,e),Promise.resolve(!1))))},changeDatabase:(e,n)=>{let r={ownerUri:e,newDatabase:n};return t.sendRequest(u.ChangeDatabaseRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(u.ChangeDatabaseRequest.type,e),Promise.resolve(!1))))},changePassword:(e,n,r)=>{let i={ownerUri:e,connection:{options:n.options},newPassword:r};return t.sendRequest(u.ChangePasswordRequest.type,i).then((e=>e),(e=>(t.logFailedRequest(u.ChangePasswordRequest.type,e),Promise.resolve(!1))))},listDatabases:e=>{let n={ownerUri:e};return t.sendRequest(u.ListDatabasesRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(u.ListDatabasesRequest.type,e),Promise.resolve(void 0))))},getConnectionString:(e,n)=>{let r={ownerUri:e,includePassword:n};return t.sendRequest(u.GetConnectionStringRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(u.GetConnectionStringRequest.type,e),Promise.resolve(void 0))))},buildConnectionInfo:e=>t.sendRequest(u.BuildConnectionInfoRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(u.BuildConnectionInfoRequest.type,e),Promise.resolve(e)))),rebuildIntelliSenseCache:e=>{let n={ownerUri:e};return t.sendNotification(u.RebuildIntelliSenseNotification.type,n),Promise.resolve()},registerOnConnectionChanged:e=>i.event((t=>e({connectionUri:t.ownerUri,connection:t.connection}))),registerOnIntelliSenseCacheComplete:e=>r.event((t=>e(t.ownerUri))),registerOnConnectionComplete:e=>n.event(e)})}}t.ConnectionFeature=f,f.messagesTypes=[u.ConnectionRequest.type,u.ConnectionCompleteNotification.type,u.ConnectionChangedNotification.type,u.DisconnectRequest.type,u.CancelConnectRequest.type,u.ChangeDatabaseRequest.type,u.ListDatabasesRequest.type,u.GetConnectionStringRequest.type,u.LanguageFlavorChangedNotification.type,u.ChangePasswordRequest.type];class m extends p{constructor(e){super(e,m.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"query").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client,n=this.registerNotificationEmitter(u.QueryExecuteCompleteNotification.type),r=this.registerNotificationEmitter(u.QueryExecuteBatchStartNotification.type),i=this.registerNotificationEmitter(u.QueryExecuteBatchCompleteNotification.type),o=this.registerNotificationEmitter(u.QueryExecuteResultSetAvailableNotification.type),a=this.registerNotificationEmitter(u.QueryExecuteResultSetUpdatedNotification.type),c=this.registerNotificationEmitter(u.QueryExecuteMessageNotification.type),l=this.registerNotificationEmitter(u.EditSessionReadyNotification.type);return s.dataprotocol.registerQueryProvider({providerId:t.providerId,cancelQuery:e=>{let n={ownerUri:e};return t.sendRequest(u.QueryCancelRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(u.QueryCancelRequest.type,e),Promise.reject(e))))},commitEdit:e=>{let n={ownerUri:e};return t.sendRequest(u.EditCommitRequest.type,n).then((e=>{}),(e=>(t.logFailedRequest(u.EditCommitRequest.type,e),Promise.reject(e))))},createRow:e=>{let n={ownerUri:e};return t.sendRequest(u.EditCreateRowRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(u.EditCreateRowRequest.type,e),Promise.reject(e))))},deleteRow:(e,n)=>{let r={ownerUri:e,rowId:n};return t.sendRequest(u.EditDeleteRowRequest.type,r).then((e=>{}),(e=>(t.logFailedRequest(u.EditDeleteRowRequest.type,e),Promise.reject(e))))},disposeEdit:e=>{let n={ownerUri:e};return t.sendRequest(u.EditDisposeRequest.type,n).then((e=>{}),(e=>(t.logFailedRequest(u.EditDisposeRequest.type,e),Promise.reject(e))))},disposeQuery:e=>{let n={ownerUri:e};return t.sendRequest(u.QueryDisposeRequest.type,n).then((e=>{}),(e=>(t.logFailedRequest(u.QueryDisposeRequest.type,e),Promise.reject(e))))},connectionUriChanged:(e,n)=>{let r={newOwnerUri:e,originalOwnerUri:n};return t.sendNotification(u.ConnectionUriChangedNotification.type,r),Promise.resolve()},getEditRows:e=>t.sendRequest(u.EditSubsetRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(u.EditSubsetRequest.type,e),Promise.reject(e)))),getQueryRows:e=>t.sendRequest(u.QueryExecuteSubsetRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(u.QueryExecuteSubsetRequest.type,e),Promise.reject(e)))),setQueryExecutionOptions:(e,n)=>{let r={ownerUri:e,options:n};return t.sendRequest(u.QueryExecutionOptionsRequest.type,r).then((e=>{}),(e=>(t.logFailedRequest(u.QueryExecutionOptionsRequest.type,e),Promise.reject(e))))},initializeEdit:(e,n,r,i,o,s)=>{let a={ownerUri:e,schemaName:n,objectName:r,objectType:i,filters:{LimitResults:o},queryString:s};return t.sendRequest(u.EditInitializeRequest.type,a).then((e=>{}),(e=>(t.logFailedRequest(u.EditInitializeRequest.type,e),Promise.reject(e))))},registerOnBatchComplete:e=>i.event(e),registerOnBatchStart:e=>r.event(e),registerOnEditSessionReady:e=>l.event((t=>e(t.ownerUri,t.success,t.message))),registerOnMessage:e=>c.event(e),registerOnQueryComplete:e=>n.event(e),registerOnResultSetAvailable:e=>o.event(e),registerOnResultSetUpdated:e=>a.event(e),revertCell:(e,n,r)=>{let i={ownerUri:e,rowId:n,columnId:r};return t.sendRequest(u.EditRevertCellRequest.type,i).then((e=>e),(e=>(t.logFailedRequest(u.EditRevertCellRequest.type,e),Promise.reject(e))))},revertRow:(e,n)=>{let r={ownerUri:e,rowId:n};return t.sendRequest(u.EditRevertRowRequest.type,r).then((e=>{}),(e=>(t.logFailedRequest(u.EditRevertRowRequest.type,e),Promise.reject(e))))},runQuery:(e,n,r)=>{let i={ownerUri:e,querySelection:n,executionPlanOptions:t.sqlc2p.asExecutionPlanOptions(r)};return t.sendRequest(u.QueryExecuteRequest.type,i).then((e=>{}),(e=>(t.logFailedRequest(u.QueryExecuteRequest.type,e),Promise.reject(e))))},runQueryAndReturn:(e,n)=>{let r={ownerUri:e,queryString:n};return t.sendRequest(u.SimpleExecuteRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(u.SimpleExecuteRequest.type,e),Promise.reject(e))))},parseSyntax:(e,n)=>{let r={ownerUri:e,query:n};return t.sendRequest(u.SyntaxParseRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(u.SyntaxParseRequest.type,e),Promise.reject(e))))},runQueryStatement:(e,n,r)=>{let i={ownerUri:e,line:n,column:r};return t.sendRequest(u.QueryExecuteStatementRequest.type,i).then((e=>{}),(e=>(t.logFailedRequest(u.QueryExecuteStatementRequest.type,e),Promise.reject(e))))},runQueryString:(e,n)=>{let r={ownerUri:e,query:n};return t.sendRequest(u.QueryExecuteStringRequest.type,r).then((e=>{}),(e=>(t.logFailedRequest(u.QueryExecuteStringRequest.type,e),Promise.reject(e))))},saveResults:e=>{switch(e.resultFormat){case"csv":return t.sendRequest(u.SaveResultsAsCsvRequest.type,e).then(void 0,(e=>(t.logFailedRequest(u.SaveResultsAsCsvRequest.type,e),Promise.reject(e))));case"json":return t.sendRequest(u.SaveResultsAsJsonRequest.type,e).then(void 0,(e=>(t.logFailedRequest(u.SaveResultsAsJsonRequest.type,e),Promise.reject(e))));case"markdown":return t.sendRequest(u.SaveResultsAsMarkdownRequest.type,e).then(void 0,(e=>(t.logFailedRequest(u.SaveResultsAsMarkdownRequest.type,e),Promise.reject(e))));case"excel":return t.sendRequest(u.SaveResultsAsExcelRequest.type,e).then(void 0,(e=>(t.logFailedRequest(u.SaveResultsAsExcelRequest.type,e),Promise.reject(e))));case"xml":return t.sendRequest(u.SaveResultsAsXmlRequest.type,e).then(void 0,(e=>(t.logFailedRequest(u.SaveResultsAsXmlRequest.type,e),Promise.reject(e))));default:return Promise.reject("unsupported format")}},updateCell:(e,n,r,i)=>{let o={ownerUri:e,rowId:n,columnId:r,newValue:i};return t.sendRequest(u.EditUpdateCellRequest.type,o).then((e=>e),(e=>(t.logFailedRequest(u.EditUpdateCellRequest.type,e),Promise.reject(e))))},copyResults:e=>t.sendRequest(u.CopyResultsRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(u.CopyResultsRequest.type,e),Promise.reject(e))))})}}t.QueryFeature=m,m.messagesTypes=[u.QueryExecuteRequest.type,u.QueryCancelRequest.type,u.QueryExecuteStatementRequest.type,u.QueryExecuteStringRequest.type,u.SimpleExecuteRequest.type,u.QueryExecuteSubsetRequest.type,u.QueryDisposeRequest.type,u.ConnectionUriChangedNotification.type,u.QueryExecuteCompleteNotification.type,u.QueryExecuteBatchStartNotification.type,u.QueryExecuteBatchCompleteNotification.type,u.QueryExecuteResultSetAvailableNotification.type,u.QueryExecuteResultSetUpdatedNotification.type,u.QueryExecuteMessageNotification.type,u.QueryExecutionOptionsRequest.type,u.SaveResultsAsCsvRequest.type,u.SaveResultsAsJsonRequest.type,u.SaveResultsAsMarkdownRequest.type,u.SaveResultsAsExcelRequest.type,u.SaveResultsAsXmlRequest.type,u.CopyResultsRequest.type,u.EditCommitRequest.type,u.EditCreateRowRequest.type,u.EditDeleteRowRequest.type,u.EditDisposeRequest.type,u.EditInitializeRequest.type,u.EditRevertCellRequest.type,u.EditRevertRowRequest.type,u.EditUpdateCellRequest.type,u.EditSubsetRequest.type,u.EditSessionReadyNotification.type];class g extends p{constructor(e){super(e,g.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"metadata").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client;return s.dataprotocol.registerMetadataProvider({providerId:t.providerId,getDatabases:e=>{let n={ownerUri:e,includeDetails:!0};return t.sendRequest(u.ListDatabasesRequest.type,n).then((e=>e.databaseNames?e.databaseNames:e.databases),(e=>(t.logFailedRequest(u.ListDatabasesRequest.type,e),Promise.resolve(void 0))))},getMetadata:e=>{let n={ownerUri:e};return t.sendRequest(u.MetadataQueryRequest.type,n).then(t.sqlp2c.asProviderMetadata,(e=>(t.logFailedRequest(u.MetadataQueryRequest.type,e),Promise.resolve(void 0))))},getTableInfo:(e,n)=>{let r={objectName:n.name,ownerUri:e,schema:n.schema};return t.sendRequest(u.TableMetadataRequest.type,r).then((e=>e.columns),(e=>(t.logFailedRequest(u.TableMetadataRequest.type,e),Promise.resolve(void 0))))},getViewInfo:(e,n)=>{let r={objectName:n.name,ownerUri:e,schema:n.schema};return t.sendRequest(u.ViewMetadataRequest.type,r).then((e=>e.columns),(e=>(t.logFailedRequest(u.ViewMetadataRequest.type,e),Promise.resolve(void 0))))}})}}t.MetadataFeature=g,g.messagesTypes=[u.MetadataQueryRequest.type,u.ListDatabasesRequest.type,u.TableMetadataRequest.type,u.ViewMetadataRequest.type];class v extends p{constructor(e){super(e,v.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"adminServices").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client;return s.dataprotocol.registerAdminServicesProvider({providerId:t.providerId,createDatabase:(e,n)=>{let r={ownerUri:e,databaseInfo:n};return t.sendRequest(u.CreateDatabaseRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(u.CreateDatabaseRequest.type,e),Promise.resolve(void 0))))},createLogin:(e,n)=>{let r={ownerUri:e,loginInfo:n};return t.sendRequest(u.CreateLoginRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(u.CreateLoginRequest.type,e),Promise.resolve(void 0))))},getDatabaseInfo:e=>{let n={ownerUri:e};return t.sendRequest(u.GetDatabaseInfoRequest.type,n).then((e=>e.databaseInfo),(e=>(t.logFailedRequest(u.GetDatabaseInfoRequest.type,e),Promise.reject(e))))},getDefaultDatabaseInfo:e=>{let n={ownerUri:e};return t.sendRequest(u.DefaultDatabaseInfoRequest.type,n).then((e=>e.defaultDatabaseInfo),(e=>(t.logFailedRequest(u.DefaultDatabaseInfoRequest.type,e),Promise.resolve(void 0))))}})}}t.AdminServicesFeature=v,v.messagesTypes=[u.CreateDatabaseRequest.type,u.DefaultDatabaseInfoRequest.type,u.GetDatabaseInfoRequest.type,u.CreateLoginRequest.type];class y extends p{constructor(e){super(e,y.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"backup").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client;return s.dataprotocol.registerBackupProvider({providerId:t.providerId,backup:(e,n,r)=>{let i={ownerUri:e,backupInfo:n,taskExecutionMode:r};return t.sendRequest(u.BackupRequest.type,i).then((e=>e),(e=>(t.logFailedRequest(u.BackupRequest.type,e),Promise.resolve(void 0))))},getBackupConfigInfo:e=>{let n={ownerUri:e};return t.sendRequest(u.BackupConfigInfoRequest.type,n).then((e=>e.backupConfigInfo),(e=>(t.logFailedRequest(u.BackupConfigInfoRequest.type,e),Promise.resolve(void 0))))}})}}t.BackupFeature=y,y.messagesTypes=[u.BackupRequest.type,u.BackupConfigInfoRequest.type];class _ extends p{constructor(e){super(e,_.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"restore").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client;return s.dataprotocol.registerRestoreProvider({providerId:t.providerId,cancelRestorePlan:(e,n)=>{let r={options:n.options,ownerUri:e,taskExecutionMode:n.taskExecutionMode};return t.sendRequest(u.CancelRestorePlanRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(u.CancelRestorePlanRequest.type,e),Promise.resolve(void 0))))},getRestoreConfigInfo:e=>{let n={ownerUri:e};return t.sendRequest(u.RestoreConfigInfoRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(u.RestoreConfigInfoRequest.type,e),Promise.resolve(void 0))))},getRestorePlan:(e,n)=>{let r={options:n.options,ownerUri:e,taskExecutionMode:n.taskExecutionMode};return t.sendRequest(u.RestorePlanRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(u.RestorePlanRequest.type,e),Promise.resolve(void 0))))},restore:(e,n)=>{let r={options:n.options,ownerUri:e,taskExecutionMode:n.taskExecutionMode};return t.sendRequest(u.RestoreRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(u.RestoreRequest.type,e),Promise.resolve(void 0))))}})}}t.RestoreFeature=_,_.messagesTypes=[u.RestorePlanRequest.type,u.RestoreRequest.type,u.RestoreConfigInfoRequest.type,u.CancelRestorePlanRequest.type];class b extends p{constructor(e){super(e,b.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"objectExplorer").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client,n=this.registerNotificationEmitter(u.ObjectExplorerCreateSessionCompleteNotification.type),r=this.registerNotificationEmitter(u.ObjectExplorerSessionDisconnectedNotification.type),i=this.registerNotificationEmitter(u.ObjectExplorerExpandCompleteNotification.type);return s.dataprotocol.registerObjectExplorerProvider({providerId:t.providerId,closeSession:e=>t.sendRequest(u.ObjectExplorerCloseSessionRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(u.ObjectExplorerCloseSessionRequest.type,e),Promise.resolve(void 0)))),createNewSession:e=>t.sendRequest(u.ObjectExplorerCreateSessionRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(u.ObjectExplorerCreateSessionRequest.type,e),Promise.resolve(void 0)))),expandNode:e=>t.sendRequest(u.ObjectExplorerExpandRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(u.ObjectExplorerExpandRequest.type,e),Promise.resolve(void 0)))),refreshNode:e=>t.sendRequest(u.ObjectExplorerRefreshRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(u.ObjectExplorerRefreshRequest.type,e),Promise.resolve(void 0)))),findNodes:e=>t.sendRequest(u.ObjectExplorerFindNodesRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(u.ObjectExplorerFindNodesRequest.type,e),Promise.resolve(void 0)))),registerOnExpandCompleted:e=>i.event(e),registerOnSessionCreated:e=>n.event(e),registerOnSessionDisconnected:e=>r.event(e)})}}t.ObjectExplorerFeature=b,b.messagesTypes=[u.ObjectExplorerCreateSessionRequest.type,u.ObjectExplorerExpandRequest.type,u.ObjectExplorerRefreshRequest.type,u.ObjectExplorerCloseSessionRequest.type,u.ObjectExplorerCreateSessionCompleteNotification.type,u.ObjectExplorerExpandCompleteNotification.type,u.ObjectExplorerFindNodesRequest.type];class E extends p{constructor(e){super(e,E.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"scripting").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client,n=this.registerNotificationEmitter(u.ScriptingCompleteNotification.type);return s.dataprotocol.registerScriptingProvider({providerId:t.providerId,registerOnScriptingComplete:e=>n.event(e),scriptAsOperation:(e,n,r,i)=>t.sendRequest(u.ScriptingRequest.type,t.sqlc2p.asScriptingParams(e,n,r,i)).then((e=>e),(e=>(t.logFailedRequest(u.ScriptingRequest.type,e),Promise.reject(e))))})}}t.ScriptingFeature=E,E.messagesTypes=[u.ScriptingRequest.type,u.ScriptingCompleteNotification.type];class S extends p{constructor(e){super(e,S.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"taskServices").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client,n=this.registerNotificationEmitter(u.TaskCreatedNotification.type),r=this.registerNotificationEmitter(u.TaskStatusChangedNotification.type);return s.dataprotocol.registerTaskServicesProvider({providerId:t.providerId,cancelTask:e=>t.sendRequest(u.CancelTaskRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(u.CancelTaskRequest.type,e),Promise.resolve(void 0)))),getAllTasks:e=>t.sendRequest(u.ListTasksRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(u.ListTasksRequest.type,e),Promise.resolve(void 0)))),registerOnTaskCreated:e=>n.event(e),registerOnTaskStatusChanged:e=>r.event(e)})}}t.TaskServicesFeature=S,S.messagesTypes=[u.ListTasksRequest.type,u.CancelTaskRequest.type,u.TaskCreatedNotification.type,u.TaskStatusChangedNotification.type];class w extends p{constructor(e){super(e,w.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"fileBrowser").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client,n=this.registerNotificationEmitter(u.FileBrowserOpenedNotification.type),r=this.registerNotificationEmitter(u.FileBrowserExpandedNotification.type),i=this.registerNotificationEmitter(u.FileBrowserValidatedNotification.type);return s.dataprotocol.registerFileBrowserProvider({providerId:t.providerId,closeFileBrowser:e=>{let n={ownerUri:e};return t.sendRequest(u.FileBrowserCloseRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(u.FileBrowserCloseRequest.type,e),Promise.resolve(void 0))))},expandFolderNode:(e,n)=>{let r={ownerUri:e,expandPath:n};return t.sendRequest(u.FileBrowserExpandRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(u.FileBrowserExpandRequest.type,e),Promise.resolve(void 0))))},openFileBrowser:(e,n,r,i,o)=>{let s={ownerUri:e,expandPath:n,fileFilters:r,changeFilter:i,showFoldersOnly:o};return t.sendRequest(u.FileBrowserOpenRequest.type,s).then((e=>e),(e=>(t.logFailedRequest(u.FileBrowserOpenRequest.type,e),Promise.resolve(void 0))))},registerOnFileBrowserOpened:e=>n.event(e),registerOnFilePathsValidated:e=>i.event(e),registerOnFolderNodeExpanded:e=>r.event(e),validateFilePaths:(e,n,r)=>{let i={ownerUri:e,serviceType:n,selectedFiles:r};return t.sendRequest(u.FileBrowserValidateRequest.type,i).then((e=>e),(e=>(t.logFailedRequest(u.FileBrowserValidateRequest.type,e),Promise.resolve(void 0))))}})}}t.FileBrowserFeature=w,w.messagesTypes=[u.FileBrowserOpenRequest.type,u.FileBrowserOpenedNotification.type,u.FileBrowserExpandRequest.type,u.FileBrowserExpandedNotification.type,u.FileBrowserValidateRequest.type,u.FileBrowserValidatedNotification.type,u.FileBrowserCloseRequest.type];class C extends r.LanguageClient{constructor(e,t,n,r,o){let s;i.string(t)?(super(e,t,n,r,o),this._providerId=r.providerId,s=r.features):(super(e,t,n,r),this._providerId=n.providerId,s=n.features),this._sqlc2p=c.c2p,this._sqlp2c=l.p2c,this.registerSqlopsFeatures(s||C.defaultFeatures)}get sqlc2p(){return this._sqlc2p}get sqlp2c(){return this._sqlp2c}get providerId(){return this._providerId}registerSqlopsFeatures(e){e.map((e=>{this.registerFeature(new e(this))}))}}t.SqlOpsDataClient=C,C.defaultFeatures=[f,h,m,g,v,y,_,b,E,S,w],t.BaseService=class{constructor(e){this.client=e}runWithErrorHandling(e,t){return this.client.sendRequest(e,t).then((e=>e),(t=>(this.client.logFailedRequest(e,t),Promise.reject(t))))}}},632:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataQueryRequest=t.QueryExecutionOptionsRequest=t.QueryExecuteStringRequest=t.SimpleExecuteRequest=t.SyntaxParseRequest=t.CopyResultsRequest=t.SaveResultsAsXmlRequest=t.SaveResultsAsExcelRequest=t.SaveResultsAsMarkdownRequest=t.SaveResultsAsJsonRequest=t.SaveResultsAsCsvRequest=t.QueryExecuteStatementRequest=t.QueryExecuteSubsetRequest=t.QueryExecuteRequest=t.QueryExecuteMessageNotification=t.QueryExecuteResultSetUpdatedNotification=t.QueryExecuteResultSetAvailableNotification=t.QueryExecuteBatchCompleteNotification=t.QueryExecuteBatchStartNotification=t.QueryExecuteCompleteNotification=t.ConnectionUriChangedParams=t.ConnectionUriChangedNotification=t.QueryDisposeRequest=t.QueryCancelRequest=t.CapabiltiesDiscoveryRequest=t.CapabiltiesDiscoveryParams=t.IntelliSenseReadyNotification=t.ViewMetadataRequest=t.TableMetadataRequest=t.TableMetadataResult=t.TableMetadataParams=t.LanguageFlavorChangedNotification=t.BuildConnectionInfoRequest=t.GetConnectionStringRequest=t.GetConnectionStringParams=t.ListDatabasesRequest=t.ListDatabasesParams=t.ChangeDatabaseRequest=t.ChangeDatabaseParams=t.CancelConnectRequest=t.CancelConnectParams=t.DisconnectRequest=t.DisconnectParams=t.ChangePasswordRequest=t.ConnectionChangedNotification=t.ConnectionChangedParams=t.ConnectionCompleteNotification=t.ConnectionRequest=t.RebuildIntelliSenseParams=t.RebuildIntelliSenseNotification=void 0,t.FileBrowserCloseRequest=t.FileBrowserValidatedNotification=t.FileBrowserValidateRequest=t.FileBrowserExpandedNotification=t.FileBrowserExpandRequest=t.FileBrowserOpenedNotification=t.FileBrowserOpenRequest=t.RestoreConfigInfoRequest=t.CancelRestorePlanRequest=t.RestorePlanRequest=t.RestoreRequest=t.BackupConfigInfoRequest=t.BackupRequest=t.GetDatabaseInfoRequest=t.CreateLoginRequest=t.DefaultDatabaseInfoRequest=t.CreateDatabaseRequest=t.TaskCreatedNotification=t.TaskStatusChangedNotification=t.CancelTaskRequest=t.ListTasksRequest=t.ObjectExplorerExpandCompleteNotification=t.ObjectExplorerSessionDisconnectedNotification=t.ObjectExplorerCreateSessionCompleteNotification=t.ObjectExplorerFindNodesRequest=t.ObjectExplorerCloseSessionRequest=t.ObjectExplorerRefreshRequest=t.ObjectExplorerExpandRequest=t.ObjectExplorerCreateSessionRequest=t.EditSubsetRequest=t.EditUpdateCellRequest=t.EditSessionReadyNotification=t.EditRevertRowRequest=t.EditRevertCellRequest=t.EditInitializeRequest=t.EditDisposeRequest=t.EditDeleteRowRequest=t.EditCreateRowRequest=t.EditCommitRequest=t.ScriptingCompleteNotification=t.ScriptingRequest=void 0;const r=n(3056);(t.RebuildIntelliSenseNotification||(t.RebuildIntelliSenseNotification={})).type=new r.NotificationType("textDocument/rebuildIntelliSense"),t.RebuildIntelliSenseParams=class{},(t.ConnectionRequest||(t.ConnectionRequest={})).type=new r.RequestType("connection/connect"),(t.ConnectionCompleteNotification||(t.ConnectionCompleteNotification={})).type=new r.NotificationType("connection/complete"),t.ConnectionChangedParams=class{},(t.ConnectionChangedNotification||(t.ConnectionChangedNotification={})).type=new r.NotificationType("connection/connectionchanged"),(t.ChangePasswordRequest||(t.ChangePasswordRequest={})).type=new r.RequestType("connection/changepassword"),t.DisconnectParams=class{},(t.DisconnectRequest||(t.DisconnectRequest={})).type=new r.RequestType("connection/disconnect"),t.CancelConnectParams=class{},(t.CancelConnectRequest||(t.CancelConnectRequest={})).type=new r.RequestType("connection/cancelconnect"),t.ChangeDatabaseParams=class{},(t.ChangeDatabaseRequest||(t.ChangeDatabaseRequest={})).type=new r.RequestType("connection/changedatabase"),t.ListDatabasesParams=class{},(t.ListDatabasesRequest||(t.ListDatabasesRequest={})).type=new r.RequestType("connection/listdatabases"),t.GetConnectionStringParams=class{},(t.GetConnectionStringRequest||(t.GetConnectionStringRequest={})).type=new r.RequestType("connection/getconnectionstring"),(t.BuildConnectionInfoRequest||(t.BuildConnectionInfoRequest={})).type=new r.RequestType("connection/buildconnectioninfo"),(t.LanguageFlavorChangedNotification||(t.LanguageFlavorChangedNotification={})).type=new r.NotificationType("connection/languageflavorchanged"),t.TableMetadataParams=class{},t.TableMetadataResult=class{},(t.TableMetadataRequest||(t.TableMetadataRequest={})).type=new r.RequestType("metadata/table"),(t.ViewMetadataRequest||(t.ViewMetadataRequest={})).type=new r.RequestType("metadata/view"),(t.IntelliSenseReadyNotification||(t.IntelliSenseReadyNotification={})).type=new r.NotificationType("textDocument/intelliSenseReady"),t.CapabiltiesDiscoveryParams=class{},(t.CapabiltiesDiscoveryRequest||(t.CapabiltiesDiscoveryRequest={})).type=new r.RequestType("capabilities/list"),(t.QueryCancelRequest||(t.QueryCancelRequest={})).type=new r.RequestType("query/cancel"),(t.QueryDisposeRequest||(t.QueryDisposeRequest={})).type=new r.RequestType("query/dispose"),(t.ConnectionUriChangedNotification||(t.ConnectionUriChangedNotification={})).type=new r.NotificationType("query/connectionUriChanged"),t.ConnectionUriChangedParams=class{},(t.QueryExecuteCompleteNotification||(t.QueryExecuteCompleteNotification={})).type=new r.NotificationType("query/complete"),(t.QueryExecuteBatchStartNotification||(t.QueryExecuteBatchStartNotification={})).type=new r.NotificationType("query/batchStart"),(t.QueryExecuteBatchCompleteNotification||(t.QueryExecuteBatchCompleteNotification={})).type=new r.NotificationType("query/batchComplete"),(t.QueryExecuteResultSetAvailableNotification||(t.QueryExecuteResultSetAvailableNotification={})).type=new r.NotificationType("query/resultSetAvailable"),(t.QueryExecuteResultSetUpdatedNotification||(t.QueryExecuteResultSetUpdatedNotification={})).type=new r.NotificationType("query/resultSetUpdated"),(t.QueryExecuteMessageNotification||(t.QueryExecuteMessageNotification={})).type=new r.NotificationType("query/message"),(t.QueryExecuteRequest||(t.QueryExecuteRequest={})).type=new r.RequestType("query/executeDocumentSelection"),(t.QueryExecuteSubsetRequest||(t.QueryExecuteSubsetRequest={})).type=new r.RequestType("query/subset"),(t.QueryExecuteStatementRequest||(t.QueryExecuteStatementRequest={})).type=new r.RequestType("query/executedocumentstatement"),(t.SaveResultsAsCsvRequest||(t.SaveResultsAsCsvRequest={})).type=new r.RequestType("query/saveCsv"),(t.SaveResultsAsJsonRequest||(t.SaveResultsAsJsonRequest={})).type=new r.RequestType("query/saveJson"),(t.SaveResultsAsMarkdownRequest||(t.SaveResultsAsMarkdownRequest={})).type=new r.RequestType("query/saveMarkdown"),(t.SaveResultsAsExcelRequest||(t.SaveResultsAsExcelRequest={})).type=new r.RequestType("query/saveExcel"),(t.SaveResultsAsXmlRequest||(t.SaveResultsAsXmlRequest={})).type=new r.RequestType("query/saveXml"),(t.CopyResultsRequest||(t.CopyResultsRequest={})).type=new r.RequestType("query/copy"),(t.SyntaxParseRequest||(t.SyntaxParseRequest={})).type=new r.RequestType("query/syntaxparse"),(t.SimpleExecuteRequest||(t.SimpleExecuteRequest={})).type=new r.RequestType("query/simpleexecute"),(t.QueryExecuteStringRequest||(t.QueryExecuteStringRequest={})).type=new r.RequestType("query/executeString"),(t.QueryExecutionOptionsRequest||(t.QueryExecutionOptionsRequest={})).type=new r.RequestType("query/setexecutionoptions"),(t.MetadataQueryRequest||(t.MetadataQueryRequest={})).type=new r.RequestType("metadata/list"),(t.ScriptingRequest||(t.ScriptingRequest={})).type=new r.RequestType("scripting/script"),(t.ScriptingCompleteNotification||(t.ScriptingCompleteNotification={})).type=new r.NotificationType("scripting/scriptComplete"),(t.EditCommitRequest||(t.EditCommitRequest={})).type=new r.RequestType("edit/commit"),(t.EditCreateRowRequest||(t.EditCreateRowRequest={})).type=new r.RequestType("edit/createRow"),(t.EditDeleteRowRequest||(t.EditDeleteRowRequest={})).type=new r.RequestType("edit/deleteRow"),(t.EditDisposeRequest||(t.EditDisposeRequest={})).type=new r.RequestType("edit/dispose"),(t.EditInitializeRequest||(t.EditInitializeRequest={})).type=new r.RequestType("edit/initialize"),(t.EditRevertCellRequest||(t.EditRevertCellRequest={})).type=new r.RequestType("edit/revertCell"),(t.EditRevertRowRequest||(t.EditRevertRowRequest={})).type=new r.RequestType("edit/revertRow"),(t.EditSessionReadyNotification||(t.EditSessionReadyNotification={})).type=new r.NotificationType("edit/sessionReady"),(t.EditUpdateCellRequest||(t.EditUpdateCellRequest={})).type=new r.RequestType("edit/updateCell"),(t.EditSubsetRequest||(t.EditSubsetRequest={})).type=new r.RequestType("edit/subset"),(t.ObjectExplorerCreateSessionRequest||(t.ObjectExplorerCreateSessionRequest={})).type=new r.RequestType("objectexplorer/createsession"),(t.ObjectExplorerExpandRequest||(t.ObjectExplorerExpandRequest={})).type=new r.RequestType("objectexplorer/expand"),(t.ObjectExplorerRefreshRequest||(t.ObjectExplorerRefreshRequest={})).type=new r.RequestType("objectexplorer/refresh"),(t.ObjectExplorerCloseSessionRequest||(t.ObjectExplorerCloseSessionRequest={})).type=new r.RequestType("objectexplorer/closesession"),(t.ObjectExplorerFindNodesRequest||(t.ObjectExplorerFindNodesRequest={})).type=new r.RequestType("objectexplorer/findnodes"),(t.ObjectExplorerCreateSessionCompleteNotification||(t.ObjectExplorerCreateSessionCompleteNotification={})).type=new r.NotificationType("objectexplorer/sessioncreated"),(t.ObjectExplorerSessionDisconnectedNotification||(t.ObjectExplorerSessionDisconnectedNotification={})).type=new r.NotificationType("objectexplorer/sessiondisconnected"),(t.ObjectExplorerExpandCompleteNotification||(t.ObjectExplorerExpandCompleteNotification={})).type=new r.NotificationType("objectexplorer/expandCompleted"),(t.ListTasksRequest||(t.ListTasksRequest={})).type=new r.RequestType("tasks/listtasks"),(t.CancelTaskRequest||(t.CancelTaskRequest={})).type=new r.RequestType("tasks/canceltask"),(t.TaskStatusChangedNotification||(t.TaskStatusChangedNotification={})).type=new r.NotificationType("tasks/statuschanged"),(t.TaskCreatedNotification||(t.TaskCreatedNotification={})).type=new r.NotificationType("tasks/newtaskcreated"),(t.CreateDatabaseRequest||(t.CreateDatabaseRequest={})).type=new r.RequestType("admin/createdatabase"),(t.DefaultDatabaseInfoRequest||(t.DefaultDatabaseInfoRequest={})).type=new r.RequestType("admin/defaultdatabaseinfo"),(t.CreateLoginRequest||(t.CreateLoginRequest={})).type=new r.RequestType("admin/createlogin"),(t.GetDatabaseInfoRequest||(t.GetDatabaseInfoRequest={})).type=new r.RequestType("admin/getdatabaseinfo"),(t.BackupRequest||(t.BackupRequest={})).type=new r.RequestType("backup/backup"),(t.BackupConfigInfoRequest||(t.BackupConfigInfoRequest={})).type=new r.RequestType("backup/backupconfiginfo"),(t.RestoreRequest||(t.RestoreRequest={})).type=new r.RequestType("restore/restore"),(t.RestorePlanRequest||(t.RestorePlanRequest={})).type=new r.RequestType("restore/restoreplan"),(t.CancelRestorePlanRequest||(t.CancelRestorePlanRequest={})).type=new r.RequestType("restore/cancelrestoreplan"),(t.RestoreConfigInfoRequest||(t.RestoreConfigInfoRequest={})).type=new r.RequestType("restore/restoreconfiginfo"),(t.FileBrowserOpenRequest||(t.FileBrowserOpenRequest={})).type=new r.RequestType("filebrowser/open"),(t.FileBrowserOpenedNotification||(t.FileBrowserOpenedNotification={})).type=new r.NotificationType("filebrowser/opencomplete"),(t.FileBrowserExpandRequest||(t.FileBrowserExpandRequest={})).type=new r.RequestType("filebrowser/expand"),(t.FileBrowserExpandedNotification||(t.FileBrowserExpandedNotification={})).type=new r.NotificationType("filebrowser/expandcomplete"),(t.FileBrowserValidateRequest||(t.FileBrowserValidateRequest={})).type=new r.RequestType("filebrowser/validate"),(t.FileBrowserValidatedNotification||(t.FileBrowserValidatedNotification={})).type=new r.NotificationType("filebrowser/validatecomplete"),(t.FileBrowserCloseRequest||(t.FileBrowserCloseRequest={})).type=new r.RequestType("filebrowser/close")},4003:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2c=void 0;const r=n(9072);function i(e){return"string"===e?r.ServiceOptionType.string:"multistring"===e?r.ServiceOptionType.multistring:"password"===e?r.ServiceOptionType.password:"number"===e?r.ServiceOptionType.number:"boolean"===e?r.ServiceOptionType.boolean:"category"===e?r.ServiceOptionType.category:"object"===e?r.ServiceOptionType.object:r.ServiceOptionType.string}function o(e){return{name:e.name,displayName:e.displayName?e.displayName:e.name,description:e.description,groupName:e.groupName,defaultValue:e.defaultValue,categoryValues:e.categoryValues,isRequired:e.isRequired,isArray:e.isArray,objectType:e.objectType,valueType:i(e.valueType)}}t.p2c={asProviderMetadata:function(e){let t=[];if(!e.metadata||!e.metadata.length)return{objectMetadata:t};for(let n=0;n<e.metadata.length;++n){let i,o=e.metadata[n];i=o.metadataTypeName?o.metadataTypeName:o.metadataType===r.MetadataType.View?"View":o.metadataType===r.MetadataType.SProc?"StoredProcedure":o.metadataType===r.MetadataType.Function?"Function":"Table",t.push({metadataTypeName:i,metadataType:o.metadataType,name:o.name,schema:o.schema,urn:o.urn})}return{objectMetadata:t}},asServerCapabilities:function(e){let t={protocolVersion:e.capabilities.protocolVersion,providerName:e.capabilities.providerName,providerDisplayName:e.capabilities.providerDisplayName,connectionProvider:void 0,adminServicesProvider:void 0,features:[]};if(e.capabilities.adminServicesProvider){if(t.adminServicesProvider={databaseInfoOptions:new Array,databaseFileInfoOptions:new Array,fileGroupInfoOptions:new Array},e.capabilities.adminServicesProvider.databaseInfoOptions&&e.capabilities.adminServicesProvider.databaseInfoOptions.length>0)for(let n=0;n<e.capabilities.adminServicesProvider.databaseInfoOptions.length;++n){let r=o(e.capabilities.adminServicesProvider.databaseInfoOptions[n]);t.adminServicesProvider.databaseInfoOptions.push(r)}if(e.capabilities.adminServicesProvider.databaseFileInfoOptions&&e.capabilities.adminServicesProvider.databaseFileInfoOptions.length>0)for(let n=0;n<e.capabilities.adminServicesProvider.databaseFileInfoOptions.length;++n){let r=o(e.capabilities.adminServicesProvider.databaseFileInfoOptions[n]);t.adminServicesProvider.databaseFileInfoOptions.push(r)}if(e.capabilities.adminServicesProvider.fileGroupInfoOptions&&e.capabilities.adminServicesProvider.fileGroupInfoOptions.length>0)for(let n=0;n<e.capabilities.adminServicesProvider.fileGroupInfoOptions.length;++n){let r=o(e.capabilities.adminServicesProvider.fileGroupInfoOptions[n]);t.adminServicesProvider.fileGroupInfoOptions.push(r)}}if(e.capabilities.connectionProvider&&e.capabilities.connectionProvider.options&&e.capabilities.connectionProvider.options.length>0){t.connectionProvider={options:new Array};for(let n=0;n<e.capabilities.connectionProvider.options.length;++n){let o=e.capabilities.connectionProvider.options[n],s={name:o.name,displayName:o.displayName?o.displayName:o.name,description:o.description,groupName:o.groupName,defaultValue:o.defaultValue,categoryValues:o.categoryValues,isIdentity:o.isIdentity,isRequired:o.isRequired,valueType:i(o.valueType),specialValueType:void 0};"serverName"===o.specialValueType?s.specialValueType=r.ConnectionOptionSpecialType.serverName:"databaseName"===o.specialValueType?s.specialValueType=r.ConnectionOptionSpecialType.databaseName:"authType"===o.specialValueType?s.specialValueType=r.ConnectionOptionSpecialType.authType:"userName"===o.specialValueType?s.specialValueType=r.ConnectionOptionSpecialType.userName:"password"===o.specialValueType?s.specialValueType=r.ConnectionOptionSpecialType.password:"appName"===o.specialValueType&&(s.specialValueType=r.ConnectionOptionSpecialType.appName),t.connectionProvider.options.push(s)}}return e.capabilities.features&&e.capabilities.features.length>0&&e.capabilities.features.forEach((e=>{let n={enabled:e.enabled,featureName:e.featureName,optionsMetadata:[]};t.features.push(n),e.optionsMetadata&&e.optionsMetadata.forEach((e=>{n.optionsMetadata.push(o(e))}))})),t}}},1227:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(2447)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,o,s=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},5158:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(1227):e.exports=n(39)},39:(e,t,n)=>{const r=n(6224),i=n(3837);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(i.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${r} [0m`;n[0]=o+n[0].split("\n").join("\n"+o),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(2130);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{}),e.exports=n(2447)(t);const{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},6387:(e,t,n)=>{var r;!function(i){var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=10;function a(){this._events={},this._conf&&c.call(this,this._conf)}function c(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==i?e.maxListeners:s,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=s}function u(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.error(n),console.trace&&console.trace()}function l(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,c.call(this,e)}function d(e,t,n,r){if(!n)return[];var i,o,s,a,c,u,l,p=[],h=t.length,f=t[r],m=t[r+1];if(r===h&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===f||"**"===f||n[f]){if("*"===f){for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&(p=p.concat(d(e,t,n[s],r+1)));return p}if("**"===f){for(s in(l=r+1===h||r+2===h&&"*"===m)&&n._listeners&&(p=p.concat(d(e,t,n,h))),n)"_listeners"!==s&&n.hasOwnProperty(s)&&("*"===s||"**"===s?(n[s]._listeners&&!l&&(p=p.concat(d(e,t,n[s],h))),p=p.concat(d(e,t,n[s],r))):p=s===m?p.concat(d(e,t,n[s],r+2)):p.concat(d(e,t,n[s],r)));return p}p=p.concat(d(e,t,n[f],r+1))}if((a=n["*"])&&d(e,t,a,r+1),c=n["**"])if(r<h)for(s in c._listeners&&d(e,t,c,h),c)"_listeners"!==s&&c.hasOwnProperty(s)&&(s===m?d(e,t,c[s],r+2):s===f?d(e,t,c[s],r+1):((u={})[s]=c[s],d(e,t,{"**":u},r+1)));else c._listeners?d(e,t,c,h):c["*"]&&c["*"]._listeners&&d(e,t,c["*"],h);return p}function p(e,t){for(var n=0,r=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var o=this.listenerTree,s=e.shift();s!==i;){if(o[s]||(o[s]={}),o=o[s],0===e.length)return o._listeners?("function"==typeof o._listeners&&(o._listeners=[o._listeners]),o._listeners.push(t),!o._listeners.warned&&this._maxListeners>0&&o._listeners.length>this._maxListeners&&(o._listeners.warned=!0,u.call(this,o._listeners.length,s))):o._listeners=t,!0;s=e.shift()}return!0}l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){e!==i&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},l.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},l.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},l.prototype._many=function(e,t,n,r){var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&i.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,r),i},l.prototype.emit=function(){this._events||a.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,r,i,o,s=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),s>3)for(t=new Array(s),i=0;i<s;i++)t[i]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,s){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if(this.wildcard){o=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,c,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,s){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),i=1;i<s;i++)t[i-1]=arguments[i];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(s>3)for(t=new Array(s-1),i=1;i<s;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,s){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||a.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,i,o,s=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),i=1;i<c;i++)t[i]=arguments[i];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:s.push(this._all[r].call(this,e));break;case 2:s.push(this._all[r].call(this,e,arguments[1]));break;case 3:s.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[r].apply(this,t))}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,u,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o)switch(this.event=e,c){case 1:s.push(o.call(this));break;case 2:s.push(o.call(this,arguments[1]));break;case 3:s.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];s.push(o.apply(this,t))}else if(o&&o.length){if(o=o.slice(),c>3)for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,c){case 1:s.push(o[r].call(this));break;case 2:s.push(o[r].call(this,arguments[1]));break;case 3:s.push(o[r].call(this,arguments[1],arguments[2]));break;default:s.push(o[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||a.call(this),this._newListener&&this.emit("newListener",e,t),this.wildcard?(p.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,u.call(this,this._events[e].length,e))):this._events[e]=t,this)},l.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var s="string"==typeof e?e.split(this.delimiter):e.slice();r=d.call(this,null,s,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var a=0;a<r.length;a++){var c=r[a];if(n=c._listeners,o(n)){for(var u=-1,l=0,p=n.length;l<p;l++)if(n[l]===t||n[l].listener&&n[l].listener===t||n[l]._origin&&n[l]._origin===t){u=l;break}if(u<0)continue;return this.wildcard?c._listeners.splice(u,1):this._events[e].splice(u,1),0===n.length&&(this.wildcard?delete c._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete c._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(t!==i){var n=Object.keys(t);for(var r in n){var o=n[r],s=t[o];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&e(t[o]),0===Object.keys(s).length&&delete t[o])}}}(this.listenerTree),this},l.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(e===i)return!this._events||a.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=d.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++)n[r]._listeners=null;else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return d.call(this,t,n,this.listenerTree,0),t}return this._events||a.call(this),this._events[e]||(this._events[e]=[]),o(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},(r=function(){return l}.call(t,n,t,e))===i||(e.exports=r)}()},8913:(e,t,n)=>{var r=n(7147),i=n(3837),o=n(2781),s=o.Readable,a=o.Writable,c=o.PassThrough,u=n(9916),l=n(2361).EventEmitter;function d(e,t){t=t||{},l.call(this),this.fd=e,this.pend=new u,this.pend.max=1,this.refCount=0,this.autoClose=!!t.autoClose}function p(e,t){t=t||{},s.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=t.end,this.pos=this.start,this.destroyed=!1}function h(e,t){t=t||{},a.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=null==t.end?1/0:+t.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}function f(e,t){l.call(this),t=t||{},this.refCount=0,this.buffer=e,this.maxChunkSize=t.maxChunkSize||Number.MAX_SAFE_INTEGER}t.createFromBuffer=function(e,t){return new f(e,t)},t.createFromFd=function(e,t){return new d(e,t)},t.BufferSlicer=f,t.FdSlicer=d,i.inherits(d,l),d.prototype.read=function(e,t,n,i,o){var s=this;s.pend.go((function(a){r.read(s.fd,e,t,n,i,(function(e,t,n){a(),o(e,t,n)}))}))},d.prototype.write=function(e,t,n,i,o){var s=this;s.pend.go((function(a){r.write(s.fd,e,t,n,i,(function(e,t,n){a(),o(e,t,n)}))}))},d.prototype.createReadStream=function(e){return new p(this,e)},d.prototype.createWriteStream=function(e){return new h(this,e)},d.prototype.ref=function(){this.refCount+=1},d.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw new Error("invalid unref");e.autoClose&&r.close(e.fd,(function(t){t?e.emit("error",t):e.emit("close")}))}},i.inherits(p,s),p.prototype._read=function(e){var t=this;if(!t.destroyed){var n=Math.min(t._readableState.highWaterMark,e);if(null!=t.endOffset&&(n=Math.min(n,t.endOffset-t.pos)),n<=0)return t.destroyed=!0,t.push(null),void t.context.unref();t.context.pend.go((function(e){if(t.destroyed)return e();var i=new Buffer(n);r.read(t.context.fd,i,0,n,t.pos,(function(n,r){n?t.destroy(n):0===r?(t.destroyed=!0,t.push(null),t.context.unref()):(t.pos+=r,t.push(i.slice(0,r))),e()}))}))}},p.prototype.destroy=function(e){this.destroyed||(e=e||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",e),this.context.unref())},i.inherits(h,a),h.prototype._write=function(e,t,n){var i=this;if(!i.destroyed){if(i.pos+e.length>i.endOffset){var o=new Error("maximum file length exceeded");return o.code="ETOOBIG",i.destroy(),void n(o)}i.context.pend.go((function(t){if(i.destroyed)return t();r.write(i.context.fd,e,0,e.length,i.pos,(function(e,r){e?(i.destroy(),t(),n(e)):(i.bytesWritten+=r,i.pos+=r,i.emit("progress"),t(),n())}))}))}},h.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())},i.inherits(f,l),f.prototype.read=function(e,t,n,r,i){var o=r+n,s=o-this.buffer.length,a=s>0?s:n;this.buffer.copy(e,t,r,o),setImmediate((function(){i(null,a)}))},f.prototype.write=function(e,t,n,r,i){e.copy(this.buffer,r,t,t+n),setImmediate((function(){i(null,n,e)}))},f.prototype.createReadStream=function(e){var t=new c(e=e||{});t.destroyed=!1,t.start=e.start||0,t.endOffset=e.end,t.pos=t.endOffset||this.buffer.length;for(var n=this.buffer.slice(t.start,t.pos),r=0;;){var i=r+this.maxChunkSize;if(i>=n.length){r<n.length&&t.write(n.slice(r,n.length));break}t.write(n.slice(r,i)),r=i}return t.end(),t.destroy=function(){t.destroyed=!0},t},f.prototype.createWriteStream=function(e){var t=this,n=new a(e=e||{});return n.start=e.start||0,n.endOffset=null==e.end?this.buffer.length:+e.end,n.bytesWritten=0,n.pos=n.start,n.destroyed=!1,n._write=function(e,r,i){if(!n.destroyed){var o=n.pos+e.length;if(o>n.endOffset){var s=new Error("maximum file length exceeded");return s.code="ETOOBIG",n.destroyed=!0,void i(s)}e.copy(t.buffer,n.pos,0,e.length),n.bytesWritten+=e.length,n.pos=o,n.emit("progress"),i()}},n.destroy=function(){n.destroyed=!0},n},f.prototype.ref=function(){this.refCount+=1},f.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")}},292:(e,t,n)=>{"use strict";const r=n(5736),i=n(2361).EventEmitter,o=n(7147);let s=o.writev;if(!s){const e=process.binding("fs"),t=e.FSReqWrap||e.FSReqCallback;s=(n,r,i,o)=>{const s=new t;s.oncomplete=(e,t)=>o(e,t,r),e.writeBuffers(n,r,i,s)}}const a=Symbol("_autoClose"),c=Symbol("_close"),u=Symbol("_ended"),l=Symbol("_fd"),d=Symbol("_finished"),p=Symbol("_flags"),h=Symbol("_flush"),f=Symbol("_handleChunk"),m=Symbol("_makeBuf"),g=Symbol("_mode"),v=Symbol("_needDrain"),y=Symbol("_onerror"),_=Symbol("_onopen"),b=Symbol("_onread"),E=Symbol("_onwrite"),S=Symbol("_open"),w=Symbol("_path"),C=Symbol("_pos"),T=Symbol("_queue"),R=Symbol("_read"),O=Symbol("_readSize"),x=Symbol("_reading"),P=Symbol("_remain"),I=Symbol("_size"),A=Symbol("_write"),D=Symbol("_writing"),N=Symbol("_defaultFlag"),k=Symbol("_errored");class M extends r{constructor(e,t){if(super(t=t||{}),this.readable=!0,this.writable=!1,"string"!=typeof e)throw new TypeError("path must be a string");this[k]=!1,this[l]="number"==typeof t.fd?t.fd:null,this[w]=e,this[O]=t.readSize||16777216,this[x]=!1,this[I]="number"==typeof t.size?t.size:1/0,this[P]=this[I],this[a]="boolean"!=typeof t.autoClose||t.autoClose,"number"==typeof this[l]?this[R]():this[S]()}get fd(){return this[l]}get path(){return this[w]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[S](){o.open(this[w],"r",((e,t)=>this[_](e,t)))}[_](e,t){e?this[y](e):(this[l]=t,this.emit("open",t),this[R]())}[m](){return Buffer.allocUnsafe(Math.min(this[O],this[P]))}[R](){if(!this[x]){this[x]=!0;const e=this[m]();if(0===e.length)return process.nextTick((()=>this[b](null,0,e)));o.read(this[l],e,0,e.length,null,((e,t,n)=>this[b](e,t,n)))}}[b](e,t,n){this[x]=!1,e?this[y](e):this[f](t,n)&&this[R]()}[c](){if(this[a]&&"number"==typeof this[l]){const e=this[l];this[l]=null,o.close(e,(e=>e?this.emit("error",e):this.emit("close")))}}[y](e){this[x]=!0,this[c](),this.emit("error",e)}[f](e,t){let n=!1;return this[P]-=e,e>0&&(n=super.write(e<t.length?t.slice(0,e):t)),(0===e||this[P]<=0)&&(n=!1,this[c](),super.end()),n}emit(e,t){switch(e){case"prefinish":case"finish":break;case"drain":"number"==typeof this[l]&&this[R]();break;case"error":if(this[k])return;return this[k]=!0,super.emit(e,t);default:return super.emit(e,t)}}}class L extends i{constructor(e,t){super(t=t||{}),this.readable=!1,this.writable=!0,this[k]=!1,this[D]=!1,this[u]=!1,this[v]=!1,this[T]=[],this[w]=e,this[l]="number"==typeof t.fd?t.fd:null,this[g]=void 0===t.mode?438:t.mode,this[C]="number"==typeof t.start?t.start:null,this[a]="boolean"!=typeof t.autoClose||t.autoClose;const n=null!==this[C]?"r+":"w";this[N]=void 0===t.flags,this[p]=this[N]?n:t.flags,null===this[l]&&this[S]()}emit(e,t){if("error"===e){if(this[k])return;this[k]=!0}return super.emit(e,t)}get fd(){return this[l]}get path(){return this[w]}[y](e){this[c](),this[D]=!0,this.emit("error",e)}[S](){o.open(this[w],this[p],this[g],((e,t)=>this[_](e,t)))}[_](e,t){this[N]&&"r+"===this[p]&&e&&"ENOENT"===e.code?(this[p]="w",this[S]()):e?this[y](e):(this[l]=t,this.emit("open",t),this[h]())}end(e,t){return e&&this.write(e,t),this[u]=!0,this[D]||this[T].length||"number"!=typeof this[l]||this[E](null,0),this}write(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),this[u]?(this.emit("error",new Error("write() after end()")),!1):null===this[l]||this[D]||this[T].length?(this[T].push(e),this[v]=!0,!1):(this[D]=!0,this[A](e),!0)}[A](e){o.write(this[l],e,0,e.length,this[C],((e,t)=>this[E](e,t)))}[E](e,t){e?this[y](e):(null!==this[C]&&(this[C]+=t),this[T].length?this[h]():(this[D]=!1,this[u]&&!this[d]?(this[d]=!0,this[c](),this.emit("finish")):this[v]&&(this[v]=!1,this.emit("drain"))))}[h](){if(0===this[T].length)this[u]&&this[E](null,0);else if(1===this[T].length)this[A](this[T].pop());else{const e=this[T];this[T]=[],s(this[l],e,this[C],((e,t)=>this[E](e,t)))}}[c](){if(this[a]&&"number"==typeof this[l]){const e=this[l];this[l]=null,o.close(e,(e=>e?this.emit("error",e):this.emit("close")))}}}t.ReadStream=M,t.ReadStreamSync=class extends M{[S](){let e=!0;try{this[_](null,o.openSync(this[w],"r")),e=!1}finally{e&&this[c]()}}[R](){let e=!0;try{if(!this[x]){for(this[x]=!0;;){const e=this[m](),t=0===e.length?0:o.readSync(this[l],e,0,e.length,null);if(!this[f](t,e))break}this[x]=!1}e=!1}finally{e&&this[c]()}}[c](){if(this[a]&&"number"==typeof this[l]){const e=this[l];this[l]=null,o.closeSync(e),this.emit("close")}}},t.WriteStream=L,t.WriteStreamSync=class extends L{[S](){let e;if(this[N]&&"r+"===this[p])try{e=o.openSync(this[w],this[p],this[g])}catch(e){if("ENOENT"===e.code)return this[p]="w",this[S]();throw e}else e=o.openSync(this[w],this[p],this[g]);this[_](null,e)}[c](){if(this[a]&&"number"==typeof this[l]){const e=this[l];this[l]=null,o.closeSync(e),this.emit("close")}}[A](e){let t=!0;try{this[E](null,o.writeSync(this[l],e,0,e.length,this[C])),t=!1}finally{if(t)try{this[c]()}catch(e){}}}}},6560:e=>{"use strict";e.exports=(e,t=process.argv)=>{const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return-1!==r&&(-1===i||r<i)}},8370:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(1808)),s=i(n(4404)),a=i(n(7310)),c=i(n(5158)),u=i(n(2046)),l=n(8054),d=(0,c.default)("http-proxy-agent");class p extends l.Agent{constructor(e){let t;if(t="string"==typeof e?a.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");d("Creating new HttpProxyAgent instance: %o",t),super(t);const n=Object.assign({},t);var r;this.secureProxy=t.secureProxy||"string"==typeof(r=n.protocol)&&/^https:?$/i.test(r),n.host=n.hostname||n.host,"string"==typeof n.port&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return r(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:r}=this,i=a.default.parse(e.path);let c;if(i.protocol||(i.protocol="http:"),i.hostname||(i.hostname=t.hostname||t.host||null),null==i.port&&(t.port,1)&&(i.port=String(t.port)),"80"===i.port&&(i.port=""),e.path=a.default.format(i),n.auth&&e.setHeader("Proxy-Authorization",`Basic ${Buffer.from(n.auth).toString("base64")}`),r?(d("Creating `tls.Socket`: %o",n),c=s.default.connect(n)):(d("Creating `net.Socket`: %o",n),c=o.default.connect(n)),e._header){let t,n;d("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(d("Patching connection write() output buffer with updated header"),t=e.output[0],n=t.indexOf("\r\n\r\n")+4,e.output[0]=e._header+t.substring(n),d("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(d("Patching connection write() output buffer with updated header"),t=e.outputData[0].data,n=t.indexOf("\r\n\r\n")+4,e.outputData[0].data=e._header+t.substring(n),d("Output buffer: %o",e.outputData[0].data))}return yield(0,u.default)(c,"connect"),c}))}}t.default=p},9201:function(e,t,n){"use strict";const r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(8370));function i(e){return new r.default(e)}!function(e){e.HttpProxyAgent=r.default,e.prototype=r.default.prototype}(i||(i={})),e.exports=i},9146:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(1808)),s=i(n(4404)),a=i(n(7310)),c=i(n(9491)),u=i(n(5158)),l=n(8054),d=i(n(9829)),p=u.default("https-proxy-agent:agent");class h extends l.Agent{constructor(e){let t;if(t="string"==typeof e?a.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");p("creating new HttpsProxyAgent instance: %o",t),super(t);const n=Object.assign({},t);var r;this.secureProxy=t.secureProxy||"string"==typeof(r=n.protocol)&&/^https:?$/i.test(r),n.host=n.hostname||n.host,"string"==typeof n.port&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return r(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:r}=this;let i;r?(p("Creating `tls.Socket`: %o",n),i=s.default.connect(n)):(p("Creating `net.Socket`: %o",n),i=o.default.connect(n));const a=Object.assign({},n.headers);let u=`CONNECT ${t.host}:${t.port} HTTP/1.1\r\n`;n.auth&&(a["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:l,port:h,secureEndpoint:m}=t;(function(e,t){return Boolean(!t&&80===e||t&&443===e)})(h,m)||(l+=`:${h}`),a.Host=l,a.Connection="close";for(const e of Object.keys(a))u+=`${e}: ${a[e]}\r\n`;const g=d.default(i);i.write(`${u}\r\n`);const{statusCode:v,buffered:y}=yield g;if(200===v){if(e.once("socket",f),t.secureEndpoint){p("Upgrading socket connection to TLS");const e=t.servername||t.host;return s.default.connect(Object.assign(Object.assign({},function(e,...t){const n={};let r;for(r in e)t.includes(r)||(n[r]=e[r]);return n}(t,"host","hostname","path","port")),{socket:i,servername:e}))}return i}i.destroy();const _=new o.default.Socket({writable:!1});return _.readable=!0,e.once("socket",(e=>{p("replaying proxy buffer for failed request"),c.default(e.listenerCount("data")>0),e.push(y),e.push(null)})),_}))}}function f(e){e.resume()}t.default=h},6018:function(e,t,n){"use strict";const r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(9146));function i(e){return new r.default(e)}!function(e){e.HttpsProxyAgent=r.default,e.prototype=r.default.prototype}(i||(i={})),e.exports=i},9829:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(5158)).default("https-proxy-agent:parse-proxy-response");t.default=function(e){return new Promise(((t,n)=>{let r=0;const o=[];function s(){const n=e.read();n?function(e){o.push(e),r+=e.length;const n=Buffer.concat(o,r);if(-1===n.indexOf("\r\n\r\n"))return i("have not received end of HTTP headers yet..."),void s();const a=n.toString("ascii",0,n.indexOf("\r\n")),c=+a.split(" ")[1];i("got proxy server response: %o",a),t({statusCode:c,buffered:n})}(n):e.once("readable",s)}function a(e){i("onclose had error %o",e)}function c(){i("onend")}e.on("error",(function t(r){e.removeListener("end",c),e.removeListener("error",t),e.removeListener("close",a),e.removeListener("readable",s),i("onerror %o",r),n(r)})),e.on("close",a),e.on("end",c),s()}))}},5736:(e,t,n)=>{"use strict";const r="object"==typeof process&&process?process:{stdout:null,stderr:null},i=n(2361),o=n(2781),s=n(1576).StringDecoder,a=Symbol("EOF"),c=Symbol("maybeEmitEnd"),u=Symbol("emittedEnd"),l=Symbol("emittingEnd"),d=Symbol("emittedError"),p=Symbol("closed"),h=Symbol("read"),f=Symbol("flush"),m=Symbol("flushChunk"),g=Symbol("encoding"),v=Symbol("decoder"),y=Symbol("flowing"),_=Symbol("paused"),b=Symbol("resume"),E=Symbol("bufferLength"),S=Symbol("bufferPush"),w=Symbol("bufferShift"),C=Symbol("objectMode"),T=Symbol("destroyed"),R=Symbol("emitData"),O=Symbol("emitEnd"),x=Symbol("emitEnd2"),P=Symbol("async"),I=e=>Promise.resolve().then(e),A="1"!==global._MP_NO_ITERATOR_SYMBOLS_,D=A&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),N=A&&Symbol.iterator||Symbol("iterator not implemented");class k{constructor(e,t,n){this.src=e,this.dest=t,this.opts=n,this.ondrain=()=>e[b](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class M extends k{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,n){super(e,t,n),this.proxyErrors=e=>t.emit("error",e),e.on("error",this.proxyErrors)}}e.exports=class e extends o{constructor(e){super(),this[y]=!1,this[_]=!1,this.pipes=[],this.buffer=[],this[C]=e&&e.objectMode||!1,this[C]?this[g]=null:this[g]=e&&e.encoding||null,"buffer"===this[g]&&(this[g]=null),this[P]=e&&!!e.async||!1,this[v]=this[g]?new s(this[g]):null,this[a]=!1,this[u]=!1,this[l]=!1,this[p]=!1,this[d]=null,this.writable=!0,this.readable=!0,this[E]=0,this[T]=!1}get bufferLength(){return this[E]}get encoding(){return this[g]}set encoding(e){if(this[C])throw new Error("cannot set encoding in objectMode");if(this[g]&&e!==this[g]&&(this[v]&&this[v].lastNeed||this[E]))throw new Error("cannot change encoding");this[g]!==e&&(this[v]=e?new s(e):null,this.buffer.length&&(this.buffer=this.buffer.map((e=>this[v].write(e))))),this[g]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[C]}set objectMode(e){this[C]=this[C]||!!e}get async(){return this[P]}set async(e){this[P]=this[P]||!!e}write(e,t,n){if(this[a])throw new Error("write after end");if(this[T])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;"function"==typeof t&&(n=t,t="utf8"),t||(t="utf8");const r=this[P]?I:e=>e();var i;return this[C]||Buffer.isBuffer(e)||(i=e,!Buffer.isBuffer(i)&&ArrayBuffer.isView(i)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(e=>e instanceof ArrayBuffer||"object"==typeof e&&e.constructor&&"ArrayBuffer"===e.constructor.name&&e.byteLength>=0)(e)?e=Buffer.from(e):"string"!=typeof e&&(this.objectMode=!0)),this[C]?(this.flowing&&0!==this[E]&&this[f](!0),this.flowing?this.emit("data",e):this[S](e),0!==this[E]&&this.emit("readable"),n&&r(n),this.flowing):e.length?("string"!=typeof e||t===this[g]&&!this[v].lastNeed||(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[g]&&(e=this[v].write(e)),this.flowing&&0!==this[E]&&this[f](!0),this.flowing?this.emit("data",e):this[S](e),0!==this[E]&&this.emit("readable"),n&&r(n),this.flowing):(0!==this[E]&&this.emit("readable"),n&&r(n),this.flowing)}read(e){if(this[T])return null;if(0===this[E]||0===e||e>this[E])return this[c](),null;this[C]&&(e=null),this.buffer.length>1&&!this[C]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[E])]);const t=this[h](e||null,this.buffer[0]);return this[c](),t}[h](e,t){return e===t.length||null===e?this[w]():(this.buffer[0]=t.slice(e),t=t.slice(0,e),this[E]-=e),this.emit("data",t),this.buffer.length||this[a]||this.emit("drain"),t}end(e,t,n){return"function"==typeof e&&(n=e,e=null),"function"==typeof t&&(n=t,t="utf8"),e&&this.write(e,t),n&&this.once("end",n),this[a]=!0,this.writable=!1,!this.flowing&&this[_]||this[c](),this}[b](){this[T]||(this[_]=!1,this[y]=!0,this.emit("resume"),this.buffer.length?this[f]():this[a]?this[c]():this.emit("drain"))}resume(){return this[b]()}pause(){this[y]=!1,this[_]=!0}get destroyed(){return this[T]}get flowing(){return this[y]}get paused(){return this[_]}[S](e){this[C]?this[E]+=1:this[E]+=e.length,this.buffer.push(e)}[w](){return this.buffer.length&&(this[C]?this[E]-=1:this[E]-=this.buffer[0].length),this.buffer.shift()}[f](e){do{}while(this[m](this[w]()));e||this.buffer.length||this[a]||this.emit("drain")}[m](e){return!!e&&(this.emit("data",e),this.flowing)}pipe(e,t){if(this[T])return;const n=this[u];return t=t||{},e===r.stdout||e===r.stderr?t.end=!1:t.end=!1!==t.end,t.proxyErrors=!!t.proxyErrors,n?t.end&&e.end():(this.pipes.push(t.proxyErrors?new M(this,e,t):new k(this,e,t)),this[P]?I((()=>this[b]())):this[b]()),e}unpipe(e){const t=this.pipes.find((t=>t.dest===e));t&&(this.pipes.splice(this.pipes.indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){const n=super.on(e,t);return"data"!==e||this.pipes.length||this.flowing?"readable"===e&&0!==this[E]?super.emit("readable"):(e=>"end"===e||"finish"===e||"prefinish"===e)(e)&&this[u]?(super.emit(e),this.removeAllListeners(e)):"error"===e&&this[d]&&(this[P]?I((()=>t.call(this,this[d]))):t.call(this,this[d])):this[b](),n}get emittedEnd(){return this[u]}[c](){this[l]||this[u]||this[T]||0!==this.buffer.length||!this[a]||(this[l]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[p]&&this.emit("close"),this[l]=!1)}emit(e,t,...n){if("error"!==e&&"close"!==e&&e!==T&&this[T])return;if("data"===e)return!!t&&(this[P]?I((()=>this[R](t))):this[R](t));if("end"===e)return this[O]();if("close"===e){if(this[p]=!0,!this[u]&&!this[T])return;const e=super.emit("close");return this.removeAllListeners("close"),e}if("error"===e){this[d]=t;const e=super.emit("error",t);return this[c](),e}if("resume"===e){const e=super.emit("resume");return this[c](),e}if("finish"===e||"prefinish"===e){const t=super.emit(e);return this.removeAllListeners(e),t}const r=super.emit(e,t,...n);return this[c](),r}[R](e){for(const t of this.pipes)!1===t.dest.write(e)&&this.pause();const t=super.emit("data",e);return this[c](),t}[O](){this[u]||(this[u]=!0,this.readable=!1,this[P]?I((()=>this[x]())):this[x]())}[x](){if(this[v]){const e=this[v].end();if(e){for(const t of this.pipes)t.dest.write(e);super.emit("data",e)}}for(const e of this.pipes)e.end();const e=super.emit("end");return this.removeAllListeners("end"),e}collect(){const e=[];this[C]||(e.dataLength=0);const t=this.promise();return this.on("data",(t=>{e.push(t),this[C]||(e.dataLength+=t.length)})),t.then((()=>e))}concat(){return this[C]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then((e=>this[C]?Promise.reject(new Error("cannot concat in objectMode")):this[g]?e.join(""):Buffer.concat(e,e.dataLength)))}promise(){return new Promise(((e,t)=>{this.on(T,(()=>t(new Error("stream destroyed")))),this.on("error",(e=>t(e))),this.on("end",(()=>e()))}))}[D](){return{next:()=>{const e=this.read();if(null!==e)return Promise.resolve({done:!1,value:e});if(this[a])return Promise.resolve({done:!0});let t=null,n=null;const r=e=>{this.removeListener("data",i),this.removeListener("end",o),n(e)},i=e=>{this.removeListener("error",r),this.removeListener("end",o),this.pause(),t({value:e,done:!!this[a]})},o=()=>{this.removeListener("error",r),this.removeListener("data",i),t({done:!0})},s=()=>r(new Error("stream destroyed"));return new Promise(((e,a)=>{n=a,t=e,this.once(T,s),this.once("error",r),this.once("end",o),this.once("data",i)}))}}}[N](){return{next:()=>{const e=this.read();return{value:e,done:null===e}}}}destroy(e){return this[T]?(e?this.emit("error",e):this.emit(T),this):(this[T]=!0,this.buffer.length=0,this[E]=0,"function"!=typeof this.close||this[p]||this.close(),e?this.emit("error",e):this.emit(T),this)}static isStream(t){return!!t&&(t instanceof e||t instanceof o||t instanceof i&&("function"==typeof t.pipe||"function"==typeof t.write&&"function"==typeof t.end))}}},883:(e,t,n)=>{const r=n(9796).constants||{ZLIB_VERNUM:4736};e.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},r))},1650:(e,t,n)=>{"use strict";const r=n(9491),i=n(4300).Buffer,o=n(9796),s=t.constants=n(883),a=n(5736),c=i.concat,u=Symbol("_superWrite");class l extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}}const d=Symbol("opts"),p=Symbol("flushFlag"),h=Symbol("finishFlushFlag"),f=Symbol("fullFlushFlag"),m=Symbol("handle"),g=Symbol("onError"),v=Symbol("sawError"),y=Symbol("level"),_=Symbol("strategy"),b=Symbol("ended");Symbol("_defaultFullFlush");class E extends a{constructor(e,t){if(!e||"object"!=typeof e)throw new TypeError("invalid options for ZlibBase constructor");super(e),this[v]=!1,this[b]=!1,this[d]=e,this[p]=e.flush,this[h]=e.finishFlush;try{this[m]=new o[t](e)}catch(e){throw new l(e)}this[g]=e=>{this[v]||(this[v]=!0,this.close(),this.emit("error",e))},this[m].on("error",(e=>this[g](new l(e)))),this.once("end",(()=>this.close))}close(){this[m]&&(this[m].close(),this[m]=null,this.emit("close"))}reset(){if(!this[v])return r(this[m],"zlib binding closed"),this[m].reset()}flush(e){this.ended||("number"!=typeof e&&(e=this[f]),this.write(Object.assign(i.alloc(0),{[p]:e})))}end(e,t,n){return e&&this.write(e,t),this.flush(this[h]),this[b]=!0,super.end(null,null,n)}get ended(){return this[b]}write(e,t,n){if("function"==typeof t&&(n=t,t="utf8"),"string"==typeof e&&(e=i.from(e,t)),this[v])return;r(this[m],"zlib binding closed");const o=this[m]._handle,s=o.close;o.close=()=>{};const a=this[m].close;let d,h;this[m].close=()=>{},i.concat=e=>e;try{const t="number"==typeof e[p]?e[p]:this[p];d=this[m]._processChunk(e,t),i.concat=c}catch(e){i.concat=c,this[g](new l(e))}finally{this[m]&&(this[m]._handle=o,o.close=s,this[m].close=a,this[m].removeAllListeners("error"))}if(this[m]&&this[m].on("error",(e=>this[g](new l(e)))),d)if(Array.isArray(d)&&d.length>0){h=this[u](i.from(d[0]));for(let e=1;e<d.length;e++)h=this[u](d[e])}else h=this[u](i.from(d));return n&&n(),h}[u](e){return super.write(e)}}class S extends E{constructor(e,t){(e=e||{}).flush=e.flush||s.Z_NO_FLUSH,e.finishFlush=e.finishFlush||s.Z_FINISH,super(e,t),this[f]=s.Z_FULL_FLUSH,this[y]=e.level,this[_]=e.strategy}params(e,t){if(!this[v]){if(!this[m])throw new Error("cannot switch params when binding is closed");if(!this[m].params)throw new Error("not supported in this implementation");if(this[y]!==e||this[_]!==t){this.flush(s.Z_SYNC_FLUSH),r(this[m],"zlib binding closed");const n=this[m].flush;this[m].flush=(e,t)=>{this.flush(e),t()};try{this[m].params(e,t)}finally{this[m].flush=n}this[m]&&(this[y]=e,this[_]=t)}}}}const w=Symbol("_portable");class C extends E{constructor(e,t){(e=e||{}).flush=e.flush||s.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||s.BROTLI_OPERATION_FINISH,super(e,t),this[f]=s.BROTLI_OPERATION_FLUSH}}t.Deflate=class extends S{constructor(e){super(e,"Deflate")}},t.Inflate=class extends S{constructor(e){super(e,"Inflate")}},t.Gzip=class extends S{constructor(e){super(e,"Gzip"),this[w]=e&&!!e.portable}[u](e){return this[w]?(this[w]=!1,e[9]=255,super[u](e)):super[u](e)}},t.Gunzip=class extends S{constructor(e){super(e,"Gunzip")}},t.DeflateRaw=class extends S{constructor(e){super(e,"DeflateRaw")}},t.InflateRaw=class extends S{constructor(e){super(e,"InflateRaw")}},t.Unzip=class extends S{constructor(e){super(e,"Unzip")}},"function"==typeof o.BrotliCompress?(t.BrotliCompress=class extends C{constructor(e){super(e,"BrotliCompress")}},t.BrotliDecompress=class extends C{constructor(e){super(e,"BrotliDecompress")}}):t.BrotliCompress=t.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}},1890:(e,t,n)=>{const r=n(4231),i=n(3610),{mkdirpNative:o,mkdirpNativeSync:s}=n(9378),{mkdirpManual:a,mkdirpManualSync:c}=n(8600),{useNative:u,useNativeSync:l}=n(6167),d=(e,t)=>(e=i(e),t=r(t),u(t)?o(e,t):a(e,t));d.sync=(e,t)=>(e=i(e),t=r(t),l(t)?s(e,t):c(e,t)),d.native=(e,t)=>o(i(e),r(t)),d.manual=(e,t)=>a(i(e),r(t)),d.nativeSync=(e,t)=>s(i(e),r(t)),d.manualSync=(e,t)=>c(i(e),r(t)),e.exports=d},8812:(e,t,n)=>{const{dirname:r}=n(1017),i=(e,t,n=void 0)=>n===t?Promise.resolve():e.statAsync(t).then((e=>e.isDirectory()?n:void 0),(n=>"ENOENT"===n.code?i(e,r(t),t):void 0)),o=(e,t,n=void 0)=>{if(n!==t)try{return e.statSync(t).isDirectory()?n:void 0}catch(n){return"ENOENT"===n.code?o(e,r(t),t):void 0}};e.exports={findMade:i,findMadeSync:o}},8600:(e,t,n)=>{const{dirname:r}=n(1017),i=(e,t,n)=>{t.recursive=!1;const o=r(e);return o===e?t.mkdirAsync(e,t).catch((e=>{if("EISDIR"!==e.code)throw e})):t.mkdirAsync(e,t).then((()=>n||e),(r=>{if("ENOENT"===r.code)return i(o,t).then((n=>i(e,t,n)));if("EEXIST"!==r.code&&"EROFS"!==r.code)throw r;return t.statAsync(e).then((e=>{if(e.isDirectory())return n;throw r}),(()=>{throw r}))}))},o=(e,t,n)=>{const i=r(e);if(t.recursive=!1,i===e)try{return t.mkdirSync(e,t)}catch(e){if("EISDIR"!==e.code)throw e;return}try{return t.mkdirSync(e,t),n||e}catch(r){if("ENOENT"===r.code)return o(e,t,o(i,t,n));if("EEXIST"!==r.code&&"EROFS"!==r.code)throw r;try{if(!t.statSync(e).isDirectory())throw r}catch(e){throw r}}};e.exports={mkdirpManual:i,mkdirpManualSync:o}},9378:(e,t,n)=>{const{dirname:r}=n(1017),{findMade:i,findMadeSync:o}=n(8812),{mkdirpManual:s,mkdirpManualSync:a}=n(8600);e.exports={mkdirpNative:(e,t)=>(t.recursive=!0,r(e)===e?t.mkdirAsync(e,t):i(t,e).then((n=>t.mkdirAsync(e,t).then((()=>n)).catch((n=>{if("ENOENT"===n.code)return s(e,t);throw n}))))),mkdirpNativeSync:(e,t)=>{if(t.recursive=!0,r(e)===e)return t.mkdirSync(e,t);const n=o(t,e);try{return t.mkdirSync(e,t),n}catch(n){if("ENOENT"===n.code)return a(e,t);throw n}}}},4231:(e,t,n)=>{const{promisify:r}=n(3837),i=n(7147);e.exports=e=>{if(e)if("object"==typeof e)e={mode:511,fs:i,...e};else if("number"==typeof e)e={mode:e,fs:i};else{if("string"!=typeof e)throw new TypeError("invalid options argument");e={mode:parseInt(e,8),fs:i}}else e={mode:511,fs:i};return e.mkdir=e.mkdir||e.fs.mkdir||i.mkdir,e.mkdirAsync=r(e.mkdir),e.stat=e.stat||e.fs.stat||i.stat,e.statAsync=r(e.stat),e.statSync=e.statSync||e.fs.statSync||i.statSync,e.mkdirSync=e.mkdirSync||e.fs.mkdirSync||i.mkdirSync,e}},3610:(e,t,n)=>{const r=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:i,parse:o}=n(1017);e.exports=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=i(e),"win32"===r){const t=/[*|"<>?:]/,{root:n}=o(e);if(t.test(e.substr(n.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e}},6167:(e,t,n)=>{const r=n(7147),i=(process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version).replace(/^v/,"").split("."),o=+i[0]>10||10==+i[0]&&+i[1]>=12,s=o?e=>e.mkdir===r.mkdir:()=>!1,a=o?e=>e.mkdirSync===r.mkdirSync:()=>!1;e.exports={useNative:s,useNativeSync:a}},7824:e=>{var t=1e3,n=60*t,r=60*n,i=24*r;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,s){s=s||{};var a,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===u&&isFinite(e))return s.long?(a=e,(c=Math.abs(a))>=i?o(a,c,i,"day"):c>=r?o(a,c,r,"hour"):c>=n?o(a,c,n,"minute"):c>=t?o(a,c,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=r?Math.round(e/r)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},5339:e=>{"use strict";var t="win32"===process.platform,n=t?/[^:]\\$/:/.\/$/;e.exports=function(){var e;return e=t?process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp":process.env.TMPDIR||process.env.TMP||process.env.TEMP||"/tmp",n.test(e)&&(e=e.slice(0,-1)),e}},9916:e=>{function t(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}function n(e){e.pending+=1;var t=!1;return function(i){if(t)throw new Error("callback called twice");if(t=!0,e.error=e.error||i,e.pending-=1,e.waiting.length>0&&e.pending<e.max)r(e,e.waiting.shift());else if(0===e.pending){var o=e.listeners;e.listeners=[],o.forEach(n)}};function n(t){t(e.error)}}function r(e,t){t(n(e))}e.exports=t,t.prototype.go=function(e){this.pending<this.max?r(this,e):this.waiting.push(e)},t.prototype.wait=function(e){0===this.pending?e(this.error):this.listeners.push(e)},t.prototype.hold=function(){return n(this)}},9353:(e,t,n)=>{e.exports=n(1846)},1846:(e,t,n)=>{var r=n(1960);t.operation=function(e){var n=t.timeouts(e);return new r(n,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i<t.retries;i++)r.push(this.createTimeout(i,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(i,t)),r.sort((function(e,t){return e-t})),r},t.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,r=Math.round(n*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return Math.min(r,t.maxTimeout)},t.wrap=function(e,n,r){if(n instanceof Array&&(r=n,n=null),!r)for(var i in r=[],e)"function"==typeof e[i]&&r.push(i);for(var o=0;o<r.length;o++){var s=r[o],a=e[s];e[s]=function(r){var i=t.operation(n),o=Array.prototype.slice.call(arguments,1),s=o.pop();o.push((function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),s.apply(this,arguments))})),i.attempt((function(){r.apply(e,o)}))}.bind(e,a),e[s].options=n}}},1960:e=>{function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1)}var r=this;return this._timer=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),n),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){n._operationTimeoutCb()}),n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],o=i.message,s=(e[o]||0)+1;e[o]=s,s>=n&&(t=i,n=s)}return t}},2130:(e,t,n)=>{"use strict";const r=n(2037),i=n(6224),o=n(6560),{env:s}=process;let a;function c(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function u(e,t){if(0===a)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(e&&!t&&void 0===a)return 0;const n=a||0;if("dumb"===s.TERM)return n;if("win32"===process.platform){const e=r.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in s))||"codeship"===s.CI_NAME?1:n;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if("truecolor"===s.COLORTERM)return 3;if("TERM_PROGRAM"in s){const e=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:n}o("no-color")||o("no-colors")||o("color=false")||o("color=never")?a=0:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(a=1),"FORCE_COLOR"in s&&(a="true"===s.FORCE_COLOR?1:"false"===s.FORCE_COLOR?0:0===s.FORCE_COLOR.length?1:Math.min(parseInt(s.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return c(u(e,e&&e.isTTY))},stdout:c(u(!0,i.isatty(1))),stderr:c(u(!0,i.isatty(2)))}},7998:(e,t,n)=>{"use strict";t.c=t.create=n(4629),t.r=t.replace=n(1746),t.t=t.list=n(6473),t.u=t.update=n(5997),t.x=t.extract=n(769),t.Pack=n(8042),t.Unpack=n(2699),t.Parse=n(6824),t.ReadEntry=n(6277),t.WriteEntry=n(4426),t.Header=n(7134),t.Pax=n(4747),t.types=n(4402)},4629:(e,t,n)=>{"use strict";const r=n(2093),i=n(8042),o=n(292),s=n(6473),a=n(1017);e.exports=(e,t,n)=>{if("function"==typeof t&&(n=t),Array.isArray(e)&&(t=e,e={}),!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");t=Array.from(t);const i=r(e);if(i.sync&&"function"==typeof n)throw new TypeError("callback not supported for sync tar functions");if(!i.file&&"function"==typeof n)throw new TypeError("callback only supported with file option");return i.file&&i.sync?c(i,t):i.file?u(i,t,n):i.sync?p(i,t):h(i,t)};const c=(e,t)=>{const n=new i.Sync(e),r=new o.WriteStreamSync(e.file,{mode:e.mode||438});n.pipe(r),l(n,t)},u=(e,t,n)=>{const r=new i(e),s=new o.WriteStream(e.file,{mode:e.mode||438});r.pipe(s);const a=new Promise(((e,t)=>{s.on("error",t),s.on("close",e),r.on("error",t)}));return d(r,t),n?a.then(n,n):a},l=(e,t)=>{t.forEach((t=>{"@"===t.charAt(0)?s({file:a.resolve(e.cwd,t.slice(1)),sync:!0,noResume:!0,onentry:t=>e.add(t)}):e.add(t)})),e.end()},d=(e,t)=>{for(;t.length;){const n=t.shift();if("@"===n.charAt(0))return s({file:a.resolve(e.cwd,n.slice(1)),noResume:!0,onentry:t=>e.add(t)}).then((n=>d(e,t)));e.add(n)}e.end()},p=(e,t)=>{const n=new i.Sync(e);return l(n,t),n},h=(e,t)=>{const n=new i(e);return d(n,t),n}},769:(e,t,n)=>{"use strict";const r=n(2093),i=n(2699),o=n(7147),s=n(292),a=n(1017),c=n(4922);e.exports=(e,t,n)=>{"function"==typeof e?(n=e,t=null,e={}):Array.isArray(e)&&(t=e,e={}),"function"==typeof t&&(n=t,t=null),t=t?Array.from(t):[];const i=r(e);if(i.sync&&"function"==typeof n)throw new TypeError("callback not supported for sync tar functions");if(!i.file&&"function"==typeof n)throw new TypeError("callback only supported with file option");return t.length&&u(i,t),i.file&&i.sync?l(i):i.file?d(i,n):i.sync?p(i):h(i)};const u=(e,t)=>{const n=new Map(t.map((e=>[c(e),!0]))),r=e.filter,i=(e,t)=>{const r=t||a.parse(e).root||".",o=e!==r&&(n.has(e)?n.get(e):i(a.dirname(e),r));return n.set(e,o),o};e.filter=r?(e,t)=>r(e,t)&&i(c(e)):e=>i(c(e))},l=e=>{const t=new i.Sync(e),n=e.file,r=o.statSync(n),a=e.maxReadSize||16777216;new s.ReadStreamSync(n,{readSize:a,size:r.size}).pipe(t)},d=(e,t)=>{const n=new i(e),r=e.maxReadSize||16777216,a=e.file,c=new Promise(((e,t)=>{n.on("error",t),n.on("close",e),o.stat(a,((e,i)=>{if(e)t(e);else{const e=new s.ReadStream(a,{readSize:r,size:i.size});e.on("error",t),e.pipe(n)}}))}));return t?c.then(t,t):c},p=e=>new i.Sync(e),h=e=>new i(e)},5879:(e,t,n)=>{const r="win32"===(process.env.__FAKE_PLATFORM__||process.platform),i=global.__FAKE_TESTING_FS__||n(7147),{O_CREAT:o,O_TRUNC:s,O_WRONLY:a,UV_FS_O_FILEMAP:c=0}=i.constants,u=r&&!!c,l=c|s|o|a;e.exports=u?e=>e<524288?l:"w":()=>"w"},7134:(e,t,n)=>{"use strict";const r=n(4402),i=n(1017).posix,o=n(9678),s=Symbol("slurp"),a=Symbol("type"),c=(e,t,n)=>e.slice(t,t+n).toString("utf8").replace(/\0.*/,""),u=(e,t,n)=>l(d(e,t,n)),l=e=>null===e?null:new Date(1e3*e),d=(e,t,n)=>128&e[t]?o.parse(e.slice(t,t+n)):p(e,t,n),p=(e,t,n)=>{return r=parseInt(e.slice(t,t+n).toString("utf8").replace(/\0.*$/,"").trim(),8),isNaN(r)?null:r;var r},h={12:8589934591,8:2097151},f=(e,t,n,r)=>null!==r&&(r>h[n]||r<0?(o.encode(r,e.slice(t,t+n)),!0):(m(e,t,n,r),!1)),m=(e,t,n,r)=>e.write(g(r,n),t,n,"ascii"),g=(e,t)=>v(Math.floor(e).toString(8),t),v=(e,t)=>(e.length===t-1?e:new Array(t-e.length-1).join("0")+e+" ")+"\0",y=(e,t,n,r)=>null!==r&&f(e,t,n,r.getTime()/1e3),_=new Array(156).join("\0"),b=(e,t,n,r)=>null!==r&&(e.write(r+_,t,n,"utf8"),r.length!==Buffer.byteLength(r)||r.length>n);e.exports=class{constructor(e,t,n,r){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[a]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,t||0,n,r):e&&this.set(e)}decode(e,t,n,r){if(t||(t=0),!(e&&e.length>=t+512))throw new Error("need 512 bytes for header");if(this.path=c(e,t,100),this.mode=d(e,t+100,8),this.uid=d(e,t+108,8),this.gid=d(e,t+116,8),this.size=d(e,t+124,12),this.mtime=u(e,t+136,12),this.cksum=d(e,t+148,12),this[s](n),this[s](r,!0),this[a]=c(e,t+156,1),""===this[a]&&(this[a]="0"),"0"===this[a]&&"/"===this.path.slice(-1)&&(this[a]="5"),"5"===this[a]&&(this.size=0),this.linkpath=c(e,t+157,100),"ustar\x0000"===e.slice(t+257,t+265).toString())if(this.uname=c(e,t+265,32),this.gname=c(e,t+297,32),this.devmaj=d(e,t+329,8),this.devmin=d(e,t+337,8),0!==e[t+475]){const n=c(e,t+345,155);this.path=n+"/"+this.path}else{const n=c(e,t+345,130);n&&(this.path=n+"/"+this.path),this.atime=u(e,t+476,12),this.ctime=u(e,t+488,12)}let i=256;for(let n=t;n<t+148;n++)i+=e[n];for(let n=t+156;n<t+512;n++)i+=e[n];this.cksumValid=i===this.cksum,null===this.cksum&&256===i&&(this.nullBlock=!0)}[s](e,t){for(const n in e)null===e[n]||void 0===e[n]||t&&"path"===n||(this[n]=e[n])}encode(e,t){if(e||(e=this.block=Buffer.alloc(512),t=0),t||(t=0),!(e.length>=t+512))throw new Error("need 512 bytes for header");const n=this.ctime||this.atime?130:155,r=((e,t)=>{let n,r=e,o="";const s=i.parse(e).root||".";if(Buffer.byteLength(r)<100)n=[r,o,!1];else{o=i.dirname(r),r=i.basename(r);do{Buffer.byteLength(r)<=100&&Buffer.byteLength(o)<=t?n=[r,o,!1]:Buffer.byteLength(r)>100&&Buffer.byteLength(o)<=t?n=[r.slice(0,99),o,!0]:(r=i.join(i.basename(o),r),o=i.dirname(o))}while(o!==s&&!n);n||(n=[e.slice(0,99),"",!0])}return n})(this.path||"",n),o=r[0],s=r[1];this.needPax=r[2],this.needPax=b(e,t,100,o)||this.needPax,this.needPax=f(e,t+100,8,this.mode)||this.needPax,this.needPax=f(e,t+108,8,this.uid)||this.needPax,this.needPax=f(e,t+116,8,this.gid)||this.needPax,this.needPax=f(e,t+124,12,this.size)||this.needPax,this.needPax=y(e,t+136,12,this.mtime)||this.needPax,e[t+156]=this[a].charCodeAt(0),this.needPax=b(e,t+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",t+257,8),this.needPax=b(e,t+265,32,this.uname)||this.needPax,this.needPax=b(e,t+297,32,this.gname)||this.needPax,this.needPax=f(e,t+329,8,this.devmaj)||this.needPax,this.needPax=f(e,t+337,8,this.devmin)||this.needPax,this.needPax=b(e,t+345,n,s)||this.needPax,0!==e[t+475]?this.needPax=b(e,t+345,155,s)||this.needPax:(this.needPax=b(e,t+345,130,s)||this.needPax,this.needPax=y(e,t+476,12,this.atime)||this.needPax,this.needPax=y(e,t+488,12,this.ctime)||this.needPax);let c=256;for(let n=t;n<t+148;n++)c+=e[n];for(let n=t+156;n<t+512;n++)c+=e[n];return this.cksum=c,f(e,t+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(const t in e)null!==e[t]&&void 0!==e[t]&&(this[t]=e[t])}get type(){return r.name.get(this[a])||this[a]}get typeKey(){return this[a]}set type(e){r.code.has(e)?this[a]=r.code.get(e):this[a]=e}}},2093:e=>{"use strict";const t=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);e.exports=e=>e?Object.keys(e).map((n=>[t.has(n)?t.get(n):n,e[n]])).reduce(((e,t)=>(e[t[0]]=t[1],e)),Object.create(null)):{}},9678:e=>{"use strict";const t=e=>255&(255^e),n=e=>1+(255^e)&255;e.exports={encode:(e,r)=>{if(!Number.isSafeInteger(e))throw Error("cannot encode number outside of javascript safe integer range");return e<0?((e,r)=>{r[0]=255;var i=!1;e*=-1;for(var o=r.length;o>1;o--){var s=255&e;e=Math.floor(e/256),i?r[o-1]=t(s):0===s?r[o-1]=0:(i=!0,r[o-1]=n(s))}})(e,r):((e,t)=>{t[0]=128;for(var n=t.length;n>1;n--)t[n-1]=255&e,e=Math.floor(e/256)})(e,r),r},parse:e=>{const r=e[0],i=128===r?(e=>{for(var t=e.length,n=0,r=t-1;r>-1;r--){var i=e[r];0!==i&&(n+=i*Math.pow(256,t-r-1))}return n})(e.slice(1,e.length)):255===r?(e=>{for(var r=e.length,i=0,o=!1,s=r-1;s>-1;s--){var a,c=e[s];o?a=t(c):0===c?a=c:(o=!0,a=n(c)),0!==a&&(i-=a*Math.pow(256,r-s-1))}return i})(e):null;if(null===i)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(i))throw Error("parsed number outside of javascript safe integer range");return i}}},6473:(e,t,n)=>{"use strict";const r=n(2093),i=n(6824),o=n(7147),s=n(292),a=n(1017),c=n(4922);e.exports=(e,t,n)=>{"function"==typeof e?(n=e,t=null,e={}):Array.isArray(e)&&(t=e,e={}),"function"==typeof t&&(n=t,t=null),t=t?Array.from(t):[];const i=r(e);if(i.sync&&"function"==typeof n)throw new TypeError("callback not supported for sync tar functions");if(!i.file&&"function"==typeof n)throw new TypeError("callback only supported with file option");return t.length&&l(i,t),i.noResume||u(i),i.file&&i.sync?d(i):i.file?p(i,n):h(i)};const u=e=>{const t=e.onentry;e.onentry=t?e=>{t(e),e.resume()}:e=>e.resume()},l=(e,t)=>{const n=new Map(t.map((e=>[c(e),!0]))),r=e.filter,i=(e,t)=>{const r=t||a.parse(e).root||".",o=e!==r&&(n.has(e)?n.get(e):i(a.dirname(e),r));return n.set(e,o),o};e.filter=r?(e,t)=>r(e,t)&&i(c(e)):e=>i(c(e))},d=e=>{const t=h(e),n=e.file;let r,i=!0;try{const s=o.statSync(n),a=e.maxReadSize||16777216;if(s.size<a)t.end(o.readFileSync(n));else{let e=0;const i=Buffer.allocUnsafe(a);for(r=o.openSync(n,"r");e<s.size;){const n=o.readSync(r,i,0,a,e);e+=n,t.write(i.slice(0,n))}t.end()}i=!1}finally{if(i&&r)try{o.closeSync(r)}catch(e){}}},p=(e,t)=>{const n=new i(e),r=e.maxReadSize||16777216,a=e.file,c=new Promise(((e,t)=>{n.on("error",t),n.on("end",e),o.stat(a,((e,i)=>{if(e)t(e);else{const e=new s.ReadStream(a,{readSize:r,size:i.size});e.on("error",t),e.pipe(n)}}))}));return t?c.then(t,t):c},h=e=>new i(e)},3248:(e,t,n)=>{"use strict";const r=n(1890),i=n(7147),o=n(1017),s=n(9019),a=n(2905);class c extends Error{constructor(e,t){super("Cannot extract through symbolic link"),this.path=t,this.symlink=e}get name(){return"SylinkError"}}class u extends Error{constructor(e,t){super(t+": Cannot cd into '"+e+"'"),this.path=e,this.code=t}get name(){return"CwdError"}}const l=(e,t)=>e.get(a(t)),d=(e,t,n)=>e.set(a(t),n);e.exports=(e,t,n)=>{e=a(e);const c=t.umask,h=448|t.mode,f=0!=(h&c),m=t.uid,g=t.gid,v="number"==typeof m&&"number"==typeof g&&(m!==t.processUid||g!==t.processGid),y=t.preserve,_=t.unlink,b=t.cache,E=a(t.cwd),S=(t,r)=>{t?n(t):(d(b,e,!0),r&&v?s(r,m,g,(e=>S(e))):f?i.chmod(e,h,n):n())};if(b&&!0===l(b,e))return S();if(e===E)return((e,t)=>{i.stat(e,((n,r)=>{!n&&r.isDirectory()||(n=new u(e,n&&n.code||"ENOTDIR")),t(n)}))})(e,S);if(y)return r(e,{mode:h}).then((e=>S(null,e)),S);const w=a(o.relative(E,e)).split("/");p(E,w,h,b,_,E,null,S)};const p=(e,t,n,r,s,c,u,d)=>{if(!t.length)return d(null,u);const f=t.shift(),m=a(o.resolve(e+"/"+f));if(l(r,m))return p(m,t,n,r,s,c,u,d);i.mkdir(m,n,h(m,t,n,r,s,c,u,d))},h=(e,t,n,r,o,s,u,l)=>d=>{d?i.lstat(e,((f,m)=>{if(f)f.path=f.path&&a(f.path),l(f);else if(m.isDirectory())p(e,t,n,r,o,s,u,l);else if(o)i.unlink(e,(a=>{if(a)return l(a);i.mkdir(e,n,h(e,t,n,r,o,s,u,l))}));else{if(m.isSymbolicLink())return l(new c(e,e+"/"+t.join("/")));l(d)}})):p(e,t,n,r,o,s,u=u||e,l)};e.exports.sync=(e,t)=>{e=a(e);const n=t.umask,p=448|t.mode,h=0!=(p&n),f=t.uid,m=t.gid,g="number"==typeof f&&"number"==typeof m&&(f!==t.processUid||m!==t.processGid),v=t.preserve,y=t.unlink,_=t.cache,b=a(t.cwd),E=t=>{d(_,e,!0),t&&g&&s.sync(t,f,m),h&&i.chmodSync(e,p)};if(_&&!0===l(_,e))return E();if(e===b)return(e=>{let t=!1,n="ENOTDIR";try{t=i.statSync(e).isDirectory()}catch(e){n=e.code}finally{if(!t)throw new u(e,n)}})(b),E();if(v)return E(r.sync(e,p));const S=a(o.relative(b,e)).split("/");let w=null;for(let e=S.shift(),t=b;e&&(t+="/"+e);e=S.shift())if(t=a(o.resolve(t)),!l(_,t))try{i.mkdirSync(t,p),w=w||t,d(_,t,!0)}catch(e){const n=i.lstatSync(t);if(n.isDirectory()){d(_,t,!0);continue}if(y){i.unlinkSync(t),i.mkdirSync(t,p),w=w||t,d(_,t,!0);continue}if(n.isSymbolicLink())return new c(t,t+"/"+S.join("/"))}return E(w)}},7716:e=>{"use strict";e.exports=(e,t,n)=>(e&=4095,n&&(e=-19&(384|e)),t&&(256&e&&(e|=64),32&e&&(e|=8),4&e&&(e|=1)),e)},1946:e=>{const t=Object.create(null),{hasOwnProperty:n}=Object.prototype;e.exports=e=>(n.call(t,e)||(t[e]=e.normalize("NFD")),t[e])},2905:e=>{const t=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;e.exports="win32"!==t?e=>e:e=>e&&e.replace(/\\/g,"/")},8042:(e,t,n)=>{"use strict";class r{constructor(e,t){this.path=e||"./",this.absolute=t,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}}const{Minipass:i}=n(4577),o=n(1650),s=n(6277),a=n(4426),c=a.Sync,u=a.Tar,l=n(4411),d=Buffer.alloc(1024),p=Symbol("onStat"),h=Symbol("ended"),f=Symbol("queue"),m=Symbol("current"),g=Symbol("process"),v=Symbol("processing"),y=Symbol("processJob"),_=Symbol("jobs"),b=Symbol("jobDone"),E=Symbol("addFSEntry"),S=Symbol("addTarEntry"),w=Symbol("stat"),C=Symbol("readdir"),T=Symbol("onreaddir"),R=Symbol("pipe"),O=Symbol("entry"),x=Symbol("entryOpt"),P=Symbol("writeEntryClass"),I=Symbol("write"),A=Symbol("ondrain"),D=n(7147),N=n(1017),k=n(7902),M=n(2905),L=k(class extends i{constructor(e){if(super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=M(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[P]=a,"function"==typeof e.onwarn&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");e.gzip&&("object"!=typeof e.gzip&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new o.Gzip(e.gzip)),e.brotli&&("object"!=typeof e.brotli&&(e.brotli={}),this.zip=new o.BrotliCompress(e.brotli)),this.zip.on("data",(e=>super.write(e))),this.zip.on("end",(e=>super.end())),this.zip.on("drain",(e=>this[A]())),this.on("resume",(e=>this.zip.resume()))}else this.on("drain",this[A]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter="function"==typeof e.filter?e.filter:e=>!0,this[f]=new l,this[_]=0,this.jobs=+e.jobs||4,this[v]=!1,this[h]=!1}[I](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[h]=!0,this[g](),this}write(e){if(this[h])throw new Error("write after end");return e instanceof s?this[S](e):this[E](e),this.flowing}[S](e){const t=M(N.resolve(this.cwd,e.path));if(this.filter(e.path,e)){const n=new r(e.path,t,!1);n.entry=new u(e,this[x](n)),n.entry.on("end",(e=>this[b](n))),this[_]+=1,this[f].push(n)}else e.resume();this[g]()}[E](e){const t=M(N.resolve(this.cwd,e));this[f].push(new r(e,t)),this[g]()}[w](e){e.pending=!0,this[_]+=1;const t=this.follow?"stat":"lstat";D[t](e.absolute,((t,n)=>{e.pending=!1,this[_]-=1,t?this.emit("error",t):this[p](e,n)}))}[p](e,t){this.statCache.set(e.absolute,t),e.stat=t,this.filter(e.path,t)||(e.ignore=!0),this[g]()}[C](e){e.pending=!0,this[_]+=1,D.readdir(e.absolute,((t,n)=>{if(e.pending=!1,this[_]-=1,t)return this.emit("error",t);this[T](e,n)}))}[T](e,t){this.readdirCache.set(e.absolute,t),e.readdir=t,this[g]()}[g](){if(!this[v]){this[v]=!0;for(let e=this[f].head;null!==e&&this[_]<this.jobs;e=e.next)if(this[y](e.value),e.value.ignore){const t=e.next;this[f].removeNode(e),e.next=t}this[v]=!1,this[h]&&!this[f].length&&0===this[_]&&(this.zip?this.zip.end(d):(super.write(d),super.end()))}}get[m](){return this[f]&&this[f].head&&this[f].head.value}[b](e){this[f].shift(),this[_]-=1,this[g]()}[y](e){e.pending||(e.entry?e!==this[m]||e.piped||this[R](e):(e.stat||(this.statCache.has(e.absolute)?this[p](e,this.statCache.get(e.absolute)):this[w](e)),e.stat&&(e.ignore||(this.noDirRecurse||!e.stat.isDirectory()||e.readdir||(this.readdirCache.has(e.absolute)?this[T](e,this.readdirCache.get(e.absolute)):this[C](e),e.readdir))&&(e.entry=this[O](e),e.entry?e!==this[m]||e.piped||this[R](e):e.ignore=!0))))}[x](e){return{onwarn:(e,t,n)=>this.warn(e,t,n),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[O](e){this[_]+=1;try{return new this[P](e.path,this[x](e)).on("end",(()=>this[b](e))).on("error",(e=>this.emit("error",e)))}catch(e){this.emit("error",e)}}[A](){this[m]&&this[m].entry&&this[m].entry.resume()}[R](e){e.piped=!0,e.readdir&&e.readdir.forEach((t=>{const n=e.path,r="./"===n?"":n.replace(/\/*$/,"/");this[E](r+t)}));const t=e.entry,n=this.zip;n?t.on("data",(e=>{n.write(e)||t.pause()})):t.on("data",(e=>{super.write(e)||t.pause()}))}pause(){return this.zip&&this.zip.pause(),super.pause()}});L.Sync=class extends L{constructor(e){super(e),this[P]=c}pause(){}resume(){}[w](e){const t=this.follow?"statSync":"lstatSync";this[p](e,D[t](e.absolute))}[C](e,t){this[T](e,D.readdirSync(e.absolute))}[R](e){const t=e.entry,n=this.zip;e.readdir&&e.readdir.forEach((t=>{const n=e.path,r="./"===n?"":n.replace(/\/*$/,"/");this[E](r+t)})),n?t.on("data",(e=>{n.write(e)})):t.on("data",(e=>{super[I](e)}))}},e.exports=L},6824:(e,t,n)=>{"use strict";const r=n(7902),i=n(7134),o=n(2361),s=n(4411),a=n(6277),c=n(4747),u=n(1650),{nextTick:l}=n(7282),d=Buffer.from([31,139]),p=Symbol("state"),h=Symbol("writeEntry"),f=Symbol("readEntry"),m=Symbol("nextEntry"),g=Symbol("processEntry"),v=Symbol("extendedHeader"),y=Symbol("globalExtendedHeader"),_=Symbol("meta"),b=Symbol("emitMeta"),E=Symbol("buffer"),S=Symbol("queue"),w=Symbol("ended"),C=Symbol("emittedEnd"),T=Symbol("emit"),R=Symbol("unzip"),O=Symbol("consumeChunk"),x=Symbol("consumeChunkSub"),P=Symbol("consumeBody"),I=Symbol("consumeMeta"),A=Symbol("consumeHeader"),D=Symbol("consuming"),N=Symbol("bufferConcat"),k=Symbol("maybeEnd"),M=Symbol("writing"),L=Symbol("aborted"),F=Symbol("onDone"),q=Symbol("sawValidEntry"),j=Symbol("sawNullBlock"),U=Symbol("sawEOF"),B=Symbol("closeStream"),V=e=>!0;e.exports=r(class extends o{constructor(e){super(e=e||{}),this.file=e.file||"",this[q]=null,this.on(F,(e=>{"begin"!==this[p]&&!1!==this[q]||this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")})),e.ondone?this.on(F,e.ondone):this.on(F,(e=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")})),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||1048576,this.filter="function"==typeof e.filter?e.filter:V;const t=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=e.gzip||void 0===e.brotli?!!t&&void 0:e.brotli,this.writable=!0,this.readable=!1,this[S]=new s,this[E]=null,this[f]=null,this[h]=null,this[p]="begin",this[_]="",this[v]=null,this[y]=null,this[w]=!1,this[R]=null,this[L]=!1,this[j]=!1,this[U]=!1,this.on("end",(()=>this[B]())),"function"==typeof e.onwarn&&this.on("warn",e.onwarn),"function"==typeof e.onentry&&this.on("entry",e.onentry)}[A](e,t){let n;null===this[q]&&(this[q]=!1);try{n=new i(e,t,this[v],this[y])}catch(e){return this.warn("TAR_ENTRY_INVALID",e)}if(n.nullBlock)this[j]?(this[U]=!0,"begin"===this[p]&&(this[p]="header"),this[T]("eof")):(this[j]=!0,this[T]("nullBlock"));else if(this[j]=!1,n.cksumValid)if(n.path){const e=n.type;if(/^(Symbolic)?Link$/.test(e)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(e)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{const e=this[h]=new a(n,this[v],this[y]);if(!this[q])if(e.remain){const t=()=>{e.invalid||(this[q]=!0)};e.on("end",t)}else this[q]=!0;e.meta?e.size>this.maxMetaEntrySize?(e.ignore=!0,this[T]("ignoredEntry",e),this[p]="ignore",e.resume()):e.size>0&&(this[_]="",e.on("data",(e=>this[_]+=e)),this[p]="meta"):(this[v]=null,e.ignore=e.ignore||!this.filter(e.path,e),e.ignore?(this[T]("ignoredEntry",e),this[p]=e.remain?"ignore":"header",e.resume()):(e.remain?this[p]="body":(this[p]="header",e.end()),this[f]?this[S].push(e):(this[S].push(e),this[m]())))}}else this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n})}[B](){l((()=>this.emit("close")))}[g](e){let t=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[f]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",(e=>this[m]())),t=!1)):(this[f]=null,t=!1),t}[m](){do{}while(this[g](this[S].shift()));if(!this[S].length){const e=this[f];!e||e.flowing||e.size===e.remain?this[M]||this.emit("drain"):e.once("drain",(e=>this.emit("drain")))}}[P](e,t){const n=this[h],r=n.blockRemain,i=r>=e.length&&0===t?e:e.slice(t,t+r);return n.write(i),n.blockRemain||(this[p]="header",this[h]=null,n.end()),i.length}[I](e,t){const n=this[h],r=this[P](e,t);return this[h]||this[b](n),r}[T](e,t,n){this[S].length||this[f]?this[S].push([e,t,n]):this.emit(e,t,n)}[b](e){switch(this[T]("meta",this[_]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[v]=c.parse(this[_],this[v],!1);break;case"GlobalExtendedHeader":this[y]=c.parse(this[_],this[y],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[v]=this[v]||Object.create(null),this[v].path=this[_].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[v]=this[v]||Object.create(null),this[v].linkpath=this[_].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[L]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[L])return;if((null===this[R]||void 0===this.brotli&&!1===this[R])&&e){if(this[E]&&(e=Buffer.concat([this[E],e]),this[E]=null),e.length<d.length)return this[E]=e,!0;for(let t=0;null===this[R]&&t<d.length;t++)e[t]!==d[t]&&(this[R]=!1);const t=void 0===this.brotli;if(!1===this[R]&&t)if(e.length<512){if(!this[w])return this[E]=e,!0;this.brotli=!0}else try{new i(e.slice(0,512)),this.brotli=!1}catch(e){this.brotli=!0}if(null===this[R]||!1===this[R]&&this.brotli){const t=this[w];this[w]=!1,this[R]=null===this[R]?new u.Unzip:new u.BrotliDecompress,this[R].on("data",(e=>this[O](e))),this[R].on("error",(e=>this.abort(e))),this[R].on("end",(e=>{this[w]=!0,this[O]()})),this[M]=!0;const n=this[R][t?"end":"write"](e);return this[M]=!1,n}}this[M]=!0,this[R]?this[R].write(e):this[O](e),this[M]=!1;const t=!this[S].length&&(!this[f]||this[f].flowing);return t||this[S].length||this[f].once("drain",(e=>this.emit("drain"))),t}[N](e){e&&!this[L]&&(this[E]=this[E]?Buffer.concat([this[E],e]):e)}[k](){if(this[w]&&!this[C]&&!this[L]&&!this[D]){this[C]=!0;const e=this[h];if(e&&e.blockRemain){const t=this[E]?this[E].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e}),this[E]&&e.write(this[E]),e.end()}this[T](F)}}[O](e){if(this[D])this[N](e);else if(e||this[E]){if(this[D]=!0,this[E]){this[N](e);const t=this[E];this[E]=null,this[x](t)}else this[x](e);for(;this[E]&&this[E].length>=512&&!this[L]&&!this[U];){const e=this[E];this[E]=null,this[x](e)}this[D]=!1}else this[k]();this[E]&&!this[w]||this[k]()}[x](e){let t=0;const n=e.length;for(;t+512<=n&&!this[L]&&!this[U];)switch(this[p]){case"begin":case"header":this[A](e,t),t+=512;break;case"ignore":case"body":t+=this[P](e,t);break;case"meta":t+=this[I](e,t);break;default:throw new Error("invalid state: "+this[p])}t<n&&(this[E]?this[E]=Buffer.concat([e.slice(t),this[E]]):this[E]=e.slice(t))}end(e){this[L]||(this[R]?this[R].end(e):(this[w]=!0,void 0===this.brotli&&(e=e||Buffer.alloc(0)),this.write(e)))}})},10:(e,t,n)=>{const r=n(9491),i=n(1946),o=n(4922),{join:s}=n(1017),a="win32"===(process.env.TESTING_TAR_FAKE_PLATFORM||process.platform);e.exports=()=>{const e=new Map,t=new Map,n=new Set,c=n=>{const{paths:r,dirs:i}=(n=>{const r=t.get(n);if(!r)throw new Error("function does not have any path reservations");return{paths:r.paths.map((t=>e.get(t))),dirs:[...r.dirs].map((t=>e.get(t)))}})(n);return r.every((e=>e[0]===n))&&i.every((e=>e[0]instanceof Set&&e[0].has(n)))},u=e=>!(n.has(e)||!c(e)||(n.add(e),e((()=>l(e))),0)),l=i=>{if(!n.has(i))return!1;const{paths:o,dirs:s}=t.get(i),a=new Set;return o.forEach((t=>{const n=e.get(t);r.equal(n[0],i),1===n.length?e.delete(t):(n.shift(),"function"==typeof n[0]?a.add(n[0]):n[0].forEach((e=>a.add(e))))})),s.forEach((t=>{const n=e.get(t);r(n[0]instanceof Set),1===n[0].size&&1===n.length?e.delete(t):1===n[0].size?(n.shift(),a.add(n[0])):n[0].delete(i)})),n.delete(i),a.forEach((e=>u(e))),!0};return{check:c,reserve:(n,r)=>{n=a?["win32 parallelization disabled"]:n.map((e=>o(s(i(e))).toLowerCase()));const c=new Set(n.map((e=>(e=>{const t=e.split("/").slice(0,-1).reduce(((e,t)=>(e.length&&(t=s(e[e.length-1],t)),e.push(t||"/"),e)),[]);return t})(e))).reduce(((e,t)=>e.concat(t))));return t.set(r,{dirs:c,paths:n}),n.forEach((t=>{const n=e.get(t);n?n.push(r):e.set(t,[r])})),c.forEach((t=>{const n=e.get(t);n?n[n.length-1]instanceof Set?n[n.length-1].add(r):n.push(new Set([r])):e.set(t,[new Set([r])])})),u(r)}}}},4747:(e,t,n)=>{"use strict";const r=n(7134),i=n(1017);class o{constructor(e,t){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=t||!1}encode(){const e=this.encodeBody();if(""===e)return null;const t=Buffer.byteLength(e),n=512*Math.ceil(1+t/512),o=Buffer.allocUnsafe(n);for(let e=0;e<512;e++)o[e]=0;new r({path:("PaxHeader/"+i.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:t,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(o),o.write(e,512,t,"utf8");for(let e=t+512;e<o.length;e++)o[e]=0;return o}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(null===this[e]||void 0===this[e])return"";const t=" "+("dev"===e||"ino"===e||"nlink"===e?"SCHILY.":"")+e+"="+(this[e]instanceof Date?this[e].getTime()/1e3:this[e])+"\n",n=Buffer.byteLength(t);let r=Math.floor(Math.log(n)/Math.log(10))+1;return n+r>=Math.pow(10,r)&&(r+=1),r+n+t}}o.parse=(e,t,n)=>new o(s(a(e),t),n);const s=(e,t)=>t?Object.keys(e).reduce(((t,n)=>(t[n]=e[n],t)),t):e,a=e=>e.replace(/\n$/,"").split("\n").reduce(c,Object.create(null)),c=(e,t)=>{const n=parseInt(t,10);if(n!==Buffer.byteLength(t)+1)return e;const r=(t=t.slice((n+" ").length)).split("="),i=r.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return e;const o=r.join("=");return e[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(1e3*o):/^[0-9]+$/.test(o)?+o:o,e};e.exports=o},6277:(e,t,n)=>{"use strict";const{Minipass:r}=n(4577),i=n(2905),o=Symbol("slurp");e.exports=class extends r{constructor(e,t,n){switch(super(),this.pause(),this.extended=t,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=i(e.path),this.mode=e.mode,this.mode&&(this.mode=4095&this.mode),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=i(e.linkpath),this.uname=e.uname,this.gname=e.gname,t&&this[o](t),n&&this[o](n,!0)}write(e){const t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");const n=this.remain,r=this.blockRemain;return this.remain=Math.max(0,n-t),this.blockRemain=Math.max(0,r-t),!!this.ignore||(n>=t?super.write(e):super.write(e.slice(0,n)))}[o](e,t){for(const n in e)null===e[n]||void 0===e[n]||t&&"path"===n||(this[n]="path"===n||"linkpath"===n?i(e[n]):e[n])}}},1746:(e,t,n)=>{"use strict";const r=n(2093),i=n(8042),o=n(7147),s=n(292),a=n(6473),c=n(1017),u=n(7134);e.exports=(e,t,n)=>{const i=r(e);if(!i.file)throw new TypeError("file is required");if(i.gzip||i.brotli||i.file.endsWith(".br")||i.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),i.sync?l(i,t):p(i,t,n)};const l=(e,t)=>{const n=new i.Sync(e);let r,s,a=!0;try{try{r=o.openSync(e.file,"r+")}catch(t){if("ENOENT"!==t.code)throw t;r=o.openSync(e.file,"w+")}const i=o.fstatSync(r),c=Buffer.alloc(512);e:for(s=0;s<i.size;s+=512){for(let e=0,t=0;e<512;e+=t){if(t=o.readSync(r,c,e,c.length-e,s+e),0===s&&31===c[0]&&139===c[1])throw new Error("cannot append to compressed archives");if(!t)break e}const t=new u(c);if(!t.cksumValid)break;const n=512*Math.ceil(t.size/512);if(s+n+512>i.size)break;s+=n,e.mtimeCache&&e.mtimeCache.set(t.path,t.mtime)}a=!1,d(e,n,s,r,t)}finally{if(a)try{o.closeSync(r)}catch(e){}}},d=(e,t,n,r,i)=>{const o=new s.WriteStreamSync(e.file,{fd:r,start:n});t.pipe(o),h(t,i)},p=(e,t,n)=>{t=Array.from(t);const r=new i(e),a=new Promise(((n,i)=>{r.on("error",i);let a="r+";const c=(l,d)=>l&&"ENOENT"===l.code&&"r+"===a?(a="w+",o.open(e.file,a,c)):l?i(l):void o.fstat(d,((a,c)=>{if(a)return o.close(d,(()=>i(a)));((t,n,r)=>{const i=(e,n)=>{e?o.close(t,(t=>r(e))):r(null,n)};let s=0;if(0===n)return i(null,0);let a=0;const c=Buffer.alloc(512),l=(r,d)=>{if(r)return i(r);if(a+=d,a<512&&d)return o.read(t,c,a,c.length-a,s+a,l);if(0===s&&31===c[0]&&139===c[1])return i(new Error("cannot append to compressed archives"));if(a<512)return i(null,s);const p=new u(c);if(!p.cksumValid)return i(null,s);const h=512*Math.ceil(p.size/512);return s+h+512>n?i(null,s):(s+=h+512,s>=n?i(null,s):(e.mtimeCache&&e.mtimeCache.set(p.path,p.mtime),a=0,void o.read(t,c,0,512,s,l)))};o.read(t,c,0,512,s,l)})(d,c.size,((o,a)=>{if(o)return i(o);const c=new s.WriteStream(e.file,{fd:d,start:a});r.pipe(c),c.on("error",i),c.on("close",n),f(r,t)}))}));o.open(e.file,a,c)}));return n?a.then(n,n):a},h=(e,t)=>{t.forEach((t=>{"@"===t.charAt(0)?a({file:c.resolve(e.cwd,t.slice(1)),sync:!0,noResume:!0,onentry:t=>e.add(t)}):e.add(t)})),e.end()},f=(e,t)=>{for(;t.length;){const n=t.shift();if("@"===n.charAt(0))return a({file:c.resolve(e.cwd,n.slice(1)),noResume:!0,onentry:t=>e.add(t)}).then((n=>f(e,t)));e.add(n)}e.end()}},2214:(e,t,n)=>{const{isAbsolute:r,parse:i}=n(1017).win32;e.exports=e=>{let t="",n=i(e);for(;r(e)||n.root;){const r="/"===e.charAt(0)&&"//?/"!==e.slice(0,4)?"/":n.root;e=e.slice(r.length),t+=r,n=i(e)}return[t,e]}},4922:e=>{e.exports=e=>{let t=e.length-1,n=-1;for(;t>-1&&"/"===e.charAt(t);)n=t,t--;return-1===n?e:e.slice(0,n)}},4402:(e,t)=>{"use strict";t.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]),t.code=new Map(Array.from(t.name).map((e=>[e[1],e[0]])))},2699:(e,t,n)=>{"use strict";const r=n(9491),i=n(6824),o=n(7147),s=n(292),a=n(1017),c=n(3248),u=n(619),l=n(10),d=n(2214),p=n(2905),h=n(4922),f=n(1946),m=Symbol("onEntry"),g=Symbol("checkFs"),v=Symbol("checkFs2"),y=Symbol("pruneCache"),_=Symbol("isReusable"),b=Symbol("makeFs"),E=Symbol("file"),S=Symbol("directory"),w=Symbol("link"),C=Symbol("symlink"),T=Symbol("hardlink"),R=Symbol("unsupported"),O=Symbol("checkPath"),x=Symbol("mkdir"),P=Symbol("onError"),I=Symbol("pending"),A=Symbol("pend"),D=Symbol("unpend"),N=Symbol("ended"),k=Symbol("maybeClose"),M=Symbol("skip"),L=Symbol("doChown"),F=Symbol("uid"),q=Symbol("gid"),j=Symbol("checkedCwd"),U=n(6113),B=n(5879),V="win32"===(process.env.TESTING_TAR_FAKE_PLATFORM||process.platform),H=(e,t,n)=>e===e>>>0?e:t===t>>>0?t:n,z=e=>h(p(f(e))).toLowerCase();class G extends i{constructor(e){if(e||(e={}),e.ondone=e=>{this[N]=!0,this[k]()},super(e),this[j]=!1,this.reservations=l(),this.transform="function"==typeof e.transform?e.transform:null,this.writable=!0,this.readable=!1,this[I]=0,this[N]=!1,this.dirCache=e.dirCache||new Map,"number"==typeof e.uid||"number"==typeof e.gid){if("number"!=typeof e.uid||"number"!=typeof e.gid)throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;void 0===e.preserveOwner&&"number"!=typeof e.uid?this.preserveOwner=process.getuid&&0===process.getuid():this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=!0===e.forceChown,this.win32=!!e.win32||V,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=p(a.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask="number"==typeof e.umask?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",(e=>this[m](e)))}warn(e,t,n={}){return"TAR_BAD_ARCHIVE"!==e&&"TAR_ABORT"!==e||(n.recoverable=!1),super.warn(e,t,n)}[k](){this[N]&&0===this[I]&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[O](e){if(this.strip){const t=p(e.path).split("/");if(t.length<this.strip)return!1;if(e.path=t.slice(this.strip).join("/"),"Link"===e.type){const t=p(e.linkpath).split("/");if(!(t.length>=this.strip))return!1;e.linkpath=t.slice(this.strip).join("/")}}if(!this.preservePaths){const t=p(e.path),n=t.split("/");if(n.includes("..")||V&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:t}),!1;const[r,i]=d(t);r&&(e.path=i,this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:e,path:t}))}if(a.isAbsolute(e.path)?e.absolute=p(a.resolve(e.path)):e.absolute=p(a.resolve(this.cwd,e.path)),!this.preservePaths&&0!==e.absolute.indexOf(this.cwd+"/")&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:p(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&"Directory"!==e.type&&"GNUDumpDir"!==e.type)return!1;if(this.win32){const{root:t}=a.win32.parse(e.absolute);e.absolute=t+u.encode(e.absolute.slice(t.length));const{root:n}=a.win32.parse(e.path);e.path=n+u.encode(e.path.slice(n.length))}return!0}[m](e){if(!this[O](e))return e.resume();switch(r.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=448|e.mode);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[g](e);default:return this[R](e)}}[P](e,t){"CwdError"===e.name?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:t}),this[D](),t.resume())}[x](e,t,n){c(p(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t,noChmod:this.noChmod},n)}[L](e){return this.forceChown||this.preserveOwner&&("number"==typeof e.uid&&e.uid!==this.processUid||"number"==typeof e.gid&&e.gid!==this.processGid)||"number"==typeof this.uid&&this.uid!==this.processUid||"number"==typeof this.gid&&this.gid!==this.processGid}[F](e){return H(this.uid,e.uid,this.processUid)}[q](e){return H(this.gid,e.gid,this.processGid)}[E](e,t){const n=4095&e.mode||this.fmode,r=new s.WriteStream(e.absolute,{flags:B(e.size),mode:n,autoClose:!1});r.on("error",(n=>{r.fd&&o.close(r.fd,(()=>{})),r.write=()=>!0,this[P](n,e),t()}));let i=1;const a=n=>{if(n)return r.fd&&o.close(r.fd,(()=>{})),this[P](n,e),void t();0==--i&&o.close(r.fd,(n=>{n?this[P](n,e):this[D](),t()}))};r.on("finish",(t=>{const n=e.absolute,s=r.fd;if(e.mtime&&!this.noMtime){i++;const t=e.atime||new Date,r=e.mtime;o.futimes(s,t,r,(e=>e?o.utimes(n,t,r,(t=>a(t&&e))):a()))}if(this[L](e)){i++;const t=this[F](e),r=this[q](e);o.fchown(s,t,r,(e=>e?o.chown(n,t,r,(t=>a(t&&e))):a()))}a()}));const c=this.transform&&this.transform(e)||e;c!==e&&(c.on("error",(n=>{this[P](n,e),t()})),e.pipe(c)),c.pipe(r)}[S](e,t){const n=4095&e.mode||this.dmode;this[x](e.absolute,n,(n=>{if(n)return this[P](n,e),void t();let r=1;const i=n=>{0==--r&&(t(),this[D](),e.resume())};e.mtime&&!this.noMtime&&(r++,o.utimes(e.absolute,e.atime||new Date,e.mtime,i)),this[L](e)&&(r++,o.chown(e.absolute,this[F](e),this[q](e),i)),i()}))}[R](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[C](e,t){this[w](e,e.linkpath,"symlink",t)}[T](e,t){const n=p(a.resolve(this.cwd,e.linkpath));this[w](e,n,"link",t)}[A](){this[I]++}[D](){this[I]--,this[k]()}[M](e){this[D](),e.resume()}[_](e,t){return"File"===e.type&&!this.unlink&&t.isFile()&&t.nlink<=1&&!V}[g](e){this[A]();const t=[e.path];e.linkpath&&t.push(e.linkpath),this.reservations.reserve(t,(t=>this[v](e,t)))}[y](e){"SymbolicLink"===e.type?(e=>{for(const t of e.keys())e.delete(t)})(this.dirCache):"Directory"!==e.type&&((e,t)=>{t=z(t);for(const n of e.keys()){const r=z(n);r!==t&&0!==r.indexOf(t+"/")||e.delete(n)}})(this.dirCache,e.absolute)}[v](e,t){this[y](e);const n=n=>{this[y](e),t(n)},r=()=>{if(e.absolute!==this.cwd){const t=p(a.dirname(e.absolute));if(t!==this.cwd)return this[x](t,this.dmode,(t=>{if(t)return this[P](t,e),void n();i()}))}i()},i=()=>{o.lstat(e.absolute,((t,r)=>{if(r&&(this.keep||this.newer&&r.mtime>e.mtime))return this[M](e),void n();if(t||this[_](e,r))return this[b](null,e,n);if(r.isDirectory()){if("Directory"===e.type){const t=t=>this[b](t,e,n);return!this.noChmod&&e.mode&&(4095&r.mode)!==e.mode?o.chmod(e.absolute,e.mode,t):t()}if(e.absolute!==this.cwd)return o.rmdir(e.absolute,(t=>this[b](t,e,n)))}if(e.absolute===this.cwd)return this[b](null,e,n);((e,t)=>{if(!V)return o.unlink(e,t);const n=e+".DELETE."+U.randomBytes(16).toString("hex");o.rename(e,n,(e=>{if(e)return t(e);o.unlink(n,t)}))})(e.absolute,(t=>this[b](t,e,n)))}))};this[j]?r():(()=>{this[x](this.cwd,this.dmode,(t=>{if(t)return this[P](t,e),void n();this[j]=!0,r()}))})()}[b](e,t,n){if(e)return this[P](e,t),void n();switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[E](t,n);case"Link":return this[T](t,n);case"SymbolicLink":return this[C](t,n);case"Directory":case"GNUDumpDir":return this[S](t,n)}}[w](e,t,n,r){o[n](t,e.absolute,(t=>{t?this[P](t,e):(this[D](),e.resume()),r()}))}}const K=e=>{try{return[null,e()]}catch(e){return[e,null]}};G.Sync=class extends G{[b](e,t){return super[b](e,t,(()=>{}))}[g](e){if(this[y](e),!this[j]){const t=this[x](this.cwd,this.dmode);if(t)return this[P](t,e);this[j]=!0}if(e.absolute!==this.cwd){const t=p(a.dirname(e.absolute));if(t!==this.cwd){const n=this[x](t,this.dmode);if(n)return this[P](n,e)}}const[t,n]=K((()=>o.lstatSync(e.absolute)));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[M](e);if(t||this[_](e,n))return this[b](null,e);if(n.isDirectory()){if("Directory"===e.type){const t=!this.noChmod&&e.mode&&(4095&n.mode)!==e.mode,[r]=t?K((()=>{o.chmodSync(e.absolute,e.mode)})):[];return this[b](r,e)}const[t]=K((()=>o.rmdirSync(e.absolute)));this[b](t,e)}const[r]=e.absolute===this.cwd?[]:K((()=>(e=>{if(!V)return o.unlinkSync(e);const t=e+".DELETE."+U.randomBytes(16).toString("hex");o.renameSync(e,t),o.unlinkSync(t)})(e.absolute)));this[b](r,e)}[E](e,t){const n=4095&e.mode||this.fmode,r=n=>{let r;try{o.closeSync(i)}catch(e){r=e}(n||r)&&this[P](n||r,e),t()};let i;try{i=o.openSync(e.absolute,B(e.size),n)}catch(e){return r(e)}const s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",(t=>this[P](t,e))),e.pipe(s)),s.on("data",(e=>{try{o.writeSync(i,e,0,e.length)}catch(e){r(e)}})),s.on("end",(t=>{let n=null;if(e.mtime&&!this.noMtime){const t=e.atime||new Date,r=e.mtime;try{o.futimesSync(i,t,r)}catch(i){try{o.utimesSync(e.absolute,t,r)}catch(e){n=i}}}if(this[L](e)){const t=this[F](e),r=this[q](e);try{o.fchownSync(i,t,r)}catch(i){try{o.chownSync(e.absolute,t,r)}catch(e){n=n||i}}}r(n)}))}[S](e,t){const n=4095&e.mode||this.dmode,r=this[x](e.absolute,n);if(r)return this[P](r,e),void t();if(e.mtime&&!this.noMtime)try{o.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch(r){}if(this[L](e))try{o.chownSync(e.absolute,this[F](e),this[q](e))}catch(r){}t(),e.resume()}[x](e,t){try{return c.sync(p(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(e){return e}}[w](e,t,n,r){try{o[n+"Sync"](t,e.absolute),r(),e.resume()}catch(t){return this[P](t,e)}}},e.exports=G},5997:(e,t,n)=>{"use strict";const r=n(2093),i=n(1746);e.exports=(e,t,n)=>{const s=r(e);if(!s.file)throw new TypeError("file is required");if(s.gzip||s.brotli||s.file.endsWith(".br")||s.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),o(s),i(s,t,n)};const o=e=>{const t=e.filter;e.mtimeCache||(e.mtimeCache=new Map),e.filter=t?(n,r)=>t(n,r)&&!(e.mtimeCache.get(n)>r.mtime):(t,n)=>!(e.mtimeCache.get(t)>n.mtime)}},7902:e=>{"use strict";e.exports=e=>class extends e{warn(e,t,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=t instanceof Error&&t.code||e,n.tarCode=e,this.strict||!1===n.recoverable?t instanceof Error?this.emit("error",Object.assign(t,n)):this.emit("error",Object.assign(new Error(`${e}: ${t}`),n)):(t instanceof Error&&(n=Object.assign(t,n),t=t.message),this.emit("warn",n.tarCode,t,n))}}},619:e=>{"use strict";const t=["|","<",">","?",":"],n=t.map((e=>String.fromCharCode(61440+e.charCodeAt(0)))),r=new Map(t.map(((e,t)=>[e,n[t]]))),i=new Map(n.map(((e,n)=>[e,t[n]])));e.exports={encode:e=>t.reduce(((e,t)=>e.split(t).join(r.get(t))),e),decode:e=>n.reduce(((e,t)=>e.split(t).join(i.get(t))),e)}},4426:(e,t,n)=>{"use strict";const{Minipass:r}=n(4577),i=n(4747),o=n(7134),s=n(7147),a=n(1017),c=n(2905),u=n(4922),l=(e,t)=>t?(e=c(e).replace(/^\.(\/|$)/,""),u(t)+"/"+e):c(e),d=Symbol("process"),p=Symbol("file"),h=Symbol("directory"),f=Symbol("symlink"),m=Symbol("hardlink"),g=Symbol("header"),v=Symbol("read"),y=Symbol("lstat"),_=Symbol("onlstat"),b=Symbol("onread"),E=Symbol("onreadlink"),S=Symbol("openfile"),w=Symbol("onopenfile"),C=Symbol("close"),T=Symbol("mode"),R=Symbol("awaitDrain"),O=Symbol("ondrain"),x=Symbol("prefix"),P=Symbol("hadError"),I=n(7902),A=n(619),D=n(2214),N=n(7716),k=I(class extends r{constructor(e,t){if(super(t=t||{}),"string"!=typeof e)throw new TypeError("path is required");this.path=c(e),this.portable=!!t.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=t.maxReadSize||16777216,this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.preservePaths=!!t.preservePaths,this.cwd=c(t.cwd||process.cwd()),this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.prefix=t.prefix?c(t.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,"function"==typeof t.onwarn&&this.on("warn",t.onwarn);let n=!1;if(!this.preservePaths){const[e,t]=D(this.path);e&&(this.path=t,n=e)}this.win32=!!t.win32||"win32"===process.platform,this.win32&&(this.path=A.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=c(t.absolute||a.resolve(this.cwd,e)),""===this.path&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[_](this.statCache.get(this.absolute)):this[y]()}emit(e,...t){return"error"===e&&(this[P]=!0),super.emit(e,...t)}[y](){s.lstat(this.absolute,((e,t)=>{if(e)return this.emit("error",e);this[_](t)}))}[_](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=L(e),this.emit("stat",e),this[d]()}[d](){switch(this.type){case"File":return this[p]();case"Directory":return this[h]();case"SymbolicLink":return this[f]();default:return this.end()}}[T](e){return N(e,"Directory"===this.type,this.portable)}[x](e){return l(e,this.prefix)}[g](){"Directory"===this.type&&this.portable&&(this.noMtime=!0),this.header=new o({path:this[x](this.path),linkpath:"Link"===this.type?this[x](this.linkpath):this.linkpath,mode:this[T](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new i({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[x](this.path),linkpath:"Link"===this.type?this[x](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[h](){"/"!==this.path.slice(-1)&&(this.path+="/"),this.stat.size=0,this[g](),this.end()}[f](){s.readlink(this.absolute,((e,t)=>{if(e)return this.emit("error",e);this[E](t)}))}[E](e){this.linkpath=c(e),this[g](),this.end()}[m](e){this.type="Link",this.linkpath=c(a.relative(this.cwd,e)),this.stat.size=0,this[g](),this.end()}[p](){if(this.stat.nlink>1){const e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){const t=this.linkCache.get(e);if(0===t.indexOf(this.cwd))return this[m](t)}this.linkCache.set(e,this.absolute)}if(this[g](),0===this.stat.size)return this.end();this[S]()}[S](){s.open(this.absolute,"r",((e,t)=>{if(e)return this.emit("error",e);this[w](t)}))}[w](e){if(this.fd=e,this[P])return this[C]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;const t=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(t),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[v]()}[v](){const{fd:e,buf:t,offset:n,length:r,pos:i}=this;s.read(e,t,n,r,i,((e,t)=>{if(e)return this[C]((()=>this.emit("error",e)));this[b](t)}))}[C](e){s.close(this.fd,e)}[b](e){if(e<=0&&this.remain>0){const e=new Error("encountered unexpected EOF");return e.path=this.absolute,e.syscall="read",e.code="EOF",this[C]((()=>this.emit("error",e)))}if(e>this.remain){const e=new Error("did not encounter expected EOF");return e.path=this.absolute,e.syscall="read",e.code="EOF",this[C]((()=>this.emit("error",e)))}if(e===this.remain)for(let t=e;t<this.length&&e<this.blockRemain;t++)this.buf[t+this.offset]=0,e++,this.remain++;const t=0===this.offset&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(t)?this[O]():this[R]((()=>this[O]()))}[R](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){const e=new Error("writing more data than expected");return e.path=this.absolute,this.emit("error",e)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[O](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[C]((e=>e?this.emit("error",e):this.end()));this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[v]()}}),M=I(class extends r{constructor(e,t){super(t=t||{}),this.preservePaths=!!t.preservePaths,this.portable=!!t.portable,this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.readEntry=e,this.type=e.type,"Directory"===this.type&&this.portable&&(this.noMtime=!0),this.prefix=t.prefix||null,this.path=c(e.path),this.mode=this[T](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:t.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=c(e.linkpath),"function"==typeof t.onwarn&&this.on("warn",t.onwarn);let n=!1;if(!this.preservePaths){const[e,t]=D(this.path);e&&(this.path=t,n=e)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new o({path:this[x](this.path),linkpath:"Link"===this.type?this[x](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new i({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[x](this.path),linkpath:"Link"===this.type?this[x](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[x](e){return l(e,this.prefix)}[T](e){return N(e,"Directory"===this.type,this.portable)}write(e){const t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=t,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});k.Sync=class extends k{[y](){this[_](s.lstatSync(this.absolute))}[f](){this[E](s.readlinkSync(this.absolute))}[S](){this[w](s.openSync(this.absolute,"r"))}[v](){let e=!0;try{const{fd:t,buf:n,offset:r,length:i,pos:o}=this,a=s.readSync(t,n,r,i,o);this[b](a),e=!1}finally{if(e)try{this[C]((()=>{}))}catch(e){}}}[R](e){e()}[C](e){s.closeSync(this.fd),e()}},k.Tar=M;const L=e=>e.isFile()?"File":e.isDirectory()?"Directory":e.isSymbolicLink()?"SymbolicLink":"Unsupported";e.exports=k},4577:(e,t,n)=>{"use strict";const r="object"==typeof process&&process?process:{stdout:null,stderr:null},i=n(2361),o=n(2781),s=n(1576).StringDecoder,a=Symbol("EOF"),c=Symbol("maybeEmitEnd"),u=Symbol("emittedEnd"),l=Symbol("emittingEnd"),d=Symbol("emittedError"),p=Symbol("closed"),h=Symbol("read"),f=Symbol("flush"),m=Symbol("flushChunk"),g=Symbol("encoding"),v=Symbol("decoder"),y=Symbol("flowing"),_=Symbol("paused"),b=Symbol("resume"),E=Symbol("buffer"),S=Symbol("pipes"),w=Symbol("bufferLength"),C=Symbol("bufferPush"),T=Symbol("bufferShift"),R=Symbol("objectMode"),O=Symbol("destroyed"),x=Symbol("error"),P=Symbol("emitData"),I=Symbol("emitEnd"),A=Symbol("emitEnd2"),D=Symbol("async"),N=Symbol("abort"),k=Symbol("aborted"),M=Symbol("signal"),L=e=>Promise.resolve().then(e),F="1"!==global._MP_NO_ITERATOR_SYMBOLS_,q=F&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),j=F&&Symbol.iterator||Symbol("iterator not implemented");class U{constructor(e,t,n){this.src=e,this.dest=t,this.opts=n,this.ondrain=()=>e[b](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class B extends U{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,n){super(e,t,n),this.proxyErrors=e=>t.emit("error",e),e.on("error",this.proxyErrors)}}class V extends o{constructor(e){super(),this[y]=!1,this[_]=!1,this[S]=[],this[E]=[],this[R]=e&&e.objectMode||!1,this[R]?this[g]=null:this[g]=e&&e.encoding||null,"buffer"===this[g]&&(this[g]=null),this[D]=e&&!!e.async||!1,this[v]=this[g]?new s(this[g]):null,this[a]=!1,this[u]=!1,this[l]=!1,this[p]=!1,this[d]=null,this.writable=!0,this.readable=!0,this[w]=0,this[O]=!1,e&&!0===e.debugExposeBuffer&&Object.defineProperty(this,"buffer",{get:()=>this[E]}),e&&!0===e.debugExposePipes&&Object.defineProperty(this,"pipes",{get:()=>this[S]}),this[M]=e&&e.signal,this[k]=!1,this[M]&&(this[M].addEventListener("abort",(()=>this[N]())),this[M].aborted&&this[N]())}get bufferLength(){return this[w]}get encoding(){return this[g]}set encoding(e){if(this[R])throw new Error("cannot set encoding in objectMode");if(this[g]&&e!==this[g]&&(this[v]&&this[v].lastNeed||this[w]))throw new Error("cannot change encoding");this[g]!==e&&(this[v]=e?new s(e):null,this[E].length&&(this[E]=this[E].map((e=>this[v].write(e))))),this[g]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[R]}set objectMode(e){this[R]=this[R]||!!e}get async(){return this[D]}set async(e){this[D]=this[D]||!!e}[N](){this[k]=!0,this.emit("abort",this[M].reason),this.destroy(this[M].reason)}get aborted(){return this[k]}set aborted(e){}write(e,t,n){if(this[k])return!1;if(this[a])throw new Error("write after end");if(this[O])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;"function"==typeof t&&(n=t,t="utf8"),t||(t="utf8");const r=this[D]?L:e=>e();var i;return this[R]||Buffer.isBuffer(e)||(i=e,!Buffer.isBuffer(i)&&ArrayBuffer.isView(i)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(e=>e instanceof ArrayBuffer||"object"==typeof e&&e.constructor&&"ArrayBuffer"===e.constructor.name&&e.byteLength>=0)(e)?e=Buffer.from(e):"string"!=typeof e&&(this.objectMode=!0)),this[R]?(this.flowing&&0!==this[w]&&this[f](!0),this.flowing?this.emit("data",e):this[C](e),0!==this[w]&&this.emit("readable"),n&&r(n),this.flowing):e.length?("string"!=typeof e||t===this[g]&&!this[v].lastNeed||(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[g]&&(e=this[v].write(e)),this.flowing&&0!==this[w]&&this[f](!0),this.flowing?this.emit("data",e):this[C](e),0!==this[w]&&this.emit("readable"),n&&r(n),this.flowing):(0!==this[w]&&this.emit("readable"),n&&r(n),this.flowing)}read(e){if(this[O])return null;if(0===this[w]||0===e||e>this[w])return this[c](),null;this[R]&&(e=null),this[E].length>1&&!this[R]&&(this.encoding?this[E]=[this[E].join("")]:this[E]=[Buffer.concat(this[E],this[w])]);const t=this[h](e||null,this[E][0]);return this[c](),t}[h](e,t){return e===t.length||null===e?this[T]():(this[E][0]=t.slice(e),t=t.slice(0,e),this[w]-=e),this.emit("data",t),this[E].length||this[a]||this.emit("drain"),t}end(e,t,n){return"function"==typeof e&&(n=e,e=null),"function"==typeof t&&(n=t,t="utf8"),e&&this.write(e,t),n&&this.once("end",n),this[a]=!0,this.writable=!1,!this.flowing&&this[_]||this[c](),this}[b](){this[O]||(this[_]=!1,this[y]=!0,this.emit("resume"),this[E].length?this[f]():this[a]?this[c]():this.emit("drain"))}resume(){return this[b]()}pause(){this[y]=!1,this[_]=!0}get destroyed(){return this[O]}get flowing(){return this[y]}get paused(){return this[_]}[C](e){this[R]?this[w]+=1:this[w]+=e.length,this[E].push(e)}[T](){return this[R]?this[w]-=1:this[w]-=this[E][0].length,this[E].shift()}[f](e){do{}while(this[m](this[T]())&&this[E].length);e||this[E].length||this[a]||this.emit("drain")}[m](e){return this.emit("data",e),this.flowing}pipe(e,t){if(this[O])return;const n=this[u];return t=t||{},e===r.stdout||e===r.stderr?t.end=!1:t.end=!1!==t.end,t.proxyErrors=!!t.proxyErrors,n?t.end&&e.end():(this[S].push(t.proxyErrors?new B(this,e,t):new U(this,e,t)),this[D]?L((()=>this[b]())):this[b]()),e}unpipe(e){const t=this[S].find((t=>t.dest===e));t&&(this[S].splice(this[S].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){const n=super.on(e,t);return"data"!==e||this[S].length||this.flowing?"readable"===e&&0!==this[w]?super.emit("readable"):(e=>"end"===e||"finish"===e||"prefinish"===e)(e)&&this[u]?(super.emit(e),this.removeAllListeners(e)):"error"===e&&this[d]&&(this[D]?L((()=>t.call(this,this[d]))):t.call(this,this[d])):this[b](),n}get emittedEnd(){return this[u]}[c](){this[l]||this[u]||this[O]||0!==this[E].length||!this[a]||(this[l]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[p]&&this.emit("close"),this[l]=!1)}emit(e,t,...n){if("error"!==e&&"close"!==e&&e!==O&&this[O])return;if("data"===e)return!(!this[R]&&!t)&&(this[D]?L((()=>this[P](t))):this[P](t));if("end"===e)return this[I]();if("close"===e){if(this[p]=!0,!this[u]&&!this[O])return;const e=super.emit("close");return this.removeAllListeners("close"),e}if("error"===e){this[d]=t,super.emit(x,t);const e=!(this[M]&&!this.listeners("error").length)&&super.emit("error",t);return this[c](),e}if("resume"===e){const e=super.emit("resume");return this[c](),e}if("finish"===e||"prefinish"===e){const t=super.emit(e);return this.removeAllListeners(e),t}const r=super.emit(e,t,...n);return this[c](),r}[P](e){for(const t of this[S])!1===t.dest.write(e)&&this.pause();const t=super.emit("data",e);return this[c](),t}[I](){this[u]||(this[u]=!0,this.readable=!1,this[D]?L((()=>this[A]())):this[A]())}[A](){if(this[v]){const e=this[v].end();if(e){for(const t of this[S])t.dest.write(e);super.emit("data",e)}}for(const e of this[S])e.end();const e=super.emit("end");return this.removeAllListeners("end"),e}collect(){const e=[];this[R]||(e.dataLength=0);const t=this.promise();return this.on("data",(t=>{e.push(t),this[R]||(e.dataLength+=t.length)})),t.then((()=>e))}concat(){return this[R]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then((e=>this[R]?Promise.reject(new Error("cannot concat in objectMode")):this[g]?e.join(""):Buffer.concat(e,e.dataLength)))}promise(){return new Promise(((e,t)=>{this.on(O,(()=>t(new Error("stream destroyed")))),this.on("error",(e=>t(e))),this.on("end",(()=>e()))}))}[q](){let e=!1;const t=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return t();const n=this.read();if(null!==n)return Promise.resolve({done:!1,value:n});if(this[a])return t();let r=null,i=null;const o=e=>{this.removeListener("data",s),this.removeListener("end",c),this.removeListener(O,u),t(),i(e)},s=e=>{this.removeListener("error",o),this.removeListener("end",c),this.removeListener(O,u),this.pause(),r({value:e,done:!!this[a]})},c=()=>{this.removeListener("error",o),this.removeListener("data",s),this.removeListener(O,u),t(),r({done:!0})},u=()=>o(new Error("stream destroyed"));return new Promise(((e,t)=>{i=t,r=e,this.once(O,u),this.once("error",o),this.once("end",c),this.once("data",s)}))},throw:t,return:t,[q](){return this}}}[j](){let e=!1;const t=()=>(this.pause(),this.removeListener(x,t),this.removeListener(O,t),this.removeListener("end",t),e=!0,{done:!0});return this.once("end",t),this.once(x,t),this.once(O,t),{next:()=>{if(e)return t();const n=this.read();return null===n?t():{value:n}},throw:t,return:t,[j](){return this}}}destroy(e){return this[O]?(e?this.emit("error",e):this.emit(O),this):(this[O]=!0,this[E].length=0,this[w]=0,"function"!=typeof this.close||this[p]||this.close(),e?this.emit("error",e):this.emit(O),this)}static isStream(e){return!!e&&(e instanceof V||e instanceof o||e instanceof i&&("function"==typeof e.pipe||"function"==typeof e.write&&"function"==typeof e.end))}}t.Minipass=V},6276:(e,t,n)=>{const r=n(7147),i=n(1017),o=n(6113),s=n(5339),a=process.binding("constants"),c=s(),u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l=/XXXXXX/,d=(a.O_CREAT||a.fs.O_CREAT)|(a.O_EXCL||a.fs.O_EXCL)|(a.O_RDWR||a.fs.O_RDWR),p=a.EBADF||a.os.errno.EBADF,h=a.ENOENT||a.os.errno.ENOENT,f=[];var m=!1,g=!1;function v(e){var t=[],n=null;try{n=o.randomBytes(e)}catch(t){n=o.pseudoRandomBytes(e)}for(var r=0;r<e;r++)t.push(u[n[r]%u.length]);return t.join("")}function y(e){return void 0===e}function _(e,t){return"function"==typeof e?[t||{},e]:y(e)?[{},t]:[e,t]}function b(e){if(e.name)return i.join(e.dir||c,e.name);if(e.template)return e.template.replace(l,v(6));const t=[e.prefix||"tmp-",process.pid,v(12),e.postfix||""].join("");return i.join(e.dir||c,t)}function E(e,t){var n=_(e,t),i=n[0],o=n[1],s=i.name?1:i.tries||3;return isNaN(s)||s<0?o(new Error("Invalid tries")):i.template&&!i.template.match(l)?o(new Error("Invalid template provided")):void function e(){const t=b(i);r.stat(t,(function(n){if(!n)return s-- >0?e():o(new Error("Could not get a unique tmp filename, max tries reached "+t));o(null,t)}))}()}function S(e){var t=_(e)[0],n=t.name?1:t.tries||3;if(isNaN(n)||n<0)throw new Error("Invalid tries");if(t.template&&!t.template.match(l))throw new Error("Invalid template provided");do{const e=b(t);try{r.statSync(e)}catch(t){return e}}while(n-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function w(e){const t=[e];do{for(var n=t.pop(),o=!1,s=r.readdirSync(n),a=0,c=s.length;a<c;a++){var u=i.join(n,s[a]);r.lstatSync(u).isDirectory()?(o||(o=!0,t.push(n)),t.push(u)):r.unlinkSync(u)}o||r.rmdirSync(n)}while(0!==t.length)}function C(e,t,n){const i=R((function(e){try{0<=e[0]&&r.closeSync(e[0])}catch(e){if(!P(e,-p,"EBADF")&&!x(e))throw e}try{r.unlinkSync(e[1])}catch(e){if(!x(e))throw e}}),[t,e]);return n.keep||f.unshift(i),i}function T(e,t){const n=R(t.unsafeCleanup?w:r.rmdirSync.bind(r),e);return t.keep||f.unshift(n),n}function R(e,t){var n=!1;return function r(i){if(!n){const i=f.indexOf(r);i>=0&&f.splice(i,1),n=!0,e(t)}i&&i(null)}}function O(){if(!g||m)for(;f.length;)try{f[0].call(null)}catch(e){}}function x(e){return P(e,-h,"ENOENT")}function P(e,t,n){return e.code==t||e.code==n}const I=process.versions.node.split(".").map((function(e){return parseInt(e,10)}));0===I[0]&&(I[1]<9||9===I[1]&&I[2]<5)&&process.addListener("uncaughtException",(function(e){throw g=!0,O(),e})),process.addListener("exit",(function(e){e&&(g=!0),O()})),e.exports.tmpdir=c,e.exports.dir=function(e,t){var n=_(e,t),i=n[0],o=n[1];E(i,(function(e,t){if(e)return o(e);r.mkdir(t,i.mode||448,(function(e){if(e)return o(e);o(null,t,T(t,i))}))}))},e.exports.dirSync=function(e){var t=_(e)[0];const n=S(t);return r.mkdirSync(n,t.mode||448),{name:n,removeCallback:T(n,t)}},e.exports.file=function(e,t){var n=_(e,t),i=n[0],o=n[1];i.postfix=y(i.postfix)?".tmp":i.postfix,E(i,(function(e,t){if(e)return o(e);r.open(t,d,i.mode||384,(function(e,n){return e?o(e):i.discardDescriptor?r.close(n,(function(e){if(e){try{r.unlinkSync(t)}catch(t){x(t)||(e=t)}return o(e)}o(null,t,void 0,C(t,-1,i))})):i.detachDescriptor?o(null,t,n,C(t,-1,i)):void o(null,t,n,C(t,n,i))}))}))},e.exports.fileSync=function(e){var t=_(e)[0];t.postfix=t.postfix||".tmp";const n=t.discardDescriptor||t.detachDescriptor,i=S(t);var o=r.openSync(i,d,t.mode||384);return t.discardDescriptor&&(r.closeSync(o),o=void 0),{name:i,fd:o,removeCallback:C(i,n?-1:o,t)}},e.exports.tmpName=E,e.exports.tmpNameSync=S,e.exports.setGracefulCleanup=function(){m=!0}},3126:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3680),i=n(2593);var o;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None}),e.is=function(t){let n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(o=t.CancellationToken||(t.CancellationToken={}));const s=Object.freeze((function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}));class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?s:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=o.Cancelled}dispose(){this.cancel()}}},3680:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}},function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class n{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var n=!1,r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0),i=0,o=n.length;i<o;i++)try{t.push(n[i].apply(r[i],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,i)=>{let o;return this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),o={dispose:()=>{this._callbacks.remove(e,t),o.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(i)&&i.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}r._noop=function(){},t.Emitter=r},2593:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))}},397:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(n=t.Touch||(t.Touch={})),t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,r=n.None){let i=this._map.get(e);if(i)i.value=t,r!==n.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,t){let n=this._tail;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===n.First||t===n.Last)if(t===n.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===n.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},8231:(e,t,n)=>{"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(2593),o=n(3234);t.RequestType=o.RequestType,t.RequestType0=o.RequestType0,t.RequestType1=o.RequestType1,t.RequestType2=o.RequestType2,t.RequestType3=o.RequestType3,t.RequestType4=o.RequestType4,t.RequestType5=o.RequestType5,t.RequestType6=o.RequestType6,t.RequestType7=o.RequestType7,t.RequestType8=o.RequestType8,t.RequestType9=o.RequestType9,t.ResponseError=o.ResponseError,t.ErrorCodes=o.ErrorCodes,t.NotificationType=o.NotificationType,t.NotificationType0=o.NotificationType0,t.NotificationType1=o.NotificationType1,t.NotificationType2=o.NotificationType2,t.NotificationType3=o.NotificationType3,t.NotificationType4=o.NotificationType4,t.NotificationType5=o.NotificationType5,t.NotificationType6=o.NotificationType6,t.NotificationType7=o.NotificationType7,t.NotificationType8=o.NotificationType8,t.NotificationType9=o.NotificationType9;const s=n(6386);t.MessageReader=s.MessageReader,t.StreamMessageReader=s.StreamMessageReader,t.IPCMessageReader=s.IPCMessageReader,t.SocketMessageReader=s.SocketMessageReader;const a=n(9725);t.MessageWriter=a.MessageWriter,t.StreamMessageWriter=a.StreamMessageWriter,t.IPCMessageWriter=a.IPCMessageWriter,t.SocketMessageWriter=a.SocketMessageWriter;const c=n(3680);t.Disposable=c.Disposable,t.Event=c.Event,t.Emitter=c.Emitter;const u=n(3126);t.CancellationTokenSource=u.CancellationTokenSource,t.CancellationToken=u.CancellationToken;const l=n(397);var d,p,h,f,m,g,v;r(n(3377)),r(n(1609)),function(e){e.type=new o.NotificationType("$/cancelRequest")}(d||(d={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(p=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(p=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTraceNotification")}(f=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTraceNotification")}(m=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(g=t.ConnectionErrors||(t.ConnectionErrors={}));class y extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,y.prototype)}}function _(e,t,n,r){let s=0,a=0,_=0;const b="2.0";let E,S,w,C,T=Object.create(null),R=Object.create(null),O=new l.LinkedMap,x=Object.create(null),P=Object.create(null),I=p.Off,A=h.Text,D=v.New,N=new c.Emitter,k=new c.Emitter,M=new c.Emitter,L=new c.Emitter;function F(e){return"req-"+e.toString()}function q(e){}function j(){return D===v.Listening}function U(){return D===v.Closed}function B(){return D===v.Disposed}function V(){D!==v.New&&D!==v.Listening||(D=v.Closed,k.fire(void 0))}function H(){w||0===O.size||(w=setImmediate((()=>{w=void 0,function(){if(0===O.size)return;let e=O.shift();try{o.isRequestMessage(e)?function(e){if(B())return;function n(n,r,i){let s={jsonrpc:b,id:e.id};n instanceof o.ResponseError?s.error=n.toJson():s.result=void 0===n?null:n,G(s,r,i),t.write(s)}function r(n,r,i){let o={jsonrpc:b,id:e.id,error:n.toJson()};G(o,r,i),t.write(o)}!function(e){if(I!==p.Off&&C)if(A===h.Text){let t;I===p.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),C.log(`Received request '${e.method} - (${e.id})'.`,t)}else K("receive-request",e)}(e);let s,a,c=T[e.method];c&&(s=c.type,a=c.handler);let l=Date.now();if(a||E){let c=new u.CancellationTokenSource,d=String(e.id);P[d]=c;try{let u;u=void 0===e.params||void 0!==s&&0===s.numberOfParams?a?a(c.token):E(e.method,c.token):i.array(e.params)&&(void 0===s||s.numberOfParams>1)?a?a(...e.params,c.token):E(e.method,...e.params,c.token):a?a(e.params,c.token):E(e.method,e.params,c.token);let p=u;u?p.then?p.then((t=>{delete P[d],n(t,e.method,l)}),(t=>{delete P[d],t instanceof o.ResponseError?r(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)})):(delete P[d],n(u,e.method,l)):(delete P[d],function(n,r,i){void 0===n&&(n=null);let o={jsonrpc:b,id:e.id,result:n};G(o,r,i),t.write(o)}(u,e.method,l))}catch(t){delete P[d],t instanceof o.ResponseError?n(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else r(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):o.isNotificationMessage(e)?function(e){if(B())return;let t,r;if(e.method===d.type.method)r=e=>{let t=e.id,n=P[String(t)];n&&n.cancel()};else{let n=R[e.method];n&&(r=n.handler,t=n.type)}if(r||S)try{!function(e){if(I!==p.Off&&C&&e.method!==m.type.method)if(A===h.Text){let t;I===p.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),C.log(`Received notification '${e.method}'.`,t)}else K("receive-notification",e)}(e),void 0===e.params||void 0!==t&&0===t.numberOfParams?r?r():S(e.method):i.array(e.params)&&(void 0===t||t.numberOfParams>1)?r?r(...e.params):S(e.method,...e.params):r?r(e.params):S(e.method,e.params)}catch(t){t.message?n.error(`Notification handler '${e.method}' failed with message: ${t.message}`):n.error(`Notification handler '${e.method}' failed unexpectedly.`)}else M.fire(e)}(e):o.isResponseMessage(e)?function(e){if(!B())if(null===e.id)e.error?n.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):n.error("Received response message without id. No further error information provided.");else{let t=String(e.id),r=x[t];if(function(e,t){if(I!==p.Off&&C)if(A===h.Text){let n;if(I===p.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){let r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";C.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else C.log(`Received response ${e.id} without active response promise.`,n)}else K("receive-response",e)}(e,r),r){delete x[t];try{if(e.error){let t=e.error;r.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?n.error(`Response handler '${r.method}' failed with message: ${e.message}`):n.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void n.error("Received empty message.");n.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(i.string(t.id)||i.number(t.id)){let e=String(t.id),n=x[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{H()}}()})))}e.onClose(V),e.onError((function(e){N.fire([e,void 0,void 0])})),t.onClose(V),t.onError((function(e){N.fire(e)}));let z=e=>{try{if(o.isNotificationMessage(e)&&e.method===d.type.method){let n=F(e.params.id),i=O.get(n);if(o.isRequestMessage(i)){let o=r&&r.cancelUndispatched?r.cancelUndispatched(i,q):void 0;if(o&&(void 0!==o.error||void 0!==o.result))return O.delete(n),o.id=i.id,G(o,e.method,Date.now()),void t.write(o)}}!function(e,t){var n;o.isRequestMessage(t)?e.set(F(t.id),t):o.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++_).toString():"res-"+n.toString(),t):e.set("not-"+(++a).toString(),t)}(O,e)}finally{H()}};function G(e,t,n){if(I!==p.Off&&C)if(A===h.Text){let r;I===p.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),C.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else K("send-response",e)}function K(e,t){if(!C||I===p.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};C.log(n)}function $(){if(U())throw new y(g.Closed,"Connection is closed.");if(B())throw new y(g.Disposed,"Connection is disposed.")}function W(e){return void 0===e?null:e}function Q(e,t){let n,r=e.numberOfParams;switch(r){case 0:n=null;break;case 1:n=W(t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(W(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}let X={sendNotification:(e,...n)=>{let r,o;if($(),i.string(e))switch(r=e,n.length){case 0:o=null;break;case 1:o=n[0];break;default:o=n}else r=e.method,o=Q(e,n);let s={jsonrpc:b,method:r,params:o};!function(e){if(I!==p.Off&&C)if(A===h.Text){let t;I===p.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),C.log(`Sending notification '${e.method}'.`,t)}else K("send-notification",e)}(s),t.write(s)},onNotification:(e,t)=>{$(),i.func(e)?S=e:t&&(i.string(e)?R[e]={type:void 0,handler:t}:R[e.method]={type:e,handler:t})},sendRequest:(e,...n)=>{let r,a,c;if($(),function(){if(!j())throw new Error("Call listen() first.")}(),i.string(e))switch(r=e,n.length){case 0:a=null;break;case 1:u.CancellationToken.is(n[0])?(a=null,c=n[0]):a=W(n[0]);break;default:const e=n.length-1;u.CancellationToken.is(n[e])?(c=n[e],a=2===n.length?W(n[0]):n.slice(0,e).map((e=>W(e)))):a=n.map((e=>W(e)))}else{r=e.method,a=Q(e,n);let t=e.numberOfParams;c=u.CancellationToken.is(n[t])?n[t]:void 0}let l=s++,f=new Promise(((e,n)=>{let i={jsonrpc:b,id:l,method:r,params:a},s={method:r,timerStart:Date.now(),resolve:e,reject:n};!function(e){if(I!==p.Off&&C)if(A===h.Text){let t;I===p.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),C.log(`Sending request '${e.method} - (${e.id})'.`,t)}else K("send-request",e)}(i);try{t.write(i)}catch(e){s.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),s=null}s&&(x[String(l)]=s)}));return c&&c.onCancellationRequested((()=>{X.sendNotification(d.type,{id:l})})),f},onRequest:(e,t)=>{$(),i.func(e)?E=e:t&&(i.string(e)?T[e]={type:void 0,handler:t}:T[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let r=!1,o=h.Text;void 0!==n&&(i.boolean(n)?r=n:(r=n.sendNotification||!1,o=n.traceFormat||h.Text)),I=e,A=o,C=I===p.Off?void 0:t,!r||U()||B()||X.sendNotification(f.type,{value:p.toString(e)})},onError:N.event,onClose:k.event,onUnhandledNotification:M.event,onDispose:L.event,dispose:()=>{if(B())return;D=v.Disposed,L.fire(void 0);let n=new Error("Connection got disposed.");Object.keys(x).forEach((e=>{x[e].reject(n)})),x=Object.create(null),P=Object.create(null),O=new l.LinkedMap,i.func(t.dispose)&&t.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{$(),function(){if(j())throw new y(g.AlreadyListening,"Connection is already listening")}(),D=v.Listening,e.listen(z)},inspect:()=>{console.log("inspect")}};return X.onNotification(m.type,(e=>{I!==p.Off&&C&&C.log(e.message,I===p.Verbose?e.verbose:void 0)})),X}t.ConnectionError=y,(t.ConnectionStrategy||(t.ConnectionStrategy={})).is=function(e){let t=e;return t&&i.func(t.cancelUndispatched)},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(v||(v={})),t.createMessageConnection=function(e,n,r,i){r||(r=t.NullLogger);let o=void 0!==(c=e).listen&&void 0===c.read?e:new s.StreamMessageReader(e);var c;let u=function(e){return void 0!==e.write&&void 0===e.end}(n)?n:new a.StreamMessageWriter(n);return _(o,u,r,i)}},6386:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3680),i=n(2593);let o=8192,s=Buffer.from("\r","ascii")[0],a=Buffer.from("\n","ascii")[0];class c{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(o)}append(e){var t=e;if("string"==typeof e){var n=e,r=Buffer.byteLength(n,this.encoding);(t=Buffer.allocUnsafe(r)).write(n,0,r,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var i=(Math.ceil((this.index+t.length)/o)+1)*o;0===this.index?(this.buffer=Buffer.allocUnsafe(i),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],i)}this.index+=t.length}tryReadHeaders(){let e,t=0;for(;t+3<this.index&&(this.buffer[t]!==s||this.buffer[t+1]!==a||this.buffer[t+2]!==s||this.buffer[t+3]!==a);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach((t=>{let n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let r=t.substr(0,n),i=t.substr(n+1).trim();e[r]=i}));let n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)};class u{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader recevied error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=u;class l extends u{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new c(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",(e=>{this.onData(e)})),this.readable.on("error",(e=>this.fireError(e))),this.readable.on("close",(()=>this.fireClose()))}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(t);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=l,t.IPCMessageReader=class extends u{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){this.process.on("message",e)}},t.SocketMessageReader=class extends l{constructor(e,t="utf-8"){super(e,t)}}},9725:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3680),i=n(2593);let o="Content-Length: ",s="\r\n";(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)};class a{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer recevied error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=a,t.StreamMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",(e=>this.fireError(e))),this.writable.on("close",(()=>this.fireClose()))}write(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[o,n.toString(),s,s];try{this.writable.write(r.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}},t.IPCMessageWriter=class extends a{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,(t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}},t.SocketMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",(e=>this.fireError(e))),this.socket.on("close",(()=>this.fireClose()))}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[o,n.toString(),s,s];try{this.sending=!0,this.socket.write(r.join(""),"ascii",(n=>{n&&this.handleError(n,e);try{this.socket.write(t,this.encoding,(t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(n){this.handleError(n,e)}}))}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},3234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2593);var i;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(i=t.ErrorCodes||(t.ErrorCodes={}));class o extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,o.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=o;class s{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=s,t.RequestType0=class extends s{constructor(e){super(e,0),this._=void 0}},t.RequestType=class extends s{constructor(e){super(e,1),this._=void 0}},t.RequestType1=class extends s{constructor(e){super(e,1),this._=void 0}},t.RequestType2=class extends s{constructor(e){super(e,2),this._=void 0}},t.RequestType3=class extends s{constructor(e){super(e,3),this._=void 0}},t.RequestType4=class extends s{constructor(e){super(e,4),this._=void 0}},t.RequestType5=class extends s{constructor(e){super(e,5),this._=void 0}},t.RequestType6=class extends s{constructor(e){super(e,6),this._=void 0}},t.RequestType7=class extends s{constructor(e){super(e,7),this._=void 0}},t.RequestType8=class extends s{constructor(e){super(e,8),this._=void 0}},t.RequestType9=class extends s{constructor(e){super(e,9),this._=void 0}},t.NotificationType=class extends s{constructor(e){super(e,1),this._=void 0}},t.NotificationType0=class extends s{constructor(e){super(e,0),this._=void 0}},t.NotificationType1=class extends s{constructor(e){super(e,1),this._=void 0}},t.NotificationType2=class extends s{constructor(e){super(e,2),this._=void 0}},t.NotificationType3=class extends s{constructor(e){super(e,3),this._=void 0}},t.NotificationType4=class extends s{constructor(e){super(e,4),this._=void 0}},t.NotificationType5=class extends s{constructor(e){super(e,5),this._=void 0}},t.NotificationType6=class extends s{constructor(e){super(e,6),this._=void 0}},t.NotificationType7=class extends s{constructor(e){super(e,7),this._=void 0}},t.NotificationType8=class extends s{constructor(e){super(e,8),this._=void 0}},t.NotificationType9=class extends s{constructor(e){super(e,9),this._=void 0}},t.isRequestMessage=function(e){let t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&r.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},3377:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1017),i=n(2037),o=n(6113),s=n(1808),a=n(6386),c=n(9725);t.generateRandomPipeName=function(){const e=o.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:r.join(i.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n,r=new Promise(((e,t)=>{n=e}));return new Promise(((i,o)=>{let u=s.createServer((e=>{u.close(),n([new a.SocketMessageReader(e,t),new c.SocketMessageWriter(e,t)])}));u.on("error",o),u.listen(e,(()=>{u.removeListener("error",o),i({onConnected:()=>r})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const n=s.createConnection(e);return[new a.SocketMessageReader(n,t),new c.SocketMessageWriter(n,t)]}},1609:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1808),i=n(6386),o=n(9725);t.createClientSocketTransport=function(e,t="utf-8"){let n,s=new Promise(((e,t)=>{n=e}));return new Promise(((a,c)=>{let u=r.createServer((e=>{u.close(),n([new i.SocketMessageReader(e,t),new o.SocketMessageWriter(e,t)])}));u.on("error",c),u.listen(e,"127.0.0.1",(()=>{u.removeListener("error",c),a({onConnected:()=>s})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const n=r.createConnection(e,"127.0.0.1");return[new i.SocketMessageReader(n,t),new o.SocketMessageWriter(n,t)]}},5620:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9496),i=n(4192),o=n(7620),s=n(3101),a=n(2097),c=n(3299),u=n(2884);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(4192));class l{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}}var d,p,h,f,m;!function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"}(d=t.ErrorAction||(t.ErrorAction={})),function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"}(p=t.CloseAction||(t.CloseAction={}));class g{constructor(e){this.name=e,this.restarts=[]}error(e,t,n){return n&&n<=3?d.Continue:d.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<5?p.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?(r.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),p.DoNotRestart):(this.restarts.shift(),p.Restart)}}!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"}(h=t.RevealOutputChannelOn||(t.RevealOutputChannelOn={})),function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"}(f=t.State||(t.State={})),function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.StartFailed=2]="StartFailed",e[e.Running=3]="Running",e[e.Stopping=4]="Stopping",e[e.Stopped=5]="Stopped"}(m||(m={}));const v=[i.SymbolKind.File,i.SymbolKind.Module,i.SymbolKind.Namespace,i.SymbolKind.Package,i.SymbolKind.Class,i.SymbolKind.Method,i.SymbolKind.Property,i.SymbolKind.Field,i.SymbolKind.Constructor,i.SymbolKind.Enum,i.SymbolKind.Interface,i.SymbolKind.Function,i.SymbolKind.Variable,i.SymbolKind.Constant,i.SymbolKind.String,i.SymbolKind.Number,i.SymbolKind.Boolean,i.SymbolKind.Array,i.SymbolKind.Object,i.SymbolKind.Key,i.SymbolKind.Null,i.SymbolKind.EnumMember,i.SymbolKind.Struct,i.SymbolKind.Event,i.SymbolKind.Operator,i.SymbolKind.TypeParameter],y=[i.CompletionItemKind.Text,i.CompletionItemKind.Method,i.CompletionItemKind.Function,i.CompletionItemKind.Constructor,i.CompletionItemKind.Field,i.CompletionItemKind.Variable,i.CompletionItemKind.Class,i.CompletionItemKind.Interface,i.CompletionItemKind.Module,i.CompletionItemKind.Property,i.CompletionItemKind.Unit,i.CompletionItemKind.Value,i.CompletionItemKind.Enum,i.CompletionItemKind.Keyword,i.CompletionItemKind.Snippet,i.CompletionItemKind.Color,i.CompletionItemKind.File,i.CompletionItemKind.Reference,i.CompletionItemKind.Folder,i.CompletionItemKind.EnumMember,i.CompletionItemKind.Constant,i.CompletionItemKind.Struct,i.CompletionItemKind.Event,i.CompletionItemKind.Operator,i.CompletionItemKind.TypeParameter];function _(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var b;!function(e){e.is=function(e){let t=e;return t&&a.func(t.register)&&a.func(t.unregister)&&a.func(t.dispose)&&void 0!==t.messages}}(b||(b={}));class E{constructor(e,t,n,r,i,o){this._client=e,this._event=t,this._type=n,this._middleware=r,this._createParams=i,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,t){for(const n of e)if(r.languages.match(n,t))return!0;return!1}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){this._selectorFilter&&!this._selectorFilter(this._selectors.values(),e)||(this._middleware?this._middleware(e,(e=>this._client.sendNotification(this._type,this._createParams(e)))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class S extends E{constructor(e,t){super(e,r.workspace.onDidOpenTextDocument,i.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,(t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t)),E.textDocumentFilter),this._syncedDocuments=t}get messages(){return i.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){_(_(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){if(super.register(e,t),!t.registerOptions.documentSelector)return;let n=t.registerOptions.documentSelector;r.workspace.textDocuments.forEach((e=>{let t=e.uri.toString();if(!this._syncedDocuments.has(t)&&r.languages.match(n,e)){let n=this._client.clientOptions.middleware,r=e=>{this._client.sendNotification(this._type,this._createParams(e))};n.didOpen?n.didOpen(e,r):r(e),this._syncedDocuments.set(t,e)}}))}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}}class w extends E{constructor(e,t){super(e,r.workspace.onDidCloseTextDocument,i.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,(t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t)),E.textDocumentFilter),this._syncedDocuments=t}get messages(){return i.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){_(_(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach((e=>{if(r.languages.match(t,e)&&!this._selectorFilter(n,e)){let t=this._client.clientOptions.middleware,n=e=>{this._client.sendNotification(this._type,this._createParams(e))};this._syncedDocuments.delete(e.uri.toString()),t.didClose?t.didClose(e,n):n(e)}}))}}class C{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return i.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){_(_(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&void 0!==n.change&&n.change!==i.TextDocumentSyncKind.None&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=r.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(e){if(0!==e.contentChanges.length)for(const t of this._changeData.values())if(r.languages.match(t.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(t.syncKind===i.TextDocumentSyncKind.Incremental){let t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,(()=>this._client.sendNotification(i.DidChangeTextDocumentNotification.type,t))):this._client.sendNotification(i.DidChangeTextDocumentNotification.type,t)}else if(t.syncKind===i.TextDocumentSyncKind.Full){let t=e=>{this._changeDelayer?(this._changeDelayer.uri!==e.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=e.document.uri.toString()),this._changeDelayer.delayer.trigger((()=>{this._client.sendNotification(i.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))}))):(this._changeDelayer={uri:e.document.uri.toString(),delayer:new c.Delayer(200)},this._changeDelayer.delayer.trigger((()=>{this._client.sendNotification(i.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))}),-1))};n.didChange?n.didChange(e,t):t(e)}}}unregister(e){this._changeData.delete(e),0===this._changeData.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!this._forcingDelivery&&this._changeDelayer)try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}}class T extends E{constructor(e){super(e,r.workspace.onWillSaveTextDocument,i.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,(t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t)),((e,t)=>E.textDocumentFilter(e,t.document)))}get messages(){return i.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){_(_(e,"textDocument"),"synchronization").willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}}class R{constructor(e){this._client=e,this._selectors=new Map}get messages(){return i.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){_(_(e,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=r.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){if(E.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,n=e=>this._client.sendRequest(i.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then((e=>{let t=this._client.protocol2CodeConverter.asTextEdits(e);return void 0===t?[]:t}));e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class O extends E{constructor(e){super(e,r.workspace.onDidSaveTextDocument,i.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,(t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText)),E.textDocumentFilter)}get messages(){return i.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){_(_(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.save&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{includeText:!!n.save.includeText})})}register(e,t){this._includeText=!!t.registerOptions.includeText,super.register(e,t)}}class x{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get messages(){return i.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){_(_(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e,t){if(!Array.isArray(t.registerOptions.watchers))return;let n=[];for(let e of t.registerOptions.watchers){if(!a.string(e.globPattern))continue;let t=!0,o=!0,s=!0;void 0!==e.kind&&null!==e.kind&&(t=0!=(e.kind&i.WatchKind.Create),o=0!=(e.kind&i.WatchKind.Change),s=0!=(e.kind&i.WatchKind.Delete));let c=r.workspace.createFileSystemWatcher(e.globPattern,!t,!o,!s);this.hookListeners(c,t,o,s),n.push(c)}this._watchers.set(t.id,n)}registerRaw(e,t){let n=[];for(let e of t)this.hookListeners(e,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,r,o){t&&e.onDidCreate((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Created})),null,o),n&&e.onDidChange((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Changed})),null,o),r&&e.onDidDelete((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Deleted})),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let e of t)e.dispose()}dispose(){this._watchers.forEach((e=>{for(let t of e)t.dispose()})),this._watchers.clear()}}class P{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!t.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach((e=>{e.dispose()})),this._providers.clear()}}t.TextDocumentFeature=P;class I{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach((e=>{e.dispose()})),this._providers.clear()}}class A extends P{constructor(e){super(e,i.CompletionRequest.type)}fillClientCapabilities(e){let t=_(_(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0},t.completionItemKind={valueSet:y}}initialize(e,t){e.completionProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.completionProvider)})}registerLanguageProvider(e){let t=e.triggerCharacters||[],n=this._client,o=(e,t,r,o)=>n.sendRequest(i.CompletionRequest.type,n.code2ProtocolConverter.asCompletionParams(e,t,r),o).then(n.protocol2CodeConverter.asCompletionResult,(e=>(n.logFailedRequest(i.CompletionRequest.type,e),Promise.resolve([])))),s=(e,t)=>n.sendRequest(i.CompletionResolveRequest.type,n.code2ProtocolConverter.asCompletionItem(e),t).then(n.protocol2CodeConverter.asCompletionItem,(t=>(n.logFailedRequest(i.CompletionResolveRequest.type,t),Promise.resolve(e)))),a=this._client.clientOptions.middleware;return r.languages.registerCompletionItemProvider(e.documentSelector,{provideCompletionItems:(e,t,n,r)=>a.provideCompletionItem?a.provideCompletionItem(e,t,r,n,o):o(e,t,r,n),resolveCompletionItem:e.resolveProvider?(e,t)=>a.resolveCompletionItem?a.resolveCompletionItem(e,t,s):s(e,t):void 0},...t)}}class D extends P{constructor(e){super(e,i.HoverRequest.type)}fillClientCapabilities(e){const t=_(_(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[i.MarkupKind.Markdown,i.MarkupKind.PlainText]}initialize(e,t){e.hoverProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.HoverRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asHover,(e=>(t.logFailedRequest(i.HoverRequest.type,e),Promise.resolve(null)))),o=t.clientOptions.middleware;return r.languages.registerHoverProvider(e.documentSelector,{provideHover:(e,t,r)=>o.provideHover?o.provideHover(e,t,r,n):n(e,t,r)})}}class N extends P{constructor(e){super(e,i.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=_(_(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0}}initialize(e,t){e.signatureHelpProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.signatureHelpProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.SignatureHelpRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asSignatureHelp,(e=>(t.logFailedRequest(i.SignatureHelpRequest.type,e),Promise.resolve(null)))),o=t.clientOptions.middleware,s=e.triggerCharacters||[];return r.languages.registerSignatureHelpProvider(e.documentSelector,{provideSignatureHelp:(e,t,r)=>o.provideSignatureHelp?o.provideSignatureHelp(e,t,r,n):n(e,t,r)},...s)}}class k extends P{constructor(e){super(e,i.DefinitionRequest.type)}fillClientCapabilities(e){let t=_(_(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){e.definitionProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.DefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,(e=>(t.logFailedRequest(i.DefinitionRequest.type,e),Promise.resolve(null)))),o=t.clientOptions.middleware;return r.languages.registerDefinitionProvider(e.documentSelector,{provideDefinition:(e,t,r)=>o.provideDefinition?o.provideDefinition(e,t,r,n):n(e,t,r)})}}class M extends P{constructor(e){super(e,i.ReferencesRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){e.referencesProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>t.sendRequest(i.ReferencesRequest.type,t.code2ProtocolConverter.asReferenceParams(e,n,r),o).then(t.protocol2CodeConverter.asReferences,(e=>(t.logFailedRequest(i.ReferencesRequest.type,e),Promise.resolve([])))),o=t.clientOptions.middleware;return r.languages.registerReferenceProvider(e.documentSelector,{provideReferences:(e,t,r,i)=>o.provideReferences?o.provideReferences(e,t,r,i,n):n(e,t,r,i)})}}class L extends P{constructor(e){super(e,i.DocumentHighlightRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){e.documentHighlightProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.DocumentHighlightRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDocumentHighlights,(e=>(t.logFailedRequest(i.DocumentHighlightRequest.type,e),Promise.resolve([])))),o=t.clientOptions.middleware;return r.languages.registerDocumentHighlightProvider(e.documentSelector,{provideDocumentHighlights:(e,t,r)=>o.provideDocumentHighlights?o.provideDocumentHighlights(e,t,r,n):n(e,t,r)})}}class F extends P{constructor(e){super(e,i.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=_(_(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:v},t.hierarchicalDocumentSymbolSupport=!0}initialize(e,t){e.documentSymbolProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.DocumentSymbolRequest.type,t.code2ProtocolConverter.asDocumentSymbolParams(e),n).then((e=>{if(null!==e){if(0===e.length)return[];{let n=e[0];return i.DocumentSymbol.is(n)?t.protocol2CodeConverter.asDocumentSymbols(e):t.protocol2CodeConverter.asSymbolInformations(e)}}}),(e=>(t.logFailedRequest(i.DocumentSymbolRequest.type,e),Promise.resolve([])))),o=t.clientOptions.middleware;return r.languages.registerDocumentSymbolProvider(e.documentSelector,{provideDocumentSymbols:(e,t)=>o.provideDocumentSymbols?o.provideDocumentSymbols(e,t,n):n(e,t)})}}class q extends I{constructor(e){super(e,i.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=_(_(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:v}}initialize(e){e.workspaceSymbolProvider&&this.register(this.messages,{id:u.generateUuid(),registerOptions:void 0})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.WorkspaceSymbolRequest.type,{query:e},n).then(t.protocol2CodeConverter.asSymbolInformations,(e=>(t.logFailedRequest(i.WorkspaceSymbolRequest.type,e),Promise.resolve([])))),o=t.clientOptions.middleware;return r.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:(e,t)=>o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(e,t,n):n(e,t)})}}class j extends P{constructor(e){super(e,i.CodeActionRequest.type)}fillClientCapabilities(e){const t=_(_(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.codeActionLiteralSupport={codeActionKind:{valueSet:["",i.CodeActionKind.QuickFix,i.CodeActionKind.Refactor,i.CodeActionKind.RefactorExtract,i.CodeActionKind.RefactorInline,i.CodeActionKind.RefactorRewrite,i.CodeActionKind.Source,i.CodeActionKind.SourceOrganizeImports]}}}initialize(e,t){if(!e.codeActionProvider||!t)return;let n;a.boolean(e.codeActionProvider)||(n=e.codeActionProvider.codeActionKinds),this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t,codeActionKinds:n}})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(n),context:t.code2ProtocolConverter.asCodeActionContext(r)};return t.sendRequest(i.CodeActionRequest.type,s,o).then((e=>{if(null===e)return;let n=[];for(let r of e)i.Command.is(r)?n.push(t.protocol2CodeConverter.asCommand(r)):n.push(t.protocol2CodeConverter.asCodeAction(r));return n}),(e=>(t.logFailedRequest(i.CodeActionRequest.type,e),Promise.resolve([]))))},o=t.clientOptions.middleware;return r.languages.registerCodeActionsProvider(e.documentSelector,{provideCodeActions:(e,t,r,i)=>o.provideCodeActions?o.provideCodeActions(e,t,r,i,n):n(e,t,r,i)},e.codeActionKinds?{providedCodeActionKinds:t.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0)}}class U extends P{constructor(e){super(e,i.CodeLensRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,t){e.codeLensProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.codeLensProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.CodeLensRequest.type,t.code2ProtocolConverter.asCodeLensParams(e),n).then(t.protocol2CodeConverter.asCodeLenses,(e=>(t.logFailedRequest(i.CodeLensRequest.type,e),Promise.resolve([])))),o=(e,n)=>t.sendRequest(i.CodeLensResolveRequest.type,t.code2ProtocolConverter.asCodeLens(e),n).then(t.protocol2CodeConverter.asCodeLens,(n=>(t.logFailedRequest(i.CodeLensResolveRequest.type,n),e))),s=t.clientOptions.middleware;return r.languages.registerCodeLensProvider(e.documentSelector,{provideCodeLenses:(e,t)=>s.provideCodeLenses?s.provideCodeLenses(e,t,n):n(e,t),resolveCodeLens:e.resolveProvider?(e,t)=>s.resolveCodeLens?s.resolveCodeLens(e,t,o):o(e,t):void 0})}}class B extends P{constructor(e){super(e,i.DocumentFormattingRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){e.documentFormattingProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),options:t.code2ProtocolConverter.asFormattingOptions(n)};return t.sendRequest(i.DocumentFormattingRequest.type,o,r).then(t.protocol2CodeConverter.asTextEdits,(e=>(t.logFailedRequest(i.DocumentFormattingRequest.type,e),Promise.resolve([]))))},o=t.clientOptions.middleware;return r.languages.registerDocumentFormattingEditProvider(e.documentSelector,{provideDocumentFormattingEdits:(e,t,r)=>o.provideDocumentFormattingEdits?o.provideDocumentFormattingEdits(e,t,r,n):n(e,t,r)})}}class V extends P{constructor(e){super(e,i.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){e.documentRangeFormattingProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(n),options:t.code2ProtocolConverter.asFormattingOptions(r)};return t.sendRequest(i.DocumentRangeFormattingRequest.type,s,o).then(t.protocol2CodeConverter.asTextEdits,(e=>(t.logFailedRequest(i.DocumentRangeFormattingRequest.type,e),Promise.resolve([]))))},o=t.clientOptions.middleware;return r.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,{provideDocumentRangeFormattingEdits:(e,t,r,i)=>o.provideDocumentRangeFormattingEdits?o.provideDocumentRangeFormattingEdits(e,t,r,i,n):n(e,t,r,i)})}}class H extends P{constructor(e){super(e,i.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){e.documentOnTypeFormattingProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentOnTypeFormattingProvider)})}registerLanguageProvider(e){let t=this._client,n=e.moreTriggerCharacter||[],o=(e,n,r,o,s)=>{let a={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n),ch:r,options:t.code2ProtocolConverter.asFormattingOptions(o)};return t.sendRequest(i.DocumentOnTypeFormattingRequest.type,a,s).then(t.protocol2CodeConverter.asTextEdits,(e=>(t.logFailedRequest(i.DocumentOnTypeFormattingRequest.type,e),Promise.resolve([]))))},s=t.clientOptions.middleware;return r.languages.registerOnTypeFormattingEditProvider(e.documentSelector,{provideOnTypeFormattingEdits:(e,t,n,r,i)=>s.provideOnTypeFormattingEdits?s.provideOnTypeFormattingEdits(e,t,n,r,i,o):o(e,t,n,r,i)},e.firstTriggerCharacter,...n)}}class z extends P{constructor(e){super(e,i.RenameRequest.type)}fillClientCapabilities(e){let t=_(_(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0}initialize(e,t){if(!e.renameProvider||!t)return;let n=Object.assign({},{documentSelector:t});a.boolean(e.renameProvider)?n.prepareProvider=!1:n.prepareProvider=e.renameProvider.prepareProvider,this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n),newName:r};return t.sendRequest(i.RenameRequest.type,s,o).then(t.protocol2CodeConverter.asWorkspaceEdit,(e=>(t.logFailedRequest(i.RenameRequest.type,e),Promise.reject(new Error(e.message)))))},o=(e,n,r)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n)};return t.sendRequest(i.PrepareRenameRequest.type,o,r).then((e=>i.Range.is(e)?t.protocol2CodeConverter.asRange(e):e&&e.range?{range:t.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}:null),(e=>(t.logFailedRequest(i.PrepareRenameRequest.type,e),Promise.reject(new Error(e.message)))))},s=t.clientOptions.middleware;return r.languages.registerRenameProvider(e.documentSelector,{provideRenameEdits:(e,t,r,i)=>s.provideRenameEdits?s.provideRenameEdits(e,t,r,i,n):n(e,t,r,i),prepareRename:e.prepareProvider?(e,t,n)=>s.prepareRename?s.prepareRename(e,t,n,o):o(e,t,n):void 0})}}class G extends P{constructor(e){super(e,i.DocumentLinkRequest.type)}fillClientCapabilities(e){_(_(e,"textDocument"),"documentLink").dynamicRegistration=!0}initialize(e,t){e.documentLinkProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentLinkProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.DocumentLinkRequest.type,t.code2ProtocolConverter.asDocumentLinkParams(e),n).then(t.protocol2CodeConverter.asDocumentLinks,(e=>{t.logFailedRequest(i.DocumentLinkRequest.type,e),Promise.resolve(new Error(e.message))})),o=(e,n)=>t.sendRequest(i.DocumentLinkResolveRequest.type,t.code2ProtocolConverter.asDocumentLink(e),n).then(t.protocol2CodeConverter.asDocumentLink,(e=>{t.logFailedRequest(i.DocumentLinkResolveRequest.type,e),Promise.resolve(new Error(e.message))})),s=t.clientOptions.middleware;return r.languages.registerDocumentLinkProvider(e.documentSelector,{provideDocumentLinks:(e,t)=>s.provideDocumentLinks?s.provideDocumentLinks(e,t,n):n(e,t),resolveDocumentLink:e.resolveProvider?(e,t)=>s.resolveDocumentLink?s.resolveDocumentLink(e,t,o):o(e,t):void 0})}}class K{constructor(e){this._client=e,this._listeners=new Map}get messages(){return i.DidChangeConfigurationNotification.type}fillClientCapabilities(e){_(_(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;void 0!==e&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{section:e}})}register(e,t){let n=r.workspace.onDidChangeConfiguration((e=>{this.onDidChangeConfiguration(t.registerOptions.section,e)}));this._listeners.set(t.id,n),void 0!==t.registerOptions.section&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(n=a.string(e)?[e]:e,void 0!==n&&void 0!==t&&!n.some((e=>t.affectsConfiguration(e))))return;let r=e=>{void 0!==e?this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)}):this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:null})},o=this.getMiddleware();o?o(n,r):r(n)}extractSettingsInformation(e){function t(e,t){let n=e;for(let e=0;e<t.length-1;e++){let r=n[t[e]];r||(r=Object.create(null),n[t[e]]=r),n=r}return n}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],a=s.indexOf("."),c=null;if(c=a>=0?r.workspace.getConfiguration(s.substr(0,a),n).get(s.substr(a+1)):r.workspace.getConfiguration(s,n),c){let n=e[o].split(".");t(i,n)[n[n.length-1]]=c}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;return e.workspace&&e.workspace.didChangeConfiguration?e.workspace.didChangeConfiguration:void 0}}class ${constructor(e){this._client=e,this._commands=new Map}get messages(){return i.ExecuteCommandRequest.type}fillClientCapabilities(e){_(_(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,t){let n=this._client;if(t.registerOptions.commands){let e=[];for(const o of t.registerOptions.commands)e.push(r.commands.registerCommand(o,((...e)=>{let t={command:o,arguments:e};return n.sendRequest(i.ExecuteCommandRequest.type,t).then(void 0,(e=>{n.logFailedRequest(i.ExecuteCommandRequest.type,e)}))})));this._commands.set(t.id,e)}}unregister(e){let t=this._commands.get(e);t&&t.forEach((e=>e.dispose()))}dispose(){this._commands.forEach((e=>{e.forEach((e=>e.dispose()))})),this._commands.clear()}}(t.MessageTransports||(t.MessageTransports={})).is=function(e){return e&&i.MessageReader.is(e.reader)&&i.MessageWriter.is(e.writer)};class W{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}}t.BaseLanguageClient=class{constructor(e,t,n){this._traceFormat=i.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=t,n=n||{},this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||h.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,errorHandler:n.errorHandler||new g(this._name),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=m.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new c.Delayer(250),this._onReady=new Promise(((e,t)=>{this._onReadyCallbacks=new W(e,t)})),this._onStop=void 0,this._telemetryEmitter=new i.Emitter,this._stateChangeEmitter=new i.Emitter,this._tracer={log:(e,t)=>{a.string(e)?this.logTrace(e,t):this.logObjectTrace(e)}},this._c2p=o.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=s.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){return this.state===m.Running?f.Running:this.state===m.Starting?f.Starting:f.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(t){throw this.error(`Sending request ${a.string(e)?e:e.method} failed.`,t),t}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,t)}catch(t){throw this.error(`Registering request handler ${a.string(e)?e:e.method} failed.`,t),t}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(t){throw this.error(`Sending notification ${a.string(e)?e:e.method} failed.`,t),t}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,t)}catch(t){throw this.error(`Registering notification handler ${a.string(e)?e:e.method} failed.`,t),t}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=r.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new g(this._name)}set trace(e){this._trace=e,this.onReady().then((()=>{this.resolveConnection().then((e=>{e.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}))}),(()=>{}))}data2String(e){if(e instanceof i.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}return e instanceof Error?a.string(e.stack)?e.stack:e.message:a.string(e)?e:e.toString()}info(e,t){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=h.Info&&this.outputChannel.show(!0)}warn(e,t){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=h.Warn&&this.outputChannel.show(!0)}error(e,t){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=h.Error&&this.outputChannel.show(!0)}logTrace(e,t){this.outputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.outputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `):this.outputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `),e&&this.outputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===m.Initial||this.state===m.Stopping||this.state===m.Stopped}needsStop(){return this.state===m.Starting||this.state===m.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===m.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise(((e,t)=>{this._onReadyCallbacks=new W(e,t)}))),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?r.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):r.languages.createDiagnosticCollection()),this.state=m.Starting,this.resolveConnection().then((e=>(e.onLogMessage((e=>{switch(e.type){case i.MessageType.Error:this.error(e.message);break;case i.MessageType.Warning:this.warn(e.message);break;case i.MessageType.Info:this.info(e.message);break;default:this.outputChannel.appendLine(e.message)}})),e.onShowMessage((e=>{switch(e.type){case i.MessageType.Error:r.window.showErrorMessage(e.message);break;case i.MessageType.Warning:r.window.showWarningMessage(e.message);break;case i.MessageType.Info:default:r.window.showInformationMessage(e.message)}})),e.onRequest(i.ShowMessageRequest.type,(e=>{let t;switch(e.type){case i.MessageType.Error:t=r.window.showErrorMessage;break;case i.MessageType.Warning:t=r.window.showWarningMessage;break;case i.MessageType.Info:default:t=r.window.showInformationMessage}let n=e.actions||[];return t(e.message,...n)})),e.onTelemetry((e=>{this._telemetryEmitter.fire(e)})),e.listen(),this.initialize(e)))).then(void 0,(e=>{this.state=m.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),r.window.showErrorMessage(`Couldn't start client ${this._name}`)})),new r.Disposable((()=>{this.needsStop()&&this.stop()}))}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),o={processId:process.pid,rootPath:n||null,rootUri:n?this._c2p.asUri(r.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:a.func(t)?t():t,trace:i.Trace.toString(this._trace),workspaceFolders:null};return this.fillInitializeParams(o),e.initialize(o).then((t=>{let n;return this._resolvedConnection=e,this._initializeResult=t,this.state=m.Running,a.number(t.capabilities.textDocumentSync)?n=t.capabilities.textDocumentSync===i.TextDocumentSyncKind.None?{openClose:!1,change:i.TextDocumentSyncKind.None,save:void 0}:{openClose:!0,change:t.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==t.capabilities.textDocumentSync&&null!==t.capabilities.textDocumentSync&&(n=t.capabilities.textDocumentSync),this._capabilities=Object.assign({},t.capabilities,{resolvedTextDocumentSync:n}),e.onDiagnostics((e=>this.handleDiagnostics(e))),e.onRequest(i.RegistrationRequest.type,(e=>this.handleRegistrationRequest(e))),e.onRequest("client/registerFeature",(e=>this.handleRegistrationRequest(e))),e.onRequest(i.UnregistrationRequest.type,(e=>this.handleUnregistrationRequest(e))),e.onRequest("client/unregisterFeature",(e=>this.handleUnregistrationRequest(e))),e.onRequest(i.ApplyWorkspaceEditRequest.type,(e=>this.handleApplyWorkspaceEdit(e))),e.sendNotification(i.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),t})).then(void 0,(t=>{this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(t)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t)):t instanceof i.ResponseError&&t.data&&t.data.retry?r.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then((n=>{n&&"retry"===n.id?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t))})):(t&&t.message&&r.window.showErrorMessage(t.message),this.error("Server initialization failed.",t),this.stop(),this._onReadyCallbacks.reject(t))}))}_clientGetRootPath(){let e=r.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===m.Stopping&&this._onStop?this._onStop:(this.state=m.Stopping,this.cleanUp(),this._onStop=this.resolveConnection().then((e=>e.shutdown().then((()=>{e.exit(),e.dispose(),this.state=m.Stopped,this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))))):(this.state=m.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach((e=>e.dispose())),this._listeners=void 0),this._providers&&(this._providers.forEach((e=>e.dispose())),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let e of this._dynamicFeatures.values())e.dispose();e&&this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}notifyFileEvent(e){this._fileEvents.push(e),this._fileEventDelayer.trigger((()=>{this.onReady().then((()=>{this.resolveConnection().then((e=>{this.isConnectionActive()&&e.didChangeWatchedFiles({changes:this._fileEvents}),this._fileEvents=[]}))}),(e=>{this.error("Notify file events failed.",e)}))}))}forceDocumentSync(){this._dynamicFeatures.get(i.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),r=this.clientOptions.middleware.handleDiagnostics;r?r(t,n,((e,t)=>this.setDiagnostics(e,t))):this.setDiagnostics(t,n)}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}createConnection(){let e=(e,t,n)=>{this.handleConnectionError(e,t,n)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then((n=>function(e,t,n,r){let o=new l,s=i.createProtocolConnection(e,t,o);return s.onError((e=>{n(e[0],e[1],e[2])})),s.onClose(r),{listen:()=>s.listen(),sendRequest:(e,...t)=>s.sendRequest(a.string(e)?e:e.method,...t),onRequest:(e,t)=>s.onRequest(a.string(e)?e:e.method,t),sendNotification:(e,t)=>s.sendNotification(a.string(e)?e:e.method,t),onNotification:(e,t)=>s.onNotification(a.string(e)?e:e.method,t),trace:(e,t,n)=>{const r={sendNotification:!1,traceFormat:i.TraceFormat.Text};void 0===n?s.trace(e,t,r):(a.boolean(n),s.trace(e,t,n))},initialize:e=>s.sendRequest(i.InitializeRequest.type,e),shutdown:()=>s.sendRequest(i.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(i.ExitNotification.type),onLogMessage:e=>s.onNotification(i.LogMessageNotification.type,e),onShowMessage:e=>s.onNotification(i.ShowMessageNotification.type,e),onTelemetry:e=>s.onNotification(i.TelemetryEventNotification.type,e),didChangeConfiguration:e=>s.sendNotification(i.DidChangeConfigurationNotification.type,e),didChangeWatchedFiles:e=>s.sendNotification(i.DidChangeWatchedFilesNotification.type,e),didOpenTextDocument:e=>s.sendNotification(i.DidOpenTextDocumentNotification.type,e),didChangeTextDocument:e=>s.sendNotification(i.DidChangeTextDocumentNotification.type,e),didCloseTextDocument:e=>s.sendNotification(i.DidCloseTextDocumentNotification.type,e),didSaveTextDocument:e=>s.sendNotification(i.DidSaveTextDocumentNotification.type,e),onDiagnostics:e=>s.onNotification(i.PublishDiagnosticsNotification.type,e),dispose:()=>s.dispose()}}(n.reader,n.writer,e,t)))}handleConnectionClosed(){if(this.state===m.Stopping||this.state===m.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch(e){}let e=p.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch(e){}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===p.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=m.Stopped,this.cleanUp(!1,!0)):e===p.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=m.Initial,this.start())}handleConnectionError(e,t,n){this._clientOptions.errorHandler.error(e,t,n)===d.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){r.workspace.onDidChangeConfiguration((()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,t=!1){let n=r.workspace.getConfiguration(this._id),o=i.Trace.Off,s=i.TraceFormat.Text;if(n){const e=n.get("trace.server","off");"string"==typeof e?o=i.Trace.fromString(e):(o=i.Trace.fromString(n.get("trace.server.verbosity","off")),s=i.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=o,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t,n=this._clientOptions.synchronize.fileEvents;n&&(t=a.array(n)?n:[n],t&&this._dynamicFeatures.get(i.DidChangeWatchedFilesNotification.type.method).registerRaw(u.generateUuid(),t))}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),b.is(e)){let t=e.messages;if(Array.isArray(t))for(let n of t)this._method2Message.set(n.method,n),this._dynamicFeatures.set(n.method,e);else this._method2Message.set(t.method,t),this._dynamicFeatures.set(t.method,e)}}registerBuiltinFeatures(){this.registerFeature(new K(this)),this.registerFeature(new S(this,this._syncedDocuments)),this.registerFeature(new C(this)),this.registerFeature(new T(this)),this.registerFeature(new R(this)),this.registerFeature(new O(this)),this.registerFeature(new w(this,this._syncedDocuments)),this.registerFeature(new x(this,(e=>this.notifyFileEvent(e)))),this.registerFeature(new A(this)),this.registerFeature(new D(this)),this.registerFeature(new N(this)),this.registerFeature(new k(this)),this.registerFeature(new M(this)),this.registerFeature(new L(this)),this.registerFeature(new F(this)),this.registerFeature(new q(this)),this.registerFeature(new j(this)),this.registerFeature(new U(this)),this.registerFeature(new B(this)),this.registerFeature(new V(this)),this.registerFeature(new H(this)),this.registerFeature(new z(this)),this.registerFeature(new G(this)),this.registerFeature(new $(this))}fillInitializeParams(e){for(let t of this._features)a.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};_(e,"workspace").applyEdit=!0;let t=_(_(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[i.ResourceOperationKind.Create,i.ResourceOperationKind.Rename,i.ResourceOperationKind.Delete],t.failureHandling=i.FailureHandlingKind.TextOnlyTransactional,_(_(e,"textDocument"),"publishDiagnostics").relatedInformation=!0;for(let t of this._features)t.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let e of this._features)e.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise(((t,n)=>{for(let t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(!e)return void n(new Error(`No feature implementation for ${t.method} found. Registration failed.`));const r=t.registerOptions||{};r.documentSelector=r.documentSelector||this._clientOptions.documentSelector;const i={id:t.id,registerOptions:r};e.register(this._method2Message.get(t.method),i)}t()}))}handleUnregistrationRequest(e){return new Promise(((t,n)=>{for(let t of e.unregisterations){const e=this._dynamicFeatures.get(t.method);if(!e)return void n(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));e.unregister(t.id)}t()}))}handleApplyWorkspaceEdit(e){let t=e.edit,n=new Map;r.workspace.textDocuments.forEach((e=>n.set(e.uri.toString(),e)));let o=!1;if(t.documentChanges)for(const e of t.documentChanges)if(i.TextDocumentEdit.is(e)&&e.textDocument.version&&e.textDocument.version>=0){let t=n.get(e.textDocument.uri);if(t&&t.version!==e.textDocument.version){o=!0;break}}return o?Promise.resolve({applied:!1}):r.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then((e=>({applied:e})))}logFailedRequest(e,t){t instanceof i.ResponseError&&t.code===i.ErrorCodes.RequestCancelled||this.error(`Request ${e.method} failed.`,t)}}},7620:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9496),i=n(4192),o=n(2097),s=n(213),a=n(5628),c=n(6653);t.createConverter=function(e){const t=e||(e=>e.toString());function n(e){return t(e)}function u(e){return{uri:t(e.uri)}}function l(e){return{uri:t(e.uri),version:e.version}}function d(e){switch(e){case r.TextDocumentSaveReason.Manual:return i.TextDocumentSaveReason.Manual;case r.TextDocumentSaveReason.AfterDelay:return i.TextDocumentSaveReason.AfterDelay;case r.TextDocumentSaveReason.FocusOut:return i.TextDocumentSaveReason.FocusOut}return i.TextDocumentSaveReason.Manual}function p(e){switch(e){case r.CompletionTriggerKind.TriggerCharacter:return i.CompletionTriggerKind.TriggerCharacter;case r.CompletionTriggerKind.TriggerForIncompleteCompletions:return i.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return i.CompletionTriggerKind.Invoked}}function h(e){return{line:e.line,character:e.character}}function f(e){if(void 0!==e)return null===e?null:{line:e.line,character:e.character}}function m(e){return null==e?e:{start:f(e.start),end:f(e.end)}}function g(e){switch(e){case r.DiagnosticSeverity.Error:return i.DiagnosticSeverity.Error;case r.DiagnosticSeverity.Warning:return i.DiagnosticSeverity.Warning;case r.DiagnosticSeverity.Information:return i.DiagnosticSeverity.Information;case r.DiagnosticSeverity.Hint:return i.DiagnosticSeverity.Hint}}function v(e){let t=i.Diagnostic.create(m(e.range),e.message);return o.number(e.severity)&&(t.severity=g(e.severity)),(o.number(e.code)||o.string(e.code))&&(t.code=e.code),e.source&&(t.source=e.source),t}function y(e){return null==e?e:e.map(v)}function _(e){return{range:m(e.range),newText:e.newText}}function b(e){let t=i.Command.create(e.title,e.command);return e.arguments&&(t.arguments=e.arguments),t}return{asUri:n,asTextDocumentIdentifier:u,asVersionedTextDocumentIdentifier:l,asOpenTextDocumentParams:function(e){return{textDocument:{uri:t(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}},asChangeTextDocumentParams:function(e){if(function(e){let t=e;return!!t.uri&&!!t.version}(e))return{textDocument:{uri:t(e.uri),version:e.version},contentChanges:[{text:e.getText()}]};if(function(e){let t=e;return!!t.document&&!!t.contentChanges}(e)){let n=e.document;return{textDocument:{uri:t(n.uri),version:n.version},contentChanges:e.contentChanges.map((e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}}))}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(e){return{textDocument:u(e)}},asSaveTextDocumentParams:function(e,t=!1){let n={textDocument:l(e)};return t&&(n.text=e.getText()),n},asWillSaveTextDocumentParams:function(e){return{textDocument:u(e.document),reason:d(e.reason)}},asTextDocumentPositionParams:function(e,t){return{textDocument:u(e),position:h(t)}},asCompletionParams:function(e,t,n){return{textDocument:u(e),position:h(t),context:{triggerKind:p(n.triggerKind),triggerCharacter:n.triggerCharacter}}},asWorkerPosition:h,asRange:m,asPosition:f,asDiagnosticSeverity:g,asDiagnostic:v,asDiagnostics:y,asCompletionItem:function(e){let t={label:e.label},n=e instanceof s.default?e:void 0;var a,c,u;return e.detail&&(t.detail=e.detail),e.documentation&&(n&&"$string"!==n.documentationFormat?t.documentation=function(e,t){switch(e){case"$string":return t;case i.MarkupKind.PlainText:return{kind:e,value:t};case i.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}(n.documentationFormat,e.documentation):t.documentation=e.documentation),e.filterText&&(t.filterText=e.filterText),function(e,t){let n,o,s=i.InsertTextFormat.PlainText;t.textEdit?(n=t.textEdit.newText,o=m(t.textEdit.range)):t.insertText instanceof r.SnippetString?(s=i.InsertTextFormat.Snippet,n=t.insertText.value):n=t.insertText,t.range&&(o=m(t.range)),e.insertTextFormat=s,t.fromEdit&&n&&o?e.textEdit={newText:n,range:o}:e.insertText=n}(t,e),o.number(e.kind)&&(t.kind=(a=e.kind,void 0!==(c=n&&n.originalItemKind)?c:a+1)),e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=null==(u=e.additionalTextEdits)?u:u.map(_)),e.commitCharacters&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=b(e.command)),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect),n&&(void 0!==n.data&&(t.data=n.data),!0!==n.deprecated&&!1!==n.deprecated||(t.deprecated=n.deprecated)),t},asTextEdit:_,asReferenceParams:function(e,t,n){return{textDocument:u(e),position:h(t),context:{includeDeclaration:n.includeDeclaration}}},asCodeActionContext:function(e){return null==e?e:i.CodeActionContext.create(y(e.diagnostics),o.string(e.only)?[e.only]:void 0)},asCommand:b,asCodeLens:function(e){let t=i.CodeLens.create(m(e.range));return e.command&&(t.command=b(e.command)),e instanceof a.default&&e.data&&(t.data=e.data),t},asFormattingOptions:function(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces}},asDocumentSymbolParams:function(e){return{textDocument:u(e)}},asCodeLensParams:function(e){return{textDocument:u(e)}},asDocumentLink:function(e){let t=i.DocumentLink.create(m(e.range));e.target&&(t.target=n(e.target));let r=e instanceof c.default?e:void 0;return r&&r.data&&(t.data=r.data),t},asDocumentLinkParams:function(e){return{textDocument:u(e)}}}}},2101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2884),i=n(2097),o=n(9496),s=n(4192),a=n(5620);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class u extends a.TextDocumentFeature{constructor(e){super(e,s.DocumentColorRequest.type)}fillClientCapabilities(e){c(c(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){if(!e.colorProvider)return;const n=e.colorProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{const i={color:e,textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(n.document),range:t.code2ProtocolConverter.asRange(n.range)};return t.sendRequest(s.ColorPresentationRequest.type,i,r).then(this.asColorPresentations.bind(this),(e=>(t.logFailedRequest(s.ColorPresentationRequest.type,e),Promise.resolve(null))))},r=(e,n)=>{const r={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(s.DocumentColorRequest.type,r,n).then(this.asColorInformations.bind(this),(e=>(t.logFailedRequest(s.ColorPresentationRequest.type,e),Promise.resolve(null))))},i=t.clientOptions.middleware;return o.languages.registerColorProvider(e.documentSelector,{provideColorPresentations:(e,t,r)=>i.provideColorPresentations?i.provideColorPresentations(e,t,r,n):n(e,t,r),provideDocumentColors:(e,t)=>i.provideDocumentColors?i.provideDocumentColors(e,t,r):r(e,t)})}asColor(e){return new o.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map((e=>new o.ColorInformation(this._client.protocol2CodeConverter.asRange(e.range),this.asColor(e.color)))):[]}asColorPresentations(e){return Array.isArray(e)?e.map((e=>{let t=new o.ColorPresentation(e.label);return t.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(e.additionalTextEdits),t.textEdit=this._client.protocol2CodeConverter.asTextEdit(e.textEdit),t})):[]}}t.ColorProviderFeature=u},7888:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9496),i=n(4192);t.ConfigurationFeature=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(i.ConfigurationRequest.type,((t,n)=>{let r=e=>{let t=[];for(let n of e.items){let e=void 0!==n.scopeUri&&null!==n.scopeUri?this._client.protocol2CodeConverter.asUri(n.scopeUri):void 0;t.push(this.getConfiguration(e,null!==n.section?n.section:void 0))}return t},i=e.clientOptions.middleware.workspace;return i&&i.configuration?i.configuration(t,n,r):r(t)}))}getConfiguration(e,t){let n=null;if(t){let i=t.lastIndexOf(".");if(-1===i)n=r.workspace.getConfiguration(void 0,e).get(t);else{let e=r.workspace.getConfiguration(t.substr(0,i));e&&(n=e.get(t.substr(i+1)))}}else{let t=r.workspace.getConfiguration(void 0,e);n={};for(let e of Object.keys(t))t.has(e)&&(n[e]=t.get(e))}return n||null}}},7812:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2884),i=n(2097),o=n(9496),s=n(4192),a=n(5620);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class u extends a.TextDocumentFeature{constructor(e){super(e,s.DeclarationRequest.type)}fillClientCapabilities(e){let t=c(c(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.declarationProvider)if(!0===e.declarationProvider){if(!t)return;this.register(this.messages,{id:r.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.declarationProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(s.DeclarationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDeclarationResult,(e=>(t.logFailedRequest(s.DeclarationRequest.type,e),Promise.resolve(null)))),r=t.clientOptions.middleware;return o.languages.registerDeclarationProvider(e.documentSelector,{provideDeclaration:(e,t,i)=>r.provideDeclaration?r.provideDeclaration(e,t,i,n):n(e,t,i)})}}t.DeclarationFeature=u},5573:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2884),i=n(2097),o=n(9496),s=n(4192),a=n(5620);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class u extends a.TextDocumentFeature{constructor(e){super(e,s.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=c(c(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){if(!e.foldingRangeProvider)return;const n=e.foldingRangeProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{const i={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(s.FoldingRangeRequest.type,i,r).then(this.asFoldingRanges.bind(this),(e=>(t.logFailedRequest(s.FoldingRangeRequest.type,e),Promise.resolve(null))))},r=t.clientOptions.middleware;return o.languages.registerFoldingRangeProvider(e.documentSelector,{provideFoldingRanges:(e,t,i)=>r.provideFoldingRanges?r.provideFoldingRanges(e,t,i,n):n(e,0,i)})}asFoldingRangeKind(e){if(e)switch(e){case s.FoldingRangeKind.Comment:return o.FoldingRangeKind.Comment;case s.FoldingRangeKind.Imports:return o.FoldingRangeKind.Imports;case s.FoldingRangeKind.Region:return o.FoldingRangeKind.Region}}asFoldingRanges(e){return Array.isArray(e)?e.map((e=>new o.FoldingRange(e.startLine,e.endLine,this.asFoldingRangeKind(e.kind)))):[]}}t.FoldingRangeFeature=u},7391:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2884),i=n(2097),o=n(9496),s=n(4192),a=n(5620);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class u extends a.TextDocumentFeature{constructor(e){super(e,s.ImplementationRequest.type)}fillClientCapabilities(e){let t=c(c(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.implementationProvider)if(!0===e.implementationProvider){if(!t)return;this.register(this.messages,{id:r.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.implementationProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(s.ImplementationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,(e=>(t.logFailedRequest(s.ImplementationRequest.type,e),Promise.resolve(null)))),r=t.clientOptions.middleware;return o.languages.registerImplementationProvider(e.documentSelector,{provideImplementation:(e,t,i)=>r.provideImplementation?r.provideImplementation(e,t,i,n):n(e,t,i)})}}t.ImplementationFeature=u},3056:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2081),i=n(7147),o=n(3125),s=n(5620),a=n(9496),c=n(4192),u=n(2101),l=n(7888),d=n(7391),p=n(9409),h=n(4670),f=n(5573),m=n(7812),g=n(2097),v=n(9567);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(5620));const y="^1.30";var _,b,E,S,w,C,T;!function(e){e.is=function(e){return g.string(e.command)}}(_||(_={})),function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"}(b=t.TransportKind||(t.TransportKind={})),function(e){e.isSocket=function(e){let t=e;return t&&t.kind===b.socket&&g.number(t.port)}}(E||(E={})),function(e){e.is=function(e){return g.string(e.module)}}(S||(S={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.writer&&void 0!==t.reader}}(w||(w={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.process&&"boolean"==typeof t.detached}}(C||(C={}));class R extends s.BaseLanguageClient{constructor(e,t,n,r,i){let o,s,a,c,u;g.string(t)?(o=e,s=t,a=n,c=r,u=!!i):(o=e.toLowerCase(),s=e,a=t,c=n,u=r),void 0===u&&(u=!1),super(o,s,c),this._serverOptions=a,this._forceDebug=u;try{this.checkVersion()}catch(e){throw g.string(e.message)&&this.outputChannel.appendLine(e.message),e}}checkVersion(){let e=o.parse(a.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${a.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!o.satisfies(e,y))throw new Error(`The language client requires VS Code version ${y} but received version ${a.version}`)}stop(){return super.stop().then((()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,void 0!==this._isDetached&&this._isDetached||this.checkProcessDied(e),this._isDetached=void 0}}))}checkProcessDied(e){e&&setTimeout((()=>{try{process.kill(e.pid,0),v.terminate(e)}catch(e){}}),2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(e){let t,n=this._serverOptions;if(g.func(n))return n().then((t=>{if(s.MessageTransports.is(t))return this._isDetached=!!t.detached,t;if(w.is(t))return this._isDetached=!!t.detached,{reader:new c.StreamMessageReader(t.reader),writer:new c.StreamMessageWriter(t.writer)};{let n;return C.is(t)?(n=t.process,this._isDetached=t.detached):(n=t,this._isDetached=!1),n.stderr.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),{reader:new c.StreamMessageReader(n.stdout),writer:new c.StreamMessageWriter(n.stdin)}}}));let i=n;return t=i.run||i.debug?"object"==typeof v8debug||this._forceDebug||function(){let e=process.execArgv;return!!e&&e.some((e=>/^--debug=?/.test(e)||/^--debug-brk=?/.test(e)||/^--inspect=?/.test(e)||/^--inspect-brk=?/.test(e)))}()?i.debug:i.run:n,this._getServerWorkingDir(t.options).then((i=>{if(S.is(t)&&t.module){let n=t,o=n.transport||b.stdio;if(!n.runtime){let t;return new Promise(((s,a)=>{let u=n.args&&n.args.slice()||[];o===b.ipc?u.push("--node-ipc"):o===b.stdio?u.push("--stdio"):o===b.pipe?(t=c.generateRandomPipeName(),u.push(`--pipe=${t}`)):E.isSocket(o)&&u.push(`--socket=${o.port}`),u.push(`--clientProcessId=${process.pid.toString()}`);let l=n.options||Object.create(null);if(l.execArgv=l.execArgv||[],l.cwd=i,l.silent=!0,o===b.ipc||o===b.stdio){let t=r.fork(n.module,u||[],l);this._serverProcess=t,t.stderr.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),o===b.ipc?(t.stdout.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),s({reader:new c.IPCMessageReader(this._serverProcess),writer:new c.IPCMessageWriter(this._serverProcess)})):s({reader:new c.StreamMessageReader(t.stdout),writer:new c.StreamMessageWriter(t.stdin)})}else o===b.pipe?c.createClientPipeTransport(t).then((t=>{let i=r.fork(n.module,u||[],l);this._serverProcess=i,i.stderr.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),i.stdout.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),t.onConnected().then((e=>{s({reader:e[0],writer:e[1]})}))})):E.isSocket(o)&&c.createClientSocketTransport(o.port).then((t=>{let i=r.fork(n.module,u||[],l);this._serverProcess=i,i.stderr.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),i.stdout.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),t.onConnected().then((e=>{s({reader:e[0],writer:e[1]})}))}))}))}{let t=[],s=n.options||Object.create(null);s.execArgv&&s.execArgv.forEach((e=>t.push(e))),t.push(n.module),n.args&&n.args.forEach((e=>t.push(e)));let a,u=Object.create(null);if(u.cwd=i,u.env=function(e){if(!e)return process.env;let t=Object.create(null);return Object.keys(process.env).forEach((e=>t[e]=process.env[e])),Object.keys(e).forEach((n=>t[n]=e[n])),t}(s.env),o===b.ipc?(u.stdio=[null,null,null,"ipc"],t.push("--node-ipc")):o===b.stdio?t.push("--stdio"):o===b.pipe?(a=c.generateRandomPipeName(),t.push(`--pipe=${a}`)):E.isSocket(o)&&t.push(`--socket=${o.port}`),t.push(`--clientProcessId=${process.pid.toString()}`),o===b.ipc||o===b.stdio){let i=r.spawn(n.runtime,t,u);return i&&i.pid?(this._serverProcess=i,i.stderr.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),o===b.ipc?(i.stdout.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),Promise.resolve({reader:new c.IPCMessageReader(i),writer:new c.IPCMessageWriter(i)})):Promise.resolve({reader:new c.StreamMessageReader(i.stdout),writer:new c.StreamMessageWriter(i.stdin)})):Promise.reject(`Launching server using runtime ${n.runtime} failed.`)}if(o==b.pipe)return c.createClientPipeTransport(a).then((i=>{let o=r.spawn(n.runtime,t,u);return o&&o.pid?(this._serverProcess=o,o.stderr.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),o.stdout.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),i.onConnected().then((e=>({reader:e[0],writer:e[1]})))):Promise.reject(`Launching server using runtime ${n.runtime} failed.`)}));if(E.isSocket(o))return c.createClientSocketTransport(o.port).then((i=>{let o=r.spawn(n.runtime,t,u);return o&&o.pid?(this._serverProcess=o,o.stderr.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),o.stdout.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),i.onConnected().then((e=>({reader:e[0],writer:e[1]})))):Promise.reject(`Launching server using runtime ${n.runtime} failed.`)}))}}else if(_.is(t)&&t.command){let n=t,o=n.args||[],s=Object.assign({},n.options);s.cwd=s.cwd||i;let a=r.spawn(n.command,o,s);return a&&a.pid?(a.stderr.on("data",(t=>this.outputChannel.append(g.string(t)?t:t.toString(e)))),this._serverProcess=a,this._isDetached=!!s.detached,Promise.resolve({reader:new c.StreamMessageReader(a.stdout),writer:new c.StreamMessageWriter(a.stdin)})):Promise.reject(`Launching server using command ${n.command} failed.`)}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(n,null,4)))}))}registerProposedFeatures(){this.registerFeatures(T.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new l.ConfigurationFeature(this)),this.registerFeature(new p.TypeDefinitionFeature(this)),this.registerFeature(new d.ImplementationFeature(this)),this.registerFeature(new u.ColorProviderFeature(this)),this.registerFeature(new h.WorkspaceFoldersFeature(this)),this.registerFeature(new f.FoldingRangeFeature(this)),this.registerFeature(new m.DeclarationFeature(this))}_mainGetRootPath(){let e=a.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise((e=>{i.lstat(t,((n,r)=>{e(!n&&r.isDirectory()?t:void 0)}))})):Promise.resolve(void 0)}}t.LanguageClient=R,t.SettingMonitor=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return a.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new a.Disposable((()=>{this._client.needsStop()&&this._client.stop()}))}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,r=n?a.workspace.getConfiguration(t).get(n,!1):a.workspace.getConfiguration(t);r&&this._client.needsStart()?this._client.start():!r&&this._client.needsStop()&&this._client.stop()}},function(e){e.createAll=function(e){return[]}}(T=t.ProposedFeatures||(t.ProposedFeatures={}))},5628:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9496);class i extends r.CodeLens{constructor(e){super(e)}}t.default=i},213:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9496);class i extends r.CompletionItem{constructor(e){super(e)}}t.default=i},3101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9496),i=n(4192),o=n(2097),s=n(213),a=n(5628),c=n(6653);var u;!function(e){e.is=function(e){let t=e;return t&&o.string(t.language)&&o.string(t.value)}}(u||(u={})),t.createConverter=function(e){const t=e||(e=>r.Uri.parse(e));function n(e){return t(e)}function l(e){return e.map(d)}function d(e){let t=new r.Diagnostic(f(e.range),e.message,m(e.severity));return(o.number(e.code)||o.string(e.code))&&(t.code=e.code),e.source&&(t.source=e.source),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map(p)),t}function p(e){return new r.DiagnosticRelatedInformation(C(e.location),e.message)}function h(e){if(e)return new r.Position(e.line,e.character)}function f(e){if(e)return new r.Range(h(e.start),h(e.end))}function m(e){if(null==e)return r.DiagnosticSeverity.Error;switch(e){case i.DiagnosticSeverity.Error:return r.DiagnosticSeverity.Error;case i.DiagnosticSeverity.Warning:return r.DiagnosticSeverity.Warning;case i.DiagnosticSeverity.Information:return r.DiagnosticSeverity.Information;case i.DiagnosticSeverity.Hint:return r.DiagnosticSeverity.Hint}return r.DiagnosticSeverity.Error}function g(e){if(o.string(e))return e;switch(e.kind){case i.MarkupKind.Markdown:return new r.MarkdownString(e.value);case i.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}function v(e){let t=new s.default(e.label);e.detail&&(t.detail=e.detail),e.documentation&&(t.documentation=g(e.documentation),t.documentationFormat=o.string(e.documentation)?"$string":e.documentation.kind),e.filterText&&(t.filterText=e.filterText);let n=function(e){return e.textEdit?e.insertTextFormat===i.InsertTextFormat.Snippet?{text:new r.SnippetString(e.textEdit.newText),range:f(e.textEdit.range),fromEdit:!0}:{text:e.textEdit.newText,range:f(e.textEdit.range),fromEdit:!0}:e.insertText?e.insertTextFormat===i.InsertTextFormat.Snippet?{text:new r.SnippetString(e.insertText),fromEdit:!1}:{text:e.insertText,fromEdit:!1}:void 0}(e);if(n&&(t.insertText=n.text,t.range=n.range,t.fromEdit=n.fromEdit),o.number(e.kind)){let[n,o]=(a=e.kind,i.CompletionItemKind.Text<=a&&a<=i.CompletionItemKind.TypeParameter?[a-1,void 0]:[r.CompletionItemKind.Text,a]);t.kind=n,o&&(t.originalItemKind=o)}var a;return e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=_(e.additionalTextEdits)),o.stringArray(e.commitCharacters)&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=D(e.command)),!0!==e.deprecated&&!1!==e.deprecated||(t.deprecated=e.deprecated),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect),void 0!==e.data&&(t.data=e.data),t}function y(e){if(e)return new r.TextEdit(f(e.range),e.newText)}function _(e){if(e)return e.map(y)}function b(e){return e.map(E)}function E(e){let t=new r.SignatureInformation(e.label);return e.documentation&&(t.documentation=g(e.documentation)),e.parameters&&(t.parameters=S(e.parameters)),t}function S(e){return e.map(w)}function w(e){let t=new r.ParameterInformation(e.label);return e.documentation&&(t.documentation=g(e.documentation)),t}function C(e){if(e)return new r.Location(t(e.uri),f(e.range))}function T(e){if(e)return{targetUri:t(e.targetUri),targetRange:f(e.targetSelectionRange),originSelectionRange:f(e.originSelectionRange),targetSelectionRange:f(e.targetSelectionRange)}}function R(e){if(e)return o.array(e)?0===e.length?[]:i.LocationLink.is(e[0])?e.map((e=>T(e))):e.map((e=>C(e))):i.LocationLink.is(e)?[T(e)]:C(e)}function O(e){let t=new r.DocumentHighlight(f(e.range));return o.number(e.kind)&&(t.kind=x(e.kind)),t}function x(e){switch(e){case i.DocumentHighlightKind.Text:return r.DocumentHighlightKind.Text;case i.DocumentHighlightKind.Read:return r.DocumentHighlightKind.Read;case i.DocumentHighlightKind.Write:return r.DocumentHighlightKind.Write}return r.DocumentHighlightKind.Text}function P(e){return e<=i.SymbolKind.TypeParameter?e-1:r.SymbolKind.Property}function I(e,n){let i=new r.SymbolInformation(e.name,P(e.kind),f(e.location.range),e.location.uri?t(e.location.uri):n);return e.containerName&&(i.containerName=e.containerName),i}function A(e){let t=new r.DocumentSymbol(e.name,e.detail||"",P(e.kind),f(e.range),f(e.selectionRange));if(void 0!==e.children&&e.children.length>0){let n=[];for(let t of e.children)n.push(A(t));t.children=n}return t}function D(e){let t={title:e.title,command:e.command};return e.arguments&&(t.arguments=e.arguments),t}const N=new Map;function k(e){if(null==e)return;let t=N.get(e);if(t)return t;let n=e.split(".");t=r.CodeActionKind.Empty;for(let e of n)t=t.append(e);return t}function M(e){if(!e)return;let t=new a.default(f(e.range));return e.command&&(t.command=D(e.command)),void 0!==e.data&&null!==e.data&&(t.data=e.data),t}function L(e){if(!e)return;let n=new r.WorkspaceEdit;return e.documentChanges?e.documentChanges.forEach((e=>{i.CreateFile.is(e)?n.createFile(t(e.uri),e.options):i.RenameFile.is(e)?n.renameFile(t(e.oldUri),t(e.newUri),e.options):i.DeleteFile.is(e)?n.deleteFile(t(e.uri),e.options):i.TextDocumentEdit.is(e)?n.set(t(e.textDocument.uri),_(e.edits)):console.error(`Unknown workspace edit change received:\n${JSON.stringify(e,void 0,4)}`)})):e.changes&&Object.keys(e.changes).forEach((r=>{n.set(t(r),_(e.changes[r]))})),n}function F(e){let t=f(e.range),r=e.target?n(e.target):void 0,i=new c.default(t,r);return void 0!==e.data&&null!==e.data&&(i.data=e.data),i}function q(e){return new r.Color(e.red,e.green,e.blue,e.alpha)}function j(e){return new r.ColorInformation(f(e.range),q(e.color))}function U(e){let t=new r.ColorPresentation(e.label);return t.additionalTextEdits=_(e.additionalTextEdits),e.textEdit&&(t.textEdit=y(e.textEdit)),t}function B(e){if(e)switch(e){case i.FoldingRangeKind.Comment:return r.FoldingRangeKind.Comment;case i.FoldingRangeKind.Imports:return r.FoldingRangeKind.Imports;case i.FoldingRangeKind.Region:return r.FoldingRangeKind.Region}}function V(e){return new r.FoldingRange(e.startLine,e.endLine,B(e.kind))}return N.set("",r.CodeActionKind.Empty),N.set(i.CodeActionKind.QuickFix,r.CodeActionKind.QuickFix),N.set(i.CodeActionKind.Refactor,r.CodeActionKind.Refactor),N.set(i.CodeActionKind.RefactorExtract,r.CodeActionKind.RefactorExtract),N.set(i.CodeActionKind.RefactorInline,r.CodeActionKind.RefactorInline),N.set(i.CodeActionKind.RefactorRewrite,r.CodeActionKind.RefactorRewrite),N.set(i.CodeActionKind.Source,r.CodeActionKind.Source),N.set(i.CodeActionKind.SourceOrganizeImports,r.CodeActionKind.SourceOrganizeImports),{asUri:n,asDiagnostics:l,asDiagnostic:d,asRange:f,asPosition:h,asDiagnosticSeverity:m,asHover:function(e){if(e)return new r.Hover(function(e){if(o.string(e))return new r.MarkdownString(e);if(u.is(e))return(new r.MarkdownString).appendCodeblock(e.value,e.language);if(Array.isArray(e)){let t=[];for(let n of e){let e=new r.MarkdownString;u.is(n)?e.appendCodeblock(n.value,n.language):e.appendMarkdown(n),t.push(e)}return t}{let t;switch(e.kind){case i.MarkupKind.Markdown:return new r.MarkdownString(e.value);case i.MarkupKind.PlainText:return t=new r.MarkdownString,t.appendText(e.value),t;default:return t=new r.MarkdownString,t.appendText(`Unsupported Markup content received. Kind is: ${e.kind}`),t}}}(e.contents),f(e.range))},asCompletionResult:function(e){if(!e)return;if(Array.isArray(e))return e.map(v);let t=e;return new r.CompletionList(t.items.map(v),t.isIncomplete)},asCompletionItem:v,asTextEdit:y,asTextEdits:_,asSignatureHelp:function(e){if(!e)return;let t=new r.SignatureHelp;return o.number(e.activeSignature)?t.activeSignature=e.activeSignature:t.activeSignature=0,o.number(e.activeParameter)?t.activeParameter=e.activeParameter:t.activeParameter=0,e.signatures&&(t.signatures=b(e.signatures)),t},asSignatureInformations:b,asSignatureInformation:E,asParameterInformations:S,asParameterInformation:w,asDeclarationResult:function(e){if(e)return R(e)},asDefinitionResult:function(e){if(e)return R(e)},asLocation:C,asReferences:function(e){if(e)return e.map((e=>C(e)))},asDocumentHighlights:function(e){if(e)return e.map(O)},asDocumentHighlight:O,asDocumentHighlightKind:x,asSymbolInformations:function(e,t){if(e)return e.map((e=>I(e,t)))},asSymbolInformation:I,asDocumentSymbols:function(e){if(null!=e)return e.map(A)},asDocumentSymbol:A,asCommand:D,asCommands:function(e){if(e)return e.map(D)},asCodeAction:function(e){if(null==e)return;let t=new r.CodeAction(e.title);return void 0!==e.kind&&(t.kind=k(e.kind)),e.diagnostics&&(t.diagnostics=l(e.diagnostics)),e.edit&&(t.edit=L(e.edit)),e.command&&(t.command=D(e.command)),t},asCodeActionKind:k,asCodeActionKinds:function(e){if(null!=e)return e.map((e=>k(e)))},asCodeLens:M,asCodeLenses:function(e){if(e)return e.map((e=>M(e)))},asWorkspaceEdit:L,asDocumentLink:F,asDocumentLinks:function(e){if(e)return e.map(F)},asFoldingRangeKind:B,asFoldingRange:V,asFoldingRanges:function(e){if(Array.isArray(e))return e.map(V)},asColor:q,asColorInformation:j,asColorInformations:function(e){if(Array.isArray(e))return e.map(j)},asColorPresentation:U,asColorPresentations:function(e){if(Array.isArray(e))return e.map(U)}}}},6653:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9496);class i extends r.DocumentLink{constructor(e,t){super(e,t)}}t.default=i},9409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2884),i=n(2097),o=n(9496),s=n(4192),a=n(5620);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class u extends a.TextDocumentFeature{constructor(e){super(e,s.TypeDefinitionRequest.type)}fillClientCapabilities(e){c(c(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=c(c(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.typeDefinitionProvider)if(!0===e.typeDefinitionProvider){if(!t)return;this.register(this.messages,{id:r.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.typeDefinitionProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(s.TypeDefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,(e=>(t.logFailedRequest(s.TypeDefinitionRequest.type,e),Promise.resolve(null)))),r=t.clientOptions.middleware;return o.languages.registerTypeDefinitionProvider(e.documentSelector,{provideTypeDefinition:(e,t,i)=>r.provideTypeDefinition?r.provideTypeDefinition(e,t,i,n):n(e,t,i)})}}t.TypeDefinitionFeature=u},3299:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e=>{this.onSuccess=e})).then((()=>{this.completionPromise=void 0,this.onSuccess=void 0;var e=this.task();return this.task=void 0,e}))),(t>=0||void 0===this.timeout)&&(this.timeout=setTimeout((()=>{this.timeout=void 0,this.onSuccess(void 0)}),t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}}},2097:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return"function"==typeof e}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=r,t.array=i,t.stringArray=function(e){return i(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&r(e.then)}},9567:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2081),i=n(1017),o="win32"===process.platform,s="darwin"===process.platform,a="linux"===process.platform;t.terminate=function(e,t){if(o)try{let n={stdio:["pipe","pipe","ignore"]};return t&&(n.cwd=t),r.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],n),!0}catch(e){return!1}else{if(!a&&!s)return e.kill("SIGKILL"),!0;try{var n=i.join(__dirname,"terminateProcess.sh");return!r.spawnSync(n,[e.pid.toString()]).error}catch(e){return!1}}}},2884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class r extends n{constructor(){super([r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),"-",r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),"-","4",r._randomHex(),r._randomHex(),r._randomHex(),"-",r._oneOf(r._timeHighBits),r._randomHex(),r._randomHex(),r._randomHex(),"-",r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return r._oneOf(r._chars)}}function i(){return new r}r._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],r._timeHighBits=["8","9","a","b"],t.empty=new n("00000000-0000-0000-0000-000000000000"),t.v4=i;const o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function s(e){return o.test(e)}t.isUUID=s,t.parse=function(e){if(!s(e))throw new Error("invalid uuid");return new n(e)},t.generateUuid=function(){return i().asHex()}},4670:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2884),i=n(9496),o=n(4192);function s(e,t){if(void 0!==e)return e[t]}t.WorkspaceFoldersFeature=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return o.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=i.workspace.workspaceFolders;e.workspaceFolders=void 0===t?null:t.map((e=>this.asProtocol(e)))}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(o.WorkspaceFoldersRequest.type,(e=>{let n=()=>{let e=i.workspace.workspaceFolders;return void 0===e?null:e.map((e=>this.asProtocol(e)))},r=t.clientOptions.middleware.workspace;return r&&r.workspaceFolders?r.workspaceFolders(e,n):n()}));let n,a=s(s(s(e,"workspace"),"workspaceFolders"),"changeNotifications");"string"==typeof a?n=a:!0===a&&(n=r.generateUuid()),n&&this.register(this.messages,{id:n,registerOptions:void 0})}register(e,t){let n=t.id,r=this._client,s=i.workspace.onDidChangeWorkspaceFolders((e=>{let t=e=>{let t={event:{added:e.added.map((e=>this.asProtocol(e))),removed:e.removed.map((e=>this.asProtocol(e)))}};this._client.sendNotification(o.DidChangeWorkspaceFoldersNotification.type,t)},n=r.clientOptions.middleware.workspace;n&&n.didChangeWorkspaceFolders?n.didChangeWorkspaceFolders(e,t):t(e)}));this._listeners.set(n,s)}unregister(e){let t=this._listeners.get(e);void 0!==t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return void 0===e?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}},3125:(e,t)=>{var n;t=e.exports=J,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=r-6,s=t.re=[],a=t.safeRe=[],c=t.src=[],u=0,l="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",r],[l,o]];function p(e){for(var t=0;t<d.length;t++){var n=d[t][0],r=d[t][1];e=e.split(n+"*").join(n+"{0,"+r+"}").split(n+"+").join(n+"{1,"+r+"}")}return e}var h=u++;c[h]="0|[1-9]\\d*";var f=u++;c[f]="\\d+";var m=u++;c[m]="\\d*[a-zA-Z-]"+l+"*";var g=u++;c[g]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var v=u++;c[v]="("+c[f]+")\\.("+c[f]+")\\.("+c[f]+")";var y=u++;c[y]="(?:"+c[h]+"|"+c[m]+")";var _=u++;c[_]="(?:"+c[f]+"|"+c[m]+")";var b=u++;c[b]="(?:-("+c[y]+"(?:\\."+c[y]+")*))";var E=u++;c[E]="(?:-?("+c[_]+"(?:\\."+c[_]+")*))";var S=u++;c[S]=l+"+";var w=u++;c[w]="(?:\\+("+c[S]+"(?:\\."+c[S]+")*))";var C=u++,T="v?"+c[g]+c[b]+"?"+c[w]+"?";c[C]="^"+T+"$";var R="[v=\\s]*"+c[v]+c[E]+"?"+c[w]+"?",O=u++;c[O]="^"+R+"$";var x=u++;c[x]="((?:<|>)?=?)";var P=u++;c[P]=c[f]+"|x|X|\\*";var I=u++;c[I]=c[h]+"|x|X|\\*";var A=u++;c[A]="[v=\\s]*("+c[I]+")(?:\\.("+c[I]+")(?:\\.("+c[I]+")(?:"+c[b]+")?"+c[w]+"?)?)?";var D=u++;c[D]="[v=\\s]*("+c[P]+")(?:\\.("+c[P]+")(?:\\.("+c[P]+")(?:"+c[E]+")?"+c[w]+"?)?)?";var N=u++;c[N]="^"+c[x]+"\\s*"+c[A]+"$";var k=u++;c[k]="^"+c[x]+"\\s*"+c[D]+"$";var M=u++;c[M]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var L=u++;c[L]="(?:~>?)";var F=u++;c[F]="(\\s*)"+c[L]+"\\s+",s[F]=new RegExp(c[F],"g"),a[F]=new RegExp(p(c[F]),"g");var q=u++;c[q]="^"+c[L]+c[A]+"$";var j=u++;c[j]="^"+c[L]+c[D]+"$";var U=u++;c[U]="(?:\\^)";var B=u++;c[B]="(\\s*)"+c[U]+"\\s+",s[B]=new RegExp(c[B],"g"),a[B]=new RegExp(p(c[B]),"g");var V=u++;c[V]="^"+c[U]+c[A]+"$";var H=u++;c[H]="^"+c[U]+c[D]+"$";var z=u++;c[z]="^"+c[x]+"\\s*("+R+")$|^$";var G=u++;c[G]="^"+c[x]+"\\s*("+T+")$|^$";var K=u++;c[K]="(\\s*)"+c[x]+"\\s*("+R+"|"+c[A]+")",s[K]=new RegExp(c[K],"g"),a[K]=new RegExp(p(c[K]),"g");var $=u++;c[$]="^\\s*("+c[A]+")\\s+-\\s+("+c[A]+")\\s*$";var W=u++;c[W]="^\\s*("+c[D]+")\\s+-\\s+("+c[D]+")\\s*$";var Q=u++;c[Q]="(<|>)?=?\\s*\\*";for(var X=0;X<35;X++)n(X,c[X]),s[X]||(s[X]=new RegExp(c[X]),a[X]=new RegExp(p(c[X])));function Y(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof J)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?a[O]:a[C]).test(e))return null;try{return new J(e,t)}catch(e){return null}}function J(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof J){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof J))return new J(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?a[O]:a[C]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=Y,t.valid=function(e,t){var n=Y(e,t);return n?n.version:null},t.clean=function(e,t){var n=Y(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=J,J.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},J.prototype.toString=function(){return this.version},J.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof J||(e=new J(e,this.options)),this.compareMain(e)||this.comparePre(e)},J.prototype.compareMain=function(e){return e instanceof J||(e=new J(e,this.options)),ee(this.major,e.major)||ee(this.minor,e.minor)||ee(this.patch,e.patch)},J.prototype.comparePre=function(e){if(e instanceof J||(e=new J(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return ee(r,i)}while(++t)},J.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new J(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(ie(e,t))return null;var n=Y(e),r=Y(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=ee;var Z=/^[0-9]+$/;function ee(e,t){var n=Z.test(e),r=Z.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function te(e,t,n){return new J(e,n).compare(new J(t,n))}function ne(e,t,n){return te(e,t,n)>0}function re(e,t,n){return te(e,t,n)<0}function ie(e,t,n){return 0===te(e,t,n)}function oe(e,t,n){return 0!==te(e,t,n)}function se(e,t,n){return te(e,t,n)>=0}function ae(e,t,n){return te(e,t,n)<=0}function ce(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return ie(e,n,r);case"!=":return oe(e,n,r);case">":return ne(e,n,r);case">=":return se(e,n,r);case"<":return re(e,n,r);case"<=":return ae(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function ue(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ue){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ue))return new ue(e,t);e=e.trim().split(/\s+/).join(" "),n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===le?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return ee(t,e)},t.major=function(e,t){return new J(e,t).major},t.minor=function(e,t){return new J(e,t).minor},t.patch=function(e,t){return new J(e,t).patch},t.compare=te,t.compareLoose=function(e,t){return te(e,t,!0)},t.rcompare=function(e,t,n){return te(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compare(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.rcompare(e,r,n)}))},t.gt=ne,t.lt=re,t.eq=ie,t.neq=oe,t.gte=se,t.lte=ae,t.cmp=ce,t.Comparator=ue;var le={};function de(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof de)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new de(e.raw,t);if(e instanceof ue)return new de(e.value,t);if(!(this instanceof de))return new de(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}function pe(e){return!e||"x"===e.toLowerCase()||"*"===e}function he(e,t,n,r,i,o,s,a,c,u,l,d,p){return((t=pe(n)?"":pe(r)?">="+n+".0.0":pe(i)?">="+n+"."+r+".0":">="+t)+" "+(a=pe(c)?"":pe(u)?"<"+(+c+1)+".0.0":pe(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function fe(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==le&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function me(e,t,n){try{t=new de(t,n)}catch(e){return!1}return t.test(e)}function ge(e,t,n,r){var i,o,s,a,c;switch(e=new J(e,r),t=new de(t,r),n){case">":i=ne,o=ae,s=re,a=">",c=">=";break;case"<":i=re,o=se,s=ne,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(me(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===le&&(e=new ue(">=0.0.0")),d=d||e,p=p||e,i(e.semver,d.semver,r)?d=e:s(e.semver,p.semver,r)&&(p=e)})),d.operator===a||d.operator===c)return!1;if((!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}ue.prototype.parse=function(e){var t=this.options.loose?a[z]:a[G],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new J(n[2],this.options.loose):this.semver=le},ue.prototype.toString=function(){return this.value},ue.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===le||("string"==typeof e&&(e=new J(e,this.options)),ce(e,this.operator,this.semver,this.options))},ue.prototype.intersects=function(e,t){if(!(e instanceof ue))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new de(e.value,t),me(this.value,n,t);if(""===e.operator)return n=new de(this.value,t),me(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ce(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ce(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=de,de.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},de.prototype.toString=function(){return this.range},de.prototype.parseRange=function(e){var t=this.options.loose,r=t?a[W]:a[$];e=e.replace(r,he),n("hyphen replace",e),e=e.replace(a[K],"$1$2$3"),n("comparator trim",e,a[K]),e=(e=e.replace(a[F],"$1~")).replace(a[B],"$1^");var i=t?a[z]:a[G],o=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?a[H]:a[V];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),pe(r)?a="":pe(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":pe(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?a[j]:a[q];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),pe(r)?a="":pe(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":pe(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?a[k]:a[N];return e.replace(r,(function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=pe(i),u=c||pe(o),l=u||pe(s);return"="===r&&l&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&l?(u&&(o=0),s=0,">"===r?(r=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(a[Q],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o.map((function(e){return new ue(e,this.options)}),this)},de.prototype.intersects=function(e,t){if(!(e instanceof de))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new de(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},de.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new J(e,this.options));for(var t=0;t<this.set.length;t++)if(fe(this.set[t],e,this.options))return!0;return!1},t.satisfies=me,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new de(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new J(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new de(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new J(r=e,n)))})),r},t.minVersion=function(e,t){e=new de(e,t);var n=new J("0.0.0");if(e.test(n))return n;if(n=new J("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new J(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!ne(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},t.validRange=function(e,t){try{return new de(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return ge(e,t,"<",n)},t.gtr=function(e,t,n){return ge(e,t,">",n)},t.outside=ge,t.prerelease=function(e,t){var n=Y(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new de(e,n),t=new de(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof J)return e;if("string"!=typeof e)return null;var t=e.match(a[M]);return null==t?null:Y(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},4192:(e,t,n)=>{"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(8231);t.ErrorCodes=i.ErrorCodes,t.ResponseError=i.ResponseError,t.CancellationToken=i.CancellationToken,t.CancellationTokenSource=i.CancellationTokenSource,t.Disposable=i.Disposable,t.Event=i.Event,t.Emitter=i.Emitter,t.Trace=i.Trace,t.TraceFormat=i.TraceFormat,t.SetTraceNotification=i.SetTraceNotification,t.LogTraceNotification=i.LogTraceNotification,t.RequestType=i.RequestType,t.RequestType0=i.RequestType0,t.NotificationType=i.NotificationType,t.NotificationType0=i.NotificationType0,t.MessageReader=i.MessageReader,t.MessageWriter=i.MessageWriter,t.ConnectionStrategy=i.ConnectionStrategy,t.StreamMessageReader=i.StreamMessageReader,t.StreamMessageWriter=i.StreamMessageWriter,t.IPCMessageReader=i.IPCMessageReader,t.IPCMessageWriter=i.IPCMessageWriter,t.createClientPipeTransport=i.createClientPipeTransport,t.createServerPipeTransport=i.createServerPipeTransport,t.generateRandomPipeName=i.generateRandomPipeName,t.createClientSocketTransport=i.createClientSocketTransport,t.createServerSocketTransport=i.createServerSocketTransport,r(n(1674)),r(n(9121)),t.createProtocolConnection=function(e,t,n,r){return i.createMessageConnection(e,t,n,r)}},1418:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8231);(t.DocumentColorRequest||(t.DocumentColorRequest={})).type=new r.RequestType("textDocument/documentColor"),(t.ColorPresentationRequest||(t.ColorPresentationRequest={})).type=new r.RequestType("textDocument/colorPresentation")},4082:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8231);(t.ConfigurationRequest||(t.ConfigurationRequest={})).type=new r.RequestType("workspace/configuration")},3688:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8231);(t.DeclarationRequest||(t.DeclarationRequest={})).type=new r.RequestType("textDocument/declaration")},4138:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8231);var i;(i=t.FoldingRangeKind||(t.FoldingRangeKind={})).Comment="comment",i.Imports="imports",i.Region="region",(t.FoldingRangeRequest||(t.FoldingRangeRequest={})).type=new r.RequestType("textDocument/foldingRange")},3759:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8231);(t.ImplementationRequest||(t.ImplementationRequest={})).type=new r.RequestType("textDocument/implementation")},9121:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3381),i=n(8231),o=n(3759);t.ImplementationRequest=o.ImplementationRequest;const s=n(2040);t.TypeDefinitionRequest=s.TypeDefinitionRequest;const a=n(942);t.WorkspaceFoldersRequest=a.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=a.DidChangeWorkspaceFoldersNotification;const c=n(4082);t.ConfigurationRequest=c.ConfigurationRequest;const u=n(1418);t.DocumentColorRequest=u.DocumentColorRequest,t.ColorPresentationRequest=u.ColorPresentationRequest;const l=n(4138);t.FoldingRangeRequest=l.FoldingRangeRequest;const d=n(3688);var p,h,f,m,g,v,y;t.DeclarationRequest=d.DeclarationRequest,(t.DocumentFilter||(t.DocumentFilter={})).is=function(e){let t=e;return r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)},(t.RegistrationRequest||(t.RegistrationRequest={})).type=new i.RequestType("client/registerCapability"),(t.UnregistrationRequest||(t.UnregistrationRequest={})).type=new i.RequestType("client/unregisterCapability"),(y=t.ResourceOperationKind||(t.ResourceOperationKind={})).Create="create",y.Rename="rename",y.Delete="delete",(v=t.FailureHandlingKind||(t.FailureHandlingKind={})).Abort="abort",v.Transactional="transactional",v.TextOnlyTransactional="textOnlyTransactional",v.Undo="undo",(g=t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})).None=0,g.Full=1,g.Incremental=2,(t.InitializeRequest||(t.InitializeRequest={})).type=new i.RequestType("initialize"),(t.InitializeError||(t.InitializeError={})).unknownProtocolVersion=1,(t.InitializedNotification||(t.InitializedNotification={})).type=new i.NotificationType("initialized"),(t.ShutdownRequest||(t.ShutdownRequest={})).type=new i.RequestType0("shutdown"),(t.ExitNotification||(t.ExitNotification={})).type=new i.NotificationType0("exit"),(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})).type=new i.NotificationType("workspace/didChangeConfiguration"),(m=t.MessageType||(t.MessageType={})).Error=1,m.Warning=2,m.Info=3,m.Log=4,(t.ShowMessageNotification||(t.ShowMessageNotification={})).type=new i.NotificationType("window/showMessage"),(t.ShowMessageRequest||(t.ShowMessageRequest={})).type=new i.RequestType("window/showMessageRequest"),(t.LogMessageNotification||(t.LogMessageNotification={})).type=new i.NotificationType("window/logMessage"),(t.TelemetryEventNotification||(t.TelemetryEventNotification={})).type=new i.NotificationType("telemetry/event"),(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})).type=new i.NotificationType("textDocument/didOpen"),(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})).type=new i.NotificationType("textDocument/didChange"),(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})).type=new i.NotificationType("textDocument/didClose"),(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})).type=new i.NotificationType("textDocument/didSave"),(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})).type=new i.NotificationType("textDocument/willSave"),(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})).type=new i.RequestType("textDocument/willSaveWaitUntil"),(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})).type=new i.NotificationType("workspace/didChangeWatchedFiles"),(f=t.FileChangeType||(t.FileChangeType={})).Created=1,f.Changed=2,f.Deleted=3,(h=t.WatchKind||(t.WatchKind={})).Create=1,h.Change=2,h.Delete=4,(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})).type=new i.NotificationType("textDocument/publishDiagnostics"),(p=t.CompletionTriggerKind||(t.CompletionTriggerKind={})).Invoked=1,p.TriggerCharacter=2,p.TriggerForIncompleteCompletions=3,(t.CompletionRequest||(t.CompletionRequest={})).type=new i.RequestType("textDocument/completion"),(t.CompletionResolveRequest||(t.CompletionResolveRequest={})).type=new i.RequestType("completionItem/resolve"),(t.HoverRequest||(t.HoverRequest={})).type=new i.RequestType("textDocument/hover"),(t.SignatureHelpRequest||(t.SignatureHelpRequest={})).type=new i.RequestType("textDocument/signatureHelp"),(t.DefinitionRequest||(t.DefinitionRequest={})).type=new i.RequestType("textDocument/definition"),(t.ReferencesRequest||(t.ReferencesRequest={})).type=new i.RequestType("textDocument/references"),(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})).type=new i.RequestType("textDocument/documentHighlight"),(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})).type=new i.RequestType("textDocument/documentSymbol"),(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})).type=new i.RequestType("workspace/symbol"),(t.CodeActionRequest||(t.CodeActionRequest={})).type=new i.RequestType("textDocument/codeAction"),(t.CodeLensRequest||(t.CodeLensRequest={})).type=new i.RequestType("textDocument/codeLens"),(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})).type=new i.RequestType("codeLens/resolve"),(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})).type=new i.RequestType("textDocument/formatting"),(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})).type=new i.RequestType("textDocument/rangeFormatting"),(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})).type=new i.RequestType("textDocument/onTypeFormatting"),(t.RenameRequest||(t.RenameRequest={})).type=new i.RequestType("textDocument/rename"),(t.PrepareRenameRequest||(t.PrepareRenameRequest={})).type=new i.RequestType("textDocument/prepareRename"),(t.DocumentLinkRequest||(t.DocumentLinkRequest={})).type=new i.RequestType("textDocument/documentLink"),(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})).type=new i.RequestType("documentLink/resolve"),(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})).type=new i.RequestType("workspace/executeCommand"),(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={})).type=new i.RequestType("workspace/applyEdit")},2040:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8231);(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={})).type=new r.RequestType("textDocument/typeDefinition")},942:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8231);(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})).type=new r.RequestType0("workspace/workspaceFolders"),(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={})).type=new r.NotificationType("workspace/didChangeWorkspaceFolders")},3381:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return"function"==typeof e}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=r,t.array=i,t.stringArray=function(e){return i(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&r(e.then)}},1674:(e,t,n)=>{"use strict";var r,i,o,s,a,c,u,l,d,p,h,f,m,g,v,y,_,b,E;n.r(t),n.d(t,{CodeAction:()=>H,CodeActionContext:()=>V,CodeActionKind:()=>B,CodeLens:()=>z,Color:()=>a,ColorInformation:()=>c,ColorPresentation:()=>u,Command:()=>m,CompletionItem:()=>P,CompletionItemKind:()=>O,CompletionList:()=>I,CreateFile:()=>y,DeleteFile:()=>b,Diagnostic:()=>f,DiagnosticRelatedInformation:()=>p,DiagnosticSeverity:()=>h,DocumentHighlight:()=>L,DocumentHighlightKind:()=>M,DocumentLink:()=>$,DocumentSymbol:()=>K,EOL:()=>X,FoldingRange:()=>d,FoldingRangeKind:()=>l,FormattingOptions:()=>G,Hover:()=>D,InsertTextFormat:()=>x,Location:()=>o,LocationLink:()=>s,MarkedString:()=>A,MarkupContent:()=>R,MarkupKind:()=>T,ParameterInformation:()=>N,Position:()=>r,Range:()=>i,RenameFile:()=>_,SignatureInformation:()=>k,SymbolInformation:()=>q,SymbolKind:()=>F,TextDocument:()=>W,TextDocumentEdit:()=>v,TextDocumentIdentifier:()=>S,TextDocumentItem:()=>C,TextDocumentSaveReason:()=>Q,TextEdit:()=>g,VersionedTextDocumentIdentifier:()=>w,WorkspaceChange:()=>U,WorkspaceEdit:()=>E}),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return Y.objectLiteral(t)&&Y.number(t.line)&&Y.number(t.character)}}(r||(r={})),function(e){e.create=function(e,t,n,i){if(Y.number(e)&&Y.number(t)&&Y.number(n)&&Y.number(i))return{start:r.create(e,t),end:r.create(n,i)};if(r.is(e)&&r.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+i+"]")},e.is=function(e){var t=e;return Y.objectLiteral(t)&&r.is(t.start)&&r.is(t.end)}}(i||(i={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return Y.defined(t)&&i.is(t.range)&&(Y.string(t.uri)||Y.undefined(t.uri))}}(o||(o={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return Y.defined(t)&&i.is(t.targetRange)&&Y.string(t.targetUri)&&(i.is(t.targetSelectionRange)||Y.undefined(t.targetSelectionRange))&&(i.is(t.originSelectionRange)||Y.undefined(t.originSelectionRange))}}(s||(s={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return Y.number(t.red)&&Y.number(t.green)&&Y.number(t.blue)&&Y.number(t.alpha)}}(a||(a={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return i.is(t.range)&&a.is(t.color)}}(c||(c={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return Y.string(t.label)&&(Y.undefined(t.textEdit)||g.is(t))&&(Y.undefined(t.additionalTextEdits)||Y.typedArray(t.additionalTextEdits,g.is))}}(u||(u={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(l||(l={})),function(e){e.create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return Y.defined(n)&&(o.startCharacter=n),Y.defined(r)&&(o.endCharacter=r),Y.defined(i)&&(o.kind=i),o},e.is=function(e){var t=e;return Y.number(t.startLine)&&Y.number(t.startLine)&&(Y.undefined(t.startCharacter)||Y.number(t.startCharacter))&&(Y.undefined(t.endCharacter)||Y.number(t.endCharacter))&&(Y.undefined(t.kind)||Y.string(t.kind))}}(d||(d={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return Y.defined(t)&&o.is(t.location)&&Y.string(t.message)}}(p||(p={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(h||(h={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return Y.defined(n)&&(s.severity=n),Y.defined(r)&&(s.code=r),Y.defined(i)&&(s.source=i),Y.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t=e;return Y.defined(t)&&i.is(t.range)&&Y.string(t.message)&&(Y.number(t.severity)||Y.undefined(t.severity))&&(Y.number(t.code)||Y.string(t.code)||Y.undefined(t.code))&&(Y.string(t.source)||Y.undefined(t.source))&&(Y.undefined(t.relatedInformation)||Y.typedArray(t.relatedInformation,p.is))}}(f||(f={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return Y.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return Y.defined(t)&&Y.string(t.title)&&Y.string(t.command)}}(m||(m={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return Y.objectLiteral(t)&&Y.string(t.newText)&&i.is(t.range)}}(g||(g={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return Y.defined(t)&&w.is(t.textDocument)&&Array.isArray(t.edits)}}(v||(v={})),function(e){e.create=function(e,t){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&Y.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||Y.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Y.boolean(t.options.ignoreIfExists)))}}(y||(y={})),function(e){e.create=function(e,t,n){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&Y.string(t.oldUri)&&Y.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||Y.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Y.boolean(t.options.ignoreIfExists)))}}(_||(_={})),function(e){e.create=function(e,t){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&Y.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||Y.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||Y.boolean(t.options.ignoreIfNotExists)))}}(b||(b={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return Y.string(e.kind)?y.is(e)||_.is(e)||b.is(e):v.is(e)})))}}(E||(E={}));var S,w,C,T,R,O,x,P,I,A,D,N,k,M,L,F,q,j=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(g.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(g.replace(e,t))},e.prototype.delete=function(e){this.edits.push(g.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),U=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach((function(e){if(v.is(e)){var n=new j(e.edits);t._textEditChanges[e.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new j(e.changes[n]);t._textEditChanges[n]=r})))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(w.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new j(i),this._textEditChanges[t.uri]=r}return r}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new j(i),this._textEditChanges[e]=r}return r},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(y.create(e,t))},e.prototype.renameFile=function(e,t,n){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(_.create(e,t,n))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(b.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return Y.defined(t)&&Y.string(t.uri)}}(S||(S={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Y.defined(t)&&Y.string(t.uri)&&(null===t.version||Y.number(t.version))}}(w||(w={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return Y.defined(t)&&Y.string(t.uri)&&Y.string(t.languageId)&&Y.number(t.version)&&Y.string(t.text)}}(C||(C={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(T||(T={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(T||(T={})),function(e){e.is=function(e){var t=e;return Y.objectLiteral(e)&&T.is(t.kind)&&Y.string(t.value)}}(R||(R={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(O||(O={})),function(e){e.PlainText=1,e.Snippet=2}(x||(x={})),function(e){e.create=function(e){return{label:e}}}(P||(P={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(I||(I={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return Y.string(t)||Y.objectLiteral(t)&&Y.string(t.language)&&Y.string(t.value)}}(A||(A={})),function(e){e.is=function(e){var t=e;return!!t&&Y.objectLiteral(t)&&(R.is(t.contents)||A.is(t.contents)||Y.typedArray(t.contents,A.is))&&(void 0===e.range||i.is(e.range))}}(D||(D={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(N||(N={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return Y.defined(t)&&(i.documentation=t),Y.defined(n)?i.parameters=n:i.parameters=[],i}}(k||(k={})),function(e){e.Text=1,e.Read=2,e.Write=3}(M||(M={})),function(e){e.create=function(e,t){var n={range:e};return Y.number(t)&&(n.kind=t),n}}(L||(L={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(F||(F={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(q||(q={}));var B,V,H,z,G,K=function(){};!function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&Y.string(t.name)&&Y.number(t.kind)&&i.is(t.range)&&i.is(t.selectionRange)&&(void 0===t.detail||Y.string(t.detail))&&(void 0===t.deprecated||Y.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))}}(K||(K={})),function(e){e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports"}(B||(B={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return Y.defined(t)&&Y.typedArray(t.diagnostics,f.is)&&(void 0===t.only||Y.typedArray(t.only,Y.string))}}(V||(V={})),function(e){e.create=function(e,t,n){var r={title:e};return m.is(t)?r.command=t:r.edit=t,void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&Y.string(t.title)&&(void 0===t.diagnostics||Y.typedArray(t.diagnostics,f.is))&&(void 0===t.kind||Y.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||m.is(t.command))&&(void 0===t.edit||E.is(t.edit))}}(H||(H={})),function(e){e.create=function(e,t){var n={range:e};return Y.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return Y.defined(t)&&i.is(t.range)&&(Y.undefined(t.command)||m.is(t.command))}}(z||(z={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return Y.defined(t)&&Y.number(t.tabSize)&&Y.boolean(t.insertSpaces)}}(G||(G={}));var $=function(){};!function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return Y.defined(t)&&i.is(t.range)&&(Y.undefined(t.target)||Y.string(t.target))}}($||($={}));var W,Q,X=["\n","\r\n","\r"];!function(e){function t(e,n){if(e.length<=1)return e;var r=e.length/2|0,i=e.slice(0,r),o=e.slice(r);t(i,n),t(o,n);for(var s=0,a=0,c=0;s<i.length&&a<o.length;){var u=n(i[s],o[a]);e[c++]=u<=0?i[s++]:o[a++]}for(;s<i.length;)e[c++]=i[s++];for(;a<o.length;)e[c++]=o[a++];return e}e.create=function(e,t,n,r){return new J(e,t,n,r)},e.is=function(e){var t=e;return!!(Y.defined(t)&&Y.string(t.uri)&&(Y.undefined(t.languageId)||Y.string(t.languageId))&&Y.number(t.lineCount)&&Y.func(t.getText)&&Y.func(t.positionAt)&&Y.func(t.offsetAt))},e.applyEdits=function(e,n){for(var r=e.getText(),i=t(n,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),o=r.length,s=i.length-1;s>=0;s--){var a=i[s],c=e.offsetAt(a.range.start),u=e.offsetAt(a.range.end);if(!(u<=o))throw new Error("Overlapping edit");r=r.substring(0,c)+a.newText+r.substring(u,r.length),o=c}return r}}(W||(W={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(Q||(Q={}));var Y,J=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=null},e.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,i=t.length;if(0===i)return r.create(0,e);for(;n<i;){var o=Math.floor((n+i)/2);t[o]>e?i=o:n=o+1}var s=n-1;return r.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(Y||(Y={}))},3403:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o,s,a,c,u=n(1017),l=n(7147),d=Object.prototype.toString;function p(e){return void 0!==e}function h(e){return"[object String]"===d.call(e)}function f(e){return JSON.parse(l.readFileSync(e,"utf8"))}function m(e,t){return c&&(e=""+e.replace(/[aouei]/g,"$&$&")+""),0===t.length?e:e.replace(/\{(\d+)\}/g,(function(e,n){var r=n[0],i=t[r],o=e;return"string"==typeof i?o=i:"number"!=typeof i&&"boolean"!=typeof i&&null!=i||(o=String(i)),o}))}function g(e){return function(t,n){for(var r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return r=t,"[object Number]"===d.call(r)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: "+new Error("").stack):m(e[t],i):h(n)?(console.warn("Message "+n+" didn't get externalized correctly."),m(n,i)):void console.error("Broken localize call found. Stacktrace is\n: "+new Error("").stack)}}function v(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return m(t,n)}function y(e,t){return s[e]=t,t}function _(e){try{return function(e){var t=f(u.join(e,"nls.metadata.json")),n=Object.create(null);for(var r in t){var i=t[r];n[r]=i.messages}return n}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function b(e,t){var n;if(!0===a.languagePackSupport&&void 0!==a.cacheRoot&&void 0!==a.languagePackId&&void 0!==a.translationsConfigFile&&void 0!==a.translationsConfig)try{n=function(e,t){var n,r,i,o=u.join(a.cacheRoot,e.id+"-"+e.hash+".json"),s=!1,c=!1;try{return n=JSON.parse(l.readFileSync(o,{encoding:"utf8",flag:"r"})),r=o,i=new Date,l.utimes(r,i,i,(function(){})),n}catch(e){if("ENOENT"===e.code)c=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: "+e.message+"."),l.unlink(o,(function(e){e&&console.error("Deleting corrupted bundle "+o+" failed.")})),s=!0}}if(n=function(e,t){var n=a.translationsConfig[e.id];if(n){var r=f(n).contents,i=f(u.join(t,"nls.metadata.json")),o=Object.create(null);for(var s in i){var c=i[s],l=r[e.outDir+"/"+s];if(l){for(var d=[],p=0;p<c.keys.length;p++){var m=c.keys[p],g=l[h(m)?m:m.key];void 0===g&&(g=c.messages[p]),d.push(g)}o[s]=d}else o[s]=c.messages}return o}}(e,t),!n||s)return n;if(c)try{l.writeFileSync(o,JSON.stringify(n),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return n;throw e}return n}(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!n){if(a.languagePackSupport)return _(t);var r=function(e){for(var t=a.language;t;){var n=u.join(e,"nls.bundle."+t+".json");if(l.existsSync(n))return n;var r=t.lastIndexOf("-");t=r>0?t.substring(0,r):void 0}if(void 0===t&&(n=u.join(e,"nls.bundle.json"),l.existsSync(n)))return n}(t);if(r)try{return f(r)}catch(e){console.log("Loading in the box message bundle failed.",e)}n=_(t)}return n}function E(e){if(!e)return v;var t=u.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),a.messageFormat===r.both||a.messageFormat===r.bundle){var n=function(e){for(var t,n=u.dirname(e);t=u.join(n,"nls.metadata.header.json"),!l.existsSync(t);){var r=u.dirname(n);if(r===n){t=void 0;break}n=r}return t}(e);if(n){var i=u.dirname(n),o=s[i];if(void 0===o)try{var d=JSON.parse(l.readFileSync(n,"utf8"));try{var h=b(d,i);o=y(i,h?{header:d,nlsBundle:h}:null)}catch(e){console.error("Failed to load nls bundle",e),o=y(i,null)}}catch(e){console.error("Failed to read header file",e),o=y(i,null)}if(o){var m=e.substr(i.length+1).replace(/\\/g,"/"),_=o.nlsBundle[m];return void 0===_?(console.error("Messages for file "+e+" not found. See console for details."),function(){return"Messages not found."}):g(_)}}}if(a.messageFormat===r.both||a.messageFormat===r.file)try{var E=f(function(e){var t;if(a.cacheLanguageResolution&&t);else{if(c||!a.language)t=".nls.json";else for(var n=a.language;n;){var r=".nls."+n+".json";if(l.existsSync(e+r)){t=r;break}var i=n.lastIndexOf("-");i>0?n=n.substring(0,i):(t=".nls.json",n=null)}a.cacheLanguageResolution}return e+t}(e));return Array.isArray(E)?g(E):p(E.messages)&&p(E.keys)?g(E.messages):(console.error("String bundle '"+e+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file "+e),function(){return"Failed to load message bundle. See console for details."}}!function(e){e.file="file",e.bundle="bundle",e.both="both"}(r=t.MessageFormat||(t.MessageFormat={})),function(e){e.standalone="standalone",e.languagePack="languagePack"}(i=t.BundleFormat||(t.BundleFormat={})),function(e){e.is=function(e){var t=e;return t&&p(t.key)&&p(t.comment)}}(o||(o={})),function(){if(a={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:r.bundle},h(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),t=void 0;if(e.availableLanguages){var n=e.availableLanguages["*"];h(n)&&(t=n)}if(h(e.locale)&&(a.locale=e.locale.toLowerCase()),void 0===t?a.language=a.locale:"en"!==t&&(a.language=t),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(a.languagePackSupport=e._languagePackSupport),h(e._cacheRoot)&&(a.cacheRoot=e._cacheRoot),h(e._languagePackId)&&(a.languagePackId=e._languagePackId),h(e._translationsConfigFile)){a.translationsConfigFile=e._translationsConfigFile;try{a.translationsConfig=f(a.translationsConfigFile)}catch(t){if(e._corruptedFile){var i=u.dirname(e._corruptedFile);l.exists(i,(function(t){t&&l.writeFile(e._corruptedFile,"corrupted","utf8",(function(e){console.error(e)}))}))}}}}catch(e){}c="pseudo"===a.locale,s=Object.create(null)}(),t.loadMessageBundle=E,t.config=function(e){return e&&(h(e.locale)&&(a.locale=e.locale.toLowerCase(),a.language=a.locale,s=Object.create(null)),void 0!==e.messageFormat&&(a.messageFormat=e.messageFormat),e.bundleFormat===i.standalone&&!0===a.languagePackSupport&&(a.languagePackSupport=!1)),c="pseudo"===a.locale,E}},9602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},4411:(e,t,n)=>{"use strict";function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}function i(e,t,n){var r=t===e.head?new a(n,null,t,e):new a(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function o(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function s(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,n,r){if(!(this instanceof a))return new a(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=r,r.Node=a,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,i=this.head;null!==i;)n.push(e.call(t,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,i=this.tail;null!==i;)n.push(e.call(t,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)n.push(o.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)n.push(o.value);return n},r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,o=this.head;null!==o&&r<e;r++)o=o.next;var s=[];for(r=0;o&&r<t;r++)s.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),r=0;r<n.length;r++)o=i(this,o,n[r]);return s},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(9602)(r)}catch(e){}},7766:(e,t,n)=>{var r=n(7147),i=n(9796),o=n(8913),s=n(2779),a=n(3837),c=n(2361).EventEmitter,u=n(2781).Transform,l=n(2781).PassThrough,d=n(2781).Writable;function p(e,t,n){"function"==typeof t&&(n=t,t=null),null==t&&(t={}),null==t.autoClose&&(t.autoClose=!1),null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),null==n&&(n=x),r.fstat(e,(function(r,i){if(r)return n(r);h(o.createFromFd(e,{autoClose:!0}),i.size,t,n)}))}function h(e,t,n,r){"function"==typeof n&&(r=n,n=null),null==n&&(n={}),null==n.autoClose&&(n.autoClose=!0),null==n.lazyEntries&&(n.lazyEntries=!1),null==n.decodeStrings&&(n.decodeStrings=!0);var i=!!n.decodeStrings;if(null==n.validateEntrySizes&&(n.validateEntrySizes=!0),null==n.strictFileNames&&(n.strictFileNames=!1),null==r&&(r=x),"number"!=typeof t)throw new Error("expected totalSize parameter to be a number");if(t>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");e.ref();var o=Math.min(65557,t),s=C(o),a=t-s.length;b(e,s,0,o,a,(function(c){if(c)return r(c);for(var u=o-22;u>=0;u-=1)if(101010256===s.readUInt32LE(u)){var l=s.slice(u),d=l.readUInt16LE(4);if(0!==d)return r(new Error("multi-disk zip files are not supported: found disk number: "+d));var p=l.readUInt16LE(10),h=l.readUInt32LE(16),m=l.readUInt16LE(20),g=l.length-22;if(m!==g)return r(new Error("invalid comment length. expected: "+g+". found: "+m));var v=i?R(l,22,l.length,!1):l.slice(22);if(65535!==p&&4294967295!==h)return r(null,new f(e,h,t,p,v,n.autoClose,n.lazyEntries,i,n.validateEntrySizes,n.strictFileNames));var y=C(20),_=a+u-y.length;return void b(e,y,0,y.length,_,(function(o){if(o)return r(o);if(117853008!==y.readUInt32LE(0))return r(new Error("invalid zip64 end of central directory locator signature"));var s=O(y,8),a=C(56);b(e,a,0,a.length,s,(function(o){return o?r(o):101075792!==a.readUInt32LE(0)?r(new Error("invalid zip64 end of central directory record signature")):(p=O(a,32),h=O(a,48),r(null,new f(e,h,t,p,v,n.autoClose,n.lazyEntries,i,n.validateEntrySizes,n.strictFileNames)))}))}))}r(new Error("end of central directory record signature not found"))}))}function f(e,t,n,r,i,o,s,a,u,l){var d=this;c.call(d),d.reader=e,d.reader.on("error",(function(e){g(d,e)})),d.reader.once("close",(function(){d.emit("close")})),d.readEntryCursor=t,d.fileSize=n,d.entryCount=r,d.comment=i,d.entriesRead=0,d.autoClose=!!o,d.lazyEntries=!!s,d.decodeStrings=!!a,d.validateEntrySizes=!!u,d.strictFileNames=!!l,d.isOpen=!0,d.emittedError=!1,d.lazyEntries||d._readEntry()}function m(e,t){e.autoClose&&e.close(),g(e,t)}function g(e,t){e.emittedError||(e.emittedError=!0,e.emit("error",t))}function v(){}function y(e,t){return new Date(1980+(e>>9&127),(e>>5&15)-1,31&e,t>>11&31,t>>5&63,2*(31&t),0)}function _(e){return-1!==e.indexOf("\\")?"invalid characters in fileName: "+e:/^[a-zA-Z]:/.test(e)||/^\//.test(e)?"absolute path: "+e:-1!==e.split("/").indexOf("..")?"invalid relative path: "+e:null}function b(e,t,n,r,i,o){if(0===r)return setImmediate((function(){o(null,C(0))}));e.read(t,n,r,i,(function(e,t){return e?o(e):t<r?o(new Error("unexpected EOF")):void o()}))}function E(e){u.call(this),this.actualByteCount=0,this.expectedByteCount=e}function S(){c.call(this),this.refCount=0}function w(e){l.call(this),this.context=e,this.context.ref(),this.unreffedYet=!1}t.open=function(e,t,n){"function"==typeof t&&(n=t,t=null),null==t&&(t={}),null==t.autoClose&&(t.autoClose=!0),null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),null==n&&(n=x),r.open(e,"r",(function(e,i){if(e)return n(e);p(i,t,(function(e,t){e&&r.close(i,x),n(e,t)}))}))},t.fromFd=p,t.fromBuffer=function(e,t,n){"function"==typeof t&&(n=t,t=null),null==t&&(t={}),t.autoClose=!1,null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),h(o.createFromBuffer(e,{maxChunkSize:65536}),e.length,t,n)},t.fromRandomAccessReader=h,t.dosDateTimeToDate=y,t.validateFileName=_,t.ZipFile=f,t.Entry=v,t.RandomAccessReader=S,a.inherits(f,c),f.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())},f.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()},f.prototype._readEntry=function(){var e=this;if(e.entryCount!==e.entriesRead){if(!e.emittedError){var t=C(46);b(e.reader,t,0,t.length,e.readEntryCursor,(function(n){if(n)return m(e,n);if(!e.emittedError){var r=new v,i=t.readUInt32LE(0);if(33639248!==i)return m(e,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(r.versionMadeBy=t.readUInt16LE(4),r.versionNeededToExtract=t.readUInt16LE(6),r.generalPurposeBitFlag=t.readUInt16LE(8),r.compressionMethod=t.readUInt16LE(10),r.lastModFileTime=t.readUInt16LE(12),r.lastModFileDate=t.readUInt16LE(14),r.crc32=t.readUInt32LE(16),r.compressedSize=t.readUInt32LE(20),r.uncompressedSize=t.readUInt32LE(24),r.fileNameLength=t.readUInt16LE(28),r.extraFieldLength=t.readUInt16LE(30),r.fileCommentLength=t.readUInt16LE(32),r.internalFileAttributes=t.readUInt16LE(36),r.externalFileAttributes=t.readUInt32LE(38),r.relativeOffsetOfLocalHeader=t.readUInt32LE(42),64&r.generalPurposeBitFlag)return m(e,new Error("strong encryption is not supported"));e.readEntryCursor+=46,t=C(r.fileNameLength+r.extraFieldLength+r.fileCommentLength),b(e.reader,t,0,t.length,e.readEntryCursor,(function(n){if(n)return m(e,n);if(!e.emittedError){var i=0!=(2048&r.generalPurposeBitFlag);r.fileName=e.decodeStrings?R(t,0,r.fileNameLength,i):t.slice(0,r.fileNameLength);var o=r.fileNameLength+r.extraFieldLength,a=t.slice(r.fileNameLength,o);r.extraFields=[];for(var c=0;c<a.length-3;){var u=a.readUInt16LE(c+0),l=a.readUInt16LE(c+2),d=c+4,p=d+l;if(p>a.length)return m(e,new Error("extra field length exceeds extra field buffer size"));var h=C(l);a.copy(h,0,d,p),r.extraFields.push({id:u,data:h}),c=p}if(r.fileComment=e.decodeStrings?R(t,o,o+r.fileCommentLength,i):t.slice(o,o+r.fileCommentLength),r.comment=r.fileComment,e.readEntryCursor+=t.length,e.entriesRead+=1,4294967295===r.uncompressedSize||4294967295===r.compressedSize||4294967295===r.relativeOffsetOfLocalHeader){var f=null;for(c=0;c<r.extraFields.length;c++)if(1===(v=r.extraFields[c]).id){f=v.data;break}if(null==f)return m(e,new Error("expected zip64 extended information extra field"));var g=0;if(4294967295===r.uncompressedSize){if(g+8>f.length)return m(e,new Error("zip64 extended information extra field does not include uncompressed size"));r.uncompressedSize=O(f,g),g+=8}if(4294967295===r.compressedSize){if(g+8>f.length)return m(e,new Error("zip64 extended information extra field does not include compressed size"));r.compressedSize=O(f,g),g+=8}if(4294967295===r.relativeOffsetOfLocalHeader){if(g+8>f.length)return m(e,new Error("zip64 extended information extra field does not include relative header offset"));r.relativeOffsetOfLocalHeader=O(f,g),g+=8}}if(e.decodeStrings)for(c=0;c<r.extraFields.length;c++){var v;if(28789===(v=r.extraFields[c]).id){if(v.data.length<6)continue;if(1!==v.data.readUInt8(0))continue;var y=v.data.readUInt32LE(1);if(s.unsigned(t.slice(0,r.fileNameLength))!==y)continue;r.fileName=R(v.data,5,v.data.length,!0);break}}if(e.validateEntrySizes&&0===r.compressionMethod){var b=r.uncompressedSize;if(r.isEncrypted()&&(b+=12),r.compressedSize!==b){var E="compressed/uncompressed size mismatch for stored file: "+r.compressedSize+" != "+r.uncompressedSize;return m(e,new Error(E))}}if(e.decodeStrings){e.strictFileNames||(r.fileName=r.fileName.replace(/\\/g,"/"));var S=_(r.fileName,e.validateFileNameOptions);if(null!=S)return m(e,new Error(S))}e.emit("entry",r),e.lazyEntries||e._readEntry()}}))}}))}}else setImmediate((function(){e.autoClose&&e.close(),e.emittedError||e.emit("end")}))},f.prototype.openReadStream=function(e,t,n){var r=this,o=0,s=e.compressedSize;if(null==n)n=t,t={};else{if(null!=t.decrypt){if(!e.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(!1!==t.decrypt)throw new Error("invalid options.decrypt value: "+t.decrypt);if(e.isCompressed()&&!1!==t.decompress)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(null!=t.decompress){if(!e.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!1!==t.decompress&&!0!==t.decompress)throw new Error("invalid options.decompress value: "+t.decompress)}if(null!=t.start||null!=t.end){if(e.isCompressed()&&!1!==t.decompress)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(e.isEncrypted()&&!1!==t.decrypt)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(null!=t.start){if((o=t.start)<0)throw new Error("options.start < 0");if(o>e.compressedSize)throw new Error("options.start > entry.compressedSize")}if(null!=t.end){if((s=t.end)<0)throw new Error("options.end < 0");if(s>e.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<o)throw new Error("options.end < options.start")}}if(!r.isOpen)return n(new Error("closed"));if(e.isEncrypted()&&!1!==t.decrypt)return n(new Error("entry is encrypted, and options.decrypt !== false"));r.reader.ref();var a=C(30);b(r.reader,a,0,a.length,e.relativeOffsetOfLocalHeader,(function(c){try{if(c)return n(c);var u=a.readUInt32LE(0);if(67324752!==u)return n(new Error("invalid local file header signature: 0x"+u.toString(16)));var l,d=a.readUInt16LE(26),p=a.readUInt16LE(28),h=e.relativeOffsetOfLocalHeader+a.length+d+p;if(0===e.compressionMethod)l=!1;else{if(8!==e.compressionMethod)return n(new Error("unsupported compression method: "+e.compressionMethod));l=null==t.decompress||t.decompress}var f=h,m=f+e.compressedSize;if(0!==e.compressedSize&&m>r.fileSize)return n(new Error("file data overflows file bounds: "+f+" + "+e.compressedSize+" > "+r.fileSize));var g=r.reader.createReadStream({start:f+o,end:f+s}),v=g;if(l){var y=!1,_=i.createInflateRaw();g.on("error",(function(e){setImmediate((function(){y||_.emit("error",e)}))})),g.pipe(_),r.validateEntrySizes?(v=new E(e.uncompressedSize),_.on("error",(function(e){setImmediate((function(){y||v.emit("error",e)}))})),_.pipe(v)):v=_,v.destroy=function(){y=!0,_!==v&&_.unpipe(v),g.unpipe(_),g.destroy()}}n(null,v)}finally{r.reader.unref()}}))},v.prototype.getLastModDate=function(){return y(this.lastModFileDate,this.lastModFileTime)},v.prototype.isEncrypted=function(){return 0!=(1&this.generalPurposeBitFlag)},v.prototype.isCompressed=function(){return 8===this.compressionMethod},a.inherits(E,u),E.prototype._transform=function(e,t,n){if(this.actualByteCount+=e.length,this.actualByteCount>this.expectedByteCount){var r="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return n(new Error(r))}n(null,e)},E.prototype._flush=function(e){if(this.actualByteCount<this.expectedByteCount){var t="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return e(new Error(t))}e()},a.inherits(S,c),S.prototype.ref=function(){this.refCount+=1},S.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw new Error("invalid unref");e.close((function(t){if(t)return e.emit("error",t);e.emit("close")}))}},S.prototype.createReadStream=function(e){var t=e.start,n=e.end;if(t===n){var r=new l;return setImmediate((function(){r.end()})),r}var i=this._readStreamForRange(t,n),o=!1,s=new w(this);i.on("error",(function(e){setImmediate((function(){o||s.emit("error",e)}))})),s.destroy=function(){i.unpipe(s),s.unref(),i.destroy()};var a=new E(n-t);return s.on("error",(function(e){setImmediate((function(){o||a.emit("error",e)}))})),a.destroy=function(){o=!0,s.unpipe(a),s.destroy()},i.pipe(s).pipe(a)},S.prototype._readStreamForRange=function(e,t){throw new Error("not implemented")},S.prototype.read=function(e,t,n,r,i){var o=this.createReadStream({start:r,end:r+n}),s=new d,a=0;s._write=function(n,r,i){n.copy(e,t+a,0,n.length),a+=n.length,i()},s.on("finish",i),o.on("error",(function(e){i(e)})),o.pipe(s)},S.prototype.close=function(e){setImmediate(e)},a.inherits(w,l),w.prototype._flush=function(e){this.unref(),e()},w.prototype.unref=function(e){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var C,T="\0 !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";function R(e,t,n,r){if(r)return e.toString("utf8",t,n);for(var i="",o=t;o<n;o++)i+=T[e[o]];return i}function O(e,t){var n=e.readUInt32LE(t);return 4294967296*e.readUInt32LE(t+4)+n}function x(e){if(e)throw e}C="function"==typeof Buffer.allocUnsafe?function(e){return Buffer.allocUnsafe(e)}:function(e){return new Buffer(e)}},9644:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppInsightsCore:()=>ae,BaseCore:()=>le,BaseTelemetryPlugin:()=>we.i,CoreUtils:()=>re,DiagnosticLogger:()=>m.AQ,ESPromise:()=>fe,ESPromiseScheduler:()=>be,EventHelper:()=>C.zB,EventLatency:()=>u,EventPersistence:()=>d,EventPropertyType:()=>l,EventsDiscardedReason:()=>Re.h,FullVersionString:()=>I,InternalAppInsightsCore:()=>y.F,InternalBaseCore:()=>ce.A,LoggingSeverity:()=>a.X,MinChannelPriorty:()=>Te.p,NotificationManager:()=>Se.f,PerfEvent:()=>g.zn,PerfManager:()=>g.Jk,ProcessTelemetryContext:()=>Ce.Vi,TraceLevel:()=>p,Undefined:()=>T.jA,Utils:()=>ne,ValueKind:()=>c,ValueSanitizer:()=>Ee,Version:()=>P,_ExtendedInternalMessageId:()=>h,_InternalLogMessage:()=>m.lQ,_InternalMessageId:()=>a.v,__getRegisteredEvents:()=>R.um,_logInternalMessage:()=>m.L4,_throwInternal:()=>m.kP,_warnToConsole:()=>m.jV,addEventHandler:()=>R.Ib,addEventListeners:()=>R.yw,addPageHideEventListener:()=>R.TJ,addPageShowEventListener:()=>R.nD,addPageUnloadEventListener:()=>R.c9,areCookiesSupported:()=>w.p7,arrForEach:()=>s.tO,arrIndexOf:()=>s.UA,arrMap:()=>s.Mr,arrReduce:()=>s.Xz,attachEvent:()=>R.pZ,cookieAvailable:()=>w.p7,createCookieMgr:()=>w.Nz,createEnumStyle:()=>o.By,createGuid:()=>Q,createProcessTelemetryContext:()=>Ce.CD,createTraceParent:()=>Pe.SU,createUniqueNamespace:()=>Oe.J,createUnloadHandlerContainer:()=>xe.Y,dateNow:()=>s.m6,deleteCookie:()=>K,detachEvent:()=>R.pD,disableCookies:()=>z,disallowsSameSiteNone:()=>w.UY,doPerf:()=>g.Lm,dumpObj:()=>v.eU,eventOff:()=>R.QY,eventOn:()=>R.XO,extend:()=>X,findW3cTraceParent:()=>Pe.lq,formatTraceParent:()=>Pe.aR,generateW3CId:()=>C.DO,getCommonSchemaMetaData:()=>H,getConsole:()=>v.dr,getCookie:()=>$,getCookieValue:()=>W,getCrypto:()=>v.MX,getDocument:()=>v.Me,getExceptionName:()=>s.jj,getFieldValueType:()=>te,getGlobal:()=>x.Rd,getGlobalInst:()=>v.a8,getHistory:()=>v.s1,getIEVersion:()=>v.sA,getISOString:()=>s.Y6,getJSON:()=>v.xA,getLocation:()=>v.k$,getMsCrypto:()=>v.gz,getNavigator:()=>v.jW,getPerformance:()=>v.r,getSetValue:()=>s.qK,getTenantId:()=>j,getTime:()=>Y,getWindow:()=>v.Jj,hasDocument:()=>v.Nv,hasHistory:()=>v.fE,hasJSON:()=>v.nS,hasNavigator:()=>v.d6,hasOwnProperty:()=>s.nr,hasWindow:()=>v.Ym,isArray:()=>s.kJ,isArrayValid:()=>Z,isBeaconsSupported:()=>v.MF,isBoolean:()=>s.jn,isChromium:()=>ie,isDate:()=>s.J_,isDocumentObjectAvailable:()=>L,isError:()=>s.VZ,isFetchSupported:()=>v.JO,isFunction:()=>s.mf,isIE:()=>v.w1,isLatency:()=>B,isNotTruthy:()=>s.F,isNullOrUndefined:()=>s.le,isNumber:()=>s.hj,isObject:()=>s.Kn,isReactNative:()=>v.b$,isSampledFlag:()=>Pe.Pn,isString:()=>s.HD,isTruthy:()=>s.fQ,isTypeof:()=>s.Ym,isUint8ArrayAvailable:()=>U,isUndefined:()=>s.o8,isValidSpanId:()=>Pe.Lc,isValidTraceId:()=>Pe.jN,isValidTraceParent:()=>Pe.J6,isValueAssigned:()=>q,isValueKind:()=>J,isWindowObjectAvailable:()=>F,isXhrSupported:()=>v.Z3,mergeEvtNamespace:()=>R.jU,newGuid:()=>C.GW,newId:()=>O.pZ,normalizeJsName:()=>s.Gf,objCreate:()=>x.pu,objDefineAccessors:()=>s.l_,objForEachKey:()=>s.rW,objFreeze:()=>s.FL,objKeys:()=>s.FY,objSeal:()=>s.Xi,openXhr:()=>oe,optimizeObject:()=>s.Ax,parseTraceParent:()=>Pe.j_,perfNow:()=>C.Jj,proxyAssign:()=>s.cf,proxyFunctionAs:()=>s.Oi,proxyFunctions:()=>s.Vb,random32:()=>O._l,randomValue:()=>O.az,removeEventHandler:()=>R.C1,removeEventListeners:()=>R.nJ,removePageHideEventListener:()=>R.C9,removePageShowEventListener:()=>R.Yl,removePageUnloadEventListener:()=>R.JA,safeGetCookieMgr:()=>w.JP,safeGetLogger:()=>m.vH,sanitizeProperty:()=>V,setCookie:()=>G,setEnableEnvMocks:()=>v.dI,setProcessTelemetryTimings:()=>ee,setValue:()=>s.sO,strContains:()=>s._Q,strEndsWith:()=>s.Id,strFunction:()=>T.cb,strObject:()=>T.fK,strPrototype:()=>T.hB,strStartsWith:()=>s.xe,strTrim:()=>s.nd,strUndefined:()=>T.jA,throwError:()=>s._y,toISOString:()=>s.Y6,useXDomainRequest:()=>v.cp});var r,i=n(3298),o=n(1785),s=n(3161),a=n(8712),c=(0,o.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),u=(0,o.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),l=(0,o.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),d=(0,o.By)({Normal:1,Critical:2}),p=(0,o.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),h=(0,s.FL)((0,i.uc)((0,i.uc)({},a.v),(0,o.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),f=n(2314),m=n(547),g=n(2753),v=n(1167),y=n(8176),_="",b="https://browser.events.data.microsoft.com/OneCollector/1.0/",E="version",S="properties",w=n(8589),C=n(821),T=n(2589),R=n(1318),O=n(395),x=n(8785),P="3.2.13",I="1DS-Web-JS-"+P,A="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",D="withCredentials",N="timeout",k=((r={})[0]=0,r[2]=6,r[1]=1,r[3]=7,r[4098]=6,r[4097]=1,r[4099]=7,r),M=null,L=Boolean((0,v.Me)()),F=Boolean((0,v.Jj)());function q(e){return!(e===_||(0,s.le)(e))}function j(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return _}function U(){return null===M&&(M=!(0,s.o8)(Uint8Array)&&!function(){var e=(0,v.jW)();if(!(0,s.o8)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t.indexOf("safari")>=0||t.indexOf("firefox")>=0)&&t.indexOf("chrome")<0)return!0}return!1}()&&!(0,v.b$)()),M}function B(e){return!!(e&&(0,s.hj)(e)&&e>=1&&e<=4)}function V(e,t,n){if(!t&&!q(t)||"string"!=typeof e)return null;var r=typeof t;if("string"===r||"number"===r||"boolean"===r||(0,s.kJ)(t))t={value:t};else if("object"!==r||T.CY.call(t,"value")){if((0,s.le)(t.value)||t.value===_||!(0,s.HD)(t.value)&&!(0,s.hj)(t.value)&&!(0,s.jn)(t.value)&&!(0,s.kJ)(t.value))return null}else t={value:n?JSON.stringify(t):t};if((0,s.kJ)(t.value)&&!Z(t.value))return null;if(!(0,s.le)(t.kind)){if((0,s.kJ)(t.value)||!J(t.kind))return null;t.value=t.value.toString()}return t}function H(e,t,n){var r=-1;if(!(0,s.o8)(e))if(t>0&&(32===t?r=8192:t<=13&&(r=t<<5)),function(e){return e>=0&&e<=9}(n))-1===r&&(r=0),r|=n;else{var i=k[te(e)]||-1;-1!==r&&-1!==i?r|=i:6===i&&(r=i)}return r}function z(){(0,w.JP)(null).setEnabled(!1)}function G(e,t,n){(0,w.p7)(null)&&(0,w.JP)(null).set(e,t,86400*n,null,"/")}function K(e){(0,w.p7)(null)&&(0,w.JP)(null).del(e)}function $(e){return(0,w.p7)(null)?W((0,w.JP)(null),e):_}function W(e,t,n){var r;return void 0===n&&(n=!0),e&&(r=e.get(t),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||_}function Q(e){void 0===e&&(e="D");var t=(0,C.GW)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,_)),t}function X(e,t,n,r,i){var o={},a=!1,c=0,u=arguments.length,l=arguments;for("[object Boolean]"===Object[T.hB].toString.call(l[0])&&(a=l[0],c++);c<u;c++)e=l[c],(0,s.rW)(e,(function(e,t){a&&t&&(0,s.Kn)(t)?(0,s.kJ)(t)?(o[e]=o[e]||[],(0,s.tO)(t,(function(t,n){t&&(0,s.Kn)(t)?o[e][n]=X(!0,o[e][n],t):o[e][n]=t}))):o[e]=X(!0,o[e],t):o[e]=t}));return o}var Y=C.Jj;function J(e){return 0===e||e>0&&e<=13||32===e}function Z(e){return e.length>0}function ee(e,t){var n=e;n.timings=n.timings||{},n.timings.processTelemetryStart=n.timings.processTelemetryStart||{},n.timings.processTelemetryStart[t]=Y()}function te(e){var t=0;if(null!=e){var n=typeof e;"string"===n?t=1:"number"===n?t=2:"boolean"===n?t=3:n===T.fK&&(t=4,(0,s.kJ)(e)?(t=4096,e.length>0&&(t|=te(e[0]))):T.CY.call(e,"value")&&(t=8192|te(e.value)))}return t}var ne={Version:P,FullVersionString:I,strUndefined:T.jA,strObject:T.fK,Undefined:T.jA,arrForEach:s.tO,arrIndexOf:s.UA,arrMap:s.Mr,arrReduce:s.Xz,objKeys:s.FY,toISOString:s.Y6,isReactNative:v.b$,isString:s.HD,isNumber:s.hj,isBoolean:s.jn,isFunction:s.mf,isArray:s.kJ,isObject:s.Kn,strTrim:s.nd,isDocumentObjectAvailable:L,isWindowObjectAvailable:F,isValueAssigned:q,getTenantId:j,isBeaconsSupported:v.MF,isUint8ArrayAvailable:U,isLatency:B,sanitizeProperty:V,getISOString:s.Y6,useXDomainRequest:v.cp,getCommonSchemaMetaData:H,cookieAvailable:w.p7,disallowsSameSiteNone:w.UY,setCookie:G,deleteCookie:K,getCookie:$,createGuid:Q,extend:X,getTime:Y,isValueKind:J,isArrayValid:Z,objDefineAccessors:s.l_,addPageUnloadEventListener:R.c9,setProcessTelemetryTimings:ee,addEventHandler:R.Ib,getFieldValueType:te,strEndsWith:s.Id,objForEachKey:s.rW},re={_canUseCookies:void 0,isTypeof:s.Ym,isUndefined:s.o8,isNullOrUndefined:s.le,hasOwnProperty:s.nr,isFunction:s.mf,isObject:s.Kn,isDate:s.J_,isArray:s.kJ,isError:s.VZ,isString:s.HD,isNumber:s.hj,isBoolean:s.jn,toISOString:s.Y6,arrForEach:s.tO,arrIndexOf:s.UA,arrMap:s.Mr,arrReduce:s.Xz,strTrim:s.nd,objCreate:x.pu,objKeys:s.FY,objDefineAccessors:s.l_,addEventHandler:R.Ib,dateNow:s.m6,isIE:v.w1,disableCookies:z,newGuid:C.GW,perfNow:C.Jj,newId:O.pZ,randomValue:O.az,random32:O._l,mwcRandomSeed:O.CN,mwcRandom32:O.F6,generateW3CId:C.DO};function ie(){return!!(0,v.a8)("chrome")}function oe(e,t,n,r,i,o){function s(e,t,n){try{e[t]=n}catch(e){}}void 0===r&&(r=!1),void 0===i&&(i=!1);var a=new XMLHttpRequest;return r&&s(a,A,r),n&&s(a,D,n),a.open(e,t,!i),n&&s(a,D,n),!i&&o&&s(a,N,o),a}var se=function(e){function t(){var n=e.call(this)||this;return n.pluginVersionStringArr=[],(0,f.default)(t,n,(function(e,t){e.logger&&e.logger.queue||(e.logger=new m.AQ({loggingLevelConsole:1})),e.initialize=function(n,r,i,o){(0,g.Lm)(e,(function(){return"AppInsightsCore.initialize"}),(function(){var a=e.pluginVersionStringArr;if(n){n.endpointUrl||(n.endpointUrl=b);var c=n.propertyStorageOverride;!c||c.getProperty&&c.setProperty||(0,s._y)("Invalid property storage override passed."),n.channels&&(0,s.tO)(n.channels,(function(e){e&&(0,s.tO)(e,(function(e){if(e.identifier&&e.version){var t=e.identifier+"="+e.version;a.push(t)}}))}))}e.getWParam=function(){return"undefined"!=typeof document||n.enableWParam?0:-1},r&&(0,s.tO)(r,(function(e){if(e&&e.identifier&&e.version){var t=e.identifier+"="+e.version;a.push(t)}})),e.pluginVersionString=a.join(";"),e.pluginVersionStringArr=a;try{t.initialize(n,r,i,o),e.pollInternalLogs("InternalLog")}catch(t){var u=e.logger,l=(0,v.eU)(t);-1!==l.indexOf("channels")&&(l+="\n - Channels must be provided through config.channels only!"),(0,m.kP)(u,1,514,"SDK Initialization Failed - no telemetry will be sent: "+l)}}),(function(){return{config:n,extensions:r,logger:i,notificationManager:o}}))},e.track=function(n){(0,g.Lm)(e,(function(){return"AppInsightsCore.track"}),(function(){var r=n;if(r){r.timings=r.timings||{},r.timings.trackStart=Y(),B(r.latency)||(r.latency=1);var i=r.ext=r.ext||{};i.sdk=i.sdk||{},i.sdk.ver=I;var o=r.baseData=r.baseData||{};o[S]=o[S]||{};var s=o[S];s[E]=s[E]||e.pluginVersionString||_}t.track(r)}),(function(){return{item:n}}),!n.sync)}})),n}return(0,i.ne)(t,e),t.__ieDyn=1,t}(y.F);const ae=se;var ce=n(4770),ue=function(e){function t(){var n=e.call(this)||this;return(0,f.default)(t,n,(function(e,t){e.initialize=function(n,r,i,o){n&&!n.endpointUrl&&(n.endpointUrl=b),e.getWParam=function(){return L||n.enableWParam?0:-1};try{t.initialize(n,r,i,o)}catch(t){(0,m.kP)(e.logger,1,514,"Initialization Failed: "+(0,v.eU)(t)+"\n - Note: Channels must be provided through config.channels only")}},e.track=function(e){var n=e;if(n){var r=n.ext=n.ext||{};r.sdk=r.sdk||{},r.sdk.ver=I}t.track(n)}})),n}return(0,i.ne)(t,e),t.__ieDyn=1,t}(ce.A);const le=ue;var de=s.mf;function pe(e,t,n){return function(r){e[t]=r,n()}}var he=function(){function e(t){var n=0,r=null,i=[];function o(){if(i.length>0){var e=i.slice();i=[],setTimeout((function(){for(var t=0,n=e.length;t<n;++t)try{e[t]()}catch(e){}}),0)}}function s(e){0===n&&(r=e,n=1,o())}function a(e){0===n&&(r=e,n=2,o())}(0,f.default)(e,this,(function(t){t.then=function(t,s){return new e((function(a,c){!function(t,s,a,c){i.push((function(){var i;try{(i=1===n?de(t)?t(r):r:de(s)?s(r):r)instanceof e?i.then(a,c):2!==n||de(s)?a(i):c(i)}catch(e){return void c(e)}})),0!==n&&o()}(t,s,a,c)}))},t.catch=function(e){return t.then(null,e)}})),function(){if(!de(t))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{t(s,a)}catch(e){a(e)}}()}return e.resolve=function(t){return t instanceof e?t:t&&de(t.then)?new e((function(e,n){try{t.then(e,n)}catch(e){n(e)}})):new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){if(t&&t.length)return new e((function(e,n){try{for(var r=[],i=0,o=0;o<t.length;o++){var s=t[o];s&&de(s.then)?(i++,s.then(pe(r,o,(function(){0==--i&&e(r)})),n)):r[o]=s}0===i&&setTimeout((function(){e(r)}),0)}catch(e){n(e)}}))},e.race=function(t){return new e((function(e,n){if(t&&t.length)try{for(var r=function(r){var i=t[r];i&&de(i.then)?i.then(e,n):setTimeout((function(){e(i)}),0)},i=0;i<t.length;i++)r(i)}catch(e){n(e)}}))},e}();const fe=he;var me=0,ge=[],ve=[],ye=[];function _e(){return(new Date).getTime()}const be=function(){function e(t,n){var r=0,i=(t||"<unnamed>")+"."+me;function o(e){var t=(0,x.Rd)();t&&t.QUnit&&console&&console.log("ESPromiseScheduler["+i+"] "+e)}function s(e){(0,m.jV)(n,"ESPromiseScheduler["+i+"] "+e)}me++,(0,f.default)(e,this,(function(e){var t=null,n=0;function a(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return e.splice(n,1)[0];return null}e.scheduleEvent=function(e,c,u){var l=i+"."+n;n++,c&&(l+="-("+c+")");var d=l+"{"+r+"}";r++;var p,h,f,m={evt:null,tm:_e(),id:d,isRunning:!1,isAborted:!1};return m.evt=t?(p=m,h=t,f=new fe((function(e,t){var n=_e()-h.tm,r=h.id;o("["+l+"] is waiting for ["+r+":"+n+" ms] to complete before starting -- ["+ve.length+"] waiting and ["+ge.length+"] running"),p.abort=function(e){p.abort=null,a(ve,l),p.isAborted=!0,t(new Error(e))},h.evt.then((function(n){a(ve,l),E(p).then(e,t)}),(function(n){a(ve,l),E(p).then(e,t)}))})),ve.push(p),f):E(m),(t=m).evt._schId=d,m.evt;function g(e){for(var t=_e(),n=t-6e5,r=e.length,i=0;i<r;){var o=e[i];if(o&&o.tm<n){var a=null;o.abort?(a="Aborting ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",o.abort(a)):a="Removing ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",s(a),e.splice(i,1),r--}else i++}}function v(e,n){var r=!1,i=a(ge,e);if(i||(i=a(ye,e),r=!0),i){i.to&&(clearTimeout(i.to),i.to=null);var c=_e()-i.tm;n?r?s("Timed out event ["+e+"] finally complete -- "+c+" ms"):o("Promise ["+e+"] Complete -- "+c+" ms"):(ye.push(i),s("Event ["+e+"] Timed out and removed -- "+c+" ms"))}else o("Failed to remove ["+e+"] from running queue");t&&t.id===e&&(t=null),g(ge),g(ve),g(ye)}function y(e,t){return function(n){return v(e,!0),t&&t(n),n}}function _(e,t,n,r){t.then((function(t){return t instanceof fe?(o("Event ["+e+"] returned a promise -- waiting"),_(e,t,n,r),t):y(e,n)(t)}),y(e,r))}function b(e,t){var n=e.id;return new fe((function(r,i){o("Event ["+n+"] Starting -- waited for "+(e.wTm||"--")+" ms"),e.isRunning=!0,e.abort=function(t){e.abort=null,e.isAborted=!0,v(n,!1),i(new Error(t))};var s=t(n);s instanceof fe?(u&&(e.to=setTimeout((function(){v(n,!1),i(new Error("Timed out after ["+u+"] ms"))}),u)),_(n,s,(function(t){o("Event ["+n+"] Resolving after "+(_e()-e.tm)+" ms"),r(t)}),i)):(o("Promise ["+n+"] Auto completed as the start action did not return a promise"),r())}))}function E(t){var n=_e();return t.wTm=n-t.tm,t.tm=n,t.isAborted?fe.reject(new Error("["+l+"] was aborted")):(ge.push(t),b(t,e))}}}))}return e.incomplete=function(){return ge},e.waitingToStart=function(){return ve},e}();var Ee=function(){function e(e){var t=this,n={},r=[],i=[];function o(e,t){var o,a=n[e];if(a&&(o=a[t]),!o&&null!==o){if((0,s.HD)(e)&&(0,s.HD)(t))if(i.length>0){for(var c=0;c<i.length;c++)if(i[c].handleField(e,t)){o={canHandle:!0,fieldHandler:i[c]};break}}else 0===r.length&&(o={canHandle:!0});if(!o&&null!==o)for(o=null,c=0;c<r.length;c++)if(r[c].handleField(e,t)){o={canHandle:!0,handler:r[c],fieldHandler:null};break}a||(a=n[e]={}),a[t]=o}return o}function a(e,t,n,r,i,o){if(e.handler)return e.handler.property(t,n,i,o);if(!(0,s.le)(i.kind)){if(4096==(4096&r)||!J(i.kind))return null;i.value=i.value.toString()}return u(e.fieldHandler,t,n,r,i)}function c(e,t,n){return q(n)?{value:n}:null}function u(e,n,r,i,o){if(o&&e){var a=e.getSanitizer(n,r,i,o.kind,o.propertyType);if(a)if(4===i){var l={},d=o.value;(0,s.rW)(d,(function(t,i){var o=n+"."+r;if(q(i)){var s=c(0,0,i);(s=u(e,o,t,te(i),s))&&(l[t]=s.value)}})),o.value=l}else{var p={path:n,name:r,type:i,prop:o,sanitizer:t};o=a.call(t,p)}}return o}e&&i.push(e),t.addSanitizer=function(e){e&&(r.push(e),n={})},t.addFieldSanitizer=function(e){e&&(i.push(e),n={})},t.handleField=function(e,t){var n=o(e,t);return!!n&&n.canHandle},t.value=function(e,t,n,r){var i=o(e,t);if(i&&i.canHandle){if(!i||!i.canHandle)return null;if(i.handler)return i.handler.value(e,t,n,r);if(!(0,s.HD)(t)||(0,s.le)(n)||n===_)return null;var u=null,l=te(n);if(8192==(8192&l)){var d=-8193&l;if(!q((u=n).value)||1!==d&&2!==d&&3!==d&&4096!=(4096&d))return null}else 1===l||2===l||3===l||4096==(4096&l)?u=c(0,0,n):4===l&&(u=c(0,0,r?JSON.stringify(n):n));if(u)return a(i,e,t,l,u,r)}return null},t.property=function(e,t,n,r){var i=o(e,t);if(!i||!i.canHandle)return null;if(!(0,s.HD)(t)||(0,s.le)(n)||!q(n.value))return null;var c=te(n.value);return 0===c?null:a(i,e,t,c,n,r)}}return e.getFieldType=te,e}(),Se=n(6329),we=n(1549),Ce=n(877),Te=n(978),Re=n(4641),Oe=n(8530),xe=n(6930),Pe=n(1579)},1785:(e,t,n)=>{"use strict";n.d(t,{By:()=>i,cc:()=>s,uj:()=>o});var r=n(3161);function i(e){var t={};return(0,r.rW)(e,(function(e,n){t[e]=n,t[n]=e})),(0,r._A)(t)}function o(e){var t={};return(0,r.rW)(e,(function(e,n){t[e]=e,t[n]=e})),(0,r._A)(t)}function s(e){var t={};return(0,r.rW)(e,(function(e,n){t[e]=n[1],t[n[0]]=n[1]})),(0,r._A)(t)}},4641:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});var r=(0,n(1785).By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},8712:(e,t,n)=>{"use strict";n.d(t,{X:()=>b,v:()=>E});var r,i=n(1785),o="Failed",s=o+"MonitorAjax",a="Track",c="Start",u="Stop",l="Event",d="AuthContext",p="Exception",h="Local",f="Session",m="Storage",g="Browser",v="Cannot",y="Buffer",_="InstrumentationKey",b=(0,i.By)({CRITICAL:1,WARNING:2}),E=(0,i.By)(((r={})[g+"DoesNotSupport"+h+m]=0,r[g+v+"Read"+h+m]=1,r[g+v+"Read"+f+m]=2,r[g+v+"Write"+h+m]=3,r[g+v+"Write"+f+m]=4,r[g+o+"RemovalFrom"+h+m]=5,r[g+o+"RemovalFrom"+f+m]=6,r[v+"SendEmptyTelemetry"]=7,r.ClientPerformanceMathError=8,r["ErrorParsingAI"+f+"Cookie"]=9,r.ErrorPVCalc=10,r[p+"WhileLoggingError"]=11,r[o+"AddingTelemetryTo"+y]=12,r[s+"Abort"]=13,r[s+"Dur"]=14,r[s+"Open"]=15,r[s+"RSC"]=16,r[s+"Send"]=17,r[s+"GetCorrelationHeader"]=18,r[o+"ToAddHandlerForOnBeforeUnload"]=19,r[o+"ToSendQueuedTelemetry"]=20,r[o+"ToReportDataLoss"]=21,r["Flush"+o]=22,r.MessageLimitPerPVExceeded=23,r.MissingRequiredFieldSpecification=24,r.NavigationTimingNotSupported=25,r.OnError=26,r[f+"RenewalDateIsZero"]=27,r.SenderNotInitialized=28,r[c+a+l+o]=29,r[u+a+l+o]=30,r[c+a+o]=31,r[u+a+o]=32,r.TelemetrySampledAndNotSent=33,r[a+l+o]=34,r[a+p+o]=35,r[a+"Metric"+o]=36,r[a+"PV"+o]=37,r[a+"PV"+o+"Calc"]=38,r[a+"Trace"+o]=39,r["Transmission"+o]=40,r[o+"ToSet"+m+y]=41,r[o+"ToRestore"+m+y]=42,r.InvalidBackendResponse=43,r[o+"ToFixDepricatedValues"]=44,r.InvalidDurationValue=45,r.TelemetryEnvelopeInvalid=46,r.CreateEnvelopeError=47,r[v+"SerializeObject"]=48,r[v+"SerializeObjectNonSerializable"]=49,r.CircularReferenceDetected=50,r["Clear"+d+o]=51,r[p+"Truncated"]=52,r.IllegalCharsInName=53,r.ItemNotInArray=54,r.MaxAjaxPerPVExceeded=55,r.MessageTruncated=56,r.NameTooLong=57,r.SampleRateOutOfRange=58,r["Set"+d+o]=59,r["Set"+d+o+"AccountName"]=60,r.StringValueTooLong=61,r.StartCalledMoreThanOnce=62,r.StopCalledWithoutStart=63,r["TelemetryInitializer"+o]=64,r.TrackArgumentsNotSpecified=65,r.UrlTooLong=66,r[f+m+y+"Full"]=67,r[v+"AccessCookie"]=68,r.IdTooLong=69,r.InvalidEvent=70,r[s+"SetRequestHeader"]=71,r["Send"+g+"InfoOnUserInit"]=72,r["Plugin"+p]=73,r["Notification"+p]=74,r.SnippetScriptLoadFailure=99,r["Invalid"+_]=100,r[v+"ParseAiBlobValue"]=101,r.InvalidContentBlob=102,r[a+"PageAction"+l+o]=103,r[o+"AddingCustomDefinedRequestContext"]=104,r["InMemory"+m+y+"Full"]=105,r[_+"Deprecation"]=106,r))},978:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});var r=100},8176:(e,t,n)=>{"use strict";n.d(t,{F:()=>p});var r=n(3298),i=n(9798),o=n(6474),s=n(4770),a=n(547),c=n(3161),u=n(9556),l=n(6329),d=n(2753),p=function(e){function t(){var n=e.call(this)||this;return(0,i.Z)(t,n,(function(e,t){function n(t){var n=e[o.tb]();n&&n[u.$F]([t],2)}e[o.VL]=function(e,n,r,i){t[o.VL](e,n,r||new a.AQ(e),i||new l.f(e))},e.track=function(r){(0,d.Lm)(e[u.kl](),(function(){return"AppInsightsCore:track"}),(function(){null===r&&(n(r),(0,c._y)("Invalid telemetry item")),function(e){(0,c.le)(e[o.I])&&(n(e),(0,c._y)("telemetry name required"))}(r),t.track(r)}),(function(){return{item:r}}),!r.sync)}})),n}return(0,r.ne)(t,e),t.__ieDyn=1,t}(s.A)},4770:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var r=n(3298),i=n(9798),o=n(8785),s=n(6474),a=n(3161),c=n(9556),u=n(877),l=n(3656),d=500;function p(e,t,n){t&&(0,a.kJ)(t)&&t[s.R5]>0&&(t=t.sort((function(e,t){return e[c.yi]-t[c.yi]})),(0,a.tO)(t,(function(e){e[c.yi]<d&&(0,a._y)("Channel has invalid priority - "+e[s.pZ])})),e[s.MW]({queue:(0,a.FL)(t),chain:(0,u.jV)(t,n[s.TC],n)}))}var h=n(8589),f=n(8530),m=n(7485),g=n(547),v=n(2753),y=n(1549),_=n(1167),b=function(e){function t(){var n,r,o=e.call(this)||this;function u(){n=0,r=[]}return o.identifier="TelemetryInitializerPlugin",o.priority=199,u(),(0,i.Z)(t,o,(function(e,t){e.addTelemetryInitializer=function(e){var t={id:n++,fn:e};return r[s.MW](t),{remove:function(){(0,a.tO)(r,(function(e,n){if(e.id===t.id)return r[s.cb](n,1),-1}))}}},e[c.hL]=function(t,n){for(var i=!1,o=r[s.R5],c=0;c<o;++c){var u=r[c];if(u)try{if(!1===u.fn[s.ZV](null,[t])){i=!0;break}}catch(e){(0,g.kP)(n[s.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,a.jj)(e),{exception:(0,_.eU)(e)},!0)}}i||e[s.uL](t,n)},e[s.F3]=function(){u()}})),o}return(0,r.ne)(t,e),t.__ieDyn=1,t}(y.i),E=n(6930),S="Plugins must provide initialize method",w="_notificationManager",C="SDK is still unloading...",T={loggingLevelConsole:1};function R(e,t){return new v.Jk(t)}function O(e,t){var n=!1;return(0,a.tO)(t,(function(t){if(t===e)return n=!0,-1})),n}var x=function(){function e(){var t,n,y,_,x,P,I,A,D,N,k,M,L,F,q,j,U,B,V,H,z=0,G=!1;(0,i.Z)(e,this,(function(e){function i(n){if(!z&&!G&&(n||e[s.eZ]&&e[s.eZ].queue[s.R5]>0)){var r=(0,a.v4)(t.diagnosticLogInterval);r&&r>0||(r=1e4),z=setInterval((function(){clearInterval(z),z=0,J()}),r)}return z}function K(){n=!1,t=(0,a.mm)(!0,{},T),e[s.TC]=t,e[s.eZ]=new g.AQ(t),e[s.iC]=[],q=new b,y=[],_=null,x=null,P=null,I=null,A=null,N=null,D=[],k=null,M=null,L=null,F=!1,j=null,U=(0,f.J)("AIBaseCore",!0),B=(0,E.Y)(),H=null}function $(){var n=(0,u.CD)(X(),t,e);return n[s.Fc](i),n}function W(n){var r=function(e,t,n){var r,i=[],o={};return(0,a.tO)(n,(function(t){((0,a.le)(t)||(0,a.le)(t[s.VL]))&&(0,a._y)(S);var n=t[c.yi],r=t[s.pZ];t&&n&&((0,a.le)(o[n])?o[n]=r:(0,g.jV)(e,"Two extensions have same priority #"+n+" - "+o[n]+", "+r)),(!n||n<500)&&i[s.MW](t)})),(r={all:n})[c.oV]=i,r}(e[s.eZ],0,D);N=r[c.oV],A=null;var o=r.all;if(L=(0,a.FL)(function(e,t,n){var r=[];if(e&&(0,a.tO)(e,(function(e){return p(r,e,n)})),t){var i=[];(0,a.tO)(t,(function(e){e[c.yi]>d&&i[s.MW](e)})),p(r,i,n)}return r}(M,o,e)),k){var h=(0,a.UA)(o,k);-1!==h&&o[s.cb](h,1),-1!==(h=(0,a.UA)(N,k))&&N[s.cb](h,1),k._setQueue(L)}else k=function(e,t){function n(){return(0,u.CD)(null,t[s.TC],t,null)}function r(e,t,n,r){var i=e?e[s.R5]+1:1;function o(){0==--i&&(r&&r(),r=null)}i>0&&(0,a.tO)(e,(function(e){if(e&&e.queue[s.R5]>0){var r=e.chain,a=t[s.zV](r);a[s.Fc](o),n(a)}else i--})),o()}var i=!1,o={identifier:"ChannelControllerPlugin",priority:d,initialize:function(t,n,r,o){i=!0,(0,a.tO)(e,(function(e){e&&e.queue[s.R5]>0&&(0,l.bP)((0,u.CD)(e.chain,t,n),r)}))},isInitialized:function(){return i},processTelemetry:function(t,i){r(e,i||n(),(function(e){e[s.uL](t)}),(function(){i[s.uL](t)}))},update:function(t,n){var i=n||{reason:0};return r(e,t,(function(e){e[s.uL](i)}),(function(){t[s.uL](i)})),!0},pause:function(){r(e,n(),(function(e){e.iterate((function(e){e.pause&&e.pause()}))}),null)},resume:function(){r(e,n(),(function(e){e.iterate((function(e){e.resume&&e.resume()}))}),null)},teardown:function(t,n){var o=n||{reason:0,isAsync:!1};return r(e,t,(function(e){e[s.uL](o)}),(function(){t[s.uL](o),i=!1})),!0},getChannel:function(t){var n=null;return e&&e[s.R5]>0&&(0,a.tO)(e,(function(e){if(e&&e.queue[s.R5]>0&&((0,a.tO)(e.queue,(function(e){if(e[s.pZ]===t)return n=e,-1})),n))return-1})),n},flush:function(t,i,o,a){var c=1,u=!1,l=null;function d(){c--,u&&0===c&&(l&&(clearTimeout(l),l=null),i&&i(u),i=null)}return a=a||5e3,r(e,n(),(function(e){e.iterate((function(e){if(e[s.kL]){c++;var n=!1;e[s.kL](t,(function(){n=!0,d()}),o)||n||(t&&null==l?l=setTimeout((function(){l=null,d()}),a):d())}}))}),(function(){u=!0,d()})),!0},_setQueue:function(t){e=t}};return o}(L,e);o[s.MW](k),N[s.MW](k),e[s.iC]=(0,l.AA)(o),k[s.VL](t,e,o);var f=$();(0,l.bP)(f,o),e[s.iC]=(0,a.FL)((0,l.AA)(N||[])).slice(),n&&function(t){var n=(0,u.xy)(X(),e);n[s.Fc](i),e._updateHook&&!0===e._updateHook(n,t)||n[s.uL](t)}(n)}function Q(t){var n,r=null,i=null;return(0,a.tO)(e[s.iC],(function(e){if(e[s.pZ]===t&&e!==k&&e!==q)return i=e,-1})),!i&&k&&(i=k.getChannel(t)),i&&((n={plugin:i})[s.$h]=function(e){(0,l.OY)(i)[c.mE]=!e},n.isEnabled=function(){var e=(0,l.OY)(i);return!e[s.fi]&&!e[c.mE]},n.remove=function(e,t){var n;void 0===e&&(e=!0);var r=[i],o=((n={reason:1})[s.d]=e,n);Y(r,o,(function(e){e&&W({reason:32,removed:r}),t&&t(e)}))},r=n),r}function X(){if(!A){var n=(N||[]).slice();-1===(0,a.UA)(n,q)&&n[s.MW](q),A=(0,u.jV)((0,l.AA)(n),t,e)}return A}function Y(n,r,o){if(n&&n[s.R5]>0){var c=(0,u.jV)(n,t,e),l=(0,u.Bt)(c,e);l[s.Fc]((function(){var e=!1,t=[];(0,a.tO)(D,(function(r,i){O(r,n)?e=!0:t[s.MW](r)})),D=t;var r=[];M&&((0,a.tO)(M,(function(t,i){var o=[];(0,a.tO)(t,(function(t){O(t,n)?e=!0:o[s.MW](t)})),r[s.MW](o)})),M=r),o&&o(e),i()})),l[s.uL](r)}else o(!1)}function J(){if(e[s.eZ]&&e[s.eZ].queue){var n=e[s.eZ].queue.slice(0);e[s.eZ].queue[s.R5]=0,(0,a.tO)(n,(function(n){var r,i=((r={})[s.I]=j||"InternalMessageId: "+n[s.Gc],r.iKey=(0,a.v4)(t[s.p$]),r.time=(0,a.Y6)(new Date),r.baseType=g.lQ.dataType,r.baseData={message:n[s.gU]},r);e.track(i)}))}}function Z(e,t,n,r){return k?k[s.kL](e,t,n||6,r):(t&&t(!1),!0)}function ee(t){var n=e[s.eZ];n?((0,g.kP)(n,2,73,t),i()):(0,a._y)(t)}K(),e[s.yl]=function(){return n},e[s.VL]=function(i,o,u,l){var d,p;F&&(0,a._y)(C),e[s.yl]()&&(0,a._y)("Core should not be initialized more than once"),t=i||{},e[s.TC]=t,(0,a.le)(i[s.p$])&&(0,a._y)("Please provide instrumentation key"),_=l,e[w]=l,!0===(p=(0,a.v4)(t.disableDbgExt))&&V&&(_[s.n7](V),V=null),_&&!V&&!0!==p&&(V=(0,m.p)(t),_[s.g](V)),!(d=(0,a.v4)(t.enablePerfMgr))&&P&&(P=null),d&&(0,a.qK)(t,c.DN,R),(0,a.qK)(t,c.Zh,{}).NotificationManager=_,u&&(e[s.eZ]=u);var h=(0,a.qK)(t,c.js,[]);(D=[])[s.MW].apply(D,(0,r.$h)((0,r.$h)([],o,!1),h,!1)),M=(0,a.qK)(t,c.Z,[]),W(null),L&&0!==L[s.R5]||(0,a._y)("No "+c.Z+" available"),n=!0,e.releaseQueue()},e.getTransmissionControls=function(){var e=[];return L&&(0,a.tO)(L,(function(t){e[s.MW](t.queue)})),(0,a.FL)(e)},e.track=function(n){n.iKey=n.iKey||t[s.p$],n[s.Z_]=n[s.Z_]||(0,a.Y6)(new Date),n.ver=n.ver||"4.0",!F&&e[s.yl]()?$()[s.uL](n):y[s.MW](n)},e[s.SD]=$,e[s.tb]=function(){var t;return _||(_=(0,o.pu)(((t={})[s.g]=function(e){},t[s.n7]=function(e){},t[c.uC]=function(e){},t[c.$F]=function(e,t){},t[c.f_]=function(e,t){},t)),e[w]=_),_},e[s.g]=function(e){_&&_[s.g](e)},e[s.n7]=function(e){_&&_[s.n7](e)},e.getCookieMgr=function(){return I||(I=(0,h.Nz)(t,e[s.eZ])),I},e.setCookieMgr=function(e){I=e},e[c.kl]=function(){if(!x&&!P&&(0,a.v4)(t.enablePerfMgr)){var n=(0,a.v4)(t[c.DN]);(0,a.mf)(n)&&(P=n(e,e[s.tb]()))}return x||P||(0,v.j5)()},e.setPerfMgr=function(e){x=e},e.eventCnt=function(){return y[s.R5]},e.releaseQueue=function(){if(n&&y[s.R5]>0){var e=y;y=[],(0,a.tO)(e,(function(e){$()[s.uL](e)}))}},e.pollInternalLogs=function(e){return j=e||null,G=!1,z&&(clearInterval(z),z=null),i(!0)},e[s.LS]=function(){G=!0,z&&(clearInterval(z),z=0,J())},(0,a.Vb)(e,(function(){return q}),["addTelemetryInitializer"]),e.unload=function(t,r,i){var o;void 0===t&&(t=!0),n||(0,a._y)("SDK is not initialized"),F&&(0,a._y)(C);var c=((o={reason:50})[s.d]=t,o.flushComplete=!1,o),l=(0,u.Bt)(X(),e);function d(t){c.flushComplete=t,F=!0,B.run(l,c),e[s.LS](),l[s.uL](c)}l[s.Fc]((function(){K(),r&&r(c)}),e),J(),Z(t,d,6,i)||d(!1)},e[s.TO]=Q,e.addPlugin=function(e,t,n,r){if(!e)return r&&r(!1),void ee(S);var i=Q(e[s.pZ]);if(i&&!t)return r&&r(!1),void ee("Plugin ["+e[s.pZ]+"] is already loaded!");var o={reason:16};function a(t){D[s.MW](e),o.added=[e],W(o),r&&r(!0)}if(i){var c=[i.plugin];Y(c,{reason:2,isAsync:!!n},(function(e){e?(o.removed=c,o.reason|=32,a()):r&&r(!1)}))}else a()},e.evtNamespace=function(){return U},e[s.kL]=Z,e.getTraceCtx=function(e){return H||(H=(0,l.Yn)()),H},e.setTraceCtx=function(e){H=e||null},(0,a.Oi)(e,"addUnloadCb",(function(){return B}),"add")}))}return e.__ieDyn=1,e}()},1549:(e,t,n)=>{"use strict";n.d(t,{i:()=>l});var r=n(9798),i=n(6474),o=n(3161),s=n(9556),a=n(877),c=n(6930),u="getPlugin",l=function(){function e(){var t,n,l,d,p,h=this;function f(e){void 0===e&&(e=null);var t=e;if(!t){var r=n||(0,a.CD)(null,{},h[s.oV]);t=l&&l[u]?r[i.zV](null,l[u]):r[i.zV](null,l)}return t}function m(e,t,r){e&&(0,o.sO)(e,s.Zh,[],null,o.le),!r&&t&&(r=t[i.SD]()[i.W2]());var c=l;l&&l[u]&&(c=l[u]()),h[s.oV]=t,n=(0,a.CD)(r,e,t,c)}function g(){t=!1,h[s.oV]=null,n=null,l=null,p=[],d=(0,c.Y)()}g(),(0,r.Z)(e,h,(function(e){e[i.VL]=function(e,n,r,i){m(e,n,i),t=!0},e[i.fi]=function(t,n){var r,c=e[s.oV];if(c&&(!t||c===t[s.oV]())){var h,f=!1,m=t||(0,a.Bt)(null,c,l&&l[u]?l[u]():l),v=n||((r={reason:0})[i.d]=!1,r);return e[i.F3]&&!0===e[i.F3](m,v,y)?h=!0:y(),h}function y(){if(!f){f=!0,d.run(m,n);var e=p;p=[],(0,o.tO)(e,(function(e){e.rm()})),!0===h&&m[i.uL](v),g()}}},e[i.Tu]=function(t,n){var r=e[s.oV];if(r&&(!t||r===t[s.oV]())){var o,c=!1,d=t||(0,a.xy)(null,r,l&&l[u]?l[u]():l),p=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(d,p,h)?o=!0:h(),o}function h(){c||(c=!0,m(d.getCfg(),d.core(),d[i.W2]()))}},e._addHook=function(e){e&&((0,o.kJ)(e)?p=p.concat(e):p[i.MW](e))},(0,o.Oi)(e,"_addUnloadCb",(function(){return d}),"add")})),h[i.mc]=function(e){return f(e)[i.mc]()},h[i.yl]=function(){return t},h.setInitialized=function(e){t=e},h[i.Jd]=function(e){l=e},h[i.uL]=function(e,t){t?t[i.uL](e):l&&(0,o.mf)(l[s.hL])&&l[s.hL](e,null)},h._getTelCtx=f}return e.__ieDyn=1,e}()},8589:(e,t,n)=>{"use strict";n.d(t,{JP:()=>T,Nz:()=>R,UY:()=>N,kj:()=>S,p7:()=>O});var r=n(6474),i=n(547),o=n(1167),s=n(3161),a=n(9556),c="toGMTString",u="toUTCString",l="cookie",d="expires",p="enabled",h="isCookieUseDisabled",f="disableCookiesUsage",m="_ckMgr",g=null,v=null,y=null,_=(0,o.Me)(),b={},E={};function S(e,t){var n=R[m]||E[m];return n||(n=R[m]=R(e,t),E[m]=n),n}function w(e){return!e||e.isEnabled()}function C(e,t){return!!(t&&e&&(0,s.kJ)(e.ignoreCookies))&&-1!==e.ignoreCookies[r.ou](t)}function T(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var i=t[r.Lk];n=i[m]?i[m]:R(t)}return n||(n=S(t,(e||{})[r.eZ])),n}function R(e,t){var n,i=function(e){var t=e[r.Lk]=e[r.Lk]||{};if((0,s.sO)(t,"domain",e.cookieDomain,s.BX,s.le),(0,s.sO)(t,"path",e.cookiePath||"/",null,s.le),(0,s.le)(t[p])){var n=void 0;(0,s.o8)(e[h])||(n=!e[h]),(0,s.o8)(e[f])||(n=!e[f]),t[p]=n}return t}(e||E),l=i.path||"/",g=i.domain,y=!1!==i[p],_=((n={isEnabled:function(){var e=y&&O(t),n=E[m];return e&&n&&_!==n&&(e=w(n)),e}})[r.$h]=function(e){y=!1!==e},n.set=function(e,t,n,p,h){var f=!1;if(w(_)&&!function(e,t){return!!(t&&e&&(0,s.kJ)(e.blockedCookies)&&-1!==e.blockedCookies[r.ou](t))||C(e,t)}(i,e)){var m={},y=(0,s.nd)(t||a.qS),b=y[r.ou](";");if(-1!==b&&(y=(0,s.nd)(t[r.zc](0,b)),m=x(t[r.zc](b+1))),(0,s.sO)(m,"domain",p||g,s.fQ,s.o8),!(0,s.le)(n)){var E=(0,o.w1)();if((0,s.o8)(m[d])){var S=(0,s.m6)()+1e3*n;if(S>0){var T=new Date;T.setTime(S),(0,s.sO)(m,d,P(T,E?c:u)||P(T,E?c:u)||a.qS,s.fQ)}}E||(0,s.sO)(m,"max-age",a.qS+n,null,s.o8)}var R=(0,o.k$)();R&&"https:"===R.protocol&&((0,s.sO)(m,"secure",null,null,s.o8),null===v&&(v=!N(((0,o.jW)()||{})[r.qV])),v&&(0,s.sO)(m,"SameSite","None",null,s.o8)),(0,s.sO)(m,"path",h||l,null,s.o8),(i.setCookie||D)(e,I(y,m)),f=!0}return f},n.get=function(e){var t=a.qS;return w(_)&&!C(i,e)&&(t=(i.getCookie||A)(e)),t},n.del=function(e,t){var n=!1;return w(_)&&(n=_.purge(e,t)),n},n.purge=function(e,n){var r,s=!1;if(O(t)){var c=((r={}).path=n||"/",r[d]="Thu, 01 Jan 1970 00:00:01 GMT",r);(0,o.w1)()||(c["max-age"]="0"),(i.delCookie||D)(e,I(a.qS,c)),s=!0}return s},n);return _[m]=_,_}function O(e){if(null===g){g=!1;try{g=void 0!==(_||{})[l]}catch(t){(0,i.kP)(e,2,68,"Cannot access document.cookie - "+(0,s.jj)(t),{exception:(0,o.eU)(t)})}}return g}function x(e){var t={};if(e&&e[r.R5]){var n=(0,s.nd)(e)[r.w6](";");(0,s.tO)(n,(function(e){if(e=(0,s.nd)(e||a.qS)){var n=e[r.ou]("=");-1===n?t[e]=null:t[(0,s.nd)(e[r.zc](0,n))]=(0,s.nd)(e[r.zc](n+1))}}))}return t}function P(e,t){return(0,s.mf)(e[t])?e[t]():null}function I(e,t){var n=e||a.qS;return(0,s.rW)(t,(function(e,t){n+="; "+e+((0,s.le)(t)?a.qS:"="+t)})),n}function A(e){var t=a.qS;if(_){var n=_[l]||a.qS;y!==n&&(b=x(n),y=n),t=(0,s.nd)(b[e]||a.qS)}return t}function D(e,t){_&&(_[l]=e+"="+t)}function N(e){return!(!(0,s.HD)(e)||!(0,s._Q)(e,"CPU iPhone OS 12")&&!(0,s._Q)(e,"iPad; CPU OS 12")&&!((0,s._Q)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,s._Q)(e,"Version/")&&(0,s._Q)(e,"Safari"))&&(!(0,s._Q)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,s.Id)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,s._Q)(e,"Chrome/5")&&!(0,s._Q)(e,"Chrome/6")&&(!(0,s._Q)(e,"UnrealEngine")||(0,s._Q)(e,"Chrome"))&&!(0,s._Q)(e,"UCBrowser/12")&&!(0,s._Q)(e,"UCBrowser/11"))}},821:(e,t,n)=>{"use strict";n.d(t,{DO:()=>v,GW:()=>m,Jj:()=>g,Px:()=>f,Tr:()=>y,d8:()=>C,ej:()=>w,kT:()=>T,oF:()=>E,pP:()=>b,vn:()=>S,zB:()=>_});var r,i=n(2589),o=n(8785),s=n(6474),a=n(8589),c=n(1167),u=n(1318),l=n(3161),d=n(9556),p=n(395),h=null,f=i.jA;function m(){var e=v();return e[s.zc](0,8)+"-"+e[s.zc](8,12)+"-"+e[s.zc](12,16)+"-"+e[s.zc](16,20)+"-"+e[s.zc](20)}function g(){var e=(0,c.r)();return e&&e.now?e.now():(0,l.m6)()}function v(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=d.qS,r=0;r<4;r++)n+=t[15&(e=(0,p._l)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&(0,p._l)())|0];return n[s.Jn](0,8)+n[s.Jn](9,4)+"4"+n[s.Jn](13,3)+i+n[s.Jn](16,3)+n[s.Jn](19,12)}var y={_canUseCookies:void 0,isTypeof:l.Ym,isUndefined:l.o8,isNullOrUndefined:l.le,hasOwnProperty:l.nr,isFunction:l.mf,isObject:l.Kn,isDate:l.J_,isArray:l.kJ,isError:l.VZ,isString:l.HD,isNumber:l.hj,isBoolean:l.jn,toISOString:l.Y6,arrForEach:l.tO,arrIndexOf:l.UA,arrMap:l.Mr,arrReduce:l.Xz,strTrim:l.nd,objCreate:o.pu,objKeys:l.FY,objDefineAccessors:l.l_,addEventHandler:u.Ib,dateNow:l.m6,isIE:c.w1,disableCookies:E,newGuid:m,perfNow:g,newId:p.pZ,randomValue:p.az,random32:p._l,mwcRandomSeed:p.CN,mwcRandom32:p.F6,generateW3CId:v},_={Attach:u.pZ,AttachEvent:u.pZ,Detach:u.pD,DetachEvent:u.pD};function b(e,t){var n=(0,a.kj)(e,t),i=y._canUseCookies;return null===h&&(h=[],r=i,(0,l.l_)(y,"_canUseCookies",(function(){return r}),(function(e){r=e,(0,l.tO)(h,(function(t){t[s.$h](e)}))}))),-1===(0,l.UA)(h,n)&&h[s.MW](n),(0,l.jn)(i)&&n[s.$h](i),(0,l.jn)(r)&&n[s.$h](r),n}function E(){b()[s.$h](!1)}function S(e){return b(null,e).isEnabled()}function w(e,t){return b(null,e).get(t)}function C(e,t,n,r){b(null,e).set(t,n,null,r)}function T(e,t){return b(null,e).del(t)}},8530:(e,t,n)=>{"use strict";n.d(t,{J:()=>h,K:()=>f});var r=n(2589),i=n(6474),o=n(3161),s=n(9556),a=n(395),c=r.RJ,u="2.8.15",l="."+(0,a.pZ)(6),d=0;function p(e){return 1===e[i.xv]||9===e[i.xv]||!+e[i.xv]}function h(e,t){return void 0===t&&(t=!1),(0,o.Gf)(e+d+++(t?"."+u:s.qS)+l)}function f(e){var t={id:h("_aiData-"+(e||s.qS)+"."+u),accept:function(e){return p(e)},get:function(e,n,r,i){var s=e[t.id];return s?s[(0,o.Gf)(n)]:(i&&((s=function(e,t){var n=t[e.id];if(!n){n={};try{p(t)&&(function(e,t,n){if(c)try{return c(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch(e){}return!1}(t,e.id,n)||(t[e.id]=n))}catch(e){}}return n}(t,e))[(0,o.Gf)(n)]=r),r)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},7485:(e,t,n)=>{"use strict";n.d(t,{j:()=>u,p:()=>l});var r,i=n(6474),o=n(1167),s=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],a=null;function c(e,t){return function(){var n=arguments,r=u(t);if(r){var o=r.listener;o&&o[e]&&o[e][i.ZV](o,n)}}}function u(e){var t,n=a;return n||!0===e.disableDbgExt||(n=a||((t=(0,o.a8)("Microsoft"))&&(a=t.ApplicationInsights),a)),n?n.ChromeDbgExt:null}function l(e){if(!r){r={};for(var t=0;t<s[i.R5];t++)r[s[t]]=c(s[t],e)}return r}},547:(e,t,n)=>{"use strict";n.d(t,{AQ:()=>h,L4:()=>v,jV:()=>g,kP:()=>m,lQ:()=>d,vH:()=>p});var r=n(9798),i=n(6474),o=n(7485),s=n(1167),a=n(3161),c=n(9556);function u(e){return e?'"'+e[i.i7](/\"/g,c.qS)+'"':c.qS}function l(e,t){var n=(0,s.dr)();if(n){var r="log";n[e]&&(r=e),(0,a.mf)(n[r])&&n[r](t)}}var d=function(){function e(e,t,n,r){void 0===n&&(n=!1);var o=this;o[i.Gc]=e,o[i.gU]=(n?"AI: ":"AI (Internal): ")+e;var a=c.qS;(0,s.nS)()&&(a=(0,s.xA)().stringify(r));var l=(t?" message:"+u(t):c.qS)+(r?" props:"+u(a):c.qS);o[i.gU]+=l}return e.dataType="MessageData",e}();function p(e,t){return(e||{})[i.eZ]||new h(t)}var h=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,u,p,h,f=0,m={};(0,r.Z)(e,this,(function(e){function r(t,n){if(!(f>=p)){var r=!0,o="AITR_"+n[i.Gc];if(m[o]?r=!1:m[o]=!0,r&&(t<=u&&(e.queue[i.MW](n),f++,g(1===t?"error":"warn",n)),f===p)){var s="Internal events throttle limit per PageView reached for this app.",a=new d(23,s,!1);e.queue[i.MW](a),1===t?e[c.ys](s):e[c.cL](s)}}}function g(e,n){var r=(0,o.j)(t||{});r&&r[i.mc]&&r[i.mc](e,n)}!function(e){n=(0,a.v4)(e.loggingLevelConsole,0),u=(0,a.v4)(e.loggingLevelTelemetry,1),p=(0,a.v4)(e.maxMessageLimit,25),h=(0,a.v4)(e.enableDebug,(0,a.v4)(e[i.Fr],!1))}(t||{}),e.consoleLoggingLevel=function(){return n},e.telemetryLoggingLevel=function(){return u},e.maxInternalMessageLimit=function(){return p},e[i.Fr]=function(){return h},e.throwInternal=function(t,o,u,l,p){void 0===p&&(p=!1);var f=new d(o,u,p,l);if(h)throw(0,s.eU)(f);var v=1===t?c.ys:c.cL;if((0,a.o8)(f[i.gU]))g("throw"+(1===t?"Critical":"Warning"),f);else{if(p){var y=+f[i.Gc];!m[y]&&n>=t&&(e[v](f[i.gU]),m[y]=!0)}else n>=t&&e[v](f[i.gU]);r(t,f)}},e[c.cL]=function(e){l("warn",e),g("warning",e)},e[c.ys]=function(e){l("error",e),g("error",e)},e.resetInternalMessageCount=function(){f=0,m={}},e[i.jk]=r}))}return e.__ieDyn=1,e}();function f(e){return e||new h}function m(e,t,n,r,i,o){void 0===o&&(o=!1),f(e).throwInternal(t,n,r,i,o)}function g(e,t){f(e)[c.cL](t)}function v(e,t,n){f(e)[i.jk](t,n)}},1167:(e,t,n)=>{"use strict";n.d(t,{G6:()=>X,JO:()=>J,Jj:()=>D,Kf:()=>se,MF:()=>Y,MX:()=>z,Me:()=>k,Nd:()=>oe,Nu:()=>ie,Nv:()=>N,Ym:()=>A,Z3:()=>ee,a8:()=>I,b$:()=>K,cp:()=>Z,d6:()=>M,dI:()=>P,dr:()=>U,eU:()=>Q,ed:()=>ne,fE:()=>F,gz:()=>G,jW:()=>L,k$:()=>j,nS:()=>V,pI:()=>re,r:()=>B,s1:()=>q,sA:()=>W,w1:()=>$,xA:()=>H});var r=n(2589),i=n(8785),o=n(6474),s=n(3161),a=n(9556),c="window",u="document",l="documentMode",d="navigator",p="history",h="location",f="console",m="performance",g="JSON",v="crypto",y="msCrypto",_="ReactNative",b="msie",E="trident/",S="XMLHttpRequest",w=null,C=null,T=!1,R=null,O=null;function x(e,t){var n=!1;if(e){try{if(!(n=t in e)){var i=e[r.hB];i&&(n=t in i)}}catch(e){}if(!n)try{var o=new e;n=!(0,s.o8)(o[t])}catch(e){}}return n}function P(e){T=e}function I(e){var t=(0,i.Rd)();return t&&t[e]?t[e]:e===c&&A()?window:null}function A(){return Boolean(typeof window===r.fK&&window)}function D(){return A()?window:I(c)}function N(){return Boolean(typeof document===r.fK&&document)}function k(){return N()?document:I(u)}function M(){return Boolean(typeof navigator===r.fK&&navigator)}function L(){return M()?navigator:I(d)}function F(){return Boolean(typeof history===r.fK&&history)}function q(){return F()?history:I(p)}function j(e){if(e&&T){var t=I("__mockLocation");if(t)return t}return typeof location===r.fK&&location?location:I(h)}function U(){return typeof console!==r.jA?console:I(f)}function B(){return I(m)}function V(){return Boolean(typeof JSON===r.fK&&JSON||null!==I(g))}function H(){return V()?JSON||I(g):null}function z(){return I(v)}function G(){return I(y)}function K(){var e=L();return!(!e||!e.product)&&e.product===_}function $(){var e=L();if(e&&(e[o.qV]!==C||null===w)){var t=((C=e[o.qV])||a.qS)[o.T1]();w=(0,s._Q)(t,b)||(0,s._Q)(t,E)}return w}function W(e){if(void 0===e&&(e=null),!e){var t=L()||{};e=t?(t[o.qV]||a.qS)[o.T1]():a.qS}var n=(e||a.qS)[o.T1]();if((0,s._Q)(n,b)){var r=k()||{};return Math.max(parseInt(n[o.w6](b)[1]),r[l]||0)}if((0,s._Q)(n,E)){var i=parseInt(n[o.w6](E)[1]);if(i)return i+4}return null}function Q(e){var t=Object[r.hB].toString[o._S](e),n=a.qS;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[o.I]+"'":V()&&(n=H().stringify(e)),t+n}function X(e){if(!e||!(0,s.HD)(e)){var t=L()||{};e=t?(t[o.qV]||a.qS)[o.T1]():a.qS}return(e||a.qS)[o.T1]()[o.ou]("safari")>=0}function Y(){return null===O&&(O=M()&&Boolean(L().sendBeacon)),O}function J(e){var t=!1;try{t=!!I("fetch");var n=I("Request");t&&e&&n&&(t=x(n,"keepalive"))}catch(e){}return t}function Z(){return null===R&&(R=typeof XDomainRequest!==r.jA)&&ee()&&(R=R&&!x(I(S),"withCredentials")),R}function ee(){var e=!1;try{e=!!I(S)}catch(e){}return e}function te(e,t){if(e)for(var n=0;n<e[o.R5];n++){var r=e[n];if(r[o.I]&&r[o.I]===t)return r}return{}}function ne(e){var t=k();return t&&e?te(t.querySelectorAll("meta"),e).content:null}function re(e){var t,n=B();if(n){var r=n.getEntriesByType("navigation")||[];t=te((r[o.R5]>0?r[0]:{}).serverTiming,e).description}return t}function ie(e,t){return!!(e&&e.dispatchEvent&&t)&&(e.dispatchEvent(t),!0)}function oe(e,t){var n=null,r={detail:t||null};if((0,s.mf)(CustomEvent))n=new CustomEvent(e,r);else{var i=k();i&&i.createEvent&&(n=i.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,r)}return n}function se(e,t,n){var r=(0,i.Rd)();if(r&&r.CustomEvent)try{return ie(r,oe(e,{cfg:t||null,customDetails:n||null}))}catch(e){}return!1}},1318:(e,t,n)=>{"use strict";n.d(t,{C1:()=>q,C9:()=>G,Ib:()=>F,JA:()=>H,QY:()=>k,TJ:()=>z,XO:()=>N,Yl:()=>$,c9:()=>V,jU:()=>D,nD:()=>K,nJ:()=>B,pD:()=>L,pZ:()=>M,um:()=>x,yw:()=>U});var r=n(6474),i=n(8530),o=n(1167),s=n(3161),a=n(9556),c="on",u="attachEvent",l="addEventListener",d="detachEvent",p="removeEventListener",h="events",f="visibilitychange",m="pagehide",g="pageshow",v="unload",y="beforeunload",_=(0,i.J)("aiEvtPageHide"),b=(0,i.J)("aiEvtPageShow"),E=/\.[\.]+/g,S=/[\.]+$/,w=1,C=(0,i.K)("events"),T=/^([^.]*)(?:\.(.+)|)/;function R(e){return e&&e[r.i7]?e[r.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,a.qS):e}function O(e,t){var n;if(t){var i=a.qS;(0,s.kJ)(t)?(i=a.qS,(0,s.tO)(t,(function(e){(e=R(e))&&("."!==e[0]&&(e="."+e),i+=e)}))):i=R(t),i&&("."!==i[0]&&(i="."+i),e=(e||a.qS)+i)}var o=T.exec(e||a.qS)||[];return(n={})[r.P6]=o[1],n.ns=(o[2]||a.qS).replace(E,".").replace(S,a.qS)[r.w6](".").sort().join("."),n}function x(e,t,n){var i=[],o=C.get(e,h,{},!1),c=O(t,n);return(0,s.rW)(o,(function(e,t){(0,s.tO)(t,(function(e){var t;c[r.P6]&&c[r.P6]!==e.evtName[r.P6]||c.ns&&c.ns!=c.ns||i[r.MW](((t={})[r.I]=e.evtName[r.P6]+(e.evtName.ns?"."+e.evtName.ns:a.qS),t.handler=e[r.Kn],t))}))})),i}function P(e,t,n){void 0===n&&(n=!0);var r=C.get(e,h,{},n),i=r[t];return i||(i=r[t]=[]),i}function I(e,t,n,i){e&&t&&t[r.P6]&&(e[p]?e[p](t[r.P6],n,i):e[d]&&e[d](c+t[r.P6],n))}function A(e,t,n,i){for(var o=t[r.R5];o--;){var s=t[o];s&&(n.ns&&n.ns!==s.evtName.ns||i&&!i(s)||(I(e,s.evtName,s[r.Kn],s.capture),t[r.cb](o,1)))}}function D(e,t){return t?O("xx",(0,s.kJ)(t)?[e].concat(t):[e,t]).ns[r.w6]("."):e}function N(e,t,n,i,o){var s;void 0===o&&(o=!1);var a=!1;if(e)try{var d=O(t,i);if(a=function(e,t,n,i){var o=!1;return e&&t&&t[r.P6]&&n&&(e[l]?(e[l](t[r.P6],n,i),o=!0):e[u]&&(e[u](c+t[r.P6],n),o=!0)),o}(e,d,n,o),a&&C.accept(e)){var p=((s={guid:w++,evtName:d})[r.Kn]=n,s.capture=o,s);P(e,d.type)[r.MW](p)}}catch(e){}return a}function k(e,t,n,i,o){if(void 0===o&&(o=!1),e)try{var a=O(t,i),c=!1;!function(e,t,n){if(t[r.P6])A(e,P(e,t[r.P6]),t,n);else{var i=C.get(e,h,{});(0,s.rW)(i,(function(r,i){A(e,i,t,n)})),0===(0,s.FY)(i)[r.R5]&&C.kill(e,h)}}(e,a,(function(e){return!((!a.ns||n)&&e[r.Kn]!==n||(c=!0,0))})),c||I(e,a,n,o)}catch(e){}}function M(e,t,n,r){return void 0===r&&(r=!1),N(e,t,n,null,r)}function L(e,t,n,r){void 0===r&&(r=!1),k(e,t,n,null,r)}function F(e,t,n){var r=!1,i=(0,o.Jj)();i&&(r=N(i,e,t,n),r=N(i.body,e,t,n)||r);var s=(0,o.Me)();return s&&(r=N(s,e,t,n)||r),r}function q(e,t,n){var r=(0,o.Jj)();r&&(k(r,e,t,n),k(r.body,e,t,n));var i=(0,o.Me)();i&&k(i,e,t,n)}function j(e,t,n,i){var o=!1;return t&&e&&e[r.R5]>0&&(0,s.tO)(e,(function(e){e&&(n&&-1!==(0,s.UA)(n,e)||(o=F(e,t,i)||o))})),o}function U(e,t,n,i){var o=!1;return t&&e&&(0,s.kJ)(e)&&!(o=j(e,t,n,i))&&n&&n[r.R5]>0&&(o=j(e,t,null,i)),o}function B(e,t,n){e&&(0,s.kJ)(e)&&(0,s.tO)(e,(function(e){e&&q(e,t,n)}))}function V(e,t,n){return U([y,v,m],e,t,n)}function H(e,t){B([y,v,m],e,t)}function z(e,t,n){var r=D(_,n),i=j([m],e,t,r);return t&&-1!==(0,s.UA)(t,f)||(i=j([f],(function(t){var n=(0,o.Me)();e&&n&&"hidden"===n.visibilityState&&e(t)}),t,r)||i),!i&&t&&(i=z(e,null,n)),i}function G(e,t){var n=D(_,t);B([m],e,n),B([f],null,n)}function K(e,t,n){var r=D(b,n),i=j([g],e,t,r);return!(i=j([f],(function(t){var n=(0,o.Me)();e&&n&&"visible"===n.visibilityState&&e(t)}),t,r)||i)&&t&&(i=K(e,null,n)),i}function $(e,t){var n=D(b,t);B([g],e,n),B([f],null,n)}},3161:(e,t,n)=>{"use strict";n.d(t,{Ax:()=>Ie,BX:()=>U,F:()=>Se,FL:()=>me,FY:()=>de,Gf:()=>z,HD:()=>J,Hb:()=>k,Id:()=>K,J_:()=>Q,Kn:()=>V,Mr:()=>se,Mu:()=>M,Oi:()=>Oe,PO:()=>ne,UA:()=>oe,VZ:()=>Y,Vb:()=>xe,Xi:()=>ge,Xz:()=>ae,Y6:()=>re,Ym:()=>L,_A:()=>fe,_Q:()=>W,_y:()=>Ce,cf:()=>Re,fQ:()=>we,hj:()=>Z,hl:()=>Pe,jj:()=>ye,jn:()=>ee,kJ:()=>X,l_:()=>pe,le:()=>j,m6:()=>ve,mf:()=>H,mm:()=>Ae,nd:()=>ce,nr:()=>B,o8:()=>F,pT:()=>q,qK:()=>be,rW:()=>G,sO:()=>_e,tO:()=>ie,v4:()=>Ee,xe:()=>$,yk:()=>te});var r=n(2589),i=n(8785),o=n(6474),s=n(9556),a="toISOString",c="endsWith",u="startsWith",l="indexOf",d="map",p="reduce",h="trim",f="toString",m="__proto__",g="constructor",v=r.RJ,y=r.Pw.freeze,_=r.Pw.seal,b=r.Pw.keys,E=String[r.hB],S=E[h],w=E[c],C=E[u],T=Date[r.hB][a],R=Array.isArray,O=r.V4[f],x=r.CY[f],P=x[o._S](r.Pw),I=/-([a-z])/g,A=/([^\w\d_$])/g,D=/^(\d+[\w\d_$])/,N=Object.getPrototypeOf;function k(e){if(e){if(N)return N(e);var t=e[m]||e[r.hB]||e[g];if(t)return t}return null}function M(e){return O[o._S](e)}function L(e,t){return typeof e===t}function F(e){return void 0===e||typeof e===r.jA}function q(e){return!F(e)}function j(e){return null===e||F(e)}function U(e){return!j(e)}function B(e,t){return!(!e||!r.CY[o._S](e,t))}function V(e){return!(!e||typeof e!==r.fK)}function H(e){return!(!e||typeof e!==r.cb)}function z(e){var t=e;return t&&J(t)&&(t=(t=(t=t[o.i7](I,(function(e,t){return t.toUpperCase()})))[o.i7](A,"_"))[o.i7](D,(function(e,t){return"_"+t}))),t}function G(e,t){if(e)for(var n in e)r.CY[o._S](e,n)&&t[o._S](e,n,e[n])}function K(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=w?e[c](t):function(e,t){var n=!1,r=t?t[o.R5]:0,i=e?e[o.R5]:0;if(r&&i&&i>=r&&!(n=e===t)){for(var s=i-1,a=r-1;a>=0;a--){if(e[s]!=t[a])return!1;s--}n=!0}return n}(e,t)),n}function $(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=C?e[u](t):function(e,t){var n=!1,r=t?t[o.R5]:0;if(e&&r&&e[o.R5]>=r&&!(n=e===t)){for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;n=!0}return n}(e,t)),n}function W(e,t){return!(!e||!t)&&-1!==e[o.ou](t)}function Q(e){return!(!e||"[object Date]"!==O[o._S](e))}var X=R||function(e){return!(!e||"[object Array]"!==O[o._S](e))};function Y(e){return!(!e||"[object Error]"!==O[o._S](e))}function J(e){return"string"==typeof e}function Z(e){return"number"==typeof e}function ee(e){return"boolean"==typeof e}function te(e){return"symbol"==typeof e}function ne(e){var t=!1;if(e&&"object"==typeof e){var n=N?N(e):k(e);n?(n[g]&&r.CY[o._S](n,g)&&(n=n[g]),t=typeof n===r.cb&&x[o._S](n)===P):t=!0}return t}function re(e){if(e)return T?e[a]():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t[o.R5]&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function ie(e,t,n){var r=e[o.R5];try{for(var i=0;i<r&&(!(i in e)||-1!==t[o._S](n||e,e[i],i,e));i++);}catch(e){}}function oe(e,t,n){if(e){if(e[l])return e[l](t,n);var r=e[o.R5],i=n||0;try{for(var s=Math.max(i>=0?i:r-Math.abs(i),0);s<r;s++)if(s in e&&e[s]===t)return s}catch(e){}}return-1}function se(e,t,n){var r;if(e){if(e[d])return e[d](t,n);var i=e[o.R5],s=n||e;r=new Array(i);try{for(var a=0;a<i;a++)a in e&&(r[a]=t[o._S](s,e[a],e))}catch(e){}}return r}function ae(e,t,n){var r;if(e){if(e[p])return e[p](t,n);var i=e[o.R5],s=0;if(arguments[o.R5]>=3)r=arguments[2];else{for(;s<i&&!(s in e);)s++;r=e[s++]}for(;s<i;)s in e&&(r=t(r,e[s],s,e)),s++}return r}function ce(e){return e&&(e=S&&e[h]?e[h]():e[o.i7]?e[o.i7](/^\s+|(?=\s)\s+$/g,s.qS):e),e}var ue=!{toString:null}.propertyIsEnumerable("toString"),le=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function de(e){var t=typeof e;if(t===r.cb||t===r.fK&&null!==e||(0,i.ZU)("objKeys called on non-object"),!ue&&b)return b(e);var n=[];for(var s in e)e&&r.CY[o._S](e,s)&&n[o.MW](s);if(ue)for(var a=le[o.R5],c=0;c<a;c++)e&&r.CY[o._S](e,le[c])&&n[o.MW](le[c]);return n}function pe(e,t,n,r){if(v)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),v(e,t,i),!0}catch(e){}return!1}function he(e){return e}function fe(e){return y&&G(e,(function(e,t){(X(t)||V(t))&&y(t)})),me(e)}var me=y||he,ge=_||he;function ve(){var e=Date;return e.now?e.now():(new e).getTime()}function ye(e){return Y(e)?e[o.I]:s.qS}function _e(e,t,n,r,i){var o=n;return e&&((o=e[t])===n||i&&!i(o)||r&&!r(n)||(o=n,e[t]=o)),o}function be(e,t,n){var r;return e?!(r=e[t])&&j(r)&&(r=F(n)?{}:n,e[t]=r):r=F(n)?{}:n,r}function Ee(e,t){return j(e)?t:e}function Se(e){return!e}function we(e){return!!e}function Ce(e){throw new Error(e)}function Te(e,t){var n=null,r=null;return H(e)?n=e:r=e,function(){var e=arguments;if(n&&(r=n()),r)return r[t][o.ZV](r,e)}}function Re(e,t,n){if(e&&t&&V(e)&&V(t)){var r=function(r){if(J(r)){var i=t[r];H(i)?n&&!n(r,!0,t,e)||(e[r]=Te(t,r)):n&&!n(r,!1,t,e)||(B(e,r)&&delete e[r],pe(e,r,(function(){return t[r]}),(function(e){t[r]=e}))||(e[r]=i))}};for(var i in t)r(i)}return e}function Oe(e,t,n,r,i){e&&t&&n&&(!1!==i||F(e[t]))&&(e[t]=Te(n,r))}function xe(e,t,n,r){return e&&t&&V(e)&&X(n)&&ie(n,(function(n){J(n)&&Oe(e,n,t,n,r)})),e}function Pe(e){return function(){var t=this;e&&G(e,(function(e,n){t[e]=n}))}}function Ie(e){return e&&r.rl&&(e=(0,r.Pw)((0,r.rl)({},e))),e}function Ae(e,t,n,i,s,a){var c=arguments,u=c[0]||{},l=c[o.R5],d=!1,p=1;for(l>0&&ee(u)&&(d=u,u=c[p]||{},p++),V(u)||(u={});p<l;p++){var h=c[p],f=X(h),m=V(h);for(var g in h)if(f&&g in h||m&&r.CY[o._S](h,g)){var v=h[g],y=void 0;if(d&&v&&((y=X(v))||ne(v))){var _=u[g];y?X(_)||(_=[]):ne(_)||(_={}),v=Ae(d,_,v)}void 0!==v&&(u[g]=v)}}return u}},9556:(e,t,n)=>{"use strict";n.d(t,{$F:()=>h,C$:()=>m,DN:()=>s,Z:()=>i,Zh:()=>c,cL:()=>v,f_:()=>f,hL:()=>l,js:()=>u,kl:()=>y,mE:()=>a,oV:()=>o,qS:()=>r,uC:()=>p,yi:()=>d,ys:()=>g});var r="",i="channels",o="core",s="createPerfMgr",a="disabled",c="extensionConfig",u="extensions",l="processTelemetry",d="priority",p="eventsSent",h="eventsDiscarded",f="eventsSendRequest",m="perfEvent",g="errorToConsole",v="warnToConsole",y="getPerfMgr"},6329:(e,t,n)=>{"use strict";n.d(t,{f:()=>c});var r=n(9798),i=n(6474),o=n(3161),s=n(9556);function a(e,t,n,r){(0,o.tO)(e,(function(e){if(e&&e[t])if(n)setTimeout((function(){return r(e)}),0);else try{r(e)}catch(e){}}))}var c=function(){function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;(0,r.Z)(e,this,(function(e){e[i.g]=function(t){e.listeners[i.MW](t)},e[i.n7]=function(t){for(var n=(0,o.UA)(e[i.dE],t);n>-1;)e.listeners[i.cb](n,1),n=(0,o.UA)(e[i.dE],t)},e[s.uC]=function(t){a(e[i.dE],s.uC,!0,(function(e){e[s.uC](t)}))},e[s.$F]=function(t,n){a(e[i.dE],s.$F,!0,(function(e){e[s.$F](t,n)}))},e[s.f_]=function(t,n){a(e[i.dE],s.f_,n,(function(e){e[s.f_](t,n)}))},e[s.C$]=function(t){t&&(!n&&t[i.PL]()||a(e[i.dE],s.C$,!1,(function(e){t[i.d]?setTimeout((function(){return e[s.C$](t)}),0):e[s.C$](t)})))}}))}return e.__ieDyn=1,e}()},2753:(e,t,n)=>{"use strict";n.d(t,{Jk:()=>p,Lm:()=>f,j5:()=>g,tQ:()=>m,zn:()=>d});var r=n(9798),i=n(6474),o=n(3161),s=n(9556),a="ctx",c="ParentContextKey",u="ChildrenContextKey",l=null,d=function(){function e(t,n,r){var s,l=this,d=!1;l.start=(0,o.m6)(),l[i.I]=t,l[i.d]=r,l[i.PL]=function(){return!1},(0,o.mf)(n)&&(d=(0,o.l_)(l,"payload",(function(){return!s&&(0,o.mf)(n)&&(s=n(),n=null),s}))),l[i.T]=function(t){return t?t===e[c]||t===e[u]?l[t]:(l[a]||{})[t]:null},l[i.wu]=function(t,n){t&&(t===e[c]?(l[t]||(l[i.PL]=function(){return!0}),l[t]=n):t===e[u]?l[t]=n:(l[a]=l[a]||{})[t]=n)},l[i.Km]=function(){var t=0,r=l[i.T](e[u]);if((0,o.kJ)(r))for(var s=0;s<r[i.R5];s++){var a=r[s];a&&(t+=a[i.Z_])}l[i.Z_]=(0,o.m6)()-l.start,l.exTime=l[i.Z_]-t,l[i.Km]=function(){},!d&&(0,o.mf)(n)&&(l.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),p=function(){function e(t){this.ctx={},(0,r.Z)(e,this,(function(e){e.create=function(e,t,n){return new d(e,t,n)},e.fire=function(e){e&&(e[i.Km](),t&&(0,o.mf)(t[s.C$])&&t[s.C$](e))},e[i.wu]=function(t,n){t&&((e[a]=e[a]||{})[t]=n)},e[i.T]=function(t){return(e[a]||{})[t]}}))}return e.__ieDyn=1,e}(),h="CoreUtils.doPerf";function f(e,t,n,r,o){if(e){var a=e;if(a[s.kl]&&(a=a[s.kl]()),a){var l=void 0,p=a[i.T](h);try{if(l=a.create(t(),r,o)){if(p&&l[i.wu]&&(l[i.wu](d[c],p),p[i.T]&&p[i.wu])){var f=p[i.T](d[u]);f||(f=[],p[i.wu](d[u],f)),f[i.MW](l)}return a[i.wu](h,l),n(l)}}catch(e){l&&l[i.wu]&&l[i.wu]("exception",e)}finally{l&&a.fire(l),a[i.wu](h,p)}}}return n()}function m(e){l=e}function g(){return l}},877:(e,t,n)=>{"use strict";n.d(t,{Bt:()=>g,CD:()=>m,Vi:()=>_,jV:()=>y,xy:()=>v});var r=n(6474),i=n(547),o=n(1167),s=n(3161),a=n(9556),c=n(2753),u=n(3656),l="TelemetryPluginChain",d="_hasRun",p="_getTelCtx",h=0;function f(e,t,n,c){var u=null,l=[];null!==c&&(u=c?function(e,t,n){for(;e;){if(e[r.TO]()===n)return e;e=e[r.W2]()}return y([n],t[r.TC]||{},t)}(e,n,c):e);var d={_next:function(){var e=u;if(u=e?e[r.W2]():null,!e){var t=l;t&&t[r.R5]>0&&((0,s.tO)(t,(function(e){try{e.func[r._S](e.self,e.args)}catch(e){(0,i.kP)(n[r.eZ],2,73,"Unexpected Exception during onComplete - "+(0,o.eU)(e))}})),l=[])}return e},ctx:{core:function(){return n},diagLog:function(){return(0,i.vH)(n,t)},getCfg:function(){return t},getExtCfg:p,getConfig:function(e,n,r){void 0===r&&(r=!1);var i,o=p(e,null);return o&&!(0,s.le)(o[n])?i=o[n]:t&&!(0,s.le)(t[n])&&(i=t[n]),(0,s.le)(i)?r:i},hasNext:function(){return!!u},getNext:function(){return u},setNext:function(e){u=e},iterate:function(e){for(var t;t=d._next();){var n=t[r.TO]();n&&e(n)}},onComplete:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];e&&l[r.MW]({func:e,self:(0,s.o8)(t)?d.ctx:t,args:n})}}};function p(e,n,r){var i;if(void 0===n&&(n={}),void 0===r&&(r=0),t){var o=t[a.Zh];o&&e&&(i=o[e])}if(i){if((0,s.Kn)(n)&&0!==r){var c=(0,s.mm)(!0,n,i);t&&2===r&&(0,s.rW)(n,(function(e){if((0,s.le)(c[e])){var n=t[e];(0,s.le)(n)||(c[e]=n)}})),i=c}}else i=n;return i}return d}function m(e,t,n,i){var o=f(e,t,n,i),c=o.ctx;return c[r.uL]=function(e){var t=o._next();return t&&t[a.hL](e,c),!t},c[r.zV]=function(e,i){return void 0===e&&(e=null),(0,s.kJ)(e)&&(e=y(e,t,n,i)),m(e||c[r.W2](),t,n,i)},c}function g(e,t,n){var i=t[r.TC]||{},o=f(e,i,t,n),a=o.ctx;return a[r.uL]=function(e){var t=o._next();return t&&t.unload(a,e),!t},a[r.zV]=function(e,n){return void 0===e&&(e=null),(0,s.kJ)(e)&&(e=y(e,i,t,n)),g(e||a[r.W2](),t,n)},a}function v(e,t,n){var i=t[r.TC]||{},o=f(e,i,t,n).ctx;return o[r.uL]=function(e){return o.iterate((function(t){(0,s.mf)(t[r.Tu])&&t[r.Tu](o,e)}))},o[r.zV]=function(e,n){return void 0===e&&(e=null),(0,s.kJ)(e)&&(e=y(e,i,t,n)),v(e||o[r.W2](),t,n)},o}function y(e,t,n,f){var g=null,v=!f;if((0,s.kJ)(e)&&e[r.R5]>0){var _=null;(0,s.tO)(e,(function(e){if(v||f!==e||(v=!0),v&&e&&(0,s.mf)(e[a.hL])){var y=function(e,t,n){var f,g=null,v=(0,s.mf)(e[a.hL]),y=(0,s.mf)(e[r.Jd]),_={getPlugin:function(){return e},getNext:function(){return g},processTelemetry:function(i,o){b(o=o||function(){var r;return e&&(0,s.mf)(e[p])&&(r=e[p]()),r||(r=m(_,t,n)),r}(),(function(t){if(!e||!v)return!1;var n=(0,u.OY)(e);return!n[r.fi]&&!n[a.mE]&&(y&&e[r.Jd](g),e[a.hL](i,t),!0)}),"processTelemetry",(function(){return{item:i}}),!i.sync)||o[r.uL](i)},unload:function(t,n){b(t,(function(){var i=!1;if(e){var o=(0,u.OY)(e),s=e[a.oV]||o[a.oV];!e||s&&s!==t.core()||o[r.fi]||(o[a.oV]=null,o[r.fi]=!0,o[r.yl]=!1,e[r.fi]&&!0===e[r.fi](t,n)&&(i=!0))}return i}),"unload",(function(){}),n[r.d])||t[r.uL](n)},update:function(t,n){b(t,(function(){var i=!1;if(e){var o=(0,u.OY)(e),s=e[a.oV]||o[a.oV];!e||s&&s!==t.core()||o[r.fi]||e[r.Tu]&&!0===e[r.Tu](t,n)&&(i=!0)}return i}),"update",(function(){}),!1)||t[r.uL](n)},_id:f=e?e[r.pZ]+"-"+e[a.yi]+"-"+h++:"Unknown-0-"+h++,_setNext:function(e){g=e}};function b(t,n,s,u,p){var h=!1,m=e?e[r.pZ]:l,v=t[d];return v||(v=t[d]={}),t.setNext(g),e&&(0,c.Lm)(t[a.oV](),(function(){return m+":"+s}),(function(){v[f]=!0;try{var e=g?g._id:a.qS;e&&(v[e]=!1),h=n(t)}catch(e){var c=!g||v[g._id];c&&(h=!0),g&&c||(0,i.kP)(t[r.mc](),1,73,"Plugin ["+m+"] failed during "+s+" - "+(0,o.eU)(e)+", run flags: "+(0,o.eU)(v))}}),u,p),h}return(0,s.FL)(_)}(e,t,n);g||(g=y),_&&_._setNext(y),_=y}}))}return f&&!g?y([f],t,n):g}var _=function(e,t,n,r){var i=m(e,t,n,r);(0,s.Vb)(this,i,(0,s.FY)(i))}},395:(e,t,n)=>{"use strict";n.d(t,{CN:()=>g,F6:()=>v,_l:()=>m,az:()=>f,pZ:()=>y});var r=n(6474),i=n(1167),o=n(3161),s=n(9556),a=4294967296,c=4294967295,u=!1,l=123456789,d=987654321;function p(e){e<0&&(e>>>=0),l=123456789+e&c,d=987654321-e&c,u=!0}function h(){try{var e=2147483647&(0,o.m6)();p((Math.random()*a^e)+e)}catch(e){}}function f(e){return e>0?Math.floor(m()/c*(e+1))>>>0:0}function m(e){var t=0,n=(0,i.MX)()||(0,i.gz)();return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&c),0===t&&(0,i.w1)()&&(u||h(),t=v()&c),0===t&&(t=Math.floor(a*Math.random()|0)),e||(t>>>=0),t}function g(e){e?p(e):h()}function v(e){var t=((d=36969*(65535&d)+(d>>16)&c)<<16)+(65535&(l=18e3*(65535&l)+(l>>16)&c))>>>0&c|0;return e||(t>>>=0),t}function y(e){void 0===e&&(e=22);for(var t=m()>>>0,n=0,i=s.qS;i[r.R5]<e;)n++,i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(m()<<2&4294967295|3&t)>>>0,n=0);return i}},3656:(e,t,n)=>{"use strict";n.d(t,{AA:()=>d,HD:()=>p,OY:()=>u,Yn:()=>h,bP:()=>l});var r=n(6474),i=n(8530),o=n(3161),s=n(9556),a=n(1579),c=(0,i.K)("plugin");function u(e){return c.get(e,"state",{},!0)}function l(e,t){for(var n,i=[],a=null,c=e[r.W2]();c;){var l=c[r.TO]();l&&(a&&(0,o.mf)(a[r.Jd])&&(0,o.mf)(l[s.hL])&&a[r.Jd](l),((0,o.mf)(l[r.yl])?l[r.yl]():(n=u(l))[r.yl])||i[r.MW](l),a=l,c=c[r.W2]())}(0,o.tO)(i,(function(i){var o=e[s.oV]();i[r.VL](e.getCfg(),o,t,e[r.W2]()),n=u(i),i[s.oV]||n[s.oV]||(n[s.oV]=o),n[r.yl]=!0,delete n[r.fi]}))}function d(e){return e.sort((function(e,t){var n=0;if(t){var r=(0,o.mf)(t[s.hL]);(0,o.mf)(e[s.hL])?n=r?e[s.yi]-t[s.yi]:1:r&&(n=-1)}else n=e?1:-1;return n}))}function p(e,t,n,i){var s=0;return function i(){for(;s<e[r.R5];){var a=e[s++];if(a){var c=a._doUnload||a[r.F3];if((0,o.mf)(c)&&!0===c[r._S](a,t,n,i))return!0}}}()}function h(e){var t={};return{getName:function(){return t[r.I]},setName:function(n){e&&e.setName(n),t[r.I]=n},getTraceId:function(){return t[r.nY]},setTraceId:function(n){e&&e.setTraceId(n),(0,a.jN)(n)&&(t[r.nY]=n)},getSpanId:function(){return t[r._d]},setSpanId:function(n){e&&e.setSpanId(n),(0,a.Lc)(n)&&(t[r._d]=n)},getTraceFlags:function(){return t[r.T0]},setTraceFlags:function(n){e&&e.setTraceFlags(n),t[r.T0]=n}}}},6930:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var r=n(6474),i=n(547),o=n(1167),s=n(3161);function a(){var e=[];return{add:function(t){t&&e[r.MW](t)},run:function(t,n){(0,s.tO)(e,(function(e){try{e(t,n)}catch(e){(0,i.kP)(t[r.mc](),2,73,"Unexpected error calling unload handler - "+(0,o.eU)(e))}})),e=[]}}}},1579:(e,t,n)=>{"use strict";n.d(t,{J6:()=>b,Lc:()=>_,Pn:()=>E,SU:()=>g,aR:()=>S,jN:()=>y,j_:()=>v,lq:()=>w});var r=n(6474),i=n(821),o=n(1167),s=n(3161),a=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,c="00",u="ff",l="00000000000000000000000000000000",d="0000000000000000",p=1;function h(e,t,n){return!(!e||e[r.R5]!==t||e===n||!e.match(/^[\da-f]*$/))}function f(e,t,n){return h(e,t)?e:n}function m(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[r.R5]<2;)t="0"+t;return t}function g(e,t,n,o){var s;return(s={})[r.PA]=h(o,2,u)?o:c,s[r.nY]=y(e)?e:(0,i.DO)(),s.spanId=_(t)?t:(0,i.DO)()[r.Jn](0,16),s.traceFlags=n>=0&&n<=255?n:1,s}function v(e){var t;if(!e)return null;if((0,s.kJ)(e)&&(e=e[0]||""),!e||!(0,s.HD)(e)||e[r.R5]>8192)return null;var n=a.exec((0,s.nd)(e));return n&&n[1]!==u&&n[2]!==l&&n[3]!==d?((t={})[r.PA]=n[1],t[r.nY]=n[2],t[r._d]=n[3],t[r.T0]=parseInt(n[4],16),t):null}function y(e){return h(e,32,l)}function _(e){return h(e,16,d)}function b(e){return!!(e&&h(e[r.PA],2,u)&&h(e[r.nY],32,l)&&h(e[r._d],16,d)&&h(m(e[r.T0]),2))}function E(e){return!!b(e)&&(e[r.T0]&p)===p}function S(e){if(e){var t=m(e[r.T0]);h(t,2)||(t="01");var n=e[r.PA]||c;return"00"!==n&&"ff"!==n&&(n=c),"".concat(n,"-").concat(f(e.traceId,32,l),"-").concat(f(e.spanId,16,d),"-").concat(t)}return""}function w(){var e="traceparent",t=v((0,o.ed)(e));return t||(t=v((0,o.pI)(e))),t}},6474:(e,t,n)=>{"use strict";n.d(t,{$h:()=>j,F3:()=>x,Fc:()=>_,Fr:()=>z,Gc:()=>T,I:()=>i,Jd:()=>D,Jn:()=>U,Km:()=>ee,Kn:()=>Q,LS:()=>y,Lk:()=>k,MW:()=>a,P6:()=>W,PA:()=>ie,PL:()=>Y,R5:()=>p,SD:()=>m,T:()=>J,T0:()=>re,T1:()=>K,TC:()=>u,TO:()=>b,Tu:()=>P,VL:()=>r,W2:()=>I,ZV:()=>V,Z_:()=>h,_S:()=>$,_d:()=>ne,cb:()=>w,d:()=>O,dE:()=>X,eZ:()=>d,fi:()=>C,g:()=>g,gU:()=>R,i7:()=>H,iC:()=>S,jk:()=>G,kL:()=>E,mc:()=>A,n7:()=>v,nY:()=>te,ou:()=>M,p$:()=>l,pZ:()=>s,qV:()=>F,tb:()=>o,uL:()=>f,w6:()=>q,wu:()=>Z,xv:()=>B,yl:()=>c,zV:()=>N,zc:()=>L});var r="initialize",i="name",o="getNotifyMgr",s="identifier",a="push",c="isInitialized",u="config",l="instrumentationKey",d="logger",p="length",h="time",f="processNext",m="getProcessTelContext",g="addNotificationListener",v="removeNotificationListener",y="stopPollingInternalLogs",_="onComplete",b="getPlugin",E="flush",S="_extensions",w="splice",C="teardown",T="messageId",R="message",O="isAsync",x="_doTeardown",P="update",I="getNext",A="diagLog",D="setNextPlugin",N="createNew",k="cookieCfg",M="indexOf",L="substring",F="userAgent",q="split",j="setEnabled",U="substr",B="nodeType",V="apply",H="replace",z="enableDebugExceptions",G="logInternalMessage",K="toLowerCase",$="call",W="type",Q="handler",X="listeners",Y="isChildEvt",J="getCtx",Z="setCtx",ee="complete",te="traceId",ne="spanId",re="traceFlags",ie="version"},4719:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppInsightsCore:()=>o.F,BaseCore:()=>s.A,BaseTelemetryPlugin:()=>a.i,CoreUtils:()=>u.Tr,DiagnosticLogger:()=>y.AQ,EventHelper:()=>u.zB,EventsDiscardedReason:()=>i.h,InstrumentEvent:()=>N,InstrumentFunc:()=>A,InstrumentFuncs:()=>D,InstrumentProto:()=>x,InstrumentProtos:()=>P,LoggingSeverity:()=>E.X,MinChannelPriorty:()=>r.p,NotificationManager:()=>g.f,PerfEvent:()=>v.zn,PerfManager:()=>v.Jk,ProcessTelemetryContext:()=>_.Vi,Undefined:()=>u.Px,_InternalLogMessage:()=>y.lQ,_InternalMessageId:()=>E.v,__getRegisteredEvents:()=>p.um,_legacyCookieMgr:()=>u.pP,_logInternalMessage:()=>y.L4,_throwInternal:()=>y.kP,_warnToConsole:()=>y.jV,addEventHandler:()=>p.Ib,addEventListeners:()=>p.yw,addPageHideEventListener:()=>p.TJ,addPageShowEventListener:()=>p.nD,addPageUnloadEventListener:()=>p.c9,areCookiesSupported:()=>k.p7,arrForEach:()=>l.tO,arrIndexOf:()=>l.UA,arrMap:()=>l.Mr,arrReduce:()=>l.Xz,attachEvent:()=>p.pZ,canUseCookies:()=>u.vn,createClassFromInterface:()=>l.hl,createCookieMgr:()=>k.Nz,createCustomDomEvent:()=>h.Nd,createEnumMap:()=>d.uj,createEnumStyle:()=>d.By,createProcessTelemetryContext:()=>_.CD,createTraceParent:()=>q.SU,createUniqueNamespace:()=>L.J,createUnloadHandlerContainer:()=>F.Y,createValueMap:()=>d.cc,dateNow:()=>l.m6,deepFreeze:()=>l._A,deleteCookie:()=>u.kT,detachEvent:()=>p.pD,disableCookies:()=>u.oF,dispatchEvent:()=>h.Nu,doPerf:()=>v.Lm,dumpObj:()=>h.eU,eventOff:()=>p.QY,eventOn:()=>p.XO,findMetaTag:()=>h.ed,findNamedServerTiming:()=>h.pI,findW3cTraceParent:()=>q.lq,formatTraceParent:()=>q.aR,generateW3CId:()=>u.DO,getConsole:()=>h.dr,getCookie:()=>u.ej,getCrypto:()=>h.MX,getDebugExt:()=>M.j,getDebugListener:()=>M.p,getDocument:()=>h.Me,getExceptionName:()=>l.jj,getGblPerfMgr:()=>v.j5,getGlobal:()=>f.Rd,getGlobalInst:()=>h.a8,getHistory:()=>h.s1,getIEVersion:()=>h.sA,getJSON:()=>h.xA,getLocation:()=>h.k$,getMsCrypto:()=>h.gz,getNavigator:()=>h.jW,getPerformance:()=>h.r,getSetValue:()=>l.qK,getWindow:()=>h.Jj,hasDocument:()=>h.Nv,hasHistory:()=>h.fE,hasJSON:()=>h.nS,hasNavigator:()=>h.d6,hasOwnProperty:()=>l.nr,hasWindow:()=>h.Ym,initializePlugins:()=>b.bP,isArray:()=>l.kJ,isBeaconsSupported:()=>h.MF,isBoolean:()=>l.jn,isDate:()=>l.J_,isError:()=>l.VZ,isFetchSupported:()=>h.JO,isFunction:()=>l.mf,isIE:()=>h.w1,isNotNullOrUndefined:()=>l.BX,isNotTruthy:()=>l.F,isNotUndefined:()=>l.pT,isNullOrUndefined:()=>l.le,isNumber:()=>l.hj,isObject:()=>l.Kn,isPlainObject:()=>l.PO,isReactNative:()=>h.b$,isSafari:()=>h.G6,isSampledFlag:()=>q.Pn,isString:()=>l.HD,isSymbol:()=>l.yk,isTruthy:()=>l.fQ,isTypeof:()=>l.Ym,isUndefined:()=>l.o8,isValidSpanId:()=>q.Lc,isValidTraceId:()=>q.jN,isValidTraceParent:()=>q.J6,isXhrSupported:()=>h.Z3,mergeEvtNamespace:()=>p.jU,mwcRandom32:()=>c.F6,mwcRandomSeed:()=>c.CN,newGuid:()=>u.GW,newId:()=>c.pZ,normalizeJsName:()=>l.Gf,objCreate:()=>f.pu,objDefineAccessors:()=>l.l_,objExtend:()=>l.mm,objForEachKey:()=>l.rW,objFreeze:()=>l.FL,objKeys:()=>l.FY,objSeal:()=>l.Xi,objToString:()=>l.Mu,optimizeObject:()=>l.Ax,parseTraceParent:()=>q.j_,perfNow:()=>u.Jj,proxyAssign:()=>l.cf,proxyFunctionAs:()=>l.Oi,proxyFunctions:()=>l.Vb,random32:()=>c._l,randomValue:()=>c.az,removeEventHandler:()=>p.C1,removeEventListeners:()=>p.nJ,removePageHideEventListener:()=>p.C9,removePageShowEventListener:()=>p.Yl,removePageUnloadEventListener:()=>p.JA,safeGetCookieMgr:()=>k.JP,safeGetLogger:()=>y.vH,sendCustomEvent:()=>h.Kf,setCookie:()=>u.d8,setEnableEnvMocks:()=>h.dI,setGblPerfMgr:()=>v.tQ,setValue:()=>l.sO,sortPlugins:()=>b.AA,strContains:()=>l._Q,strEndsWith:()=>l.Id,strFunction:()=>m.cb,strObject:()=>m.fK,strPrototype:()=>m.hB,strStartsWith:()=>l.xe,strTrim:()=>l.nd,strUndefined:()=>m.jA,throwError:()=>l._y,toISOString:()=>l.Y6,uaDisallowsSameSiteNone:()=>k.UY,unloadComponents:()=>b.HD,useXDomainRequest:()=>h.cp});var r=n(978),i=n(4641),o=n(8176),s=n(4770),a=n(1549),c=n(395),u=n(821),l=n(3161),d=n(1785),p=n(1318),h=n(1167),f=n(8785),m=n(2589),g=n(6329),v=n(2753),y=n(547),_=n(877),b=n(3656),E=n(8712),S=n(6474),w="_aiHooks",C=["req","rsp","hkErr","fnErr"];function T(e,t){if(e)for(var n=0;n<e[S.R5]&&!t(e[n],n);n++);}function R(e,t,n,r,i){i>=0&&i<=2&&T(e,(function(e,o){var s=e.cbks,a=s[C[i]];if(a){t.ctx=function(){return r[o]=r[o]||{}};try{a[S.ZV](t.inst,n)}catch(e){var c=t.err;try{var u=s[C[2]];u&&(t.err=e,u[S.ZV](t.inst,n))}catch(e){}finally{t.err=c}}}}))}function O(e,t,n,r){var i=null;return e&&((0,l.nr)(e,t)?i=e:n&&(i=O((0,l.Hb)(e),t,r,!1))),i}function x(e,t,n){return e?A(e[m.hB],t,n,!1):null}function P(e,t,n){return e?D(e[m.hB],t,n,!1):null}function I(e,t,n,r){var i=n&&n[w];if(!i){var o=function(e){return function(){var t,n=arguments,r=e.h,i=((t={})[S.I]=e.n,t.inst=this,t.ctx=null,t.set=function(e,t){(n=a([],n))[e]=t,s=a([i],n)},t),o=[],s=a([i],n);function a(e,t){return T(t,(function(t){e[S.MW](t)})),e}i.evt=(0,h.a8)("event"),R(r,i,s,o,0);var c=e.f;if(c)try{i.rslt=c[S.ZV](this,n)}catch(e){throw i.err=e,R(r,i,s,o,3),e}return R(r,i,s,o,1),i.rslt}}(i={i:0,n:t,f:n,h:[]});o[w]=i,e[t]=o}var s={id:i.i,cbks:r,rm:function(){var e=this.id;T(i.h,(function(t,n){if(t.id===e)return i.h[S.cb](n,1),1}))}};return i.i++,i.h[S.MW](s),s}function A(e,t,n,r,i){if(void 0===r&&(r=!0),e&&t&&n){var o=O(e,t,r,i);if(o){var s=o[t];if(typeof s===m.cb)return I(o,t,s,n)}}return null}function D(e,t,n,r,i){void 0===r&&(r=!0);var o=null;return T(t,(function(t){var s=A(e,t,n,r,i);s&&(o||(o=[]),o[S.MW](s))})),o}function N(e,t,n,r,i){if(e&&t&&n){var o=O(e,t,r,i)||e;if(o)return I(o,t,o[t],n)}return null}var k=n(8589),M=n(7485),L=n(8530),F=n(6930),q=n(1579)},9798:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>q});var i,o="undefined",s="constructor",a="prototype",c="function",u="_dynInstFuncs",l="_isDynProxy",d="_dynClass",p="_dynCls$",h="_dynInstChk",f=h,m="_dfOpts",g="_unknown_",v="__proto__",y="_dyn"+v,_="__dynProto$Gbl",b="_dynInstProto",E="useBaseInst",S="setInstFuncs",w=Object,C=w.getPrototypeOf,T=w.getOwnPropertyNames,R=(typeof globalThis!==o&&(i=globalThis),i||typeof self===o||(i=self),i||typeof window===o||(i=window),i||typeof global===o||(i=global),i||{}),O=R[_]||(R[_]={o:(r={},r[S]=!0,r[E]=!0,r),n:1e3});function x(e,t){return e&&w[a].hasOwnProperty.call(e,t)}function P(e){return e&&(e===w[a]||e===Array[a])}function I(e){return P(e)||e===Function[a]}function A(e){var t;if(e){if(C)return C(e);var n=e[v]||e[a]||(e[s]?e[s][a]:null);t=e[y]||n,x(e,y)||(delete e[b],t=e[y]=e[b]||e[y],e[b]=n)}return t}function D(e,t){var n=[];if(T)n=T(e);else for(var r in e)"string"==typeof r&&x(e,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function N(e,t,n){return t!==s&&typeof e[t]===c&&(n||x(e,t))}function k(e){throw new TypeError("DynamicProto: "+e)}function M(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function L(e,t,n,r,i){if(!P(e)){var o=n[u]=n[u]||{},s=o[t]=o[t]||{};!1!==o[f]&&(o[f]=!!i),D(n,(function(t){N(n,t,!1)&&n[t]!==r[t]&&(s[t]=n[t],delete n[t],(!x(e,t)||e[t]&&!e[t][l])&&(e[t]=function(e,t){var n=function(){var r=function(e,t,n,r){var i=null;if(e&&x(n,d)){var o=e[u]||{};if((i=(o[n[d]]||{})[t])||k("Missing ["+t+"] "+c),!i[h]&&!1!==o[f]){for(var s=!x(e,t),a=A(e),l=[];s&&a&&!I(a)&&!M(l,a);){var p=a[t];if(p){s=p===r;break}l.push(a),a=A(a)}try{s&&(e[t]=i),i[h]=1}catch(e){o[f]=!1}}}return i}(this,t,e,n)||function(e,t,n){var r=t[e];return r===n&&(r=A(t)[e]),typeof r!==c&&k("["+e+"] is not a "+c),r}(t,e,n);return r.apply(this,arguments)};return n[l]=1,n}(e,t)))}))}}function F(e,t){return x(e,a)?e.name||t||g:((e||{})[s]||{}).name||t||g}function q(e,t,n,r){x(e,a)||k("theClass is an invalid class definition.");var i=e[a];(function(e,t){if(C){for(var n=[],r=A(t);r&&!I(r)&&!M(n,r);){if(r===e)return!0;n.push(r),r=A(r)}return!1}return!0})(i,t)||k("["+F(e)+"] not in hierarchy of ["+F(t)+"]");var o=null;x(i,d)?o=i[d]:(o=p+F(e,"_")+"$"+O.n,O.n++,i[d]=o);var s=q[m],c=!!s[E];c&&r&&void 0!==r[E]&&(c=!!r[E]);var h=function(e){var t={};return D(e,(function(n){!t[n]&&N(e,n,!1)&&(t[n]=e[n])})),t}(t),g=function(e,t,n,r){function i(e,t,n){var i=t[n];if(i[l]&&r){var o=e[u]||{};!1!==o[f]&&(i=(o[t[d]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var o={};D(n,(function(e){o[e]=i(t,n,e)}));for(var s=A(e),a=[];s&&!I(s)&&!M(a,s);)D(s,(function(e){!o[e]&&N(s,e,!C)&&(o[e]=i(t,s,e))})),a.push(s),s=A(s);return o}(i,t,h,c);n(t,g);var v=!!C&&!!s[S];v&&r&&(v=!!r[S]),L(i,o,t,h,!1!==v)}q[m]=O.o},2589:(e,t,n)=>{"use strict";n.d(t,{CY:()=>f,Pw:()=>u,RJ:()=>h,V4:()=>l,ak:()=>c,bO:()=>a,cb:()=>r,fK:()=>i,hB:()=>s,jA:()=>o,rl:()=>d,yu:()=>p});var r="function",i="object",o="undefined",s="prototype",a="hasOwnProperty",c="default",u=Object,l=u[s],d=u.assign,p=u.create,h=u.defineProperty,f=l[a]},8785:(e,t,n)=>{"use strict";n.d(t,{Rd:()=>o,ZU:()=>s,pu:()=>a});var r=n(2589),i=null;function o(e){void 0===e&&(e=!0);var t=!1===e?null:i;return t||(typeof globalThis!==r.jA&&(t=globalThis),t||typeof self===r.jA||(t=self),t||typeof window===r.jA||(t=window),t||typeof global===r.jA||(t=global),i=t),t}function s(e){throw new TypeError(e)}function a(e){var t=r.yu;if(t)return t(e);if(null==e)return{};var n=typeof e;function i(){}return n!==r.fK&&n!==r.cb&&s("Object prototype may only be an Object:"+e),i[r.hB]=e,new i}},3298:(e,t,n)=>{"use strict";n.d(t,{$h:()=>C,Cj:()=>E,DJ:()=>_,EU:()=>y,KG:()=>R,Lv:()=>m,V0:()=>v,an:()=>b,hw:()=>T,i9:()=>S,l9:()=>g,m:()=>O,ne:()=>f,uc:()=>p,zg:()=>w});var r=n(2589),i=n(8785),o=((0,i.Rd)()||{}).Symbol,s=((0,i.Rd)()||{}).Reflect,a=!!s,c="decorate",u="metadata",l="getOwnPropertySymbols",d="iterator",p=r.rl||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])r.V4[r.bO].call(t,o)&&(e[o]=t[o]);return e},h=function(e,t){return h=r.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[r.bO](n)&&(e[n]=t[n])},h(e,t)};function f(e,t){function n(){this.constructor=e}typeof t!==r.cb&&null!==t&&(0,i.ZU)("Class extends value "+String(t)+" is not a constructor or null"),h(e,t),e[r.hB]=null===t?(0,i.pu)(t):(n[r.hB]=t[r.hB],new n)}function m(e,t){var n={};for(var i in e)r.CY.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&typeof r.Pw[l]===r.cb)for(var o=0,s=r.Pw[l](e);o<s.length;o++)t.indexOf(s[o])<0&&r.V4.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]]);return n}function g(e,t,n,i){var o,u=arguments.length,l=u<3?t:null===i?i=r.Pw.getOwnPropertyDescriptor(t,n):i;if(a&&typeof s[c]===r.cb)l=s[c](e,t,n,i);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(l=(u<3?o(l):u>3?o(t,n,l):o(t,n))||l);return u>3&&l&&(0,r.RJ)(t,n,l),l}function v(e,t){return function(n,r){t(n,r,e)}}function y(e,t){if(a&&s[u]===r.cb)return s[u](e,t)}function _(e,t){for(var n in e)n===r.ak||r.CY.call(t,n)||b(t,e,n)}function b(e,t,n,i){void 0===i&&(i=n),r.yu?(0,r.RJ)(e,i,{enumerable:!0,get:function(){return t[n]}}):e[i]=t[n]}function E(e){var t=typeof o===r.cb&&o[d],n=t&&e[t],s=0;return n?n.call(e):e&&"number"==typeof e.length?{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}}:void(0,i.ZU)(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(e,t){var n=typeof o===r.cb&&e[o[d]];if(!n)return e;var i,s,a=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)c.push(i.value)}catch(e){s={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}return c}function w(){for(var e=arguments,t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;var i=Array(t),o=0;for(n=0;n<r;n++)for(var s=e[n],a=0,c=s.length;a<c;a++,o++)i[o]=s[a];return i}function C(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}function T(e,t){return r.RJ?(0,r.RJ)(e,"raw",{value:t}):e.raw=t,e}function R(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)n!==r.ak&&Object.prototype.hasOwnProperty.call(e,n)&&b(t,e,n);return r.yu?(0,r.RJ)(t,r.ak,{enumerable:!0,value:e}):t[r.ak]=e,t}function O(e){return e&&e.__esModule?e:{strDefault:e}}},623:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ObjAssign:()=>r.rl,ObjClass:()=>r.Pw,ObjCreate:()=>r.yu,ObjDefineProperty:()=>r.RJ,ObjHasOwnProperty:()=>r.CY,ObjProto:()=>r.V4,__assignFn:()=>o.uc,__createBindingFn:()=>o.an,__decorateFn:()=>o.l9,__exportStarFn:()=>o.DJ,__exposeGlobalTsLib:()=>s,__extendsFn:()=>o.ne,__importDefaultFn:()=>o.m,__importStarFn:()=>o.KG,__makeTemplateObjectFn:()=>o.hw,__metadataFn:()=>o.EU,__paramFn:()=>o.V0,__readFn:()=>o.i9,__restFn:()=>o.Lv,__spreadArrayFn:()=>o.$h,__spreadArraysFn:()=>o.zg,__valuesFn:()=>o.Cj,getGlobal:()=>i.Rd,objCreateFn:()=>i.pu,strDefault:()=>r.ak,strShimFunction:()=>r.cb,strShimHasOwnProperty:()=>r.bO,strShimObject:()=>r.fK,strShimPrototype:()=>r.hB,strShimUndefined:()=>r.jA,throwTypeError:()=>i.ZU});var r=n(2589),i=n(8785),o=n(3298);function s(){var e,t,n,s,a=(0,i.Rd)()||{};e=a,t=o.uc,n=o.ne,s=o.an,e.__assign||(e.__assign=r.rl||t),e.__extends||(e.__extends=n),e.__createBinding||(e.__createBinding=s),__assign||(__assign=a.__assign),__extends||(__extends=a.__extends),__createBinding||(__createBinding=a.__createBinding)}},2314:(e,t,n)=>{"use strict";var r;n.r(t),n.d(t,{default:()=>q});var i,o="undefined",s="constructor",a="prototype",c="function",u="_dynInstFuncs",l="_isDynProxy",d="_dynClass",p="_dynCls$",h="_dynInstChk",f=h,m="_dfOpts",g="_unknown_",v="__proto__",y="_dyn"+v,_="__dynProto$Gbl",b="_dynInstProto",E="useBaseInst",S="setInstFuncs",w=Object,C=w.getPrototypeOf,T=w.getOwnPropertyNames,R=(typeof globalThis!==o&&(i=globalThis),i||typeof self===o||(i=self),i||typeof window===o||(i=window),i||typeof global===o||(i=global),i||{}),O=R[_]||(R[_]={o:(r={},r[S]=!0,r[E]=!0,r),n:1e3});function x(e,t){return e&&w[a].hasOwnProperty.call(e,t)}function P(e){return e&&(e===w[a]||e===Array[a])}function I(e){return P(e)||e===Function[a]}function A(e){var t;if(e){if(C)return C(e);var n=e[v]||e[a]||(e[s]?e[s][a]:null);t=e[y]||n,x(e,y)||(delete e[b],t=e[y]=e[b]||e[y],e[b]=n)}return t}function D(e,t){var n=[];if(T)n=T(e);else for(var r in e)"string"==typeof r&&x(e,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function N(e,t,n){return t!==s&&typeof e[t]===c&&(n||x(e,t))}function k(e){throw new TypeError("DynamicProto: "+e)}function M(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function L(e,t,n,r,i){if(!P(e)){var o=n[u]=n[u]||{},s=o[t]=o[t]||{};!1!==o[f]&&(o[f]=!!i),D(n,(function(t){N(n,t,!1)&&n[t]!==r[t]&&(s[t]=n[t],delete n[t],(!x(e,t)||e[t]&&!e[t][l])&&(e[t]=function(e,t){var n=function(){var r=function(e,t,n,r){var i=null;if(e&&x(n,d)){var o=e[u]||{};if((i=(o[n[d]]||{})[t])||k("Missing ["+t+"] "+c),!i[h]&&!1!==o[f]){for(var s=!x(e,t),a=A(e),l=[];s&&a&&!I(a)&&!M(l,a);){var p=a[t];if(p){s=p===r;break}l.push(a),a=A(a)}try{s&&(e[t]=i),i[h]=1}catch(e){o[f]=!1}}}return i}(this,t,e,n)||function(e,t,n){var r=t[e];return r===n&&(r=A(t)[e]),typeof r!==c&&k("["+e+"] is not a "+c),r}(t,e,n);return r.apply(this,arguments)};return n[l]=1,n}(e,t)))}))}}function F(e,t){return x(e,a)?e.name||t||g:((e||{})[s]||{}).name||t||g}function q(e,t,n,r){x(e,a)||k("theClass is an invalid class definition.");var i=e[a];(function(e,t){if(C){for(var n=[],r=A(t);r&&!I(r)&&!M(n,r);){if(r===e)return!0;n.push(r),r=A(r)}return!1}return!0})(i,t)||k("["+F(e)+"] not in hierarchy of ["+F(t)+"]");var o=null;x(i,d)?o=i[d]:(o=p+F(e,"_")+"$"+O.n,O.n++,i[d]=o);var s=q[m],c=!!s[E];c&&r&&void 0!==r[E]&&(c=!!r[E]);var h=function(e){var t={};return D(e,(function(n){!t[n]&&N(e,n,!1)&&(t[n]=e[n])})),t}(t),g=function(e,t,n,r){function i(e,t,n){var i=t[n];if(i[l]&&r){var o=e[u]||{};!1!==o[f]&&(i=(o[t[d]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var o={};D(n,(function(e){o[e]=i(t,n,e)}));for(var s=A(e),a=[];s&&!I(s)&&!M(a,s);)D(s,(function(e){!o[e]&&N(s,e,!C)&&(o[e]=i(t,s,e))})),a.push(s),s=A(s);return o}(i,t,h,c);n(t,g);var v=!!C&&!!s[S];v&&r&&(v=!!r[S]),L(i,o,t,h,!1!==v)}q[m]=O.o},3839:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.previewTransformation=t.specifyTransformation=t.specifyDerivedColNameTitle=t.createDerivedColumn=t.importNewFileText=t.page4NameText=t.page3NameText=t.page2NameText=t.page1NameText=t.wizardNameText=t.needSqlConnectionText=t.needConnectionText=t.updateText=t.fileImportText=t.tableSchemaText=t.tableNameText=t.databaseText=t.serverNameText=t.importStatusText=t.importInformationText=t.refreshText=t.failureTitleText=t.successTitleText=t.allowNullsText=t.primaryKeyText=t.dataTypeText=t.columnNameText=t.nextText=t.importDataText=t.schemaTextboxTitleText=t.tableTextboxTitleText=t.fileTextboxTitleText=t.openFileText=t.browseFilesText=t.invalidFileLocationError=t.databaseDropdownTitleText=t.serverDropDownTitleText=t.serviceCrashMessageText=t.crashButtonText=t.flatFileImportStartCommand=t.serviceCrashLink=t.supportedProviders=t.summaryErrorSymbol=t.packageName=t.mssqlProvider=t.sqlConfigSectionName=t.configLogDebugInfo=t.providerId=t.serviceName=t.extensionConfigSectionName=void 0,t.selectSchemaQuery=t.selectColumn=t.specifyTransformationForRow=t.selectAllColumns=t.deriverColumnInstruction5=t.deriverColumnInstruction4=t.deriverColumnInstruction3=t.deriverColumnInstruction2=t.deriverColumnInstruction1=t.headerIntructionText=t.columnTableTitle=void 0;const r=n(3403).loadMessageBundle(n(1017).join(__dirname,"common/constants.ts"));t.extensionConfigSectionName="flatFileImport",t.serviceName="Flat File Import Service",t.providerId="FlatFileImport",t.configLogDebugInfo="logDebugInfo",t.sqlConfigSectionName="sql",t.mssqlProvider="MSSQL",t.packageName="Microsoft.import",t.summaryErrorSymbol=" ",t.supportedProviders=[t.mssqlProvider],t.serviceCrashLink="https://github.com/Microsoft/azuredatastudio/issues/2090",t.flatFileImportStartCommand="flatFileImport.start",t.crashButtonText=r(0,null),t.serviceCrashMessageText=r(1,null),t.serverDropDownTitleText=r(2,null),t.databaseDropdownTitleText=r(3,null),t.invalidFileLocationError=r(4,null),t.browseFilesText=r(5,null),t.openFileText=r(6,null),t.fileTextboxTitleText=r(7,null),t.tableTextboxTitleText=r(8,null),t.schemaTextboxTitleText=r(9,null),t.importDataText=r(10,null),t.nextText=r(11,null),t.columnNameText=r(12,null),t.dataTypeText=r(13,null),t.primaryKeyText=r(14,null),t.allowNullsText=r(15,null),t.successTitleText=r(16,null),t.failureTitleText=r(17,null),t.refreshText=r(18,null),t.importInformationText=r(19,null),t.importStatusText=r(20,null),t.serverNameText=r(21,null),t.databaseText=r(22,null),t.tableNameText=r(23,null),t.tableSchemaText=r(24,null),t.fileImportText=r(25,null),t.updateText=r(26,null),t.needConnectionText=r(27,null),t.needSqlConnectionText=r(28,null),t.wizardNameText=r(29,null),t.page1NameText=r(30,null),t.page2NameText=r(31,null),t.page3NameText=r(32,null),t.page4NameText=r(33,null),t.importNewFileText=r(34,null),t.createDerivedColumn=r(35,null),t.specifyDerivedColNameTitle=r(36,null),t.specifyTransformation=r(37,null),t.previewTransformation=r(38,null),t.columnTableTitle=r(39,null),t.headerIntructionText=r(40,null),t.deriverColumnInstruction1=r(41,null),t.deriverColumnInstruction2=r(42,null),t.deriverColumnInstruction3=r(43,null),t.deriverColumnInstruction4=r(44,null),t.deriverColumnInstruction5=r(45,null),t.selectAllColumns=r(46,null),t.specifyTransformationForRow=function(e){return r(47,null,e)},t.selectColumn=function(e){return r(48,null,e)},t.selectSchemaQuery="SELECT name FROM sys.schemas"},8271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnableSqlAuthenticationProviderConfig=t.getConfiguration=t.isMssqlAuthProviderEnabled=void 0;const r=n(9496);function i(e){return r.workspace.getConfiguration(e)}function o(){const e=i("mssql");return!e||e.get("enableSqlAuthenticationProvider",!0)}t.isMssqlAuthProviderEnabled=function(){return o()},t.getConfiguration=i,t.getEnableSqlAuthenticationProviderConfig=o},3004:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this._context=e}get extensionContext(){return this._context}dispose(){this.deactivate()}}},6985:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3839),i=n(9072),o=n(3004),s=n(9496),a=n(3545),c=n(5218),u=n(7623);class l extends o.default{constructor(e){super(e),this._outputChannel=s.window.createOutputChannel(r.serviceName)}deactivate(){}async activate(){const e=new Promise((async e=>{u.managerInstance.onRegisteredApi(u.ApiType.FlatFileProvider)((t=>{this.initializeFlatFileProvider(t),e(!0)}))})),t=new c.ServiceClient(this._outputChannel).startService(this._context);await Promise.all([e,t])}initializeFlatFileProvider(e){i.tasks.registerTask(r.flatFileImportStartCommand,((t,...n)=>new a.FlatFileWizard(e).start(t,n)))}}t.default=l},5766:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DerivedColumnDialog=void 0;const r=n(9072),i=n(2361),o=n(3839),s={border:"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","border-bottom":"2px solid"},a={border:"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"};t.DerivedColumnDialog=class{constructor(e,t){this._model=e,this._provider=t,this._doneEmitter=new i,this._currentTransformation=[],this._specifyTransformations=[]}createDerivedColumn(){this._applyButton=r.window.createButton(o.previewTransformation),this._applyButton.enabled=!1,this._dialogObject=r.window.createModelViewDialog(o.createDerivedColumn,"DerivedColumnDialog","wide"),this._dialogObject.customButtons=[this._applyButton],this._applyButton.hidden=!1;let e=r.window.createTab("");return e.registerContent((async e=>{const t=[];this._model.originalProseColumns.forEach((e=>{const n=[];n.push({value:!1,ariaLabel:o.selectColumn(e.columnName)},{value:e.columnName}),t.push(n)})),this._view=e;const n=e.modelBuilder.declarativeTable().withProps({columns:[{displayName:"",ariaLabel:o.selectAllColumns,valueType:r.DeclarativeDataType.boolean,isReadOnly:!1,showCheckAll:!0,width:"20px",headerCssStyles:s,rowCssStyles:a},{displayName:o.columnTableTitle,valueType:r.DeclarativeDataType.string,isReadOnly:!0,width:"140px",headerCssStyles:s,rowCssStyles:a,ariaLabel:o.columnTableTitle}],dataValues:t,CSSStyles:{"table-layout":"fixed"}}).component();n.onDataChanged((e=>{if(e.value)this._transformationTable.columns.push({displayName:this._model.proseColumns[e.row].columnName,valueType:r.DeclarativeDataType.string,isReadOnly:!0,width:"100px",headerCssStyles:s,rowCssStyles:a}),this._model.proseDataPreview.forEach(((t,n)=>{this._transformationTable.dataValues[n].push({value:t[e.row]})}));else{let t=this._transformationTable.columns.findIndex((t=>this._model.proseColumns[e.row].columnName===t.displayName));this._transformationTable.columns.splice(t,1);for(let e=0;e<this._model.proseDataPreview.length;e++)this._transformationTable.dataValues[e].splice(t,1)}const t=this._transformationTable.columns.length>1;this.clearAndAddTransformationContainerComponents(t),this._applyButton.enabled=t}));const i=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",height:"100%"}).withProps({CSSStyles:{"border-right":"solid 1px"}}).component();i.addItem(n,{flex:"1 1 auto",CSSStyles:{"overflow-y":"hidden"}});const c=[];for(let e=0;e<this._model.proseDataPreview.length;e++)this._specifyTransformations.push(this._view.modelBuilder.inputBox().withProps({value:"",placeHolder:o.specifyTransformation,ariaLabel:o.specifyTransformationForRow(e)}).component()),c.push([{value:this._specifyTransformations[e]}]);this._transformationTable=e.modelBuilder.declarativeTable().withProps({columns:[{displayName:o.specifyTransformation,ariaLabel:o.specifyTransformation,valueType:r.DeclarativeDataType.component,isReadOnly:!1,width:"200px",headerCssStyles:s,rowCssStyles:a}],CSSStyles:{"table-layout":"fixed",overflow:"scroll"},width:"800px",dataValues:c}).component(),this._applyButton.onClick((async e=>{const t=this._transformationTable.columns.map((e=>e.displayName));t.splice(0,1);const n=[],i=[];if(this._transformationTable.dataValues.forEach(((e,t)=>{const r=e[0].value.value;""!==r&&(n.push(r),i.push(t))})),n.length>0)try{const e=await this._provider.sendLearnTransformationRequest({columnNames:t,transformationExamples:n,transformationExampleRowIndices:i});this._currentTransformation=e.transformationPreview,this._currentTransformation.forEach(((e,t)=>{this._transformationTable.dataValues[t][0].value.placeHolder=e})),this.clearAndAddTransformationContainerComponents(!0)}catch(e){this._dialogObject.message={text:e.toString(),level:r.window.MessageLevel.Error}}this.validatePage()}));const u=e.modelBuilder.text().withProps({value:o.specifyDerivedColNameTitle,requiredIndicator:!0,CSSStyles:{"font-size":"13px","font-weight":"bold"}}).component(),l=e.modelBuilder.inputBox().withProps({ariaLabel:o.specifyDerivedColNameTitle,required:!0}).component();l.onTextChanged((e=>{e&&(this._currentDerivedColumnName=e,this.validatePage())})),this._specifyDerivedColumnNameContainer=e.modelBuilder.flexContainer().withItems([u,l]).withLayout({width:"500px"}).component(),this._transformationContainer=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",height:"100%"}).withProps({CSSStyles:{"overflow-y":"auto","margin-left":"10px"}}).component(),this._headerInstructionText=this._view.modelBuilder.text().withProps({value:o.headerIntructionText,CSSStyles:{"font-size":"x-large","line-height":"22pt","margin-bottom":"0.7em"}}).component(),this._bodyInstructionText=this._view.modelBuilder.text().withProps({value:[o.deriverColumnInstruction1,o.deriverColumnInstruction2,o.deriverColumnInstruction3,o.deriverColumnInstruction4,o.deriverColumnInstruction5],textType:r.TextType.OrderedList,CSSStyles:{"font-size":"large","line-height":"22pt","margin-left":"1em","margin-top":"0em"}}).component(),this.clearAndAddTransformationContainerComponents(!1);const d=e.modelBuilder.flexContainer().withLayout({flexFlow:"row",height:"100%",width:"100%"}).component();d.addItem(i,{flex:"0 0 auto",CSSStyles:{"min-height":"calc(100vh - 160px)"}}),d.addItem(this._transformationContainer,{flex:"0 0 auto",CSSStyles:{overflow:"scroll","padding-right":"10px",width:"900px","max-height":"calc(100vh - 160px)"}});const p=e.modelBuilder.formContainer().withFormItems([{component:d}],{horizontal:!1}).withLayout({width:"100%"}).component();return e.initializeModel(p)})),this._dialogObject.okButton.onClick((e=>{this._doneEmitter.emit("done")})),this._dialogObject.cancelButton.onClick((e=>{this._doneEmitter.emit("close")})),this._dialogObject.content=[e],r.window.openDialog(this._dialogObject),new Promise((e=>{this._doneEmitter.once("done",(async()=>{try{await this._provider.sendSaveTransformationRequest({derivedColumnName:this._currentDerivedColumnName}),e({derivedColumnName:this._currentDerivedColumnName,derivedColumnDataPreview:this._currentTransformation})}catch(t){console.log(t),e(void 0)}})),this._doneEmitter.once("close",(async()=>{e(void 0)}))}))}clearAndAddTransformationContainerComponents(e){this._transformationContainer.clearItems(),e?(this._transformationContainer.addItem(this._specifyDerivedColumnNameContainer,{flex:"0 0 auto"}),this._transformationContainer.addItem(this._transformationTable,{flex:"1 1 auto",CSSStyles:{overflow:"scroll"}})):(this._transformationContainer.addItem(this._headerInstructionText,{flex:"0 0 auto"}),this._transformationContainer.addItem(this._bodyInstructionText,{flex:"0 0 auto"}))}validatePage(){this._dialogObject.okButton.enabled=void 0!==this._currentDerivedColumnName&&0!==this._currentTransformation.length}}},5e3:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaveTransformationRequest=t.LearnTransformationRequest=t.ChangeColumnSettingsRequest=t.GetColumnInfoRequest=t.InsertDataRequest=t.PROSEDiscoveryRequest=t.TelemetryParams=t.TelemetryNotification=void 0;const r=n(3056);var i,o,s,a,c,u,l;!function(e){e.type=new r.NotificationType("telemetry/sqlevent")}(i||(t.TelemetryNotification=i={})),t.TelemetryParams=class{},function(e){e.type=new r.RequestType("flatfile/proseDiscovery")}(o||(t.PROSEDiscoveryRequest=o={})),function(e){e.type=new r.RequestType("flatfile/insertData")}(s||(t.InsertDataRequest=s={})),function(e){e.type=new r.RequestType("flatfile/getColumnInfo")}(a||(t.GetColumnInfoRequest=a={})),function(e){e.type=new r.RequestType("flatfile/changeColumnSettings")}(c||(t.ChangeColumnSettingsRequest=c={})),function(e){e.type=new r.RequestType("flatfile/learnTransformation")}(u||(t.LearnTransformationRequest=u={})),function(e){e.type=new r.RequestType("flatfile/saveTransformation")}(l||(t.SaveTransformationRequest=l={}))},9792:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlatFileImportFeature=t.TelemetryFeature=void 0;const r=n(5868),i=n(2884),o=n(8853),s=n(3690),a=n(5e3),c=n(7623);t.TelemetryFeature=class{constructor(e){this._client=e}fillClientCapabilities(e){s.ensure(e,"telemetry").telemetry=!0}initialize(){this._client.onNotification(a.TelemetryNotification.type,(e=>{o.TelemetryReporter.sendTelemetryEvent(e.params.eventName,e.params.properties,e.params.measures)}))}};class u extends r.SqlOpsFeature{constructor(e){super(e,u.messagesTypes)}fillClientCapabilities(e){}initialize(e){this.register(this.messages,{id:i.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client;let n=(e,n)=>t.sendRequest(e,n).then((e=>e),(n=>(t.logFailedRequest(e,n),Promise.reject(n))));return c.managerInstance.registerApi(c.ApiType.FlatFileProvider,{providerId:t.providerId,sendPROSEDiscoveryRequest:e=>n(a.PROSEDiscoveryRequest.type,e),sendChangeColumnSettingsRequest:e=>n(a.ChangeColumnSettingsRequest.type,e),sendGetColumnInfoRequest:e=>n(a.GetColumnInfoRequest.type,e),sendInsertDataRequest:e=>n(a.InsertDataRequest.type,e),sendLearnTransformationRequest:e=>n(a.LearnTransformationRequest.type,e),sendSaveTransformationRequest:e=>n(a.SaveTransformationRequest.type,e)})}}t.FlatFileImportFeature=u,u.messagesTypes=[a.PROSEDiscoveryRequest.type]},7623:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.managerInstance=t.ApiType=void 0;const r=n(9496);var i;!function(e){e.FlatFileProvider="FlatFileProvider"}(i||(t.ApiType=i={})),t.managerInstance=new class{constructor(){this.featureEventChannels={},this._onRegisteredModelView=new r.EventEmitter}onRegisteredApi(e){let t=this.featureEventChannels[e];return t||(t=new r.EventEmitter,this.featureEventChannels[e]=t),t.event}registerApi(e,t){let n=this.featureEventChannels[e];return n&&n.fire(t),{dispose:()=>{}}}get onRegisteredModelView(){return this._onRegisteredModelView.event}registerModelView(e,t){this._onRegisteredModelView.fire({id:e,modelView:t})}}},5218:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceClient=void 0;const r=n(5868),i=n(9707),o=n(3056),s=n(9496),a=n(3403).loadMessageBundle(n(1017).join(__dirname,"services/serviceClient.ts")),c=n(1017),u=n(8853),l=n(3839),d=n(9792),p=n(7147);t.ServiceClient=class{constructor(e){this.outputChannel=e,this.statusView=s.window.createStatusBarItem(s.StatusBarAlignment.Left)}async startService(e){const t=await p.promises.readFile(c.join(e.extensionPath,"config.json"));let n=this.createClientOptions();try{const i=Date.now();let o,s=await this.downloadBinaries(e,t);const c=Date.now();let d=this.generateServerOptions(s,e);o=new r.SqlOpsDataClient(l.serviceName,d,n);const p=Date.now();o.onReady().then((()=>{const e=Date.now();this.statusView.text=a(0,null,l.serviceName),setTimeout((()=>{this.statusView.hide()}),1500),u.TelemetryReporter.sendTelemetryEvent("startup/LanguageClientStarted",{installationTime:String(c-i),processStartupTime:String(e-p),totalTime:String(e-i),beginningTimestamp:String(i)})})),this.statusView.show(),this.statusView.text=a(1,null,l.serviceName);let h=o.start();return e.subscriptions.push(h),o}catch(e){return u.TelemetryReporter.sendTelemetryEvent("ServiceInitializingFailed"),void s.window.showErrorMessage(a(2,null,l.serviceName,e))}}async downloadBinaries(e,t){const n=JSON.parse(t.toString());n.installDirectory=c.join(e.extensionPath,n.installDirectory),n.proxy=s.workspace.getConfiguration("http").get("proxy"),n.strictSSL=s.workspace.getConfiguration("http").get("proxyStrictSSL",!0);const r=new i.ServerProvider(n);return r.eventEmitter.onAny(this.generateHandleServerProviderEvent()),r.getOrDownloadServer()}createClientOptions(){return{providerId:l.providerId,errorHandler:new u.LanguageClientErrorHandler,synchronize:{configurationSection:[l.extensionConfigSectionName,l.sqlConfigSectionName]},features:[d.TelemetryFeature,d.FlatFileImportFeature],outputChannel:new h}}generateServerOptions(e,t){let n=[];n.push("--log-dir");let r=t.logUri.fsPath;n.push(r);let i=s.workspace.getConfiguration(l.extensionConfigSectionName);return i&&i[l.configLogDebugInfo]&&n.push("--enable-logging"),{command:e,args:n,transport:o.TransportKind.stdio}}generateHandleServerProviderEvent(){let e=0;return(t,...n)=>{switch(t){case"install_start":this.outputChannel.show(!0),this.statusView.show(),this.outputChannel.appendLine(a(3,null,l.serviceName,n[0])),this.statusView.text=a(4,null,l.serviceName);break;case"install_end":this.outputChannel.appendLine(a(5,null,l.serviceName));break;case"download_start":this.outputChannel.appendLine(a(6,null,n[0])),this.outputChannel.append(a(7,null,Math.ceil(n[1]/1024).toLocaleString(s.env.language))),this.statusView.text=a(8,null,l.serviceName);break;case"download_progress":let t=Math.ceil(n[0]/5);t>e&&(this.outputChannel.append(".".repeat(t-e)),e=t);break;case"download_end":this.outputChannel.appendLine(a(9,null,l.serviceName));break;case"entry_extracted":this.outputChannel.appendLine(a(10,null,n[0],n[1],n[2]));break;case"log_emitted":n[0]>=2&&this.outputChannel.appendLine(n[1])}}}};class h{append(e){}appendLine(e){}clear(){}show(e,t){}hide(){}dispose(){}replace(e){}}},3690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensure=void 0,t.ensure=function(e,t){return void 0===e[t]&&(e[t]={}),e[t]}},8853:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageClientErrorHandler=t.TelemetryReporter=void 0;const r=n(3056),i=n(7437),o=n(9496),s=n(3839),a=o.extensions.getExtension(s.packageName)?.packageJSON;t.TelemetryReporter=new i.default(a?.name,a?.version,a?.aiKey),t.LanguageClientErrorHandler=class{constructor(){}showOnErrorPrompt(){t.TelemetryReporter.sendTelemetryEvent(s.serviceName+"Crash"),o.window.showErrorMessage(s.serviceCrashMessageText,s.crashButtonText).then((e=>{e&&e===s.crashButtonText&&o.env.openExternal(o.Uri.parse(s.serviceCrashLink))}))}error(e,t,n){return this.showOnErrorPrompt(),r.ErrorAction.Shutdown}closed(){return this.showOnErrorPrompt(),r.CloseAction.DoNotRestart}}},3776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasePage=void 0;const r=n(9072);t.BasePage=class{async onPageLeave(){return!0}async cleanup(){return!0}setupNavigationValidator(){}async getServerValues(){let e=await r.connection.getActiveConnections();if(!e||0===e.length)return;let t=-1,n=-1,i=e.map((e=>{t++,-1===n&&(this.model.server&&e.connectionId===this.model.server.connectionId||this.model.serverId&&e.connectionId===this.model.serverId)&&(n=t);let r=e.options.user;return r||(r="default"),{connection:e,displayName:`${e.options.server} (${r})`,name:e.connectionId}}));if(n>=0){let e=i[0];i[0]=i[n],i[n]=e}else this.deleteServerValues();return i}async getDatabaseValues(){let e=-1,t=-1,n=(await r.connection.listDatabases(this.model.server.connectionId)).map((n=>(t++,this.model.database&&n===this.model.database&&(e=t),{displayName:n,name:n})));if(e>=0){let t=n[0];n[0]=n[e],n[e]=t}return n}deleteServerValues(){delete this.model.server,delete this.model.serverId,delete this.model.database}}},4025:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportPage=void 0;const r=n(3776);class i extends r.BasePage{constructor(e,t,n,r,i){super(),this.instance=e,this.wizardPage=t,this.model=n,this.view=r,this.provider=i}}t.ImportPage=i},3545:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlatFileWizard=void 0;const r=n(9072),i=n(9496),o=n(6098),s=n(8735),a=n(7518),c=n(65),u=n(3839);t.FlatFileWizard=class{constructor(e){this.provider=e}async start(e,...t){let n={},i=e?.connectionProfile;i&&(n.serverId=i.id,n.database=i.databaseName);let l,d,p,h,f=new Map,m=await this.getConnectionId();m&&(n.serverId=m,this.wizard=r.window.createWizard(u.wizardNameText),this.page1=r.window.createWizardPage(u.page1NameText),this.page2=r.window.createWizardPage(u.page2NameText),this.page3=r.window.createWizardPage(u.page3NameText),this.page4=r.window.createWizardPage(u.page4NameText),this.page1.registerContent((async e=>{l=new o.FileConfigPage(this,this.page1,n,e,this.provider),f.set(0,l),await l.start().then((()=>{l.setupNavigationValidator(),l.onPageEnter()}))})),this.page2.registerContent((async e=>{d=new s.ProsePreviewPage(this,this.page2,n,e,this.provider),f.set(1,d),await d.start()})),this.page3.registerContent((async e=>{p=new a.ModifyColumnsPage(this,this.page3,n,e,this.provider),f.set(2,p),await p.start()})),this.page4.registerContent((async e=>{h=new c.SummaryPage(this,this.page4,n,e,this.provider),f.set(3,h),await h.start()})),this.createDerivedColumnButton=r.window.createButton(u.createDerivedColumn),this.createDerivedColumnButton.hidden=!0,this.importAnotherFileButton=r.window.createButton(u.importNewFileText),this.importAnotherFileButton.onClick((()=>{this.wizard.close(),f.forEach((e=>e.cleanup())),this.wizard.open()})),this.importAnotherFileButton.hidden=!0,this.wizard.customButtons=[this.importAnotherFileButton,this.createDerivedColumnButton],this.wizard.onPageChanged((async e=>{let t=e.newPage,n=e.lastPage,r=f.get(t),i=f.get(n);i&&await i.onPageLeave(),r&&(r.setupNavigationValidator(),await r.onPageEnter())})),this.wizard.generateScriptButton.hidden=!0,this.wizard.pages=[this.page1,this.page2,this.page3,this.page4],this.wizard.open())}async getConnectionId(){let e,t=await r.connection.getCurrentConnection();if(t){if("MSSQL"!==t.providerId)return void i.window.showErrorMessage(u.needSqlConnectionText);e=t.connectionId}else{let t=await r.connection.openConnectionDialog(u.supportedProviders);if(!t)return void i.window.showErrorMessage(u.needConnectionText);e=t.connectionId}return e}setImportAnotherFileVisibility(e){this.importAnotherFileButton.hidden=!e}registerNavigationValidator(e){this.wizard.registerNavigationValidator(e)}changeNextButtonLabel(e){this.wizard.nextButton.label=e}}},6098:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileConfigPage=void 0;const r=n(9072),i=n(9496),o=n(4025),s=n(3839),a=n(7147);class c extends o.ImportPage{constructor(){super(...arguments),this.tableNames=[]}get serverDropdown(){return this._serverDropdown}set serverDropdown(e){this._serverDropdown=e}get databaseDropdown(){return this._databaseDropdown}set databaseDropdown(e){this._databaseDropdown=e}get fileTextBox(){return this._fileTextBox}set fileTextBox(e){this._fileTextBox=e}get fileButton(){return this._fileButton}set fileButton(e){this._fileButton=e}get tableNameTextBox(){return this._tableNameTextBox}set tableNameTextBox(e){this._tableNameTextBox=e}get schemaDropdown(){return this._schemaDropdown}set schemaDropdown(e){this._schemaDropdown=e}get form(){return this._form}set form(e){this._form=e}get schemaLoader(){return this._schemaLoader}set schemaLoader(e){this._schemaLoader=e}async start(){let e=await this.createSchemaDropdown(),t=await this.createTableNameBox(),n=await this.createFileBrowser(),r=await this.createDatabaseDropdown(),i=await this.createServerDropdown();return this.form=this.view.modelBuilder.formContainer().withFormItems([i,r,n,t,e]).component(),await this.view.initializeModel(this.form),!0}async onPageEnter(){this.serverDropdown.focus();let e=await this.populateServerDropdown(),t=await this.populateDatabaseDropdown(),n=await this.populateSchemaDropdown();return e&&t&&n}async onPageLeave(){return delete this.model.serverId,!0}async cleanup(){return delete this.model.filePath,delete this.model.table,!0}async createServerDropdown(){return this.serverDropdown=this.view.modelBuilder.dropDown().withProps({required:!0}).component(),this.serverDropdown.onValueChanged((async e=>{if(e.selected){const e=this.serverDropdown.value;if(!e)return;this.model.server=e.connection,await this.populateDatabaseDropdown()}await this.populateDatabaseDropdown()})),{component:this.serverDropdown,title:s.serverDropDownTitleText}}async populateServerDropdown(){let e=await this.getServerValues();return void 0!==e&&(this.model.server=e[0].connection,this.serverDropdown.values=e,!0)}async createDatabaseDropdown(){return this.databaseDropdown=this.view.modelBuilder.dropDown().withProps({required:!0}).component(),this.databaseDropdown.onValueChanged((async e=>{if(e.selected){const e=this.databaseDropdown.value;if(!e)return;if(this.model.database=e.name,!this.model.server)return;let t=r.dataprotocol.getProvider(this.model.server.providerName,r.DataProviderType.ConnectionProvider),n=await r.connection.getUriForConnection(this.model.server.connectionId);t.changeDatabase(n,this.model.database),this.populateSchemaDropdown()}})),{component:this.databaseDropdown,title:s.databaseDropdownTitleText}}async populateDatabaseDropdown(){this.databaseDropdown.loading=!0,this.databaseDropdown.values=[],this.schemaDropdown.values=[];try{if(!this.model.server)return this.databaseDropdown.loading=!1,!1;let e,t=this.model.server.options.database;try{e=await this.getDatabaseValues()}catch(n){console.log(n),e=[{displayName:t,name:t}],this.databaseDropdown.editable=!1}this.model.database=t,this.databaseDropdown.updateProperties({values:e}),this.databaseDropdown.value={displayName:this.model.database,name:this.model.database}}finally{this.databaseDropdown.loading=!1}return!0}async createFileBrowser(){return this.fileTextBox=this.view.modelBuilder.inputBox().withProps({required:!0,validationErrorMessage:s.invalidFileLocationError}).withValidation((async e=>{if(e.value)try{return await a.promises.access(e.value),!0}catch(e){return!1}return!1})).component(),this.fileTextBox.onTextChanged((e=>{this.model.newFileSelected=!0})),this.fileButton=this.view.modelBuilder.button().withProps({label:s.browseFilesText,secondary:!0}).component(),this.fileButton.onDidClick((async e=>{this.model.newFileSelected=!0;let t=await i.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,openLabel:s.openFileText,filters:{"CSV/TXT Files":["csv","txt"],"All Files":["*"]}});if(!t||0===t.length)return;let n=t[0];this.fileTextBox.value=n.fsPath;let r=n.path.lastIndexOf("/"),o=n.path.lastIndexOf(".");switch(0===o&&(o=n.path.length),n.path.substring(o+1,n.path.length).toLowerCase()){case"json":this.model.fileType="JSON";break;case"csv":case"tsv":this.model.fileType="CSV";break;default:this.model.fileType="TXT"}this.tableNameTextBox.value=n.path.substring(r+1,o),this.model.table=this.tableNameTextBox.value,this.tableNameTextBox.validate(),this.model.filePath=n.fsPath})),{component:this.fileTextBox,title:s.fileTextboxTitleText,actions:[this.fileButton]}}async createTableNameBox(){return this.tableNameTextBox=this.view.modelBuilder.inputBox().withValidation((e=>{let t=e.value;return!(!t||0===t.length)&&-1===this.tableNames.indexOf(t)})).withProps({required:!0}).component(),this.tableNameTextBox.onTextChanged((e=>{this.model.newFileSelected=!0,this.model.table=e})),{component:this.tableNameTextBox,title:s.tableTextboxTitleText}}async createSchemaDropdown(){return this.schemaDropdown=this.view.modelBuilder.dropDown().withProps({required:!0}).component(),this.schemaLoader=this.view.modelBuilder.loadingComponent().withItem(this.schemaDropdown).component(),this.schemaDropdown.onValueChanged((e=>{if(e.selected){const e=this.schemaDropdown.value;if(!e)return;this.model.schema=e.name}})),{component:this.schemaLoader,title:s.schemaTextboxTitleText}}async populateSchemaDropdown(){this.schemaLoader.loading=!0;let e=await this.getSchemaValues();return this.model.schema=e[0]?.name,this.schemaDropdown.values=e,this.schemaLoader.loading=!1,!0}async getSchemaValues(){if(!this.model.server)return[];let e=await r.connection.getUriForConnection(this.model.server.connectionId),t=r.dataprotocol.getProvider(this.model.server.providerName,r.DataProviderType.QueryProvider),n=await t.runQueryAndReturn(e,s.selectSchemaQuery),i=-1,o=-1,a=n.rows.map((e=>{let t=e[0].displayValue;o++,this.model.schema&&t===this.model.schema&&(i=o);let n=e[0].displayValue;return{name:n,displayName:n}}));if(i>=0){let e=a[0];a[0]=a[i],a[i]=e}return a}deleteServerValues(){delete this.model.server,delete this.model.serverId,delete this.model.database,delete this.model.schema}deleteDatabaseValues(){delete this.model.database,delete this.model.schema}}t.FileConfigPage=c},7518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyColumnsPage=void 0;const r=n(9072),i=n(4025),o=n(3839);class s extends i.ImportPage{constructor(){super(...arguments),this.categoryValues=[{name:"bigint",displayName:"bigint"},{name:"binary(50)",displayName:"binary(50)"},{name:"bit",displayName:"bit"},{name:"char(10)",displayName:"char(10)"},{name:"date",displayName:"date"},{name:"datetime",displayName:"datetime"},{name:"datetime2(7)",displayName:"datetime2(7)"},{name:"datetimeoffset(7)",displayName:"datetimeoffset(7)"},{name:"decimal(18, 10)",displayName:"decimal(18, 10)"},{name:"float",displayName:"float"},{name:"geography",displayName:"geography"},{name:"geometry",displayName:"geometry"},{name:"hierarchyid",displayName:"hierarchyid"},{name:"int",displayName:"int"},{name:"money",displayName:"money"},{name:"nchar(10)",displayName:"nchar(10)"},{name:"ntext",displayName:"ntext"},{name:"numeric(18, 0)",displayName:"numeric(18, 0)"},{name:"nvarchar(50)",displayName:"nvarchar(50)"},{name:"nvarchar(MAX)",displayName:"nvarchar(MAX)"},{name:"real",displayName:"real"},{name:"smalldatetime",displayName:"smalldatetime"},{name:"smallint",displayName:"smallint"},{name:"smallmoney",displayName:"smallmoney"},{name:"sql_variant",displayName:"sql_variant"},{name:"text",displayName:"text"},{name:"time(7)",displayName:"time(7)"},{name:"timestamp",displayName:"timestamp"},{name:"tinyint",displayName:"tinyint"},{name:"uniqueidentifier",displayName:"uniqueidentifier"},{name:"varbinary(50)",displayName:"varbinary(50)"},{name:"varbinary(MAX)",displayName:"varbinary(MAX)"},{name:"varchar(50)",displayName:"varchar(50)"},{name:"varchar(MAX)",displayName:"varchar(MAX)"}]}get table(){return this._table}set table(e){this._table=e}get loading(){return this._loading}set loading(e){this._loading=e}get text(){return this._text}set text(e){this._text=e}get form(){return this._form}set form(e){this._form=e}static convertMetadata(e){return[{value:e.columnName},{value:e.dataType},{value:!1,ariaLabel:o.primaryKeyText,enabled:!0},{value:e.nullable,ariaLabel:o.allowNullsText,enabled:!0}]}async start(){return this.loading=this.view.modelBuilder.loadingComponent().component(),this.table=this.view.modelBuilder.declarativeTable().component(),this.text=this.view.modelBuilder.text().component(),this.table.onDataChanged((e=>{this.model.proseColumns=[],this.table.dataValues.forEach((e=>{this.model.proseColumns.push({columnName:e[0].value,dataType:e[1].value,primaryKey:e[2].value,nullable:e[3].value})}))})),this.form=this.view.modelBuilder.formContainer().withFormItems([{component:this.text,title:""},{component:this.table,title:""}],{horizontal:!1,componentWidth:"100%"}).component(),this.loading.component=this.form,await this.view.initializeModel(this.form),!0}async onPageEnter(){return this.loading.loading=!0,await this.populateTable(),this.instance.changeNextButtonLabel(o.importDataText),this.loading.loading=!1,this.instance.registerNavigationValidator((e=>this.table.dataValues&&this.table.dataValues.length>0)),!0}async onPageLeave(){this.emptyTable(),this.instance.changeNextButtonLabel(o.nextText),this.instance.registerNavigationValidator((e=>!0))}emptyTable(){this.table.updateProperties({dataValues:[],columns:[]})}async cleanup(){return delete this.model.proseColumns,this.instance.changeNextButtonLabel(o.nextText),!0}async populateTable(){let e=[];this.model.proseColumns.forEach((t=>{e.push(s.convertMetadata(t))})),this.table.updateProperties({columns:[{displayName:o.columnNameText,valueType:r.DeclarativeDataType.string,width:"150px",isReadOnly:!1},{displayName:o.dataTypeText,valueType:r.DeclarativeDataType.editableCategory,width:"150px",isReadOnly:!1,categoryValues:this.categoryValues},{displayName:o.primaryKeyText,valueType:r.DeclarativeDataType.boolean,width:"100px",isReadOnly:!1,showCheckAll:!0},{displayName:o.allowNullsText,valueType:r.DeclarativeDataType.boolean,isReadOnly:!1,width:"100px",showCheckAll:!0}],dataValues:e})}}t.ModifyColumnsPage=s},8735:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProsePreviewPage=void 0;const r=n(9072),i=n(4025),o=n(3839),s=n(5766),a=n(9496);class c extends i.ImportPage{get table(){return this._table}set table(e){this._table=e}get loading(){return this._loading}set loading(e){this._loading=e}get form(){return this._form}set form(e){this._form=e}get resultTextComponent(){return this._resultTextComponent}set resultTextComponent(e){this._resultTextComponent=e}get isSuccess(){return this._isSuccess}set isSuccess(e){this._isSuccess=e}async start(){return this.table=this.view.modelBuilder.table().withProps({data:void 0,columns:void 0,forceFitColumns:r.ColumnSizingMode.DataFit}).component(),this.instance.createDerivedColumnButton.onClick((async e=>{const t=new s.DerivedColumnDialog(this.model,this.provider),n=await t.createDerivedColumn();n&&(this.model.proseColumns.push({columnName:n.derivedColumnName,dataType:"nvarchar(MAX)",primaryKey:!1,nullable:!0}),n.derivedColumnDataPreview.forEach(((e,t)=>{this.model.proseDataPreview[t].push(e)})),this.populateTable(this.model.proseDataPreview,this.model.proseColumns.map((e=>e.columnName))))})),this.loading=this.view.modelBuilder.loadingComponent().component(),this.resultTextComponent=this.view.modelBuilder.text().withProps({value:this.isSuccess?o.successTitleText:o.failureTitleText}).component(),this.form=this.view.modelBuilder.formContainer().withFormItems([{component:this.resultTextComponent,title:""},{component:this.table,title:""}]).component(),this.loading.component=this.form,await this.view.initializeModel(this.loading),!0}async onPageEnter(){let e,t;const n=a.workspace.getConfiguration("workbench").get("enablePreviewFeatures");if(this.model.newFileSelected){this.loading.loading=!0;try{e=await this.learnFile()}catch(e){t=e.toString(),this.instance.wizard.message={level:r.window.MessageLevel.Error,text:t}}this.model.newFileSelected=!1,this.loading.loading=!1}return!this.model.newFileSelected||e?(await this.populateTable(this.model.proseDataPreview,this.model.proseColumns.map((e=>e.columnName))),this.isSuccess=!0,this.form&&(this.resultTextComponent.value=o.successTitleText),this.instance.createDerivedColumnButton.hidden=!n,!0):(await this.populateTable([],[]),this.isSuccess=!1,this.form&&(this.resultTextComponent.value=o.failureTitleText+"\n"+(t??"")),!1)}async onPageLeave(){return this.instance.createDerivedColumnButton.hidden=!0,!0}async cleanup(){return delete this.model.proseDataPreview,!0}setupNavigationValidator(){this.instance.registerNavigationValidator((e=>e&&1===e.lastPage&&2===e.newPage?this.table.data&&this.table.data.length>0:!this.loading.loading))}async learnFile(){const e=await this.provider.sendPROSEDiscoveryRequest({filePath:this.model.filePath,tableName:this.model.table,schemaName:this.model.schema,fileType:this.model.fileType});return this.model.proseDataPreview=null,e.dataPreview&&(this.model.proseDataPreview=e.dataPreview),this.model.proseColumns=[],this.model.originalProseColumns=[],!!e.columnInfo&&(e.columnInfo.forEach((e=>{this.model.proseColumns.push({columnName:e.name,dataType:e.sqlType,primaryKey:!1,nullable:e.isNullable}),this.model.originalProseColumns.push({columnName:e.name,dataType:e.sqlType,primaryKey:!1,nullable:e.isNullable})})),!0)}async populateTable(e,t){let n,r=e.length;n=r>50?e:e.slice(0,r),this.table.updateProperties({data:n,columns:t,height:400,width:"700"})}}t.ProsePreviewPage=c},65:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryPage=void 0;const r=n(9072),i=n(4025),o=n(3839),s=n(2037),a=n(8271);class c extends i.ImportPage{get table(){return this._table}set table(e){this._table=e}get statusText(){return this._statusText}set statusText(e){this._statusText=e}get loading(){return this._loading}set loading(e){this._loading=e}get form(){return this._form}set form(e){this._form=e}async start(){return this.table=this.view.modelBuilder.table().component(),this.statusText=this.view.modelBuilder.text().withProps({CSSStyles:{"user-select":"text","font-size":"13px"}}).component(),this.loading=this.view.modelBuilder.loadingComponent().withItem(this.statusText).component(),this.form=this.view.modelBuilder.formContainer().withFormItems([{component:this.table,title:o.importInformationText},{component:this.loading,title:o.importStatusText}]).component(),await this.view.initializeModel(this.form),!0}async onPageEnter(){return this.loading.loading=!0,this.populateTable(),await this.handleImport(),this.loading.loading=!1,this.instance.setImportAnotherFileVisibility(!0),!0}async onPageLeave(){return this.instance.setImportAnotherFileVisibility(!1),!0}populateTable(){this.table.updateProperties({data:[[o.serverNameText,this.model.server.options.server],[o.databaseText,this.model.database],[o.tableNameText,this.model.table],[o.tableSchemaText,this.model.schema],[o.fileImportText,this.model.filePath]],columns:["Object type","Name"],width:600,height:200})}async handleImport(){let e=0;const t=[];for(let n of this.model.proseColumns){let r={index:e++,newName:n.columnName,newDataType:n.dataType,newNullable:n.nullable,newInPrimaryKey:n.primaryKey};const i=await this.provider.sendChangeColumnSettingsRequest(r);i?.result?.errorMessage&&t.push(i.result.errorMessage)}if(0!==t.length){let e;return e=t.join(s.EOL),void this.statusText.updateProperties({value:e})}let n,i;const c=this.model.server,u=c.options.authenticationType!==r.connection.AuthenticationType.Integrated;let l,d,p=await r.connection.getConnectionString(c.connectionId,u);if(c.options.authenticationType===r.connection.AuthenticationType.AzureMFA){(0,a.isMssqlAuthProviderEnabled)()&&(p=this.updateConnectionStringForAccessToken(p));const e=(await r.accounts.getAllAccounts()).filter((e=>e.key.accountId===c.options.azureAccount))[0];l=(await r.accounts.getAccountSecurityToken(e,c.options.azureTenantId,r.AzureResource.Sql)).token}try{n=await this.provider.sendInsertDataRequest({connectionString:p,batchSize:500,azureAccessToken:l})}catch(e){i=e.toString()}n&&n.result.success?d=o.updateText:(d=o.summaryErrorSymbol,d+=n?n.result.errorMessage:i),this.statusText.updateProperties({value:d})}updateConnectionStringForAccessToken(e){return e?e.split(";").filter((e=>!["user","uid","password","pwd","authentication"].some((t=>e.toLocaleLowerCase().startsWith(t))))).join(";"):e}}t.SummaryPage=c},9166:e=>{"use strict";e.exports=require("applicationinsights-native-metrics")},9072:e=>{"use strict";e.exports=require("azdata")},9496:e=>{"use strict";e.exports=require("vscode")},9491:e=>{"use strict";e.exports=require("assert")},852:e=>{"use strict";e.exports=require("async_hooks")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},6206:e=>{"use strict";e.exports=require("console")},2057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},8188:e=>{"use strict";e.exports=require("module")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},7282:e=>{"use strict";e.exports=require("process")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},9512:e=>{"use strict";e.exports=require("timers")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=n(6985),i=n(8853);let o=[];e.activate=async function(e){let n=new t.default(e);o.push(n),e.subscriptions.push(n),await n.activate(),e.subscriptions.push(i.TelemetryReporter)},e.deactivate=function(){for(let e of o)e.deactivate()}})();var i=exports;for(var o in r)i[o]=r[o];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=https://sqlopsbuilds.blob.core.windows.net/sourcemaps/7a200aa4dd94baa55186175bb6c2f8c908721983/extensions/import/dist/main.js.map